define("_generated/Less/MsPortalImpl.Controls/Controls/ResourceFilter.css",["require","exports","o","module"],(function(n,t,i,r){"use strict";i.defineProperty(t,"__esModule",{value:!0});window.fx.injectCss(r,".fxc-resourcefilter-subscriptionsummary{margin-bottom:10px}.fxc-resourcefilter-summary-title{padding-right:5px}.fxc-resourcefilter-summary-filters{display:-webkit-flex;display:flex}.fxc-resourcefilter-visible{-webkit-flex:1 1 auto;flex:1 1 auto;width:20%;margin-bottom:10px;margin-right:10px}.fxc-resourcefilter-full{width:100%;display:block}.fxc-resourcefilter-hidden{display:none}.fxc-resourcefilter-opensubscriptionsettings{margin-left:3px}.ext-resourcefilter-header{border-bottom:1px solid #bbb;font-weight:400;width:100%;padding:0 4px 5px 8px;white-space:pre-wrap;margin-bottom:5px;margin-left:-8px}.ext-mode-dark .ext-resourcefilter-header{border-color:#666}.ext-resourcefilter-defaultmessage{margin-right:3px}.ext-resourcefilter-excessmessage{margin-top:5px}")}));
define("MsPortalImpl.Controls/Controls/ResourceFilter",["require","exports","f","i","o","a","ko","Fx/Controls/DropDown","Fx/Controls/Section","FxHubs/RpcEndPoints","MsPortalImpl.Controls/Controls/Base/OptionsBase","MsPortalImpl.Controls/Controls/ResourceFilterHelper","MsPortalImpl/Base/Base.EventTypes","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Services/Services.PortalIdentity","MsPortalImpl/Services/Services.SelectedSubscriptions","MsPortalImpl/Widgets/Widgets.Common","_generated/Less/MsPortalImpl.Controls/Controls/ResourceFilter.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){"use strict";var b;return (function(n){function it(n){return n?n.map((function(n){return n.subscriptionId.toLowerCase()})).sort().join(","):null}function g(n){return n?n.map((function(n){return n.toLowerCase()})).sort().join(","):null}function rt(n,t){for(var l,c,r,s=n.length+t.length,h=new i.Map,u=new f(s),e=Math.min(n.length,s),o=0;o<e;o++)r=n[o],h.set(r.subscriptionId,r),u[o]=r;for(l=Math.min(t.length,s),c=0;c<l&&e<u.length;)r=t[c++],h.has(r.subscriptionId)||(h.set(r.subscriptionId,r),u[e++]=r);return u.length=e,u}function ut(n,t,i){n&&vt.trace({action:i,source:"ResourceFilter "+(t&&t())||"",data:{selection:n}})}var lt=i.Base,k=r.Rpc,ft=i.ViewModels,fi=ft.Controls,at=h.Subscriptions,vt=lt.Diagnostics.Telemetry,yt=ft.Forms.TextBox.ViewModel,t=v.ResourceFilter,pt=800,wt="fxc-resourcefilter",et="fxc-resourcefilter-summary-title",ot="fxc-resourcefilter-summary-filters",bt="fxc-resourcefilter-filter",st="fxc-resourcefilter-subscriptions",kt="fxc-resourcefilter-resourceGroups",dt="fxc-resourcefilter-resourcetypes",gt="fxc-resourcefilter-locations",ht="fxc-subscription-summary",nt="fxc-resourcefilter-hidden",d="fxc-resourcefilter-visible",tt="azc-collapsed-hidden",ct=l.getResourceTypes,b=e.observable({value:0,type:0}),ni=i.isFeatureEnabled("directorypane")?"directory":"settings",ti='<div class="ext-resourcefilter-header"><div><span class="ext-resourcefilter-defaultmessage" data-bind="text: defaultMessage"><\/span>'+("<a href='#menu/"+ni+'\' data-bind="text: openGlobalSubscription"><\/a>')+'<\/div><div class="ext-resourcefilter-excessmessage" data-bind="text: excessMessage, visible: excessMessage"><\/div><\/div>',ii='<div class="ext-resourcefilter-header"><div data-bind="text: excessMessage, visible: excessMessage"><\/div><\/div>',ri="<!-- ko if: data.showSubscriptionSummary --><!-- ko if: !subsInitialized() --><span data-bind='text: text.loadingSubs'><\/span><!-- /ko -->"+("<div class='fxc-resourcefilter-subscriptionsummary "+tt+"'>")+"<!-- ko if: data.showTenantLevelSubscriptionSummary() && tenantName() -->"+("<strong class='"+et+"' data-bind='text: text.directory'><\/strong>")+"<span data-bind='text: tenantName'><\/span><span data-bind='visible: moreThanOneTenant'> &ndash; <\/span><!-- /ko --><!-- ko ifnot: data.showTenantLevelSubscriptionSummary && !subsInitialized() -->"+("<strong data-bind='visible: subsCount, text: text.subscriptions' class='"+et+"'><\/strong>")+"<span data-bind='visible: !moreThanOneSelectedSubscription(), text: subsMessage'><\/span>"+("<a data-bind='visible: moreThanOneSelectedSubscription, text: subsMessage' class='"+ht+"' role='button' href=''><\/a>")+"<!-- /ko --><span data-bind='visible: dontSeeSubscriptionMessage'><span data-bind='visible: subsMessage'> &ndash; <\/span><span data-bind='visible: dontSeeSubscriptionMessage, text: dontSeeSubscriptionMessage'><\/span><a class='fxc-resourcefilter-opensubscriptionsettings' role='button' data-bind='text: $ctl.switchSubscriptionSettingsText, title: $ctl.switchSubscriptionSettingsText, attr: { href: $ctl.switchDirectoryUrl }'><\/a><\/span><\/div><!-- /ko -->"+("<div class='"+ot+"'>")+"<!-- ko ifnot: $ctl._useSectionView --><div data-bind='pcControl: $ctl._filterVM, css: $ctl._filterClass'><\/div><div data-bind='pcControl: $ctl._subscriptionsVM, css: $ctl._subscriptionsClass'><\/div><div data-bind='pcControl: $ctl._resourceGroupsVM, css: $ctl._resourceGroupsClass'><\/div><div data-bind='pcControl: $ctl._resourceTypesVM, css: $ctl._resourceTypesClass'><\/div><div data-bind='pcControl: $ctl._locationsVM, css: $ctl._locationsClass'><\/div><!-- /ko --><!-- ko if: $ctl._useSectionView --><div data-bind='pcControl: $ctl._sectionView'><\/div><!-- /ko --><\/div>",ui=(function(f){function c(r,u,o){var c=f.call(this,r,u,o)||this,ut,vt,ft,yt,ti;c._filterPlaceholderText=e.observable(t.filterPlaceholderText);c._subscriptionsList=e.observable();c._subscriptionFilterEnabled=e.observable(!0);c._rgLoading=e.observable();c.multiselect=e.observable();c._locationsList=e.observable();c._noRgText="";c._directoryPaneEnabled=i.isFeatureEnabled("directorypane");c.switchDirectoryUrl=e.observable(c._directoryPaneEnabled?"#menu/directory":"#menu/account");c.switchSubscriptionSettingsText=e.observable(c._directoryPaneEnabled?t.openDirectoryAndSubscriptionText:t.switchDirectoryText);c._resourceTypesList=e.observable();c._resourceGroupsList=e.observable([]);var v=c.options,g=i.isFeatureEnabled("mgsubs"),at=c.options._msPortalFxSectionOptions;c._useSectionView=!!at;ut=v.textFilterPlaceholder;vt=g?h.Impl.getAllSubscriptionsCount(k.client):Q(null);ut&&(c._filterPlaceholderText=ut);c._subscriptionsLoaded=v.subscriptionsLoaded;c._initializeTextFilter();c._initializeSubscriptionsFilter();c._initializeResourceGroupsFilter();c._initializeTypesFilter();c._initializeLocationsFilter();c._useSectionView&&(c._sectionView=s.create(c.ltm,at),c._sectionView.children([c._filterVM,c._subscriptionsVM,c._resourceGroupsVM,c._resourceTypesVM,c._locationsVM,]));ft=e.observable(!1);g&&vt.then((function(n){b(n)}));c._childLifetime&&c._childLifetime.dispose();c._childLifetime=c.ltm.createChildLifetime();c._subscriptionsLoaded(!1);yt=g&&(v.isPersistentSubscriptionFilter||v.showAllSubscriptions)?h.Impl.getFirstPageAndSelectedSubscriptions(k.client,{reloadAllSubscriptionsOnErrorInBackground:!0}):h.Impl.getSubscriptionsDisplayedInSession(k.client).then((function(n){return n.subscriptions}));n.subscriptionsLoadedPromise=yt.then((function(n){if(g||b({value:n.length,type:1}),c._handleInputSubscriptionId(n,c.options.selectedSubscriptionId()),c._subscriptionFilterEnabled()){var t=void 0;t=v.isPersistentSubscriptionFilter||v.showAllSubscriptions?p.getSelectedSubscriptions():p.getSelectedSubscriptionsInSession();t.then((function(t){c._subscriptionsVM.value(t.map((function(n){return n.subscriptionId})));var i=rt(t,n);c._subscriptionsList(i);it(t)!==it(v.selectedSubscriptions())&&(v.subscriptionsFiltered(t.length!==i.length),v.selectedSubscriptions(t));c._subscriptionsLoaded(!0)}));g&&(c._allSubscriptionIdsPromise=h.Impl.getAllSubscriptionIds(k.client).then((function(n){return b(n.allSubscriptionsCountData),n.subscriptionIds})))}else c._subscriptionsList(n),c._subscriptionsLoaded(!0)})).catch(i.noop).finally((function(){ft(!0)}));l.getLocations().then((function(n){c._locationsList(n)}));c.options.assetTypes.subscribeAndRun(c._childLifetime,(function(n){c._resourceTypesList(ct(n)())}));var et=e.observable(""),lt=e.observable(!1),pt=o.services.diContainer.get(y.SignedInUser);i.tryImmediateResolve(Q(pt.getUserInfo()),(function(n){et(n.uniqueDirectoryName||"")}));i.tryImmediateResolve(pt.getTenants(),(function(n){var t=n&&n.tenants?n.tenants.length:0;lt(t>1)}));var ni=e.observable(!1),ii=e.pureComputed((function(){var u=b(),n=u.value,f=c._subscriptionsList()||[],r=f.length,i=(v.selectedSubscriptions()||[]).length;if(ni(i>1),g){if(u.type===3)return t.selectedSubscriptionsOnlyText.format(i);if(!v.isPersistentSubscriptionFilter&&r===1&&n>1)return t.filteredSubscriptionsText.format(r,n)}return n?n===1&&r?f[0].uniqueDisplayName:n>1&&c._subscriptionsClass().indexOf(d)>=0?n===i?t.allSubscriptionsText.format(n):t.filteredSubscriptionsText.format(i,n):"":t.noSubscriptionsText.format(et())})),ui=e.pureComputed((function(){return lt()||g&&!v.isPersistentSubscriptionFilter&&b().value>1?t.dontSeeSubscriptionText:""}));c._showSubscriptions=e.pureComputed((function(){return v.showSubscriptionFilter()&&(c._subscriptionsList()||[]).length>1&&c._subscriptionFilterEnabled()}));c._showTypes=e.pureComputed((function(){return v.showTypeFilter()&&(c._resourceTypesList()||[]).length>1}));c._showLocations=e.pureComputed((function(){return v.showLocationFilter()&&(c._locationsList()||[]).length>1}));c._filterClass=e.pureComputed((function(){var n=v.showTextFilter()?d:nt;return n+" "+bt}));c._subscriptionsClass=e.pureComputed((function(){var n=c._showSubscriptions()?d:nt;return n+" "+tt+" "+st}));c._resourceGroupsClass=e.pureComputed((function(){var n=v.showResourceGroupFilter()?d:nt;return n+" "+tt+" "+kt}));c._resourceTypesClass=e.pureComputed((function(){var n=c._showTypes()?d:nt;return n+" "+tt+" "+dt}));c._locationsClass=e.pureComputed((function(){var n=c._showLocations()?d:nt;return n+" "+tt+" "+gt}));r.html(ri);r.addClass(wt);ti=r.findByClassName(ot);c._bindDescendants({text:t,subsInitialized:ft,tenantName:et,moreThanOneTenant:lt,dontSeeSubscriptionMessage:ui,subsCount:e.pureComputed((function(){return b().value})),subsMessage:ii,moreThanOneSelectedSubscription:ni});w.waitForBindings(ti.find(">:first-child")[0]).done((function(){c._postBindSubscribeTextFilter()}));r.on(a.default.click,"a."+ht,(function(n){var t,i;n.preventDefault();t=r.findByClassName(st);t.length&&(i=t.findByClassName("fxc-dropdown-open"),i.length&&$(i[0]).trigger("mouseup"))}));return c}return __extends(c,f),c.prototype.getSubscriptionViewModel=function(){return this._subscriptionsVM},u.defineProperty(c.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),c.prototype._initializeTextFilter=function(){var n=this.options,i=n.filterText()||"";this._filterVM=new yt(this.ltm,{emptyValueText:this._filterPlaceholderText,defaultValue:e.observable(i),actionHandler:n.actionHandler,ariaLabel:this._filterPlaceholderText,valueUpdateTrigger:4,visible:n.showTextFilter,label:e.observable(this._useSectionView?t.filter:"")})},c.prototype._postBindSubscribeTextFilter=function(){var r=this._filterVM,n=this.ltm,s=this.options,o=s.filterText,t=r.value,u,i=n.createChildLifetime(),f;o.subscribeAndRun(i,(function(n){if(n&&n!==t()){u=!0;try{t(n)}finally{u=!1}}}));t.subscribe(n,(function(){r.actionsEnabled(!1);!u&&i&&(i.dispose(),i=null)}));f=e.computed(n,(function(){return t()}));f.extend({rateLimit:{timeout:pt,method:"notifyWhenChangesStop"}});f.subscribe(n,(function(n){o(n||"");r.actionsEnabled(!0)}))},c.prototype._initializeTypesFilter=function(){var l=this,n=this.options,r=this._resourceTypesList,a=e.observableArray(),v=e.observable(u.create(null)),s=this.ltm,h=function(n){return n.key},y=e.observable(""),f,c;r.subscribeAndRun(s,(function(n){n=n||[];n.length&&l._resourceTypesVM.value(n.map(h));v(i.extendArrayIntoMap(u.create(null),n,h,(function(n){return n.name})));a(n.map((function(n){return{text:n.name,value:n.key}})))}));f=this._resourceTypesVM=o.create(s,{items:a,filter:!0,filterPlaceholder:t.filterPlaceholderText,multiselect:!0,selectAll:!0,ariaLabel:e.observable(t.typesLabel),customFilter:function(n){return l._customTypeFilter(n)},suppressDirtyBehavior:!0,multiItemDisplayText:y,visible:n.showTypeFilter,label:this._useSectionView?t.resourceTypes:""});f.isPopUpOpen.subscribe(s,(function(t){if(!t){var u=i.makeArray(f.value());u.length||(u=ct(n.assetTypes())().map(h),f.value(u));(c||u.length<r().length)&&g(u)!==g(c)&&u.length&&(u.length===r().length?n.selectedTypes([]):n.selectedTypes(u));c=u}}));e.reactor(s,(function(){var u=i.makeArray(f.value()),e=u.length===0||u.length===(r&&r().length)?t.allResourceTypesSelectedText:u.length===1?v()[u[0]]||u[0]:t.multipleResourceTypesSelectedText.format(u.length);y(e);ut(u,n.context,"TypeFilterUpdated")}))},c.prototype._customTypeFilter=function(n){var t=function(n){return n.key},i;return n.length?(i=this._resourceTypesList().filter((function(t){var i=n.toLocaleLowerCase(),r=t.name.toLocaleLowerCase().indexOf(i)>=0,u=t.keywords&&t.keywords.some((function(n){return n.toLocaleLowerCase().indexOf(i)>=0}));return r||u})).map(t),Q(i)):Q(this._resourceTypesList().map(t))},c.prototype._initializeLocationsFilter=function(){var l=this,r=this.options,n=this._locationsList,a=e.observableArray(),v=e.observable(u.create(null)),f=this.ltm,h=function(n){return n.name},y=e.observable(""),s,c;n.subscribeAndRun(f,(function(n){n=n||[];n.length&&l._locationsVM.value(n.map(h));v(i.extendArrayIntoMap(u.create(null),n,h,(function(n){return n.displayName})));a(n.map((function(n){return{text:n.displayName,value:n.name}})))}));s=this._locationsVM=o.create(f,{items:a,filter:!0,filterPlaceholder:t.filterPlaceholderText,multiselect:!0,selectAll:!0,ariaLabel:e.observable(t.locationsLabel),suppressDirtyBehavior:!0,multiItemDisplayText:y,visible:r.showLocationFilter,label:this._useSectionView?t.location:""});s.isPopUpOpen.subscribe(f,(function(t){if(!t){var u=i.makeArray(s.value());u.length||(u=n().map(h),s.value(u));(c||u.length<n().length)&&g(u)!==g(c)&&u.length&&(u.length===n().length?r.selectedLocations([]):r.selectedLocations(u));c=u}}));e.reactor(f,(function(){var u=i.makeArray(l._locationsVM.value()),f=u.length===0||u.length===(n&&n().length)?t.allLocationsSelectedText:u.length===1?v()[u[0]]||u[0]:t.multipleLocationsSelectedText.format(u.length);y(f);ut(u,r.context,"LocationFilterUpdated")}))},c.prototype._initializeResourceGroupsFilter=function(){var n=this,r=this.options,s=this._resourceGroupsList,c=e.observableArray(),u=this.ltm,l=e.observable(""),f,h;s.subscribeAndRun(u,(function(i){i=i||[];i.length&&n._resourceGroupsVM.value(i);var r=i.map((function(n){return n&&n.toLocaleLowerCase()===t.loading.toLocaleLowerCase()?{text:n,disabled:!0}:{text:n,value:n}}));c(r)}));f=this._resourceGroupsVM=new o.ViewModel(u,{items:c,filter:this.multiselect,filterPlaceholder:t.filterPlaceholderText,selectAll:this.multiselect,multiselect:!0,ariaLabel:e.observable(t.resourcegroupsLabel),multiItemDisplayText:l,visible:r.showResourceGroupFilter,label:e.observable(this._useSectionView?t.resourceGroup:"")});f.isPopUpOpen.subscribe(u,(function(t){var u,e;if(t&&(n._rgLoading()||n._getResourceGroups(i.makeArray(n._subscriptionsVM.value()))),!t){if(u=f.value()||[],e=s(),u.length||(u=e,f.value(u)),(h||u.length<e.length)&&g(u)!==g(h)){var l=i.convertArrayToMap(u,(function(n){return n})),o=e.filter((function(n){return!l[n]})),c=o.length<u.length?!0:!1;u.length&&(u.length===e.length?r.selectedResourceGroups([]):(r.selectedResourceGroups(c?o:u),r.invertResourceGroupFilter(c)))}h=u}}));e.reactor(u,(function(){var i=n._resourceGroupsVM.value()||[],u=s(),f=n._noRgText||(i.length===0||i.length===u.length?t.allRgsSelectedText:i.length===1?i[0]:t.multipleRgsSelectedText.format(i.length));l(f);ut(i,r.context,"ResourceGroupsFilterUpdated")}))},c.prototype._updateSubscriptionFilterResults=function(n){var u=this,t=this.options,f=function(n){return n.subscriptionId},r=function(i,r,e){if(u._subscriptionFilterEnabled()){i=i||[];var o=t.selectedSubscriptions()||[];u._subscriptionsVM.value(i.map(f));u._subscriptionsList(r);(n.length!==o.length||it(i)!==it(o))&&(t.subscriptionsFiltered(e),t.selectedSubscriptions(i),u._rgLoading(!1))}};i.isFeatureEnabled("mgsubs")?t.isPersistentSubscriptionFilter?h.Impl.processSelectedSubscriptionChanges(k.client,n).then((function(n){var i=n.displayedSubscriptionsItems||[],t=n.selectedSubscriptions||[];r(t,i,t.length!==b().value)})):t.showAllSubscriptions?h.Impl.getFirstPageAndSelectedSubscriptions(k.client).then((function(n){r([],n,!1)})):b().value<=1e3?Q.spread([h.Impl.getFirstPageAndSelectedSubscriptions(k.client),h.Impl.getValidSelectedSubscriptions(k.client,n),],(function(n,t){t=t&&t.length?t:n;r(t,rt(t,n),t.length!==b().value)})):Q.spread([h.Impl.getSelectedSubscriptions(k.client),h.Impl.getValidSelectedSubscriptions(k.client,n),],(function(n,t){t=t||[];var i=t.length?t:n;r(i,rt(i,n),i.length!==b().value)})):p.getAllSubscriptions().then((function(t){var i=p.getValidSelectedSubscriptions(t,n);r(i,rt(i,t),i.length!==t.length)}))},c.prototype._initializeSubscriptionsFilter=function(){var s=this,f=this.options,l=this._subscriptionsList,c=this.ltm,a=e.observableArray(),v=e.observable(u.create(null)),y=e.observable(""),w="",d=i.isFeatureEnabled("mgsubs"),g={text:{htmlTemplate:f.isPersistentSubscriptionFilter||f.showAllSubscriptions?ii:ti,viewModel:{defaultMessage:t.onlyShowingSelectedSubsMessage,openGlobalSubscription:t.globalSubscriptionFilter,excessMessage:e.pureComputed((function(){var u=b(),e=u.value,o=u.type;if(e<=1e3)return"";var n="",c=i.makeArray(s._subscriptionsVM&&s._subscriptionsVM.value()),h=c.length,r=h>1e3;if(!f.isPersistentSubscriptionFilter&&!r)return"";if(o===1)n=r?t.excessSelectedSubscriptionsMsgForTotalType:t.excessSubscriptionsMsgForTotalType;else if(o===2)n=r?t.excessSelectedSubscriptionsMsgForPartialType:t.excessSubscriptionsMsgForPartialType;else return t.errorGettingSubscriptionsCount;return n.format(e,1e3,h)}))}}},n;l.subscribeAndRun(c,(function(n){n=n||[];v(i.extendArrayIntoMap(u.create(null),n,(function(n){return n.subscriptionId}),(function(n){return n.uniqueDisplayName})));var t=n.map((function(n){return{text:n.uniqueDisplayName,value:n.subscriptionId,selectedItemOverride:y}})),r=b().value;d&&r>1e3&&t.unshift(g);a(t)}));n=this._subscriptionsVM=o.create(c,{items:a,multiselect:!0,filter:!0,filterPlaceholder:t.filterPlaceholderText,selectAll:!0,ariaLabel:e.observable(t.subscriptionsLabel),multiItemDisplayText:y,suppressDirtyBehavior:!0,visible:f.showSubscriptionFilter,label:this._useSectionView?t.subscription:""});d&&(f.isPersistentSubscriptionFilter||f.showAllSubscriptions)&&(n.customFilter=function(){return Q([])},this._subscriptionsVM.showStatusMessage(!1),n.filterString.subscribe(c,(function(f){n.isPopUpOpen()&&(w=f,Q(at.getSubscriptionSearchResultsEndPoint.invoke(k.client,r.Extension.getHubsWindowId(),{searchString:f})).then((function(r){var f=r.subscriptions;r.searchString===w&&(n.suppressSelectedUpdate(!0),v(i.extendArrayIntoMap(u.create(null),f,(function(n){return n.subscriptionId}),(function(n){return n.uniqueDisplayName}))),a(f.map((function(n){return{text:t.subscriptionNameAndIdLabelFormat.format(n.displayName,n.subscriptionId),value:n.subscriptionId}}))),n.suppressSelectedUpdate(!1),s._subscriptionsVM.showStatusMessage(s._subscriptionsVM.items().length===0))})))})),n.selectAllOverride=function(){var t=i.makeArray(n.value()).length!==b().value;return Q.spread([s._allSubscriptionIdsPromise,h.Impl.processSelectedSubscriptionChanges(k.client,[]),],(function(i,r){l(r.displayedSubscriptionsItems);n.value(t?i:[])}))});n.isPopUpOpen.subscribe(c,(function(t){if(!t){var r=i.makeArray(n.value());p.setSelectedSubscriptionsInSession(r).then((function(){if(f.isPersistentSubscriptionFilter){var n=[];return(b().type===3||r.length!==b().value)&&(n=r),p.setSelectedSubscriptions(n)}s._updateSubscriptionFilterResults(r)}))}}));p.selectedSubsUpdateTriggered.subscribe(c,(function(n){s._updateSubscriptionFilterResults(n.map((function(n){return n.subscriptionId})))}));e.reactor(c,(function(){var r=i.makeArray(n.value()),u=!r.length||r.length===b().value?t.allSubscriptionsSelectedText:r.length===1?v()[r[0]]||r[0]:t.multipleSubscriptionsSelectedText.format(r.length);y(u)}));e.reactor(c,(function(){var t=l(),r;t&&(s._handleInputSubscriptionId(t,f.selectedSubscriptionId()),r=i.makeArray(n.value()),ut(r,f.context,"SubscriptionFilterUpdated"))}))},c.prototype._getResourceGroups=function(n){var i=this;this._rgLoading(!0);this.multiselect(!1);this._resourceGroupsList([t.loading]);r.Azure.getResourceGroupsFromSubscription(k.client,n,!0).then((function(n){if(n.length){i._noRgText="";var r=n.map((function(n){return n.name}));i._resourceGroupsList(r);i.multiselect(!0)}else i._noRgText=t.noResourceGroups,i.multiselect(!1),i._resourceGroupsList([])}))},c.prototype._handleInputSubscriptionId=function(n,t){var i=this.options,r;t?(this._subscriptionFilterEnabled(!1),r=n.first((function(n){return n.subscriptionId===t})),r?(i.subscriptionsFiltered(!0),i.selectedSubscriptions([r])):(this._subscriptionFilterEnabled(!0),i.showSubscriptionFilter(!0))):this._subscriptionFilterEnabled(!0)},c})(c.Widget);n.Widget=ui})(b||(b={})),b}))