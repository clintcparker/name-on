define("FxInternal/Controls/Base/Base",["require","exports","f","i","o"],(function(n,t,i,r,u){"use strict";u.defineProperty(t,"__esModule",{value:!0});var e=new i.Base.Diagnostics.Log("FxInternal//Controls/Base/Base"),f=(function(){function n(n){this.controlType=0;n?(this._lifetimeManager=n.createChildLifetime(),this._lifetimeManager.registerForDispose(this)):(e.error(r.createError("LifetimeManager was not provided. Creating a TriggerableLifetimeManager.",{data:{ctor:this.constructor+""}})),this._lifetimeManager=new r.TriggerableLifetimeManager)}return n.prototype.dispose=function(){this._lifetimeManager&&(this._lifetimeManager.dispose(),this._lifetimeManager=null)},u.defineProperty(n.prototype,"lifetimeManager",{get:function(){return this._lifetimeManager},enumerable:!0,configurable:!0}),n.prototype.populateFromObject=function(n){var r=this,t=n;for(var i in t)t.hasOwnProperty(i)&&t[i]!==undefined&&(r[i]=t[i])},n.prototype._addDisposablesToCleanUp=function(n){this._lifetimeManager.registerForDispose(n)},n})();f=__decorate([i.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[u])],f);t.ViewModel=f}));
define("FxInternal/Controls/CustomHtml",["require","exports","f","o","ko","FxInternal/Controls/Base/Base"],(function(n,t,i,r,u,f){"use strict";r.defineProperty(t,"__esModule",{value:!0});var e=(function(n){function t(t,r){var f=n.call(this,t)||this;return f.controlType=23,f.cssClass=i.initObservable(r.cssClass,""),f.dirty=u.observable(!1),f.disabled=u.observable(!1),f.hideValidationCheck=!1,f.htmlTemplate=i.initObservable(r.htmlTemplate),f.infoBalloonContent=i.initObservable(r.infoBalloonContent),f.infoBalloonLinkContent=u.observable(),f.innerViewModel=r.innerViewModel,f.isolated=r.isolated!==!1,f.label=i.initObservable(r.label),f.labelPosition=u.observable(i.ViewModels.Forms.LabelPosition.Top),f.loading=u.observable(!1),f.subLabel=i.initObservable(r.subLabel),f.subLabelPosition=u.observable(i.ViewModels.Forms.SubLabelPosition.Bottom),f.validate=u.observable(0),f.valid=u.observable(!0),f.visible=i.initObservable(r.visible,!0),f._msPortalFxClearValidation=u.observable(),f._msPortalFxTriggerValidation=u.observable(),f._msPortalFxLeftLabelWidth=u.observable(),f}return __extends(t,n),t.prototype.clearValidation=function(){var n=this._msPortalFxClearValidation();return n?Q(n()):Q()},t.prototype.triggerValidation=function(){var i=this._msPortalFxTriggerValidation,r=i(),n,t;return r?Q(r()):(n=Q.defer(),t=this.lifetimeManager.createChildLifetime(),i.subscribe(t,(function(i){i().then(n.resolve).catch(n.reject).finally((function(){t.dispose()}))})),n.promise)},t})(f.ViewModel);t.ViewModel=e}));
define("Fx/Controls/CustomHtml",["require","exports","o","ko","FxInternal/Controls/CustomHtml"],(function(n,t,i,r,u){"use strict";function f(n,t){var i;return r.ignoreDependencies((function(){i=new u.ViewModel(n,t)})),i}i.defineProperty(t,"__esModule",{value:!0});t.create=f}));
define("FxInternal/Controls/Base/FormsBase",["require","exports","f","o","a","ko","FxInternal/Controls/Base/Base"],(function(n,t,i,r,u,f,e){"use strict";function s(n,t){var i=!1;return n.length===t.length&&(i=n.every((function(n,i){return n===t[i]}))),i}r.defineProperty(t,"__esModule",{value:!0});var o=(function(n){function t(t,r){var u=n.call(this,t)||this,e;return r=r||{},e=u.lifetimeManager,u.controlType=0,u.ariaLabel=i.initObservable(r.ariaLabel,""),u.cssClass=i.initObservable(r.cssClass),u.defaultValue=f.observable(null),u.delayValidationTimeout=f.observable(i.ViewModels.Controls.ValidatableControl.DefaultDelayValidationTimeout),u.disabled=i.initObservable(r.disabled,!1),u.dirty=f.observable(!1),u.enabled=f.observable(!u.disabled()),u.enableValidation=f.observable(!1),u.ensureValidation=f.observable(0),u.hideValidationCheck=f.observable(!1),u.infoBalloonContent=i.initObservable(r.infoBalloonContent,""),u.infoBalloonLinkContent=f.observable(),u.initialValue=f.observable(null),u.label=i.initObservable(r.label),u.labelPosition=i.initObservable(r.labelPosition,i.ViewModels.Forms.LabelPosition.Top),u.loading=i.initObservable(r.loading,!1),u.performValidation=f.observable(null),u.showValidationMessagesBelowControl=!0,u.subLabel=i.initObservable(r.subLabel,undefined),u.subLabelPosition=f.observable(i.ViewModels.Forms.SubLabelPosition.Bottom),u.value=f.observable(),u.valid=f.observable(!0),u.validate=f.observable(0),u.validations=i.initObservableArray(r.validations,[]),u.validationResults=f.observableArray(),u.visible=i.initObservable(r.visible,!0),u._msPortalFxClearValidation=f.observable(),u._msPortalFxLeftLabelWidth=f.observable(),u._msPortalFxTriggerValidation=f.observable(),u._msPortalFxViewModelValueChangesAreClean=!r.suppressDirtyBehavior,u._msPortalFxWidgetValue=f.observable(),u._msPortalFxRequired=f.observable(),u._originalDirty=u.dirty,i.isNullOrUndefined(r.value)||(f.isObservable(r.value)?f.utils.twoWayBinding(e,r.value,u.value):u.value(r.value)),u.enabled.subscribe(e,(function(n){f.isWritableObservable(u.disabled)&&u.disabled(!n)})),u.disabled.subscribe(e,(function(n){f.isWritableObservable(u.enabled)&&u.enabled(!n)})),u.enableValidation(!0),u.createValueSubscriptions(e),u}return __extends(t,n),t.prototype.clearValidation=function(){var n=this;return f.ignoreDependencies((function(){var t=n._msPortalFxClearValidation();return i.Base.Promises.cancelOnDispose(n.lifetimeManager,t||Q())}))},t.prototype.triggerValidation=function(){var n=this;return f.ignoreDependencies((function(){var t=n._msPortalFxTriggerValidation,r=t(),u=n.lifetimeManager;return i.Base.Promises.cancelOnDispose(u,r?Q(r()):function(){var n=Q.defer(),r=u.createChildLifetime();return t.subscribe(r,(function(t){r.dispose();t?Q().then(t).then(n.resolve).catch(n.reject):n.reject(new i.Errors.Error({message:"Invalid validating Function detected.",data:n.promise.stack}))})),n.promise})}))},t.prototype.resetDirtyComputed=function(n){i.disposeDisposable(this._dirtyLifetime);this._dirtyLifetime=this.lifetimeManager.createChildLifetime();f.computed(this._dirtyLifetime,n)},t.prototype.createValueSubscriptions=function(n){var t=this,e=!1,r=!1,o=this.value;Q.nextTick((function(){var n=t.value,r=!!t.lifetimeManager;n!==o&&r&&(i.disposeDisposable(t._newThisValueBinding),t._newThisValueBinding=n.subscribeAndRun(t.lifetimeManager,o))}));this.setValue(this.value(),this._msPortalFxWidgetValue);this.value.subscribe(n,(function(n){r?t._msPortalFxViewModelValueChangesAreClean&&r&&t.setDirty(!0):(e=!0,t.setValue(n,t._msPortalFxWidgetValue),e=!1)}));this._msPortalFxWidgetValue.subscribe(n,(function(n){e||(r=!0,f.isComputed(t.value)&&(t.value()===n||u.isArray(t.value())&&u.isArray(n)&&s(t.value(),n))||t.setValue(n,t.value),r=!1)}))},t.prototype.setDirty=function(n){this.dirty===this._originalDirty&&this.dirty(n)},t.prototype.setValue=function(n,t){u.isArray(n)?t(n.slice()):t(n)},t})(e.ViewModel);t.ViewModel=o}));
define("FxInternal/Controls/DropDown",["require","exports","f","o","ko","FxInternal/Controls/Base/FormsBase"],(function(n,t,i,r,u,f){"use strict";r.defineProperty(t,"__esModule",{value:!0});var e=(function(n){function t(t,r){var f=n.call(this,t,r)||this;return r=r||{},f.controlType=98,f.customFilter=r.customFilter,f.filter=r.filter||!1,f.filterPlaceholder=r.filterPlaceholder||"",f.filterString=u.observable(""),f.isPopUpOpen=u.observable(!1),f.items=i.initObservableArray(r.items),f.multiItemDisplayText=i.initObservable(r.multiItemDisplayText),f.multiselect=r.multiselect||!1,f.statusMessage=i.initObservable(r.statusMessage),f.showStatusMessage=i.initObservable(r.showStatusMessage),f.placeholder=i.initObservable(r.placeholder,""),f.selectAll=r.selectAll||!1,f.selectAllOverride=r.selectAllOverride,f.suppressSelectedUpdate=u.observable(!1),f}return __extends(t,n),t})(f.ViewModel);t.ViewModel=e}));
define("Fx/Controls/DropDown",["require","exports","f","o","ko","FxInternal/Controls/DropDown"],(function(n,t,i,r,u,f){"use strict";function e(n,t){var i;return u.ignoreDependencies((function(){i=new f.ViewModel(n,t)})),i}r.defineProperty(t,"__esModule",{value:!0});t.create=e;var o=(function(n){function t(t,r,f,e){var o=n.call(this,t,r,f,e)||this,s;return o.controlType=98,s=o._options,o.items=i.initObservableArray(s.items),o.filter=s.filter||!1,o.customFilter=s.customFilter,o.filterPlaceholder=s.filterPlaceholder||"",o.filterString=u.observable(""),o.isPopUpOpen=u.observable(!1),o.multiItemDisplayText=s.multiItemDisplayText,o.placeholder=s.placeholder||"",o.multiselect=s.multiselect||!1,o.selectAll=s.selectAll||!1,o.selectAllOverride=s.selectAllOverride,o.showValidationMessagesBelowControl=s&&s.showValidationMessagesBelowControl?s.showValidationMessagesBelowControl:!1,o.suppressSelectedUpdate=u.observable(!1),o.ariaLabel=i.initObservable(s.ariaLabel,""),o}return __extends(t,n),t})(i.ViewModels.Forms.Base.Input.ViewModel);t.ViewModel=o}));
define("FxInternal/Controls/Section",["require","exports","f","o","ko","FxInternal/Controls/Base/Base"],(function(n,t,i,r,u,f){"use strict";r.defineProperty(t,"__esModule",{value:!0});var e=i.ViewModels.Forms.LabelPosition,o=(function(n){function t(t,r){var f=n.call(this,t)||this;return f.active=u.observable(!1),f.children=u.observableArray(),f.dirty=u.observable(!1),f.width=u.observable(),f.submit=u.observable(),f.populateSection=u.observable(),f.valid=u.observable(!0),f.required=u.observable(!1),f.validate=null,f.tabSection=u.observable(),f.tabHasBeenLoaded=u.observable(!1),f.cssClass=u.observable(),f.tabStyle=0,r=r||{},f.controlType=15,f.smartAlignLabel=r.smartAlignLabel,f.children=i.initObservableArray(r.children,[]),f.cssClass=i.initObservable(r.cssClass,""),f.disabled=i.initObservable(r.disabled,!1),f.leftLabelPosition=i.initObservable(r.leftLabelPosition,!1),f.leftLabelWidth=i.initObservable(r.leftLabelWidth),f.minHeight=r.minHeight,f.name=i.initObservable(r.name),f.style=r.style||u.observable(1),f.visible=i.initObservable(r.visible,!0),f.disableStyles=r.disableStyles,u.computed(t,[f.children,f.leftLabelPosition,f.leftLabelWidth],(function(){var t=arguments[0],i=arguments[1],n=arguments[2],f=i&&!n&&!r.smartAlignLabel;t.forEach((function(n){u.isObservable(n.labelPosition)&&n.labelPosition(f?e.Left:e.Top)}));n&&t.forEach((function(t){t._msPortalFxLeftLabelWidth&&t._msPortalFxLeftLabelWidth(n)}))})),f.style()===4&&(f._msPortalFxSetFocusOnTab=u.observable(0)),u.computed(t,(function(){var n=f.children(),t=n.some((function(n){var t=u.unwrap(n);return t.valid?!t.valid():!1})),i=f.children().some((function(n){var t=u.unwrap(n);return t._msPortalFxRequired?t._msPortalFxRequired():!1}));f.required(i);f.valid(!t)})),f}return __extends(t,n),t.prototype.triggerValidation=function(){var t=u.unwrap(this.visible),n;return t?(n=this.children().filter((function(n){return typeof n.triggerValidation=="function"})).map((function(n){return n.triggerValidation()})),Q.all(n).then((function(n){return n.every(i.identity)}))):Q(!0)},t})(f.ViewModel);t.ViewModel=o}));
define("Fx/Controls/Section",["require","exports","o","ko","FxInternal/Controls/Section"],(function(n,t,i,r,u){"use strict";function f(n,t){var i;return r.ignoreDependencies((function(){i=new u.ViewModel(n,t)})),i}i.defineProperty(t,"__esModule",{value:!0});t.create=f}));
define("FxInternal/Controls/BaseResourceDropDown",["require","exports","f","o","a","ko","Fx/Controls/CustomHtml","Fx/Controls/DropDown","Fx/Controls/Section"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){function a(n,i,r){var o=f.unwrap(i),e=o&&o.actions||[];return e.length<1?Q(t()):Q(u.Security.hasPermission(n,e)).then((function(n){return t(!n&&(o.message||r||"{0}").format(e.toString()))}),(function(){return l.warning("Failed to get permissions on ["+e.toString()+"] over scope '"+n+"'."),t()}))}var u=i.Base,c=i.ViewModels,t=c.getValidationResultPromise,l=new u.Diagnostics.Log("Fx/Base/BaseResourceDropDown"),h;n.hasPermission=a;h=(function(){function n(n,t,u,h){var y,g,w,nt;h===void 0&&(h=function(n){return n});y=this;this.controlType=124;this._fetching=f.observable(!0);this.fetchedValues=f.observableArray();this._loadPromise=Q();var c=t.grouping&&t.grouping.map,b=t.disable,p=c&&t.grouping.sort||function(){return 0},l=f.observableArray(),tt=t.hiding&&t.hiding.hide||i.wrap(!1),a=f.observable(),k=t.sort?null:function(n,t){return i.compare(n.text,t.text)},it=t.sort||i.wrap(0),rt=function(n){return tt(n)?(a(t.hiding.reason),!1):!0},v=c,d=p;b&&(c=c||function(){return""},v=function(n){var t;return(t=b(n))&&l.push(t),t||c(n)},d=function(n,t){var i=l.indexOf(n),r=l.indexOf(t);return~i&&!~r?1:!~i&&~r?-1:p&&p(n,t)||0});g=f.pureComputed((function(){var i=f.unwrap(t.header),n,e,o;return(a(null),n=y.fetchedValues().filter(rt).sort(it).map(u),n=k?n.sort(k):n,!!i&&!v)?[i].concat(n):v?(e=n.reduce((function(n,t){var i=v(t.value);return(n[i]=n[i]||[]).push(t),n}),{}),o=r.keys(e).sort(d).reduce((function(n,t){return t?(n.push({children:e[t],text:t,disabled:!!~l.indexOf(t)}),n):n.concat(e[t])}),[]),!i||o.splice(0,0,i),l([]),o):n})).extend({deferred:!0});w=f.observableArray();g.subscribeAndRun(n,(function(n){w(n)}));this.control=f.observable(s.create(n,{disableStyles:!0}));nt=e.create(n,{htmlTemplate:'<div data-bind="text: reason"><\/div>',innerViewModel:{reason:a}});this._fxDropDown=o.create(n,i.extend(t,{items:w,loading:this._fetching,value:f.isObservable(t.value)?t.value:f.observable(t.value)}));t.onIsPopUpOpen&&this._fxDropDown.isPopUpOpen.subscribe(n,t.onIsPopUpOpen);f.computed(n,(function(){return h((a()?[nt]:[]).concat(y._fxDropDown))})).subscribeAndRun(n,this.control().children)}return r.defineProperty(n.prototype,"dirty",{get:function(){return this._fxDropDown.dirty},enumerable:!0,configurable:!0}),r.defineProperty(n.prototype,"valid",{get:function(){return this._fxDropDown.valid},enumerable:!0,configurable:!0}),r.defineProperty(n.prototype,"label",{get:function(){return this._fxDropDown.label},enumerable:!0,configurable:!0}),r.defineProperty(n.prototype,"validations",{get:function(){return this._fxDropDown.validations},enumerable:!0,configurable:!0}),r.defineProperty(n.prototype,"validationResults",{get:function(){return this._fxDropDown.validationResults},enumerable:!0,configurable:!0}),r.defineProperty(n.prototype,"disabled",{get:function(){return this._fxDropDown.disabled},enumerable:!0,configurable:!0}),n.prototype.triggerValidation=function(){return this._fxDropDown.triggerValidation()},r.defineProperty(n.prototype,"value",{get:function(){return this._fxDropDown.value},enumerable:!0,configurable:!0}),r.defineProperty(n.prototype,"loading",{get:function(){return this._fxDropDown.loading},enumerable:!0,configurable:!0}),n.prototype.selectInitialOrCurrent=function(n,t,r,u){var f=this;return u===void 0&&(u=!0),this._initialPromise.then((function(e){var s=f.value(),c=s&&[t(s)]||[],o=c.concat(e||[]).filter((function(n){return!!n})),h;(o.length||u)&&(h=n.filter((function(n){return!!~o.indexOf(t(n))})).sort((function(n,r){return i.compare(o.indexOf(t(n)),o.indexOf(t(r)))})).concat(n).first(),f.value(h));~[null,undefined].indexOf(f.value())&&f.value(r);f.fetchedValues(n)}))},n})();n.ViewModel=h})(h||(h={})),h}))