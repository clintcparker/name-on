var __extends=this&&this.__extends||(function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}})();define("WebsitesExtension/TypeScript/Functions/iFrame/ViewModels/FunctionsUrlResolver",["require","exports","f","o","WebsitesExtension/TypeScript/ExtensionAssets/Constants","WebsitesExtension/TypeScript/Environment/RuntimeType","WebsitesExtension/TypeScript/Utility/Utility.Website","WebsitesExtension/TypeScript/Utility/Utility.Urls","WebsitesExtension/TypeScript/Utility/Utility.Website"],(function(n,t,i,r,u,f,e,o,s){"use strict";var c;r.defineProperty(t,"__esModule",{value:!0});c=(function(){function n(){}return n.getFunctionsUrl=function(n){var r,i,t,h;return(r=f.isOnPrem()?new p:f.isMooncake()?new a:f.isBlackforest()?new v:f.isFairfax()?new y:new l,i=r.prodUrl,
t=o.getIframeQuery(),t=t?t+"&":"",t+=u.Functions.correlationQuery+"="+s.Guid.newShortGuid(),h=o.getValueFromQuery(t,"appsvc.env"),h==="local"||e.forFeature(u.Functions.localFeatureFlag)?i=r.localUrl:h==="next"||e.forFeature(u.Functions.nextFeatureFlag)?i=r.nextUrl:h==="stage"||e.forFeature(u.Functions.stagedFeatureFlag)?i=r.stageUrl:(h==="release"||e.forFeature(u.Functions.releaseFeatureFlag))&&(i=r.releaseUrl),n)?""+i+n+"?"+t:i+"?"+t},n.isProdAndOptimized=function(n){var t=new i.Base.UriBuilder(n),r=new l;return n.startsWith(r.prodUrl)&&t.query.getParameter("appsvc.clientoptimizations")!=="false"},n.getUrlWithOnlyCorrelationId=function(n){var t=new i.Base.UriBuilder(n),r=t.query.getParameter(u.Functions.correlationQuery);return r?t.path+"?"+u.Functions.correlationQuery+"="+r:t.path},n})();t.FunctionsUrlResolver=c;var h=(function(){function n(){}return r.defineProperty(n.prototype,"localUrl",{get:function(){return"https://localhost:44300"},enumerable:!0,configurable:!0}),n})(),l=(function(
n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),r.defineProperty(t.prototype,"prodUrl",{get:function(){return"https://functions.azure.com"},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"nextUrl",{get:function(){return"https://functions-next.azure.com"},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"stageUrl",{get:function(){return"https://functions-staging.azure.com"},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"releaseUrl",{get:function(){return"https://functions-release.azure.com"},enumerable:!0,configurable:!0}),t})(h),a=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),r.defineProperty(t.prototype,"prodUrl",{get:function(){return"https://functions.ext.azure.cn"},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"nextUrl",{get:function(){return""},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"stageUrl",{get:function(){return"https://functions-china-east-staging.chinacloudsites.cn"}
,enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"releaseUrl",{get:function(){return""},enumerable:!0,configurable:!0}),t})(h),v=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),r.defineProperty(t.prototype,"prodUrl",{get:function(){return"https://functions.ext.microsoftazure.de"},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"nextUrl",{get:function(){return""},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"stageUrl",{get:function(){return"https://functions-germany-central-staging.azurewebsites.de"},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"releaseUrl",{get:function(){return""},enumerable:!0,configurable:!0}),t})(h),y=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),r.defineProperty(t.prototype,"prodUrl",{get:function(){return"https://functions.ext.azure.us"},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"nextUrl",{get:function(
){return""},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"stageUrl",{get:function(){return"https://functions-usgov-iowa-staging.azurewebsites.us"},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"releaseUrl",{get:function(){return""},enumerable:!0,configurable:!0}),t})(h),p=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),r.defineProperty(t.prototype,"prodUrl",{get:function(){return window.fx.environment.appServicePortalUri},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"nextUrl",{get:function(){return""},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"stageUrl",{get:function(){return""},enumerable:!0,configurable:!0}),r.defineProperty(t.prototype,"releaseUrl",{get:function(){return""},enumerable:!0,configurable:!0}),t})(h)}));define("WebsitesExtension/TypeScript/Rpc/Rpc.BillingExtension",["require","exports","f"],(function(n,t,i){"use strict";var r;return (function(n){function r(){return i.
Services.Rpc.invokeCallback(t.Billing,"getBillingSubscriptionIds")}function u(n){return i.Services.Rpc.invokeCallback(t.Billing,"getSpecsCosts",n)}var t=i.Base.Constants.ExtensionNames;n.getBillingSubscriptionIds=r;n.getSpecsCosts=u})(r||(r={})),r}));define("WebsitesExtension/TypeScript/Utility/Utility.Subscriptions",["require","exports","f","o","WebsitesExtension/TypeScript/Helpers/ArmHelpers","WebsitesExtension/TypeScript/ExtensionAssets/Constants"],(function(n,t,i,r,u,f){"use strict";r.defineProperty(t,"__esModule",{value:!0});var e=(function(){function n(){}return n.getAllSubscriptions=function(){var n=this,t;return i.Base.Security.getUserInfo().then((function(r){t=r.directoryId+"-"+r.email;var f=localStorage.getItem(t),u;if(f)try{u=JSON.parse(f)}catch(e){localStorage.removeItem(t);i.Base.Diagnostics.Log.writeEntry(2,"subscription-utility","Failed to parse cached subscriptions entry")}return u?((n._lastChecked===-1||Date.now()-n._lastChecked>n._cacheExpireMs)&&n._getAllSubscriptionsHelper(
t),Q(u)):n._getAllSubscriptionsHelper(t)}))},n._getAllSubscriptionsHelper=function(n){var t=this;return this._getSubscriptionsNextLink().then((function(r){t._lastChecked=Date.now();try{localStorage.setItem(n,JSON.stringify(r))}catch(u){i.Base.Diagnostics.Log.writeEntry(2,"Subscriptions Utility","Failed to cache subscription in localstorage")}return r}))},n._getSubscriptionsNextLink=function(n,t){var r=this,i;return n||(n=[]),i=t?Q(u.callArmFullUri(t,"GET")):Q(u.callArm("/subscriptions/","GET",null,f.Asset.ArmApiVersion)),i.then((function(t){return(n=n.concat(t.value),t.nextLink)?r._getSubscriptionsNextLink(n,t.nextLink):Q(n)}))},n})();e._cacheExpireMs=6e4;e._lastChecked=-1;t.SubscriptionUtil=e}));define("WebsitesExtension/TypeScript/Common/IFrame/BaseFrameBlade",["require","exports","f","i","o","ko","WebsitesExtension/TypeScript/Ajax/Ajax","WebsitesExtension/TypeScript/ExtensionAssets/Constants","Fx/Composition/FrameBlade","Websites/ClientResources/GeneralResources","WebsitesExtension/TypeScript/Utility/Utility.Notifications",
"Fx/Pinner","WebsitesExtension/TypeScript/Utility/Utility.Website","WebsitesExtension/TypeScript/Common/Telemetry","WebsitesExtension/TypeScript/Environment/RuntimeType","WebsitesExtension/TypeScript/Functions/iFrame/ViewModels/FunctionsUrlResolver","WebsitesExtension/TypeScript/Rpc/Rpc.BillingExtension","WebsitesExtension/TypeScript/Utility/Utility.Subscriptions"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){"use strict";u.defineProperty(t,"__esModule",{value:!0});var k=o.IFrameVerbs,d=o.IFrameTimerIds,g=(function(){function n(){this.title=f.observable();this.subtitle=f.observable();this._resourceUri=f.observable("");this._logTelemetry=!0;this._timerEvents={}}return n.prototype.onInitialize=function(){return this._componentName="AppSvcIFrame",this._initialized=!1,this._notificationMap={},this._telemetry=new v.Telemetry(this._componentName),this._runOnInputSet(this.context.parameters)},n.prototype._logFromOnInputSet=function(){},n.prototype._runOnInputSet=function(n){var r=this,t,f;return(
n&&n.id&&(n.id=n.id.toLowerCase()),this._inputs&&this._inputs.id===n.id&&n.id)?Q(null):(this._telemetry.resetSession(),this._inputs=n,n.id&&this._resourceUri(n.id),t=this.context.container,this._container=t,this._url=this._getUrl(n),f=this.viewModel=new s.ViewModel(t,{src:this._url}),this._startInitTrace(this._url),this._wireupCallbacks(),t.registerForDispose({dispose:function(){clearInterval(r._intervalId);u.keys(r._notificationMap).forEach((function(n){var t=r._notificationMap[n];t.status=i.Hubs.Notifications.NotificationStatus.Warning;t.description=h.operationCancelled;t.publish()}))}}),this._initialLoadPromise=this._getInitializationPromise(),this._resourceUri()&&(this._updateBladeTitle(this._resourceUri()),this._logFromOnInputSet(),this.viewModel.postMessage(k.sendInputs,{resourceId:this._resourceUri()})),this._setInitializationTimeout(),Q())},n.prototype._getUrl=function(){return""},n.prototype._getInitializationPromise=function(){var n=this,t;return this._timerEvents[d.GetAuthToken]=
this._telemetry.startTrace(d.GetAuthToken),this._timerEvents[d.GetLocaleInfo]=this._telemetry.startTrace(d.GetLocaleInfo),this._timerEvents[d.GetAllSubs]=this._telemetry.startTrace(d.GetAllSubs),this._timerEvents[d.GetUserInfo]=this._telemetry.startTrace(d.GetUserInfo),this._timerEvents[d.GetTheme]=this._telemetry.startTrace(d.GetTheme),t=[i.Base.Security.getAuthorizationToken().then((function(t){return n._completePromise(t,d.GetAuthToken)})),Q(e.get("GetLocaleInfo")).then((function(t){return n._completePromise(t,d.GetLocaleInfo)})),b.SubscriptionUtil.getAllSubscriptions().then((function(t){return n._completePromise(t,d.GetAllSubs)})),i.Base.Security.getUserInfo().then((function(t){return n._completePromise(t,d.GetUserInfo)})),this._getTheme().then((function(t){return n._completePromise(t,d.GetTheme)}))],Q.all(t).then((function(t){return n._completeTrace(n._timerEvents[o.IFrameTimerIds.InitPromiseComplete],n._getEnvTraceData(n._url,null)),t}))},n.prototype._completePromise=function(n,t){return this.
_completeTrace(this._timerEvents[t],this._getEnvTraceData(this._url,null)),Q(n)},n.prototype._completeTrace=function(n,t){n&&this._logTelemetry&&this._telemetry.completeTrace(n,t)},n.prototype._updateBladeTitle=function(n){var t=i.ViewModels.Services.ResourceTypes.parseResourceDescriptor(n),r=t.resource;t.types.length>1&&t.types[0].toLowerCase()==="sites"&&t.types[1].toLowerCase()==="slots"&&(r=t.resources[0]+" - "+t.resources[1]);this.title(r)},n.prototype._startInitTrace=function(n){var t=this._getEnvTraceData(n,null);t&&(this._timerEvents[o.IFrameTimerIds.GetStartupInfo]=this._telemetry.startTrace(o.IFrameTimerIds.GetStartupInfo),this._timerEvents[o.IFrameTimerIds.InitPromiseComplete]=this._telemetry.startTrace(o.IFrameTimerIds.InitPromiseComplete))},n.prototype._getEnvTraceData=function(n,t){if(n.toLowerCase().indexOf("localhost")===-1){var u=new i.Base.UriBuilder(window.fx.environment.extensionTelemetryUri),r=u.query.getParameter("WebsitesExtension"),f=u.query.getParameter("feature.canmodifystamps"),
e=u.query.getParameter("feature.canmodifyextensions");return e?r="local":r&&f==="true"||(r="production"),{url:n,shellUrl:window.fx.environment.trustedParentOrigin,environment:r,iframeHostName:t}}return{}},n.prototype._recieveTimerEvent=function(n){var t=JSON.parse(n);if(!t.timerAction||!t.timerId){this._telemetry.logAction("timerEvents","InvalidEventRecieved",{actionRecieved:t.timerAction,timerIdRecieved:t.timerId});return}switch(t.timerAction){case"start":this._timerEvents[t.timerId]||(this._timerEvents[t.timerId]=this._telemetry.startTrace(t.timerId));break;case"stop":if(!this._timerEvents[t.timerId]){this._telemetry.logAction("timerEvents","StoppedInvalidId",{timerIdRecieved:t.timerId});return}this._completeTrace(this._timerEvents[t.timerId],this._getEnvTraceData(this._url,this._iframeHostName));delete this._timerEvents[t.timerId];break;default:this._telemetry.logAction("timerEvents","BadActionRecieved",{actionRecieved:t.timerAction})}},n.prototype._wireupCallbacks=function(){this.viewModel.
on(k.getStartupInfo,this._getStartupInfo.bind(this));this.viewModel.on(k.getAdToken,this._getToken.bind(this));this.viewModel.on(k.openBlade,this._openBlade.bind(this));this.viewModel.on(k.openBlade2,this._openBlade2.bind(this));this.viewModel.on(k.closeBlades,this._closeBlades.bind(this));this.viewModel.on(k.updateBladeInfo,this._updateBladeInfo.bind(this));this.viewModel.on(k.pinPart,this._pinPart.bind(this));this.viewModel.on(k.setNotification,this._setNotification.bind(this));this.viewModel.on(k.getSpecCosts,this._getSpecCosts.bind(this));this.viewModel.on(k.getSubscriptionInfo,this._getSubscriptionInfo.bind(this));this.viewModel.on(k.logAction,this._logAction.bind(this));this.viewModel.on(k.logMessage,this._logMessage.bind(this));this.viewModel.on(k.updateDirtyState,this._updateDirtyState.bind(this));this.viewModel.on(k.logTimerEvent,this._recieveTimerEvent.bind(this))},n.prototype._getSpecCosts=function(n){var i=this,t=JSON.parse(n);w.getSpecsCosts(t.data).then((function(n){var r=
{operationId:t.operationId,data:{status:"success",result:n}};i.viewModel.postMessage(k.sendData,r)})).catch((function(n){var r={operationId:t.operationId,data:{status:"failed",result:n}};i.viewModel.postMessage(k.sendData,r)}))},n.prototype._getSubscriptionInfo=function(n){var r=this,t=JSON.parse(n);i.Azure.getSubscriptionInfo(t.data.subscriptionId).then((function(n){var i={operationId:t.operationId,data:{status:"success",result:n}};r.viewModel.postMessage(k.sendData,i)})).catch((function(n){var i={operationId:t.operationId,data:{status:"failed",result:n}};r.viewModel.postMessage(k.sendData,i)}))},n.prototype._openBlade=function(n){var t=JSON.parse(n),u;i.Base.Diagnostics.Log.writeEntry(0,this._componentName,h.Iframe.receivedMesg+k.openBlade+" "+t.detailBlade);u=new r.Composition.Selectable.PdlBladeReference(t.detailBlade,t.extension,{parameters:t.detailBladeInputs});this.context.container.openBlade(u)},n.prototype._openBlade2=function(n){var f=this,t=JSON.parse(n),u;i.Base.Diagnostics.Log.writeEntry(
0,this._componentName,h.Iframe.receivedMesg+k.openBlade+" "+t.data.detailBlade);u=new r.Composition.Selectable.PdlBladeReference(t.data.detailBlade,t.data.extension,{parameters:t.data.detailBladeInputs,onClosed:function(n,i){var r={operationId:t.operationId,data:{status:"success",result:{reason:n===2?"childClosedSelf":"userNavigation",data:i}}};f.viewModel.postMessage(k.sendData,r)}});this.context.container.openBlade(u)},n.prototype._closeBlades=function(){this.context.container.closeChildBlade()},n.prototype._pinPart=function(n){var t=JSON.parse(n),f=t.partInput,r=new i.Composition.PartReference("SingleWebsitePart",f),u;r.options.initialSize=t.partSize;u=[r];l.pin(u)},n.prototype._updateBladeInfo=function(n){var t=JSON.parse(n);t.title!==null&&t.title!==undefined&&this.title(t.title);t.subtitle!==null&&t.subtitle!==undefined&&this.subtitle(t.subtitle)},n.prototype._getToken=function(n){var t=this,r=JSON.parse(n),u=d.GetToken.format(r.data.tokenType),f;this._timerEvents[u]=this._telemetry.
startTrace(u);f=this._isNationalCloud()?Q(null):i.Base.Security.getAuthorizationToken({resourceName:r.data.tokenType});f.then((function(n){t._completeTrace(u,t._getEnvTraceData(t._url,null));t._sendToken(n,r.data.tokenType,r.operationId)}))},n.prototype._sendToken=function(n,t,i){var r={operationId:i,data:{status:"success",result:{tokenType:t,token:n?this._parseToken(n.header):null}}};this.viewModel.postMessage(k.sendData,r)},n.prototype._getStartupInfo=function(n){var t=this,r,u;n&&(r=JSON.parse(n),r&&(this._iframeHostName=r.iframeHostName));window.clearTimeout(this._initTimeoutId);u=this._timerEvents[o.IFrameTimerIds.GetStartupInfo];this._completeTrace(u,this._getEnvTraceData(this._url,this._iframeHostName));i.Base.Diagnostics.Log.writeEntry(0,this._componentName,h.Iframe.receivedMesg+k.getStartupInfo);this._initialLoadPromise.then((function(n){t._sendStartupInfo(n);t._intervalId=setInterval(t._checkToken.bind(t),3e4)}))},n.prototype.sendSettingName=function(n){this.viewModel.postMessage(
k.sendAppSettingName,n)},n.prototype._setNotification=function(n){var t=JSON.parse(n),r,u,f;if(t&&t.state||i.Base.Diagnostics.Log.writeEntry(0,this._componentName,"Notification object requires a state property"),t.state===o.IFrameNotificationStates.start)r=c.start(t.title,t.description),u=a.Guid.newTinyGuid(),this._notificationMap[u]=r,f={id:u},this.viewModel.postMessage(k.sendNotificationStarted,f);else{if(r=this._notificationMap[t.id],!r){i.Base.Diagnostics.Log.writeEntry(0,this._componentName,"Could not find notification with id: "+t.id);return}t.state===o.IFrameNotificationStates.success?(c.success(r,t.description),delete this._notificationMap[t.id]):t.state===o.IFrameNotificationStates.fail?(c.failure(r,t.description),delete this._notificationMap[t.id]):i.Base.Diagnostics.Log.writeEntry(0,this._componentName,"Unrecognized notification state: "+t.state)}},n.prototype._sendStartupInfo=function(n){var t=this._initialized?null:this._resourceUri();this._initialized=!0;this._startupInfo=
{sessionId:window.fx.environment.sessionId,token:this._parseToken(n[0].header),acceptLanguage:n[1].AcceptLanguage,effectiveLocale:n[1].EffectiveLocale,subscriptions:n[2],resourceId:t,userInfo:n[3],theme:n[4],armEndpoint:window.fx.environment.csmManagementServiceUri,featureInfo:this._inputs};this._authToken=this._startupInfo.token;this.viewModel.postMessage(k.sendStartupInfo,this._startupInfo)},n.prototype._setInitializationTimeout=function(){var n=this;this._logTelemetry&&(this._initTimeoutId=setTimeout((function(){var t=new i.Base.UriBuilder(n._url);n._telemetry.logActionJson("FrameBlade","timeout",{url:p.FunctionsUrlResolver.getUrlWithOnlyCorrelationId(n._url),timeout:o.Functions.initTimeoutMs})}),o.Functions.initTimeoutMs))},n.prototype._getTheme=function(){var n=this,t=Q.defer();return this._theme?t.resolve(this._theme):i.Services.getSettings().then((function(i){var r=i["fxs-theme"];r.subscribe(n._container,(function(i){n._theme?n._startupInfo&&(n._startupInfo=JSON.parse(JSON.stringify(
n._startupInfo)),n._startupInfo.theme=i.name,n.viewModel.postMessage(k.sendStartupInfo,n._startupInfo)):(n._theme=i.name,t.resolve(i.name))})).callback(r())})),t.promise},n.prototype._parseToken=function(n){var t=n.split(" ");if(t.length===2)return t[1];throw new Error(h.Iframe.tokenParseError);},n.prototype._checkToken=function(){var n=this;i.Base.Security.getAuthorizationToken().then((function(t){var i=n._parseToken(t.header);n._authToken!==i&&(n._authToken=i,n.viewModel.postMessage(k.sendToken2,{token:i}),n.viewModel.postMessage(k.sendToken,i))}))},n.prototype._logAction=function(n){var t=JSON.parse(n);this._telemetry.logAction(t.subcomponent,t.action,t.data)},n.prototype._updateDirtyState=function(n){var i=JSON.parse(n),t=this.context;t.form&&t.form.configureAlertOnClose&&t.form.configureAlertOnClose(f.observable({showAlert:i.dirty,message:i.message}))},n.prototype._logMessage=function(n){var t=JSON.parse(n),r={resourceId:this._resourceUri(),message:!t.restArgs?t.message:t.message.format(
t.restArgs)};i.Base.Diagnostics.Log.writeEntry(t.level,this._componentName,JSON.stringify(r))},n.prototype._isNationalCloud=function(){return y.isBlackforest()||y.isFairfax()||y.isMooncake()},n})();__decorate([i.Composition.NotProxied],g.prototype,"sendSettingName",null);t.BaseFrameBlade=g}));__extends=this&&this.__extends||(function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}})();define("WebsitesExtension/TypeScript/Functions/iFrame/ViewModels/FunctionsBaseFrameBlade",["require","exports","o","WebsitesExtension/TypeScript/Common/IFrame/BaseFrameBlade","WebsitesExtension/TypeScript/ExtensionAssets/Constants","WebsitesExtension/TypeScript/Functions/iFrame/ViewModels/FunctionsUrlResolver"],(function(n,t,i,r,u,f){"use strict";i.defineProperty(t,"__esModule",
{value:!0});var e=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onInitialize=function(){var t=n.prototype.onInitialize.call(this);return this._firstOnInputSetRun=!1,t},t.prototype.onRebind=function(){return this._runOnInputSet(this.context.parameters)},t.prototype._getUrl=function(n){var t,i,r;return n.feature?(this._telemetry.logActionJson("functions-feature","open",{name:n.feature}),i=u.IFrameTimerIds.MenuFeatureLoadingPrefix+u.IFrameTimerIds.FeatureConstructLoadingFormat.format(n.feature),r=u.IFrameTimerIds.MenuFeatureLoadingPrefix+u.IFrameTimerIds.FeatureLoadingFormat.format(n.feature),this._timerEvents[i]=this._telemetry.startTrace(i),this._timerEvents[r]=this._telemetry.startTrace(r),this._feature=n.feature,t=f.FunctionsUrlResolver.getFunctionsUrl("/feature"+this._resourceUri()+"/"+n.feature)):(this._telemetry.logActionJson("functions-feature","open",{name:"none"}),t=f.FunctionsUrlResolver.getFunctionsUrl()),f.FunctionsUrlResolver.
isProdAndOptimized(t)||(this._logTelemetry=!1),t=t+"&appsvc.bladetype=frameblade",t.toLowerCase()},t.prototype._recieveTimerEvent=function(t){var i=JSON.parse(t);if(!i.timerAction||!i.timerId){this._telemetry.logAction("timerEvents","InvalidEventRecieved",{actionRecieved:i.timerAction,timerIdRecieved:i.timerId});return}return i.timerId.startsWith("/feature/")&&this._feature&&(i.timerId=u.IFrameTimerIds.MenuFeatureLoadingPrefix+i.timerId),n.prototype._recieveTimerEvent.call(this,JSON.stringify(i))},t.prototype._getJsonObj=function(n){var t=null;try{t=JSON.parse(n)}catch(i){}return t},t.prototype._logFromOnInputSet=function(){this._firstOnInputSetRun&&(this._timerEvents[u.IFrameTimerIds.ClickToOverviewInputsSet]=this._telemetry.startTrace(u.IFrameTimerIds.ClickToOverviewInputsSet));this._firstOnInputSetRun=!0},t.prototype._updateBladeTitle=function(){},t})(r.BaseFrameBlade);t.FunctionsBaseFrameBlade=e}))