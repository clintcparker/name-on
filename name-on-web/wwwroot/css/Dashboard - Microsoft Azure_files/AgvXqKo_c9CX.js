define("HubsExtension/ResourceMap/ResourceMapArea",["require","exports","f","moment","HubsExtension/ArmHelpers/ArmApis","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/Common/BrowseData"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){function s(n,t,i,r,u){return f.call(t,n,r,f.makeResourceManagerTelemetry(u)).then((function(n){return n}))}function h(n,t,i,r,u){var e=[];return f.callWithContinuation([t],(function(n){e.push.apply(e,n)}),(function(n){throw n;}),f.makeResourceManagerTelemetry(u)).then((function(){return{value:e}}))}function c(n){var t=n&&n.properties;if(t&&(delete t.dependencies,delete t.providers,delete t.outputResources),t.duration&&!!~[o.Accepted,o.Running,o.Deploying].indexOf(t.provisioningState.toLowerCase())){var u=r.duration(t.duration).asMilliseconds(),f=r.utc(t.timestamp).valueOf()-u,i=Date.now()-f;i>0&&(t.duration=i)}}var t=i.Data,o=i.Azure.ResourceManager.DeploymentStates,l=(function(){function n(){this.bladeMessageWrapper=e.bladeMessageWrapper;this.deploymentsQueryCache=new t.QueryCache({sourceUri:function(n){return u.listDeploymentsApi(n.resourceGroupId)},poll:!1,httpMethod:"GET",supplyData:function(n,t,i,r,u){return h(n,t,i,r,"listDeployments",u)},processServerResponse:function(n){n.value.forEach((function(n){c(n)}));var t=n.value.sort((function(n,t){return new Date(t.properties.timestamp).getTime()-new Date(n.properties.timestamp).getTime()}));return{data:t}},serializeParams:function(n){return n.resourceGroupId}});this.deploymentEntityCache=new t.EntityCache({sourceUri:function(n){return u.singleDeploymentApi(n.deploymentId)},poll:!1,httpMethod:"GET",findCachedEntity:{queryCache:this.deploymentsQueryCache,entityMatchesId:function(n,t){return(n.id()||"").toLowerCase()===(t.deploymentId||"").toLowerCase()}},supplyData:function(n,t,i,r,u){return s(n,t,i,r,"getDeployment",u)},processServerResponse:function(n){return c(n),{data:n}},serializeParams:function(n){return n.deploymentId}});this.deploymentOperationsQueryCache=new t.QueryCache({sourceUri:function(n){return u.deploymentOperationsApi(n.deploymentId)},poll:!1,httpMethod:"GET",supplyData:function(n,t,i,r,u){return h(n,t,i,r,"listDeploymentOperations",u)},processServerResponse:function(n){return{data:n&&n.value}},serializeParams:function(n){return n.deploymentId}});this.deploymentOperationEntityCache=new t.EntityCache({sourceUri:function(n){return u.singleDeploymentOperationApi(n.operationId)},httpMethod:"GET",findCachedEntity:{queryCache:this.deploymentOperationsQueryCache,entityMatchesId:function(n,t){return(n.id()||"").toLowerCase()===(t.operationId||"").toLowerCase()}},supplyData:function(n,t,i,r,u){return s(n,t,i,r,"getDeploymentOperation",u)},processServerResponse:function(n){return{data:n}},serializeParams:function(n){return n.operationId}})}return n})();n.DataContext=l})(o||(o={})),o}))