define("Fx/Controls/HotSpot",["require","exports","f","i"],(function(n,t,i,r){"use strict";var u;return (function(n){var u=i.ViewModels.Controls.HotSpot.BaseViewModel,f=(function(n){function t(t,r){r===void 0&&(r={});var u=n.call(this,t)||this;return u._msPortalFxOnClick=i.noop,u._msPortalFxOnClick=r.onClick||i.noop,u.clickableDuringCustomize=!!r.clickableDuringCustomize,r.disabled&&(u.disabled=r.disabled),u}return __extends(t,n),t})(u),t;n.ViewModel=f;t=(function(n){function t(t,i,r){return n.call(this,t,i,r)||this}return __extends(t,n),t})(r.Controls.HotSpot.ViewModel2);n.ViewModel2=t})(u||(u={})),u}));
define("Fx/Controls/Validations",["require","exports","f","o"],(function(n,t,i,r){"use strict";r.defineProperty(t,"__esModule",{value:!0});t.CaseInsensitiveComparison=i.ViewModels.CaseInsensitiveComparisonValidation;t.Contains=i.ViewModels.ContainsValidation;t.ContainsCharacters=i.ViewModels.ContainsCharactersValidation;t.Custom=i.ViewModels.CustomValidation;t.CustomV=i.ViewModels.CustomValidationV;t.Equals=i.ViewModels.EqualsValidation;t.HasDigit=i.ViewModels.HasDigitValidation;t.HasLetter=i.ViewModels.HasLetterValidation;t.HasLowerCaseLetter=i.ViewModels.HasLowerCaseLetterValidation;t.HasPunctuation=i.ViewModels.HasPunctuationValidation;t.HasUpperCaseLetter=i.ViewModels.HasUpperCaseLetterValidation;t.Invalid=i.ViewModels.InvalidValidation;t.LengthRange=i.ViewModels.LengthRangeValidation;t.LocaleAwareCaseInsensitiveComparison=i.ViewModels.LocaleAwareCaseInsensitiveComparisonValidation;t.MaxLength=i.ViewModels.MaxLengthValidation;t.MaxValue=i.ViewModels.MaxValueValidation;t.MinLength=i.ViewModels.MinLengthValidation;t.MinValue=i.ViewModels.MinValueValidation;t.NotContains=i.ViewModels.NotContainsValidation;t.NotContainsCharacters=i.ViewModels.NotContainsCharactersValidation;t.NotRegExMatch=i.ViewModels.NotRegExMatchValidation;t.Numeric=i.ViewModels.NumericValidation;t.Range=i.ViewModels.RangeValidation;t.RegExMatch=i.ViewModels.RegExMatchValidation;t.Required=i.ViewModels.RequiredValidation;t.StaticMessage=i.ViewModels.StaticMessageValidation;t.Uri=i.ViewModels.UriValidation}));
define("FxInternal/Controls/Base/TypableBase",["require","exports","f","o","ko","FxInternal/Controls/Base/FormsBase"],(function(n,t,i,r,u,f){"use strict";r.defineProperty(t,"__esModule",{value:!0});var e=(function(n){function t(t,r){var f=n.call(this,t,r)||this;return r=r||{},f.editing=u.observable(!1),f.empty=u.computed(f.lifetimeManager,(function(){return!f.value()})),f.delayValidationTimeout=r.valueUpdateTimeout||u.observable(500),f.onEnterPressed=r.onEnterPressed,f.placeHolderText=i.initObservable(r.placeHolderText,""),f.valueUpdateTrigger=r.valueUpdateTrigger||4,f.emptyValueText=f.placeHolderText,f}return __extends(t,n),t})(f.ViewModel);t.ViewModel=e}));
define("FxInternal/Controls/Grid2/GridB.Base",["require","exports"],(function(){"use strict";var n;return (function(n){var t;(function(n){var t=(function(){function n(n){this._contract=n}return n})();n.BasePlugin=t})(t=n.Internal||(n.Internal={}))})(n||(n={})),n}));
define("FxInternal/Controls/Grid2/GridB.ContextMenu",["require","exports","FxInternal/Controls/Grid2/GridB.Base"],(function(n,t,i){"use strict";var r;return (function(n){var t;(function(n){var t=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(n,t){var i=t.contextMenu||{enabled:!1,hiddenInCollapsed:!1};this._contract.contextMenu={enabled:i.enabled!==!1,hiddenInCollapsed:!!i.hiddenInCollapsed}},t.prototype.isEnabled=function(){var n=this._contract.contextMenu;return n&&n.enabled},t.prototype.validate=function(n){if(this.isEnabled()&&!n.selection.isEnabled())throw new Error("ContextMenu can not be used without selection enabled.");},t})(i.Internal.BasePlugin);n.ContextMenuPlugin=t})(t=n.Internal||(n.Internal={}))})(r||(r={})),r}));
define("FxInternal/Controls/Grid2/GridB.DemandLoading",["require","exports","ko","FxInternal/Controls/Grid2/GridB.Base"],(function(n,t,i,r){"use strict";var u;return (function(n){var t;(function(n){var t=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(n,t){var r=t.demandLoading||{enabled:!1};this._contract.demandLoading={enabled:r.enabled!==!1,rowCount:r.rowCount||i.observable(10),label:r.label||i.observable(),showLabel:r.showLabel||i.observable(!0)}},t.prototype.isEnabled=function(){var n=this._contract.demandLoading;return n&&n.enabled},t.prototype.validate=function(n){if(this.isEnabled()&&n.paging.isEnabled())throw new Error("Demand loading my not be used with paging.");},t})(r.Internal.BasePlugin);n.DemandLoadingPlugin=t})(t=n.Internal||(n.Internal={}))})(u||(u={})),u}));
define("FxInternal/Controls/Grid2/GridB.Focus",["require","exports","FxInternal/Controls/Grid2/GridB.Base"],(function(n,t,i){"use strict";var r;return (function(n){var t;(function(n){var t=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(n,t){var i=t.contextMenu||{enabled:!1},r=t.selection||{enabled:i.enabled},u=t.focus||{enabled:r.enabled};this._contract.focus={enabled:u.enabled!==!1}},t.prototype.isEnabled=function(){var n=this._contract.focus;return n&&n.enabled},t.prototype.validate=function(){},t})(i.Internal.BasePlugin);n.FocusPlugin=t})(t=n.Internal||(n.Internal={}))})(r||(r={})),r}));
define("FxInternal/Controls/Grid2/GridB.Grouping",["require","exports","ko","FxInternal/Controls/Grid2/GridB.Base"],(function(n,t,i,r){"use strict";var u;return (function(n){var t;(function(n){var t=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(n,t){var r=t.grouping||{enabled:!1,groupBy:i.observable(null)};this._contract.grouping={enabled:r.enabled!==!1,groupBy:r.groupBy,headerFormat:r.headerFormat,getGroupAriaLabel:r.getGroupAriaLabel}},t.prototype.isEnabled=function(){var n=this._contract.grouping;return n&&n.enabled},t.prototype.validate=function(){this.isEnabled()},t})(r.Internal.BasePlugin);n.GroupingPlugin=t})(t=n.Internal||(n.Internal={}))})(u||(u={})),u}));
define("FxInternal/Controls/Grid2/GridB.Hierarchical",["require","exports","FxInternal/Controls/Grid2/GridB.Base"],(function(n,t,i){"use strict";var r;return (function(n){var t;(function(n){var t=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(n,t){var i=t.hierarchical||{enabled:!1};this._contract.hierarchical={enabled:i.enabled!==!1}},t.prototype.isEnabled=function(){var n=this._contract.hierarchical;return n&&n.enabled},t.prototype.validate=function(){this.isEnabled()},t})(i.Internal.BasePlugin);n.HierarchicalPlugin=t})(t=n.Internal||(n.Internal={}))})(r||(r={})),r}));
define("FxInternal/Controls/Grid2/GridB.Hover",["require","exports","ko","FxInternal/Controls/Grid2/GridB.Base"],(function(n,t,i,r){"use strict";var u;return (function(n){var t;(function(n){var t=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(n,t){var r=t.hover||{enabled:!1};this._contract.hover={enabled:r.enabled!==!1,hoveredRowId:r.hoveredRowId||i.observable()}},t.prototype.isEnabled=function(){var n=this._contract.hover;return n&&n.enabled},t.prototype.validate=function(){this.isEnabled()},t})(r.Internal.BasePlugin);n.HoverPlugin=t})(t=n.Internal||(n.Internal={}))})(u||(u={})),u}));
define("FxInternal/Controls/Grid2/GridB.Paging",["require","exports","ko","FxInternal/Controls/Grid2/GridB.Base"],(function(n,t,i,r){"use strict";var u;return (function(n){var t;(function(n){var t=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(n,t){var r=t.paging||{enabled:!1};this._contract.paging={enabled:r.enabled!==!1,pageSize:r.pageSize||i.observable(10)}},t.prototype.isEnabled=function(){var n=this._contract.paging;return n&&n.enabled},t.prototype.validate=function(n){if(this.isEnabled())if(n.demandLoading.isEnabled())throw new Error("Paging can not be used with demand loading.");else if(n.scrolling.isEnabled())throw new Error("Paging can not be used with scrolling.");},t})(r.Internal.BasePlugin);n.PagingPlugin=t})(t=n.Internal||(n.Internal={}))})(u||(u={})),u}));
define("FxInternal/Controls/Grid2/GridB.Reordering",["require","exports","FxInternal/Controls/Grid2/GridB.Base"],(function(n,t,i){"use strict";var r;return (function(n){var t;(function(n){var t=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(n,t){var i=t.reordering||{enabled:!1};this._contract.reordering={enabled:i.enabled!==!1,automaticallyReorderRows:i.automaticallyReorderRows,rowReorder:i.rowReorder}},t.prototype.isEnabled=function(){var n=this._contract.reordering;return n&&n.enabled},t.prototype.validate=function(){this.isEnabled()},t})(i.Internal.BasePlugin);n.ReorderingPlugin=t})(t=n.Internal||(n.Internal={}))})(r||(r={})),r}));
define("FxInternal/Controls/Grid2/GridB.Resizing",["require","exports","ko","FxInternal/Controls/Grid2/GridB.Base"],(function(n,t,i,r){"use strict";var u;return (function(n){var t;(function(n){var t=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(n,t){var r=t.resizing||{enabled:!1};this._contract.resizing={enabled:r.enabled!==!1,resizeToPercent:r.resizeToPercent||i.observable(!0),minWidth:r.minWidth||40}},t.prototype.isEnabled=function(){var n=this._contract.resizing;return n&&n.enabled},t.prototype.validate=function(){this.isEnabled()},t})(r.Internal.BasePlugin);n.ResizingPlugin=t})(t=n.Internal||(n.Internal={}))})(u||(u={})),u}));
define("FxInternal/Controls/Grid2/GridB.Scrolling",["require","exports","FxInternal/Controls/Grid2/GridB.Base"],(function(n,t,i){"use strict";var r;return (function(n){var t;(function(n){var t=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(n,t){var i=t.scrolling||{enabled:!1};this._contract.scrolling={enabled:i.enabled!==!1,horizontal:i.horizontal!==!1,vertical:i.vertical!==!1}},t.prototype.isEnabled=function(){var n=this._contract.scrolling;return n&&n.enabled},t.prototype.validate=function(){},t})(i.Internal.BasePlugin);n.ScrollingPlugin=t})(t=n.Internal||(n.Internal={}))})(r||(r={})),r}));
define("FxInternal/Controls/Grid2/GridB.Search",["require","exports","ko","FxInternal/Controls/Grid2/GridB.Base"],(function(n,t,i,r){"use strict";var u;return (function(n){var t;(function(n){var t=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(n,t){var r=t.search||{enabled:!1};this._contract.search={enabled:r.enabled!==!1,searchColumns:r.searchColumns||i.observableArray(),searchBoxCloseButtonVisible:r.searchBoxCloseButtonVisible||i.observable(!1),searchBoxPlaceholder:r.searchBoxPlaceholder||i.observable(),searchBoxVisible:r.searchBoxVisible||i.observable(!0)}},t.prototype.isEnabled=function(){var n=this._contract.search;return n&&n.enabled},t.prototype.validate=function(){this.isEnabled()},t})(r.Internal.BasePlugin);n.SearchPlugin=t})(t=n.Internal||(n.Internal={}))})(u||(u={})),u}));
define("FxInternal/Controls/Grid2/GridB.Selection",["require","exports","f","ko","FxInternal/Controls/Grid2/GridB.Base"],(function(n,t,i,r,u){"use strict";var f;return (function(n){var t=i.ViewModels.Internal.Selection2,f;(function(n){var f=(function(){function n(n,u){this._msPortalFxSelectableSet=new t.SelectableSet(n,u);var f=this._msPortalFxSelectableSet;this.enabled=i.initValue(u.enabled,!0);this.dynamicSelectionProvider=f.dynamicSelectionProvider;this.commandGroupProvider=f.commandGroupProvider;this.selectionMode=f.selectionMode;this.activationMode=f.activationMode;this.selectedIds=r.observableArray();this.selectedAll=f.selectedAll;this.unselectedIds=r.observableArray();this.activatedIds=r.observableArray();this.activatedIdsWithColumnInformation=f.activatedIds;this.hiddenInCollapsed=i.initValue(u.hiddenInCollapsed,!1);f.selectedIds.mapInto(n,(function(n,t){return t.id}),this.selectedIds);f.unselectedIds.mapInto(n,(function(n,t){return t.id}),this.unselectedIds);f.activatedIds.mapInto(n,(function(n,t){return t.id}),this.activatedIds)}return n})(),e;n.GridSelectionViewModel=f;e=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(n,t){var s=this,h=t.contextMenu||{enabled:!1},u=t.selection||{enabled:h.enabled},e=u.dynamicSelectionProvider,o;e&&(u.dynamicSelectionProvider=function(n,t){if(n.columnId){var u=i.find(s._contract.columns(),(function(t){return t.id===n.columnId}));if(u&&u.dynamicSelectionProvider)return u.dynamicSelectionProvider(n.id,r.utils.peekObservable(t))}return e(n.id,r.utils.peekObservable(t))});this._contract.selection=new f(n,u);o=this._contract.selection;o.linkUriProperty=u.linkUriProperty;u.activationContainer&&u.activationMode!==1&&e&&u.activationContainer.registerSelectable&&u.activationContainer.registerSelectable(n,i.getUniqueId(),o._msPortalFxSelectableSet)},t.prototype.isEnabled=function(){return this._contract.selection&&this._contract.selection.enabled},t.prototype.validate=function(n){if(this.isEnabled()&&!n.focus.isEnabled())throw new Error("Selection can not be used without focus enabled.");},t})(u.Internal.BasePlugin);n.SelectionPlugin=e})(f=n.Internal||(n.Internal={}))})(f||(f={})),f}));
define("FxInternal/Controls/Grid2/GridB.Sorting",["require","exports","FxInternal/Controls/Grid2/GridB.Base"],(function(n,t,i){"use strict";var r;return (function(n){var t;(function(n){var t=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initialize=function(n,t){var i=t.sorting||{enabled:!1};this._contract.sorting={enabled:i.enabled!==!1}},t.prototype.isEnabled=function(){var n=this._contract.sorting;return n&&n.enabled},t.prototype.validate=function(){this.isEnabled()},t})(i.Internal.BasePlugin);n.SortingPlugin=t})(t=n.Internal||(n.Internal={}))})(r||(r={})),r}));
define("FxInternal/Controls/Grid2/GridB",["require","exports","f","i","FxInternal/Controls/Grid2/GridB.ContextMenu","FxInternal/Controls/Grid2/GridB.DemandLoading","FxInternal/Controls/Grid2/GridB.Focus","FxInternal/Controls/Grid2/GridB.Hover","FxInternal/Controls/Grid2/GridB.Grouping","FxInternal/Controls/Grid2/GridB.Hierarchical","FxInternal/Controls/Grid2/GridB.Paging","FxInternal/Controls/Grid2/GridB.Reordering","FxInternal/Controls/Grid2/GridB.Resizing","FxInternal/Controls/Grid2/GridB.Scrolling","FxInternal/Controls/Grid2/GridB.Search","FxInternal/Controls/Grid2/GridB.Selection","FxInternal/Controls/Grid2/GridB.Sorting"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){"use strict";var b;return (function(n){var d=r.ViewModels.Controls.Lists,g=i.initValue,t=i.initObservable,b=i.initObservableArray,k=i.forEachKey,nt=(function(n){function i(t,i){var r,b;return i===void 0&&(i={}),r=n.call(this,t,i)||this,r.controlType=103,b={contextMenu:new u.Internal.ContextMenuPlugin(r),demandLoading:new f.Internal.DemandLoadingPlugin(r),focus:new e.Internal.FocusPlugin(r),grouping:new s.Internal.GroupingPlugin(r),hierarchical:new h.Internal.HierarchicalPlugin(r),hover:new o.Internal.HoverPlugin(r),paging:new c.Internal.PagingPlugin(r),reordering:new l.Internal.ReorderingPlugin(r),resizing:new a.Internal.ResizingPlugin(r),scrolling:new v.Internal.ScrollingPlugin(r),search:new y.Internal.SearchPlugin(r),selection:new p.Internal.SelectionPlugin(r),sorting:new w.Internal.SortingPlugin(r)},r._initialize(i),k(b,(function(n,t){t.initialize(r.lifetimeManager,i)})),r._validate(),k(b,(function(n,t){t.validate(b)})),r.getRowAriaLabel=i.getRowAriaLabel,r}return __extends(i,n),i.prototype.dispose=function(){n.prototype.dispose.call(this)},i.prototype._initialize=function(n){this.ariaLabel=t(n.ariaLabel);this.showHeader=g(n.showHeader,!0);this.columns=b(n.columns);this.noRowsMessage=t(n.noRowsMessage);this.loadingMessage=t(n.loadingMessage);this.disabledRowIds=b(this.disabledRowIds);this._filterActions=!0},i.prototype._validate=function(){},i})(d.Base.ViewModel);n.ViewModel=nt})(b||(b={})),b}));
define("FxInternal/Data/FilterProjection",["require","exports","a","FxInternal/Data/BaseProjection"],(function(n,t,i,r){"use strict";return (function(n){function t(t){var i=n.call(this,t)||this;return i._filter=t.filter,i.refresh(),i}return __extends(t,n),t.prototype.refresh=function(){var i=this,n=0,r=this._source.peek(),t=[];this._states=r.map((function(r){var u=i._filter(r),f={index:n,filtered:u};return u&&(n++,t.push(r)),f}));this._states.push({index:n,filtered:!1});this._damageIndex=0;this._damageOffset=0;this._replace(t)},t.prototype._repairTo=function(n){if(this._damageOffset&&this._damageIndex>n){while(this._damageIndex<this._states.length)this._states[this._damageIndex].index+=this._damageOffset,this._damageIndex++;this._damageOffset=0}if(this._damageOffset)while(this._damageIndex<n)this._states[this._damageIndex].index+=this._damageOffset,this._damageIndex++},t.prototype._addState=function(n,t){this._repairTo(n);var i={index:this._states[n].index+this._damageOffset,filtered:t};return this._states.splice(n,0,i),this._damageIndex=n+1,i.filtered&&(this._damageOffset+=1),i},t.prototype._deleteState=function(n){this._repairTo(n);var t=this._states.splice(n,1)[0];return t.index+=this._damageOffset,this._damageIndex=n,t.filtered&&(this._damageOffset-=1),t},t.prototype._update=function(n){var t=this,i=0,r=0,u=n.reduce((function(n,u){var f,e;return u.status==="added"?(f=t._addState(u.index,t._filter(u.value)),f.filtered&&(n.push({status:"added",index:f.index,value:u.value,moved:undefined}),r--),i++):u.status==="deleted"&&(e=t._deleteState(u.index+i),e.filtered&&(n.push({status:"deleted",index:e.index+r,value:u.value,moved:undefined}),r++),i--),n}),[]);this._apply(u)},t})(r)}));
define("FxInternal/Data/MapProjection",["require","exports","i","ko","FxInternal/Data/BaseProjection"],(function(n,t,i,r,u){"use strict";return (function(n){function t(t){var i=n.call(this,t)||this;return i._mapping=t.mapping,i.refresh(),i}return __extends(t,n),t.prototype.refresh=function(){var n=this._mapping(this._source.peek());this._replace(n)},t.prototype._update=function(n){var u=this,t=i.createArraySplicesInternal(n,!0,this.destination.peek(),(function(n){return u._mapping(n)}));try{this._internalEdit=!0;t.length?r.utils.applyArraySplices(this.destination,t):this.destination.notifySubscribers([],"arrayChange")}finally{this._internalEdit=!1}},t})(u)}));
define("FxInternal/Data/PageProjection",["require","exports","f","a","FxInternal/Data/BaseProjection"],(function(n,t,i,r,u){"use strict";var f=i.initObservable,e=i.isUndefined,o=undefined;return (function(n){function t(t){var i=n.call(this,t)||this;return i.startIndex=f(t.startIndex,0),i.pageSize=f(t.pageSize),i.totalCount=f(t.totalCount,0),i._requestedStartIndex=o,i._requestedPageSize=o,i._loaded=!1,i}return __extends(t,n),t.prototype.refresh=function(){this._load(this._requestedStartIndex,this._requestedPageSize)},t.prototype.loadAll=function(){this._load()},t.prototype.loadPage=function(n,t){this._load(n,t)},t.prototype._load=function(n,t){var r,i,u;this._requestedStartIndex=n;this._requestedPageSize=t;n=this._requestedStartIndex||0;t!==o&&(r=n+t);i=this._source.peek();u=i.slice(n,r);this._replace(u);this.startIndex(n);this.pageSize(this._requestedPageSize);this.totalCount(i.length);this._loaded=!0},t.prototype._update=function(n){var h,c,b,v,y;if(this._loaded){var r=this.startIndex.peek()||0,l=r,i=this._requestedPageSize,k=this._source.peek(),d=k.length,g=this.destination.peek(),a=g.length,p=void 0;e(i)||(p=r+a);var f=0,o=[],w=n.length;if(w>0)for(var s=0,t=n[s],u=t.index,nt=0;s<w&&(e(p)||u-nt<p)&&(e(i)||f<i);)t.status==="added"?u>=r?(o.push({status:t.status,index:u-r,value:t.value}),f++):l++:t.status==="deleted"&&(u>=r?(o.push({status:t.status,index:u-r,value:t.value}),f--):l--),s++,s<w&&(t=n[s],u=t.index,nt=t.status==="added"?f:0);if(i)if(h=a+f-i,h>0)for(c=a-h;c<a;c++)o.push({status:"deleted",index:c,value:g[c]});else if(h<0)for(b=i+h,v=l+b,y=b;y<i&&v<d;y++)o.push({status:"added",index:y,value:k[v]}),v++;this._apply(o);this.startIndex(l);this.pageSize(i);this.totalCount(d)}},t})(u)}));
define("FxInternal/Data/SortProjection",["require","exports","f","a","FxInternal/Data/BaseProjection"],(function(n,t,i,r,u){"use strict";return (function(n){function t(t){var i=n.call(this,t)||this;return i._getCompare=t.getCompare,i.refresh(),i}return __extends(t,n),t.prototype.refresh=function(){var n=this._getCompare(),t=this._source.peek(),r=n?i.stableSort(t,n):t;this._replace(r)},t.prototype._update=function(n){var c,o,u,s,e;if(this.refresh(),null){if(c=n.reduce((function(n,t){return t.moved||t.status!=="added"&&t.status!=="deleted"||n.push({status:t.status,value:t.value,index:undefined}),n}),[]),o=this._getCompare(),o&&(u=c.sort((function(n,t){return o(n.value,t.value)})),s=u.length,s)){var i=0,t=u[i],r=0,h=this.destination.peek(),l=h.length,f=0;if(l)for(e=h[r];r<l&&i<s;)o(t.value,e)<=0?t.status==="added"?(t.index=r+f,f++,i++,t=u[i]):t.value===e?(t.index=r,f--,i++,t=u[i]):(r++,e=h[r]):(r++,e=h[r]);while(i<s){if(t.status==="added")t.index=r+f,f++;else throw new Error("Deleted item not present in sorted array");i++;t=u[i]}}this._apply(c)}},t})(u)}));
define("FxInternal/Data/ArrayBaseNavigator",["require","exports","f","i","o","ko","FxInternal/Data/SortProjection","FxInternal/Data/FilterProjection","FxInternal/Data/PageProjection","FxInternal/Data/MapProjection"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var k=i.Base,d=i.Errors.CanceledError,p=k.Promises,a=p.makeCancelable,w=i.initValue,g=i.initObservableArray,b=f.utils,c=f.observable,l=f.observableArray,v=f.isObservable,y;return (function(n){function t(n,t,r){var u=0;return n&&n.length&&n.some((function(n){var f=b.unwrapObservablePath(t,n.property.name),e=b.unwrapObservablePath(r,n.property.name);return v(f)&&(f=f.peek()),v(e)&&(e=e.peek()),u=i.compare(f,e),u&&n.direction===0&&(u=-u),u!==0})),u}n.compare=t})(y||(y={})),(function(){function n(n,t){n.createChildLifetime||(t=n,n=new r.TriggerableLifetimeManager);this._ltm=n.createChildLifetime();this._currentRequest=null;this._getId=t.getId;this._getModel=t.getModel;this._sourceItems=g(t.sourceItems);this._initialQueryParams=null;this._items=l();this._totalItems=c(0);this._startIndex=c(0);this._pageSize=c();this._canLoadMore=c(!0);this._projectionLifetime=null;this._filtered=l();this._sorted=l();this._continued=l();this._paged=l();this._filterProjection=null;this._sortProjection=null;this._continuationProjection=null;this._pageProjection=null;this._mapProjection=null;this.properties=w(t.properties,[]);this.allowedFilterExpressions={};this.searchText=t.searchText||c();this.sortOrder=t.sortOrder||l();this.filterExpression=t.filterExpression||c();this.selectedProperties=t.selectedProperties||l();this.search=t.search;this.filter=t.filter;this.compare=t.compare;this._autoRefresh=w(t.autoRefresh,!0);this._inputParamsPromise=Q(t.inputParams)}return u.defineProperty(n.prototype,"initialized",{get:function(){var n=this;return this._inputParamsPromise.then((function(t){n._initialize(t)}))},enumerable:!0,configurable:!0}),u.defineProperty(n.prototype,"sourceItems",{get:function(){return this._sourceItems},enumerable:!0,configurable:!0}),n.prototype._initialize=function(n){n===void 0&&(n={});this._initialQueryParams=n;n.searchText&&this.searchText(n.searchText);n.filterExpression&&this.filterExpression(n.filterExpression);n.sortOrder&&this.sortOrder(n.sortOrder);n.selectedProperties&&this.selectedProperties(n.selectedProperties)},n.prototype._setProjections=function(){this._projectionLifetime&&this._projectionLifetime.dispose();this._projectionLifetime=this._ltm.createChildLifetime();this._setFilterProjection();this._setSortProjection();this._setContinuationProjection();this._setPageProjection();this._setMapProjection()},n.prototype._setFilterProjection=function(){var n=this;this._filterProjection=new o({lifetime:this._projectionLifetime,source:this._sourceItems,destination:this._filtered,autoRefresh:this._autoRefresh,filter:function(t){return n._filterFunc(t)}})},n.prototype._setSortProjection=function(){var n=this;this._sortProjection=new e({lifetime:this._projectionLifetime,source:this._filtered,destination:this._sorted,autoRefresh:this._autoRefresh,getCompare:function(){return n._getCompare()}})},n.prototype._setContinuationProjection=function(){this._continued=this._sorted},n.prototype._setPageProjection=function(){this._pageProjection=new s({lifetime:this._projectionLifetime,source:this._continued,destination:this._paged,autoRefresh:this._autoRefresh,startIndex:this._startIndex,pageSize:this._pageSize,totalCount:this._totalItems})},n.prototype._setMapProjection=function(){var n=this;this._mapProjection=new h({lifetime:this._projectionLifetime,source:this._paged,destination:this._items,autoRefresh:this._autoRefresh,mapping:function(t){return n._map(t)}})},n.prototype._throw=function(n){throw new Error(n);},n.prototype._validateBounds=function(n,t){(n===null||n===undefined||n===NaN)&&this._throw("skip must be a number");(t===null||t===undefined||t===NaN)&&this._throw("take must be a number");n<0&&this._throw("skip must be greater than or equal to zero");t<=0&&this._throw("take must be greater than zero")},n.prototype._getCompare=function(){var n=this.compare,t=this.sortOrder.peek()||[];return!n&&t.length&&(n=y.compare),n&&function(i,r){return n(t,i,r)}},n.prototype._filterFunc=function(n){if(this.filter&&!this.filter(n))return!1;var t=this.searchText.peek();return(t&&(t=t.trim()),t&&t.length&&this.search&&!this.search(t,n))?!1:!0},n.prototype._createItems=function(n,t){var i=this;if(t&&t.length!==n.length)throw new Error("Data model count must match data item count.");return n.map((function(n,r){var u=i._getId(n);if(v(u))throw new Error("id can not be observable.");return{id:u,data:c(t&&t[r])}}))},n.prototype._map=function(n){var r=this,t=[],i;return n&&n.length&&(this._getModel?(i=this._getModel(n),Q.isPromiseAlike(i)?(t=this._createItems(n),Q(i).then((function(n){r._updateItems(t,n)}))):t=this._createItems(n,i)):t=this._createItems(n,n)),t},n.prototype._updateItems=function(n,t){if(n.length!==t.length)throw new Error("Data model count must match data item count.");for(var i=0;i<t.length;i++)n[i].data(t[i])},n.prototype._queryParamsChanged=function(){},n.prototype._load=function(n,t,i){var r=this;return a(this.initialized,n).then((function(){var n,f,u;r._projectionLifetime||r._setProjections();n=r._continuationProjection;n&&i&&(f=(t||0)+i,u=f-n.totalCount(),u>0&&n.canLoadMore()&&n.loadMore(u));r._pageProjection.loadPage(t,i);r._autoRefresh||r._mapProjection.refresh()}))},n.prototype._refresh=function(n){var t=this;return a(this.initialized,n).then((function(){t._autoRefresh?t._filterProjection&&t._filterProjection.refresh():(t._filterProjection&&t._filterProjection.refresh(),t._sortProjection&&t._sortProjection.refresh(),t._continuationProjection&&t._continuationProjection.refresh(),t._pageProjection&&t._pageProjection.refresh(),t._mapProjection&&t._mapProjection.refresh())}))},n.prototype._loadMore=function(n,t){var i=this;return a(this.initialized,n).then((function(){i._projectionLifetime||(i._setProjections(),i._pageProjection.loadAll());i._continuationProjection.loadMore(t);i._autoRefresh||(i._pageProjection.loadAll(),i._mapProjection.refresh())}))},n.prototype._beginRequest=function(){return this._currentRequest&&(this._currentRequest.cancel(new d("Canceled for new request")),this._currentRequest=null),this._currentRequest=new p.CancelationToken},n.prototype._endRequest=function(n){this._currentRequest===n&&(this._currentRequest=null)},n})()}));
define("FxInternal/Data/ArrayListNavigator",["require","exports","f","FxInternal/Data/ArrayBaseNavigator"],(function(n,t,i,r){"use strict";var u=i.Base.Promises.makeCancelable;return (function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.items=r._items,r.totalItems=r._totalItems,r.startIndex=r._startIndex,r.pageSize=r._pageSize,r.canLoadMore=r._canLoadMore,r}return __extends(t,n),t.prototype.refresh=function(){var t=this,n=this._beginRequest();return u(this.initialized,n).then((function(){return t._refresh(n)})).finally((function(){t._endRequest(n)}))},t.prototype.loadAll=function(){var t=this,n=this._beginRequest();return u(this.initialized,n).then((function(){return t._load(n)})).finally((function(){t._endRequest(n)}))},t.prototype.loadPage=function(n,t){var i=this,r=this._beginRequest();return u(this.initialized,r).then((function(){return i._validateBounds(n,t),i._load(r,n,t)})).finally((function(){i._endRequest(r)}))},t})(r)}))