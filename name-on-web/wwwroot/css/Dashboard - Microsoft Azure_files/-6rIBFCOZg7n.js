define("Shared/DraftBatch",["require","exports","f","o","Fx/Ajax"],(function(n,t,i,r,u){"use strict";function c(n,t,r){var l;n=n.toLowerCase();var c=r.isBackgroundTask,u=c?h:s,e=u.map[n+t];return e||(l=i.ensureSuffix(n,"/")+o,e=u.map[n+t]=new f(function(n,t){return i.merge(n,t)},function(n){for(var t=n;t.length;)n=t,t=n.splice(20),a(n,l,c);return Q()},u.intervalMs,!1,{maxBatchSize:20})),e}function l(n){var t={id:n.id||i.newGuid(),application:n.application,body:n.body,headers:n.headers||{},method:n.method||"GET",path:n.path};return t.headers.Authorization&&delete t.headers.Authorization,t}function a(n,r,f){var e={},o="";return n.length&&n[0].request.headers&&(o=n[0].request.headers.Authorization),u.postJSON({isBackgroundTask:f,setAuthorizationHeader:!1,uri:r,headers:{Authorization:o}},{requests:n.map((function(n){return e[n.request.id]=n,l(n.request)}))}).then((function(n){var r=i.newGuid();return(n.responses||[]).forEach((function(n){var u=y(n),i={},f,o;i.headers=u.headers;i.content=u.content;i.httpStatusCode=u.httpStatusCode;f=e[n.id];f&&(o=f.responseDeferred,i.httpStatusCode>=400?o.reject(i):(typeof i.content=="string"&&(i.content=JSON.parse(i.content)),i.headers||(i.headers={}),i.headers[t.BatchIDHeaderName]=r,o.resolve(i)))})),null}),(function(t){return n.forEach((function(n){n.responseDeferred.reject(t)})),Q(null)}))}function v(n,t,r){var o,u;n.url=n.uri||n.url;n.url=n.url.replace(/api([0-9]*)\./,"api.");r||(o=new e(n.url),u=n.url.match(/\/(?:(beta)|(v1))\//),r=o.getScheme().toLowerCase()+o.getAuthority().toLowerCase()+(u&&u.length?u[0]:""));var s="",h="",f=n.url.match(/\/apps\/([\w\-]*)(.*)/);if(f&&f.length===3)s=f[1],h=f[2];else throw new Error("App ID not found in URL "+n.url);return t=t||"",Q.promise((function(u,f){var e=c(r,t,n);e.execute([{request:{id:i.newGuid(),application:s,path:h,body:typeof n.data=="string"?JSON.parse(n.data):n.data,headers:n.headers||{},method:n.type||"GET"},responseDeferred:{resolve:u,reject:f}}])}))}function y(n){return{content:n.body,headers:n.headers,httpStatusCode:n.status}}r.defineProperty(t,"__esModule",{value:!0});var f=i.Base.Debouncer,e=i.Base.UriBuilder,p=i.Base.Net2;t.BatchIDHeaderName="BatchID";var o="$batch",s={map:{},intervalMs:100},h={map:{},intervalMs:6e4};t.draftBatch=v}));
define("Shared/ShortCircuit404AjaxQuery",["require","exports","o","Shared/Constants","Shared/InsightsTelemetry"],(function(n,t,i,r,u){"use strict";i.defineProperty(t,"__esModule",{value:!0});var f=(function(){function n(){if(n._singletonInstance)throw new Error("Error: Instantiation failed: Use ShortCircuit404AjaxQuery.Instance() instead of new.");this._ajaxFailedStatusMap={}}return n.Instance=function(){return n._singletonInstance||(n._singletonInstance=new n),n._singletonInstance},n.prototype._recordResourceNotFoundAjaxQueryError=function(n,t){if(n&&n._queryName===r.Queries.GetComponent&&t===404){var i=n._componentId,f=this._buildComponentSessionKey(i);this._ajaxFailedStatusMap[f]===undefined&&(u.logCustomEvent("Record 404 for component",2,"ShortCircuit404AjaxQuery",i),this._ajaxFailedStatusMap[f]=0)}},n.prototype._skipAjaxQueryDueToResourceNotFound=function(t){var i=this._buildComponentSessionKey(t);return this._ajaxFailedStatusMap[i]===undefined?!1:(this._ajaxFailedStatusMap[i]+=1,this._ajaxFailedStatusMap[i]%n._logTelemetryFrequency==0&&u.logCustomEvent("_skipAjaxQueryDueToResourceNotFound",2,"ShortCircuit404AjaxQuery",t,{RetryCount:this._ajaxFailedStatusMap[i]}),!0)},n.prototype._buildComponentSessionKey=function(n){var t=u.getCurrentIbizaSessionId();return t+"+"+n.SubscriptionId+"+"+n.Name},n})();f._singletonInstance=null;f._logTelemetryFrequency=1e3;t.ShortCircuit404AjaxQuery=f}));
define("Shared/AjaxCore",["require","exports","f","o","$","Shared/AuthTokenHelper","Shared/Configuration","Shared/Enumerations","Shared/InsightsTelemetry","Shared/ShortCircuit404AjaxQuery","Shared/LoadTimeList","Fx/Ajax","Shared/DraftBatch","Shared/Flighting/FlightingConfiguration"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){"use strict";function k(){return w||(w=new b),w}var y,p,w,b;r.defineProperty(t,"__esModule",{value:!0});t.DefaultTimeout=6e5;t.ClientRequestIdHeaderName="x-ms-client-request-id";t.ClientBladeInstanceIdHeaderName="x-ms-client-blade-instance-id";t.ClientRequestInfoHeaderName="x-ms-client-request-info";t.CacheControlHeaderName="Cache-Control";t.PreferHeaderName="Prefer";t.AppHeaderName="x-ms-app";y="headers";p="Authorization";t.Instance=k;b=(function(){function n(){}return n.prototype.ajax=function(n,r,f,w,b,k,d){var ct=this,tt=b&&b._telemetryContext?b._telemetryContext:undefined,ft,it,et,ot,st,rt,ut;s.performanceMarkStart(tt,"AjaxCore_ajax");n=n||window.performanceNow();var ht={uri:r,headers:f,dataType:"json",contentType:"application/json",traditional:!0,timeout:t.DefaultTimeout},nt=u.extend(ht,w),g={};return b&&b._customProperties&&u.extend(g,b._customProperties),g.Url=r,g.ClientRequestId=f[t.ClientRequestIdHeaderName],g.Type=w&&w.type?w.type:"GET",f["x-ms-app"]="AppInsightsPortalExtension",ft=e.getSettings(),it=u.Deferred(),k.GetUseInvokeApiBegin=window.performanceNow(),k.GetUseInvokeApiEnd=window.performanceNow(),r.indexOf(ft.getCsmUrl())===-1||b&&b._overrideinvokeApi||(nt.invokeApi="api/invoke"),et=this.isDraftUrl(r),et&&!f["x-ms-client-request-id"]&&(r=r+"&clientId="+g.ClientRequestId),nt.uri=nt.url=r,k.QueryBegin=window.performanceNow(),g.VisibilityInitial=s.documentVisibilityConst[c.GetVisibilityState()],s.performanceMarkStart(tt,"AjaxCore_ajax_ajaxExtended"),ot=this._canUseBatchApi(r,nt.data,ft.getCsmUrl()),st=et&&v.FlightConfiguration.getNullComponentIdValue(v.ClientFlights.DraftDebouncingEnabled).toLowerCase()==="true",g.IsBatched=ot||st,ot?rt=l.batch(nt):st?rt=a.draftBatch(nt,b&&b._batchScope):b&&b._dontSendHeaders?(nt.headers={},ut=Q.defer(),rt=ut.promise,u.ajax({url:nt.url,timeout:6e5}).then((function(n,t,i){ut.resolve({content:n,textStatus:t,jqXHR:i})})).catch((function(n){ut.reject(n)}))):rt=Q(i.Base.Net2.ajaxExtended(nt)),rt.then((function(t){var f=t,u=t,h,c,e,i;s.performanceMarkAndMeasure(tt,"AjaxCore_ajax_ajaxExtended");k.QueryEnd=window.performanceNow();h=window.performanceNow()-n;k.EndTime=window.performanceNow();g.Response=f.textStatus;t.content&&typeof t.content=="object"&&(!t.content.ClientRequestId&&g.ClientRequestId&&(t.content.ClientRequestId=g.ClientRequestId),c=u.headers&&u.headers.Age||f.jqXHR&&f.jqXHR.getResponseHeader("Age"),c&&(t.content.Age=c));b&&(b._resultProperties={duration:h});u.headers&&u.headers[a.BatchIDHeaderName]&&(g.BatchID=u.headers[a.BatchIDHeaderName]);try{ct.isDraftUrl(r)&&performance&&typeof performance.getEntriesByName=="function"&&(e=performance.getEntriesByName(r),e&&e.length>0&&(i=e[0],k.Query_Start=i.startTime||0,k.Query_RedirectEnd=i.redirectEnd||0,k.Query_FetchStart=i.fetchStart||0,k.Query_AppCacheEnd=i.domainLookupStart||0,k.Query_DNS_TCPBegin=i.domainLookupStart||0,k.Query_DNS_TCPEnd=i.domainLookupEnd||0,k.Query_RequestBegin=i.requestStart||0,k.Query_ResponseBegin=i.responseStart||0,k.Query_ResponseEnd=i.responseEnd||0,k.Query_Duration=i.duration||0))}catch(l){s.logCustomEvent("AjaxCore.PerformanceLogging",0,"AjaxCore",null,{ErrorObject:l})}return s.logAjaxQuery(b,o.Result.Succeed,k,f.jqXHR,g,h),it.resolve(t.content),t.content}),(function(t){var i=t,e,f,r,c;return s.performanceMarkAndMeasure(tt,"AjaxCore_ajax_ajaxExtended"),k.GetUseInvokeApiEnd=window.performanceNow(),k.EndTime=window.performanceNow(),e=window.performanceNow()-n,i&&!i.jqXHR&&(f=t,i.jqXHR={responseText:JSON.stringify(f.content),status:f.httpStatusCode,response:f.content}),i.jqXHR&&typeof i.jqXHR=="object"&&!i.jqXHR.ClientRequestId&&g.ClientRequestId&&(i.jqXHR.ClientRequestId=g.ClientRequestId),i.textStatus&&(g.Response=i.textStatus),r=u.extend(!0,{},ht),r[y]&&r[y][p]&&delete r[y][p],c=JSON.stringify(r)+"\r\n"+(d&&d()),s.logAjaxQuery(b,o.Result.Fail,k,i.jqXHR,g,e,c),h.ShortCircuit404AjaxQuery.Instance()._recordResourceNotFoundAjaxQueryError(b,i&&i.jqXHR?i.jqXHR.status:undefined),it.reject(i.jqXHR),i.jqXHR})),it.finally((function(){s.performanceMarkAndMeasure(tt,"AjaxCore_apiGet")})),it.promise()},n.prototype.getIbizaAuthorizationHeader=function(n,t){return f.AuthTokenHelper.getIbizaAuthorizationHeaderAsync(n,t)},n.prototype.buildHeaders=function(n,r){var f={},u;return f.Authorization=n,f[t.ClientRequestIdHeaderName]=r?r:i.newGuid(),f["x-ms-client-session-id"]=i.sessionId,f[t.AppHeaderName]="InsightsPortal",u=window.appInsights,u&&u.context&&(u.context.user&&u.context.user.id&&(f["x-ms-user-id"]=u.context.user.id),u.context.session&&u.context.session.id&&(f["x-ms-client-session-id"]=u.context.session.id)),f},n.prototype.isDraftUrl=function(n){return n&&!!n.match("/api.*.applicationinsights.io/")},n.prototype._canUseBatchApi=function(n,t,i){var r=n.split(i);return r.length>1&&!t?r[1].indexOf("/subscriptions")===0||r[1].indexOf("/providers")===0||r[1].indexOf("/resources")===0||r[1].indexOf("/locations")===0||r[1].indexOf("/providers")===0||r[1].indexOf("/tenants")===0:!1},n})();t.AjaxCore=b}));
define("Shared/ResourceTokenCache",["require","exports","o","$","Shared/AjaxCore","Shared/Configuration","Shared/ResourceCore","Shared/DateUtils","Shared/InsightsTelemetry"],(function(n,t,i,r,u,f,e,o,s){"use strict";function y(){return h||(h=new c),h}function p(){h=undefined}var l,a,v,h,c;i.defineProperty(t,"__esModule",{value:!0});l="/subscriptions/{SubscriptionId}/resourcegroups/{ResourceGroup}/providers/microsoft.insights/{ResourceType}/{Name}";t.TokenExpirationTimeMinutes=f.getSettings().getResourceTokenTimeoutMinutes();a=t.TokenExpirationTimeMinutes/2;v=f.getSettings().getResourceTokenTimeSkewMinutes();t.getInstance=y;t._reset=p;c=(function(){function n(){this._cache={};this._pendingRequestCache={}}return n.prototype.getAuthorizationHeader=function(t,i){var f,e,u,s,h;return(i===void 0&&(i=!1),f=r.Deferred(),e=this._buildKey(t),!e)?(f.resolve(null),f.promise()):(u=this._cache[e],u&&(s=new Date,u.expires<o.addMinutes(s,v)?(this._cache[e]=undefined,u=null):(s>o.addMinutes(u.expires,a*-1)&&this._getToken(e),f.resolve(n._HeaderPrefix+u.token))),u||(h=this._getToken(e),i&&h.then((function(t){f.resolve(n._HeaderPrefix+t.token)}),(function(n){f.reject(n)}))),i||f.resolve(u?n._HeaderPrefix+u.token:null),f.promise())},n.prototype._buildKey=function(n){if(e.isFullResourceInfo(n))return l.format(n).toLowerCase()},n.prototype._getToken=function(n){var t=this,i=this._pendingRequestCache[n];if(i)return i;var u=this._buildTokenUrl(n),f=e.resourceIdToResourceInfo(n),r=this._makeTokenRequest(u,f).then((function(i){return t._cache[n]=i,i})).finally((function(){delete t._pendingRequestCache[n]}));return this._pendingRequestCache[n]=r,r},n.prototype._buildTokenUrl=function(n){var t=f.getSettings();return t.getCsmUrl()+n+"/gettoken?api-version="+t.getGraphApiVersion()},n.prototype._makeTokenRequest=function(n,t){var r=window.performanceNow(),i=s.GetEmptyAjaxQueryDetails();return i.StartTime=window.performanceNow(),u.Instance().getIbizaAuthorizationHeader().then((function(f){var e=u.Instance().buildHeaders(f);return u.Instance().ajax(r,n,e,null,{_containerName:null,_componentId:t,_queryName:"GetToken"},i).then((function(n){return{expires:new Date(n.expires),token:n.token}}))}))},n})();c._HeaderPrefix="Bearer ";t.ResourceTokenCache=c}));
define("Shared/Router",["require","exports","f","o","$","Shared/Configuration","Shared/ResourceCore","Shared/Constants","Shared/Flighting/FlightingConfiguration"],(function(n,t,i,r,u,f,e,o,s){"use strict";function v(){return c||(c=new l),c}function y(){c=undefined}function a(n){var t;if(n&&n.RemainingPathSegments)switch(n.ResourceType){case o.ResourceType.Components:if(n.RemainingPathSegments.length>0){if(t=n.RemainingPathSegments[0].toLowerCase(),t==="aggregate"||t==="search"||t==="metricmetadata"||t==="attributemetadata")return h.Graph;if(t.indexOf("query")===0||t.indexOf("metrics")===0||t.indexOf("events")===0)return h.Draft}break;case o.ResourceType.WebTests:if(n.RemainingPathSegments.length>=3)return n.RemainingPathSegments[0].toLowerCase()==="locations"&&n.RemainingPathSegments[2].toLowerCase()==="results"?h.Graph:h.None;break;case o.ResourceType.Workspaces:if(n.RemainingPathSegments.length>0&&(t=n.RemainingPathSegments[0].toLowerCase(),t==="api"))return h.Draft}return h.None}var c,h,l;r.defineProperty(t,"__esModule",{value:!0}),(function(n){n[n.None=0]="None";n[n.Graph=1]="Graph";n[n.Draft=2]="Draft"})(h=t.CsmBypassRoute||(t.CsmBypassRoute={}));t.getInstance=v;t._reset=y;t._getCsmBypassRoute=a;l=(function(){function n(){this._graphHostIndex=0;this._draftHostIndex=0}return n.prototype.getRouteInfo=function(n,t,r,o,s){var l,c,a;o===void 0&&(o=!1);var v=r?r._componentMetadata:undefined,h={originalUrl:n,url:n,resourceId:null,isRedirected:!1},y={ClientRequestId:s,Url:n};return(u.extend(y,r&&r._customProperties?r._customProperties:{}),r&&!i.isNullOrWhiteSpace(r._alternateAuthResourceName)&&(h.alternateAuthResourceName=r._alternateAuthResourceName),!o&&(!f.getSettings().getUseCsmBypass()||!f.getSettings().getUseCsm()||!f.getSettings().getUseCors()))?h:(l=new i.Base.UriBuilder(n),c=e.resourceIdToResourceInfo(l.getRelativePath()),c?(t.ResourceInfoAvailable=!0,t.GetByPassUrlBegin=window.performanceNow(),a=this._getBypassUrl(c,l,v,s,!!(r&&r._alternateAuthResourceName)),t.GetByPassUrlEnd=window.performanceNow(),a&&(h.url=a,h.resourceId=c,h.isRedirected=!0),h):(t.ResourceInfoAvailable=!1,h))},n.prototype._getBypassUrl=function(n,t,r,u,f){var v=undefined,y=t.getOriginalQuery(),tt=a(n),e="",c,g,p,w,k,b,d,l,nt;switch(tt){case h.Graph:c=new i.Base.UriBuilder(t.getScheme()+this._getGraphHost(r));c.setRelativePath(t.getRelativePath());e=decodeURI(c.getRelativePath());g="/data/arm";c.setRelativePath(g+e);v=c.toString()+y;break;case h.Draft:if(p=n&&n.ResourceProvider&&n.ResourceProvider===o.Providers.OperationalInsightsProvider,s.FlightConfiguration.getNullComponentIdValue(s.ClientFlights.DraftDebouncingEnabled).toLowerCase()==="nobypass"&&!p&&!f&&(!n||n.RemainingPathSegments[0]!=="metrics"||!n.RemainingPathSegments[1]||n.RemainingPathSegments[1].indexOf("metadata")<0))return v;if(r&&(p?(w=this._getDraftOmsHost(),k="/v1/workspaces/",b=r.customerId):(w=this._getDraftAIHost(r),k="/v1/apps/",b=r.appId),w&&b)){for(d=new i.Base.UriBuilder(t.getScheme()+w),e="",l=p?1:0,l;l<n.RemainingPathSegments.length;l++)e+="/"+n.RemainingPathSegments[l];d.setRelativePath(k+b+e);nt=/&api-version=[0-9]{4}-[0-9]{2}-[0-9]{2}(-preview)?/g;y=y.replace(nt,"");v=d.toString()+y}}return v},n.prototype._getGraphHost=function(n){var t=f.getSettings().getGraphHosts(n),i=t[this._graphHostIndex++];return this._graphHostIndex===t.length&&(this._graphHostIndex=0),i},n.prototype._getDraftOmsHost=function(){var n=f.getSettings().getDraftOmsHosts();return n[0]},n.prototype._getDraftAIHost=function(n){var t,i;return t=f.getSettings().getDraftHosts(n),i=t[this._draftHostIndex++],this._draftHostIndex===t.length&&(this._draftHostIndex=0),i},n})();t.Router=l}));
define("Shared/TransformHelper",["require","exports","o","$"],(function(n,t,i,r){"use strict";function u(n){var t=null;return n&&n.value&&r.isArray(n.value)&&(t=n.value),t}i.defineProperty(t,"__esModule",{value:!0});t.unwrapCsmArray=u}));
define("Shared/AjaxHelper",["require","exports","f","o","a","$","Shared/AjaxCore","Shared/InsightsTelemetry","Shared/Router","Shared/ResourceTokenCache","Shared/Constants","Shared/TransformHelper","Shared/Constants","Shared/Flighting/FlightingConfiguration","Shared/Flighting/FlightingConfiguration"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){"use strict";function g(n,t,i){return p(n,null,t,i)}function w(n,t,i){return p(n,null,t,i).then((function(n){var r=l.unwrapCsmArray(n);return n&&n.nextLink?w(n.nextLink,t,i).then((function(n){return r.concat(n)})):r}))}function nt(n,t,i,r){return p(n,{type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(i)},t,r)}function b(n,t,i,r){var f="query="+encodeURIComponent(n)+"&part="+encodeURIComponent(t)+"&chart="+encodeURIComponent(i||""),u;if(r)for(u in r)f+="&"+u+"="+encodeURIComponent(r[u]||"");return f}function tt(n,t,i,r){var u={type:"PUT",contentType:"application/json; charset=utf-8",data:JSON.stringify(i)};return i&&("Request_Source"in i&&(u.Request_Source=i.Request_Source),"Application_Type"in i&&(u.Application_Type=i.Application_Type),"Flow_Type"in i&&(u.Flow_Type=i.Flow_Type)),p(n,u,t,r)}function it(n,t,i,r){return p(n,{type:"PATCH",contentType:"application/json; charset=utf-8",data:JSON.stringify(i)},t,r)}function rt(n,t,i){return p(n,{type:"DELETE",contentType:"application/json; charset=utf-8",dataType:"text"},t,i)}function p(n,t,r,u,h){var rt=window.performanceNow(),v=r&&r._telemetryContext?r._telemetryContext:undefined,nt,a,l,y,it;o.performanceMarkStart(v,"AjaxHelper_ajax");try{performance&&typeof performance.getEntries&&performance.getEntries().length>=100&&(nt=typeof performance.clearResourceTimings=="function",nt&&performance.clearResourceTimings())}catch(ut){o.logCustomEvent("AjaxHelper.PerformanceLogging",0,"AjaxHelper",null,{ErrorObject:ut})}a=o.GetEmptyAjaxQueryDetails();a.StartTime=window.performanceNow();var tt=r?r._forceCsmBypass:!1,p=r?r._componentId:undefined,w=i.newGuid(),b;a.GetRouteInfoBegin=window.performanceNow();o.performanceMarkStart(v,"AjaxHelper_ajax_getRouteInfo");l=s.getInstance().getRouteInfo(n,a,r,tt,w);o.performanceMarkAndMeasure(v,"AjaxHelper_ajax_getRouteInfo");a.GetRouteInfoEnd=window.performanceNow();try{r&&l.url&&l.url.indexOf("https://management.azure.com")>=0&&(r._queryName===c.Queries.DraftFetchMetricSeriesAndSummaryBatchingQuery||r._queryName===c.Queries.AnalyticsPartQuery)&&(y={Url:l.url,ClientRequestId:w},l.resourceId&&f.extend(y,{originalUrl:n,isRedirected:l.isRedirected,resourceGroup:l.resourceId.ResourceGroup,resourceId:l.resourceId.Name,subscriptionId:l.resourceId.SubscriptionId}),r._cacheControl&&f.extend(y,{CacheControl:r._cacheControl}),r._customProperties&&f.extend(y,r._customProperties),it="AjaxHelper.ajax: "+r._queryName+" doesn't by pass CSM as expected.",o.logWarning(it,4,undefined,undefined,y,undefined));a.GetAuthHeaderBegin=window.performanceNow();o.performanceMarkStart(v,"AjaxHelper_ajax_getAuthorizationHeader");b=k(p,l,tt,r&&r._customProperties).then((function(n){o.performanceMarkAndMeasure(v,"AjaxHelper_ajax_getAuthorizationHeader");a.GetAuthHeaderEnd=window.performanceNow();var i=d(l,n,r,w);return h&&(h.id=i[e.ClientRequestIdHeaderName]),e.Instance().ajax(rt,l.url,i,t,r,a,u)}),(function(t){var i,e;return o.performanceMarkAndMeasure(v,"AjaxHelper_ajax_getAuthorizationHeader"),i=o._extractProperty(t),r&&r._customProperties&&f.extend(i,r._customProperties),i.Url=n,i.ClientRequestId=w,e="Failed to get authorization header; payload = "+(u?u():"<no payload>"),o.traceMessage(e,4,"AjaxHelper",p,i),f.Deferred().reject(t).promise()}))}catch(g){b=f.Deferred().reject(g).promise();o.logException(g,0,"AjaxHelper",p,"AjaxHelper.ajax");o.traceMessage("AjaxHelper.ajax exception; payload = "+(u?u():" <no payload>"),0,"AjaxHelper",p);throw g;}return b.finally((function(){o.performanceMarkAndMeasure(v,"AjaxHelper_ajax")})),b}function k(n,t,r,u){var f=v.FlightConfiguration.getNullComponentIdValue(y.ClientFlights.DraftDebouncingEnabled),o;return(f.toLowerCase()==="true"||f.toLowerCase()==="aad")&&e.Instance().isDraftUrl(t.url)?(u&&(u.AuthType="AAD"),e.Instance().getIbizaAuthorizationHeader(n,a.AlternateAuthResourceName.AI)):t.isRedirected&&i.isNullOrWhiteSpace(t.alternateAuthResourceName)?ut(n,t,r,u):(u&&(u.AuthType="AAD"),o=t.isRedirected?t.alternateAuthResourceName:null,e.Instance().getIbizaAuthorizationHeader(n,o))}function ut(n,t,i,r){return h.getInstance().getAuthorizationHeader(t.resourceId,i).then((function(i){return i?(r&&(r.AuthType="Resource"),i):(t.url=t.originalUrl,t.isRedirected=!1,r&&(r.AuthType="AAD-AttemptedResource"),e.Instance().getIbizaAuthorizationHeader(n))}))}function d(n,t,i,r){var u=e.Instance().buildHeaders(t,r);return n&&n.isRedirected&&(u["x-original-request-uri"]=encodeURI(n.originalUrl)),i&&(u[e.ClientRequestInfoHeaderName]=b(i._queryName,i._containerName,i._chartId,i._requestInfoProperties),i._customProperties&&i._customProperties.HostingBladeInstance&&(u[e.ClientBladeInstanceIdHeaderName]=i._customProperties.HostingBladeInstance),i._cacheControl&&(u[e.CacheControlHeaderName]=i._cacheControl),i._prefer&&(u[e.PreferHeaderName]=i._prefer)),u}function ft(n){switch(n){case 500:case 502:case 503:case 504:return!0;default:return!1}}function et(n){return n===c.ThrottledStatusCode}function ot(n,t){var r=new Blob([t],{type:"application/octet-stream"});if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,n);else{var f=window.URL||window.webkitURL,u=f.createObjectURL(r),i=document.createElement("a");i.download!==undefined?(i.download=n,i.href=u,i.target="_self",document.body.appendChild(i),i.click(),document.body.removeChild(i)):window.location.assign(u)}}r.defineProperty(t,"__esModule",{value:!0});t.apiGet=g;t.apiGetArray=w;t.apiPost=nt;t.createQueryInfoHeader=b;t.apiPut=tt;t.apiPatch=it;t.apiDelete=rt;t.ajax=p;t.getAuthorizationHeader=k;t.buildHeaders=d;t.isHTTPServerError=ft;t.isHTTPTooManyRequestsError=et;t.saveFile=ot}))