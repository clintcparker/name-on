define("Shared/UrlHelper",["require","exports","f","o","$","Shared/Configuration","Shared/Constants","Shared/ResourceCore","Shared/InsightsTelemetry"],(function(n,t,i,r,u,f,e,o,s){"use strict";function y(n,t){return v(t.subscriptionId,t.resourceGroup,n,t,t.queryParams)}function h(n,t){return e.GraphPathTemplates.CsmBase.format({subscriptionId:n,resourceGroup:t})}function c(n){return e.GraphPathTemplates.CsmSubscriptionBase.format({subscriptionId:n})}function l(n,t,i,r,l,v){var k,g,tt;k=n===""?"/{graphPath}".format({graphPath:i}):t===""?"{csmPath}/{graphPath}".format({csmPath:c(n),graphPath:i}):"{csmPath}/{graphPath}".format({csmPath:h(n,t),graphPath:i});r||(r={});var nt=u.extend({},r),y=undefined,d=k.toLowerCase();if(d.indexOf(e.Providers.InsightsProvider)!==-1)if(g=o.resourceIdToResourceInfo(k,t!=="",!1),g)switch(g.ResourceType){case e.ResourceType.AlertRules:y=f.getSettings().getAlertRulesApiVersion();break;case e.ResourceType.AlertRulesV2:y="2017-09-01-preview";break;case e.ResourceType.Features:y=f.getSettings().getFeaturesApiVersion();break;case e.ResourceType.EventTypes:y=f.getSettings().getEventTypesApiVersion();break;case e.ResourceType.MyWorkbooks:y=v.isAIMON?f.getSettings().getPrivateWorkbooksApiVersion():f.getSettings().getWorkbooksApiVersion();break;case e.ResourceType.Workbooks:y=f.getSettings().getWorkbooksApiVersion();break;default:y=p(g)?f.getSettings().getComponentsGraphPreviewVersion():w(g)?f.getSettings().getDraftApiVersion():b(g)?f.getSettings().getBillingPricingPlanV2018ApiVersion():f.getSettings().getGraphApiVersion()}else y=f.getSettings().getGraphApiVersion(),tt={},tt.Url=k,s.logWarning("Cannot parse resourceInfo for the given path; default GraphAPI version will be used.",4,"buildGraphPath",undefined,tt);else y=d.indexOf(e.Providers.WebSitesProvider)!==-1?f.getSettings().getWebSitesApiVersion():d.indexOf(e.Providers.SqlProvider)!==-1?f.getSettings().getSqlApiVersion():d.indexOf(e.Providers.StorageProvider)!==-1?f.getSettings().getStorageApiVersion():d.indexOf(e.Providers.ClassicStorageProvider)!==-1?f.getSettings().getClassicStorageApiVersion():d.indexOf(e.Providers.OperationalInsightsProvider)!==-1?f.getSettings().getOmsApiVersion():d.indexOf(e.Providers.AlertsManagementProvider)!==-1?f.getSettings().getAmsApiVersion():f.getSettings().getCsmApiVersion();return nt["api-version"]||(nt["api-version"]=y),l||(k=a(k,nt)),k}function a(n,t){return i.isEmpty(t)||t.length===0?n:n+(n.indexOf("?")===-1?"?"+u.param(t):"&"+u.param(t))}function p(n){return n.ResourceType===e.ResourceType.Components&&i.findIndex(n.RemainingPathSegments,(function(n){return n.toLowerCase()==="workitems"||n.toLowerCase()==="hasworkitemsauthorization"||n.toLowerCase()==="authorizationtoken"}))>=0}function w(n){return n.ResourceType===e.ResourceType.Components&&i.findIndex(n.RemainingPathSegments,(function(n){var t=n.toLowerCase();return t.indexOf("query")===0||t.indexOf("metrics")===0||t.indexOf("events")===0}))>=0}function b(n){return n.ResourceType===e.ResourceType.Components&&i.findIndex(n.RemainingPathSegments,(function(n){return n.toLowerCase()==="pricingplans"}))>=0}function v(n,t,i,r,u){var e=l(n,t,i.format(r),u,null,r),o=f.getSettings(),s=o.getCsmUrl();return s+e}function k(){return"axxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g,(function(){var n=Math.random()*16|0,t=n;return t.toString(16)}))}function d(n){var t=f.getSettings().getPortalRedirectionUrl(),r=new i.Base.UriBuilder(t+"&"+n);return r.toString()}r.defineProperty(t,"__esModule",{value:!0});t.getUrlFromGraphTemplate=y;t.buildCsmPath=h;t.buildCsmPathWithSubscription=c;t.buildGraphPath=l;t.addQueryString=a;t.buildGraphProxyPath=v;t.getGuidStartingWithLetter=k;t.getRedirectionLink=d}))