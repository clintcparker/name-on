var __extends=this&&this.__extends||(function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}})();define("WebsitesExtension/TypeScript/ContinuousDeployment/Commands/Sync",["require","exports","f","o","ko","Websites/ClientResources/GeneralResources","WebsitesExtension/TypeScript/Models/WebsiteResourceId","WebsitesExtension/TypeScript/Shared/SharedArea","WebsitesExtension/TypeScript/Operations/Operations.Scm","WebsitesExtension/TypeScript/ContinuousDeployment/Models/ProviderType"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){var t=(function(n){function t(t,r,f){var e=n.call(this)||this;return e.icon(i.Base.Images.Refresh()),e._scmInfoEntityView=f.websitesData.scmInfoCache.createView(t),e._websiteEntityView=o.DataContext.instance.websitesData.
websiteCache.createView(t),e.enabled(!1),u.reactor(t,(function(){e._scmInfoEntityView.item()&&typeof e._scmInfoEntityView.item().ScmType()!="undefined"&&(e._scmType=e._scmInfoEntityView.item().ScmType(),e._scmType===h.ProviderType.GitHub||e._scmType===h.ProviderType.Bitbucket||e._scmType===h.ProviderType.OneDrive||e._scmType===h.ProviderType.Dropbox||e._scmType===h.ProviderType.External?e.enabled(!0):e.enabled(!1))})),e}return __extends(t,n),t.prototype.dialogClick=function(n){n===6&&s.SyncSCM(this._websiteEntityView.item())},t.prototype.execute=function(){var n=h.ProviderType[this._scmType],t=f.SyncScm.confirmationMessage.format(n),r=new i.ViewModels.Dialogs.MessageBox(f.SyncScm.title,t,4);this.dialog(r)},t.prototype.onInputsSet=function(n){return this._websiteResourceId=n.id.Name?n.id:e.WebsiteResourceId.fromCsmResourceId(n.id),Q.all([this._scmInfoEntityView.fetch(this._websiteResourceId),this._websiteEntityView.fetch(this._websiteResourceId)])},t})(i.ViewModels.Command);n.SyncCommand=t})
(c||(c={})),c}))