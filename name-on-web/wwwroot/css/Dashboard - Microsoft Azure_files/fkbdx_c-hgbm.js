define("Fx/Composition/ViewModelBase",["require","exports"],(function(){"use strict";var n;return (function(n){function i(){}var t;(function(n){var t;(function(n){n[n.PerPartOrBladeType=0]="PerPartOrBladeType";n[n.PerId=1]="PerId"})(t||(t={}));n.SettingsScope=t})(t=n.Configurable||(n.Configurable={}));n.ProxiedMember=i})(n||(n={})),n}));
define("Fx/Composition/TemplateBlade",["require","exports","Fx/Composition/ViewModelBase"],(function(n,t,i){"use strict";var r;return (function(n){function t(n){return function(t){var i=t._fx||(t._fx={});i.itemType=3;i.options=n}}var r,u,f,e,o,s,h;n.Decorator=t,(function(n){function t(){return function(n){(n._fx||(n._fx={})).rebindable=!0}}n.Decorator=t})(r=n.Rebindable||(n.Rebindable={})),(function(n){function t(n){return function(t){(t._fx||(t._fx={})).configurableOptions=n||{}}}n.Decorator=t})(u=n.Configurable||(n.Configurable={})),(function(n){function t(){return function(){}}n.Decorator=t})(f=n.ReturnsData||(n.ReturnsData={})),(function(n){function t(){return function(){}}n.Decorator=t})(e=n.Pinnable||(n.Pinnable={})),(function(n){function t(){return function(n){(n._fx||(n._fx={})).doesProvisioning=!0}}n.Decorator=t})(o=n.DoesProvisioning||(n.DoesProvisioning={})),(function(n){function t(){return function(){}}n.Decorator=t})(s=n.LegacyFeatures||(n.LegacyFeatures={})),(function(n){function t(){return function(){}}n.Decorator=t})(h=n.ForContextPane||(n.ForContextPane={}));n.ProxiedMember=i.ProxiedMember})(r||(r={})),r}));
define("FxInternal/Composition/CompositionItem",["require","exports","o"],(function(n,t,i){"use strict";i.defineProperty(t,"__esModule",{value:!0});var r;(function(n){n[n.Blade=0]="Blade";n[n.FrameBlade=1]="FrameBlade";n[n.MenuBlade=2]="MenuBlade";n[n.TemplateBlade=3]="TemplateBlade";n[n.ButtonPart=4]="ButtonPart";n[n.FramePart=5]="FramePart";n[n.Part=6]="Part";n[n.TemplatePart=7]="TemplatePart"})(r=t.ItemType||(t.ItemType={}))}));
define("FxInternal/Composition/ViewModelAdapters.DoesProvisioning",["require","exports","f","o"],(function(n,t,i,r){"use strict";function o(n,t,i){var r,e=new f(n,null,{supplyTemplateDeploymentOptions:function(){return Q(r)},supplyGalleryCreateOptions:function(){return u(t.marketplaceItem)}}),o=t.provisioningConfig,s={dontDiscardJourney:o&&o.dontDiscardJourney,supplyDashboardPartReference:i,galleryCreateOptions:u(t.marketplaceItem),provisioningEnabled:!0};return e.provisioningConfig(s),function(n){return r=n,Q(e.startProvisioning(n.parameters))}}function s(n,t){var i,r=new e(n,{supplyProvisioningPromise:function(){return i},supplyStartboardInfo:function(){return null}}),u=t.provisioningConfig,f={dontDiscardJourney:u&&u.dontDiscardJourney,provisioningEnabled:!0};return r.provisioningConfig(f),function(n){return i=n.provisioningPromise,Q(r.startProvisioning(null))}}function u(n){return n?{galleryItem:n,launchingContext:n&&n.launchingContext,subscriptionId:null,subscriptionDisplayName:null,resourceGroupName:null,resourceGroupLocation:null,resourceGroupLocationDisplayName:null,deploymentName:n&&n.deploymentName,deploymentTemplateFileUris:n&&n.deploymentTemplateFileUris,deploymentFragmentFileUris:n&&n.deploymentFragmentFileUris}:null}r.defineProperty(t,"__esModule",{value:!0});var f=i.Azure.ResourceManager.Provisioner,e=i.ViewModels.ParameterCollectionV3.Provisioner;t.createDeployTemplate=o;t.createDeployCustom=s}));
define("FxInternal/Composition/ViewModelAdapters",["require","exports","f","i","o","ko","FxInternal/Composition/CompositionItem","FxInternal/Composition/ViewModelAdapters.DoesProvisioning"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){function r(n,t,i,r,u){if(u in r){var f=r[u],e=t[i];h(f)?(e(f()),f.subscribe(n,e)):e(c(f,r))}}function c(n,t){return typeof n=="function"&&!h(n)?n.bind(t):n}function w(n,t){return y.reduce((function(i,r){var u=n[r];return u&&(i[r]=t?u.bind(n):u),i}),{})}var t=f.observable,h=f.isObservable,s={title:!0,subtitle:!0},l={Blade:s,FrameBlade:s,MenuBlade:s,TemplateBlade:s,ButtonPart:{title:!0,shortTitle:!0,description:!0,icon:!0},FramePart:{},Part:{},TemplatePart:{}},a={icon:!0,actionBar:!0,parameterProvider:!0,commandBar:!0,statusBar:!0},v={onInitialize:!0,context:!0,onRebind:!0},y=["onPin","getFilterDefinitions","getDynamicFilterDefinitions","getLocalizedFilterValues",],p=(function(){function n(n,r,o,s){var h=this,d,l,v,a,c,k,g,p,nt,b;if(this._viewModelClass=s,this.menuContent={title:f.observable(),subtitle:f.observable()},this._msPortalFx_viewModelApiV2=!0,this._msPortalFx_contentRevealedOnce=f.observable(!1),this._adapterState=0,this._container=n,d=this._container.revealContent||i.noop,this._container.revealContent=function(){h._finalizeContent();d.call(h._container);h._afterRevealContentCalled&&h._afterRevealContentCalled(h._viewModel)},l=this._viewModelClass._fx,l.itemType===undefined&&(l.itemType=l.isPart?6:0),v=this._itemType=l.itemType,a=this._isPart=e.ItemType[v].indexOf("Part")>=0,a||(this.subtitle=t(),this.icon=t(),this.statusBar=t(),this.helpContentUri=t()),a&&v!==4||(this.title=t()),v===4&&(this.shortTitle=t(),this.description=t(),this.size=t(),this.icon=t()),a||(this._container.statusBar=t(),u.defineProperty(this._container,"statusBar",{enumerable:!1}),u.defineProperty(this._container,"commandBar",{get:function(){return h.commandBar},set:function(n){if(h._adapterState&2)throw new Error("'container.commandBar' must be set before the Blade's content is revealed (before 'container.revealContent(...)' is called and/or before the Promise returned from 'onInitialize(...)' is resolved).");h.commandBar=n},enumerable:!1}),this._container.icon=t(),u.defineProperty(this._container,"icon",{enumerable:!1}),this._container.icon.subscribe(this._container,this.icon)),c={container:this._container,model:o,parameters:null,dashboard:this._container.dashboard},a||(c.form=this._container.form,this._container.menu&&(c.menu=i.extend2(this._container.menu,{titleSuffix:f.observable(),subtitleSuffix:f.observable()}))),l.configurableOptions){var tt=c,y=this._container.activateConfiguration(),it=y.updateValues;y.updateValues=function(){return it.call(y,arguments[0],arguments.length>=2?arguments[1]:!1)};tt.configuration=y}!this._isPart&&this._viewModelClass._fx.doesProvisioning&&(c.provisioning={initialValues:undefined,marketplaceItem:undefined,telemetryId:undefined,deployTemplate:undefined,deployCustom:undefined});k=this._isPart&&this._viewModelClass._fx.filterable;k&&(g=function(n){return h._msPortalFxV2ShellApi.updateFilters.fxAwaitAndRun(h._container).then((function(t){return Q(t(n))}))},c.dashboard=i.extend2(this._container.dashboard,{filtering:{filterModels:undefined,updateFilters:g}}));p=this._viewModel=new this._viewModelClass;p.context=c;nt=w(p,!0);this._msPortalFxV2ShellApi=i.extend(nt,{updateFilters:k&&f.observable()});a&&(b=p.onClick,!b||typeof b=="function"||(this._container.clickableLink=b))}return n.prototype.onInputsSet=function(n,t,r,f){var c=this,l,v,y,k,p;if(n=i.clone(n),this._viewModelClass._fx.ownsEditScope&&(l=n.editScopeId,delete n.editScopeId),this._viewModelClass._fx.parameterProvider&&(delete n.editScopeId,u.keys(n).forEach((function(t){t.startsWith("internal_")&&delete n[t]}))),!this._isPart&&this._viewModelClass._fx.doesProvisioning){var g=this._viewModel.context.provisioning,h=n._provisioningContext,s=h.provisioningConfig,nt=function(n){return s&&s.dashboardPartReference&&new i.Composition.PartReference(s.dashboardPartReference.partName,(t={},t[s.dashboardPartReference.dashboardPartKeyId]=n,t),s.dashboardPartReference.options);var t};i.extend(g,{initialValues:h.initialValues,marketplaceItem:h.marketplaceItem,telemetryId:h.telemetryId,deployTemplate:o.createDeployTemplate(this._container,n._provisioningContext,nt),deployCustom:o.createDeployCustom(this._container,n._provisioningContext)});delete n._provisioningContext}var e=this._viewModel.context,w=function(n,t){if(t===void 0&&(t=!0),!n)throw new Error((t?"'onInitialize'":"'onRebind'")+" must return a Promise that covers the full initialization of the "+(c._isPart?"Part":"Blade")+", including data-loading.");},a=this._isPart&&this._viewModelClass._fx.filterable,b=function(){e.parameters=n;l&&(e.editScopeId=l);c._viewModelClass._fx.configurableOptions&&(e.settings=t&&t.content||{});a&&(e.dashboard.filtering.filterModels=f||{})};if(this._adapterState&1){if(y=this._viewModelClass._fx.rebindable,!r&&!(y||a)){k=(this._isPart?"Part":"Blade")+" does not support rebinding. Use the '@Rebindable.Decorator()' decorator.";throw new Error(k);}var d=function(n,t){return i.union(u.keys(n),u.keys(t)).filter((function(r){return!i.deepEquals(n[r],t[r])}))},tt=y&&{parameterKeys:d(e.parameters,n)},it=a&&{filterIds:d(e.dashboard.filtering.filterModels||{},f)},rt=i.extend2(tt,it);return b(),r?Q():(p=this._viewModel.onRebind(rt),w(p,!1),Q(p))}return b(),v=this._viewModel.onInitialize(),w(v),this._adapterState|=1,this._adaptProxiableProperties(),Q(v).then((function(){c._finalizeContent()}))},n.prototype._finalizeContent=function(){var t=this,n;this._adapterState&2||(this._msPortalFx_contentRevealedOnce(!0),this._adapterState|=2,this._adaptProxiableProperties(),this._isPart?(this._itemType!==4&&r(this._container,this._container,"partTitle",this._viewModel,"title"),r(this._container,this._container,"assetName",this._viewModel,"subtitle")):(r(this._container,this,"statusBar",this._container,"statusBar"),n=this._viewModel.context,n.menu&&(r(this._container,this.menuContent,"title",n.menu,"titleSuffix"),r(this._container,this.menuContent,"subtitle",n.menu,"subtitleSuffix"))))},n.prototype._adaptProxiableProperties=function(){var t=this,i=l[e.ItemType[this._itemType]];for(var n in this._viewModel)v[n]||i[n]||!this._isPart&&a[n]||(!n.startsWith("_")||n.startsWith("_msPortalFx"))&&(this[n]=c(this._viewModel[n],this._viewModel));u.keys(i).forEach((function(n){r(t._container,t,n,t._viewModel,n)}))},n})();n.ViewModelAdapter=p})(s||(s={})),s}));
define("Fx/Composition/ViewModelAdapters",["require","exports","FxInternal/Composition/ViewModelAdapters"],(function(n,t,i){"use strict";var r;return (function(n){n.ViewModelAdapter=i.ViewModelAdapter})(r||(r={})),r}));
define("FxInternal/Controls/Essentials",["require","exports","f","i","o","ko"],(function(n,t,i,r,u,f){"use strict";var a,v;u.defineProperty(t,"__esModule",{value:!0});var y=i.ViewModels.Controls.Base.ViewModel,s=i.Assets,o=i.Base,h=r.Extension,e=i.ViewModels.Services.ResourceTypes,c=r.Composition.Selectable.PdlBladeReference,p=i.Azure.ResourceManager.getMoveResourceBlade,l=i.Azure.getSubscriptionInfo,w=o.Constants.ExtensionNames.Hubs,b=(function(n){function t(t,r){var u=n.call(this,t)||this;return u._container=t,u.controlType=120,u.optionType=r.resourceId?r.additionalRight?1:2:3,u.options=r,u.disabled=f.observable(!1),u.resource=i.initObservable(r.resource,null),u.expanded=f.isObservable(r.expanded)?r.expanded:f.observable(!0),u.status=r.resourceId?f.observable("--"):undefined,u.dynamicLeftArray=f.observableArray([]),u.dynamicRightArray=f.observableArray([]),u.newTags=f.observable(null).extend({notify:"always"}),u}return __extends(t,n),t.prototype.addDynamicProperties=function(n,t){var i=this.dynamicLeftArray,r=this.dynamicRightArray;i(i().concat(n));r(r().concat(t))},t.prototype.modifyStatus=function(n){this.status(n)},t.prototype.openBlade=function(n,t){var i=this,r;if(this.options.onBladeOpen)this.options.onBladeOpen(n);return(r=u.getOwnPropertyNames(t),~r.indexOf("key")&&~r.indexOf("value"))?this._container.openBladeAsync(Q(new a({tagName:t.key,tagValue:t.value},function(){i._runOnBladeClose(n)}))):~r.indexOf("tag")?this._container.openContextPaneAsync(Q(new v({resource:t.resourceId,tagName:t.tag},function(t,r){i._runOnBladeClose(n);t===2&&r.update&&i.newTags(r.newTags)}))):~r.indexOf("moveType")?this._container.openBladeAsync(Q(s.mapDynamicBladeSelectionToBladeReference(p(t.resourceId,t.moveType).bladeSelection,(function(){i._runOnBladeClose(n)})))):this._container.openBladeAsync(Q(s.mapResourceIdToBladeReference(t.resourceId,(function(){i._runOnBladeClose(n)}))))},t.prototype._runOnBladeClose=function(n){if(this.options.onBladeClose)this.options.onBladeClose(n)},t.prototype.getResourceInfo=function(n,t,r){if(e.isResourceId(n)){var s=e.parseResourceManagerDescriptor(n),v=e.parseResourceDescriptor(n).type,c=h.getRuntime(),u={resourceGroupName:s.resourceGroup,resourceGroupId:null,subscriptionName:null,subscriptionId:s.subscription,location:null,tags:null,moveOptions:{resourceGroup:!1,subscription:!1}};return o.Promises.cancelOnDispose(this._container,Q(c.getResource(n,"EssentialsControl-"+v,r).then((function(n){return i.extend(u,{location:n.locationString,resourceGroupId:n.resourceGroup,tags:t&&n.tags}),l(u.subscriptionId)})).then((function(n){return i.extend(u,{subscriptionName:n.displayName,moveOptions:{resourceGroup:!0,subscription:!0}})}))))}if(e.isResourceGroupId(n)){var a=e.parseResourceGroupDescriptor(n),c=h.getRuntime(),f={resourceGroupName:a.resourceGroup,resourceGroupId:null,subscriptionName:null,subscriptionId:a.subscription,location:null,tags:null,moveOptions:{resourceGroup:!1,subscription:!1}};return o.Promises.cancelOnDispose(this._container,Q(c.getResourceGroup(n,"EssentialsControl-group",r).then((function(n){return i.extend(f,{location:n.locationString,resourceGroupId:n.id,tags:t&&n.tags}),l(f.subscriptionId)})).then((function(n){return i.extend(f,{subscriptionName:n.displayName,moveOptions:{resourceGroup:!1,subscription:!0}})}))))}},t})(y);t.ViewModel=b;a=(function(n){function t(t,i){return n.call(this,"ResourcesWithTagBlade",o.Constants.ExtensionNames.Hubs,{onClosed:i,parameters:t})||this}return __extends(t,n),t})(c);v=(function(n){function t(t,i){return n.call(this,"EditTagsBlade",w,{onClosed:i,parameters:t})||this}return __extends(t,n),t})(c)}));
define("Fx/Controls/Essentials",["require","exports","o","ko","FxInternal/Controls/Essentials"],(function(n,t,i,r,u){"use strict";function f(n,t){var i;return r.ignoreDependencies((function(){i=new u.ViewModel(n,t)})),i}i.defineProperty(t,"__esModule",{value:!0});t.create=f;t.ViewModel=u.ViewModel}))