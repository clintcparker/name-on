define("_generated/Less/Viva.Controls/Controls/Visualization/Viva.ChartBase.css",["require","exports","o","module"],(function(n,t,i,r){"use strict";i.defineProperty(t,"__esModule",{value:!0});window.fx.injectCss(r,".azc-chartBase .azc-chart-axis{pointer-events:none}.azc-chartBase .azc-chart-axis .azc-chart-axis-x text,.azc-chartBase .azc-chart-axis .azc-chart-axis-y text,.azc-chartBase .azc-chart-axis .azc-chart-secondary-axis-x text,.azc-chartBase .azc-chart-axis .azc-chart-secondary-axis-y text{font-size:10px;stroke-width:0}.azc-chartBase .azc-chart-axis .azc-chart-axis-x .azc-chart-axis-caption{text-anchor:middle}.azc-chartBase .azc-chart-axis .azc-chart-axis-y .azc-chart-axis-caption{text-anchor:end}.azc-chartBase .azc-chart-axis .azc-chart-axis-x line,.azc-chartBase .azc-chart-axis .azc-chart-axis-x path,.azc-chartBase .azc-chart-axis .azc-chart-axis-y line,.azc-chartBase .azc-chart-axis .azc-chart-axis-y path,.azc-chartBase .azc-chart-axis .azc-chart-secondary-axis-x line,.azc-chartBase .azc-chart-axis .azc-chart-secondary-axis-x path,.azc-chartBase .azc-chart-axis .azc-chart-secondary-axis-y line,.azc-chartBase .azc-chart-axis .azc-chart-secondary-axis-y path{fill:none;shape-rendering:crispEdges;stroke-width:1px}.azc-chartBase .azc-chart-axis .azc-chart-area-border-line{stroke-width:1px;stroke:#dcdfe2}.azc-chartBase .azc-chart-axis .azc-chart-axis-hidden-line path,.azc-chartBase .azc-chart-axis .azc-chart-axis-hidden-ticks .azc-chart-axis-tick-line{stroke-width:0}.azc-chartBase .azc-chart-axis .azc-chart-axis-ticks .azc-chart-axis-tick-line{stroke-width:1px}.azc-chartBase .azc-chart-background{stroke-width:0;fill-opacity:0}.azc-chartBase .azc-chart-axis-gridline{stroke-width:1px;pointer-events:none}.azc-chartBase .azc-chart-background:not(.azc-chart-noninteractive),.azc-chartBase .azc-chart-data:not(.azc-chart-noninteractive){pointer-events:all}")}));
define("Viva.Controls/Controls/Visualization/Viva.ChartBase",["require","exports","f","o","a","ko","$","d3","Viva.Controls/Util/Viva.ArrayUtil","Viva.Controls/Controls/Base/Viva.Base","Viva.Controls/Util/Viva.DateUtil","MsPortalFx/Globalization","Viva.Controls/Util/Viva.Hatching","MsPortalImpl/Base/Base.BrowserDetection","MsPortalImpl/Base/Base.Timers","_generated/Less/Viva.Controls/Controls/Visualization/Viva.ChartBase.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){"use strict";var p;return (function(t){function p(n,t){ei[Number(n)]=t}function g(n){return function(t){var i=ei[Number(n.chartType())]();return t&&i.seriesName(t.name()),i}}function pr(n){var t=n&&n.getElementsByTagName("text")[0];if(t&&t instanceof SVGTextElement)return t}function af(n,t,i){var r=null;return t&&(r=n===0||n===2?i*t.a+t.e:i*t.d+t.f),r}function vf(n,t,i){var r=null;return t&&(r=n===0||n===2?i/t.a-t.e:i/t.d-t.f),r}function gr(n){var i,r=n.getAttribute("transform")||"",t=/translate\(\s*([^\s,)]+)/.exec(r);return t&&t.length>1&&(i=parseFloat(t[1])),i}var e=i.isNullOrUndefined,tu=i.Base,iu=tu.Diagnostics,w=i.UnitConversionUtil,ft=jQuery,b=[],ru=30,uu=15,fu=-25,eu=0,ou=15,hi="-0.32em",ci="1.3em",su="-0.32em",yt="0.8em",et="-0.8em",pt="0.15em",hu="-0.15em",cu="0.5em",li="-0.5em",lu="1.6em",au="-3px",ai="azc-chartBase",vi="azc-fill-default",vu=".azc-chart-canvas",yu=".azc-chart-background",yi=".azc-chart-data",pi="azc-chart-noninteractive",pu="azc-chart-hovered",wu="azc-chart-selected",wi=".azc-chart-axis",bu="azc-chart-axis-x",ku="azc-chart-axis-y",du="azc-chart-secondary-axis-x",gu="azc-chart-secondary-axis-y",bi="azc-chart-axis-gridline",ki=".azc-chart-axis-gridline",nf="azc-chart-axis-hidden-line",tf="azc-chart-axis-hidden-ticks",rf="azc-chart-axis-ticks",uf="azc-chart-axis-tick-line",ff="azc-chart-axis-slider",di="azc-chart-axis-slider-line",gi="azc-chart-axis-slider-text",ef="rotate({0})",ot="translate({0},{1})",of="<div class='fxs-hide-accessible-label' aria-hidden='true' data-bind='attr:{id: $ctl._descId}, text:$ctl._ariaDesc'><\/div><div class='azc-chart-series-live fxs-hide-accessible-label' role='status' aria-live='off' aria-relevant='additions' aria-atomic='true' data-bind='text: $ctl._seriesLiveData'><\/div><div class='azc-chart-item-live fxs-hide-accessible-label' role='status' aria-live='off' aria-relevant='additions' aria-atomic='true' data-bind='text: $ctl._chartItemLiveData'><\/div><svg focusable='false' xmlns='http://www.w3.org/2000/svg' class='azc-chart-canvas' aria-hidden='true' data-bind='attr: { width: data.width, height: data.height }'><g class='azc-chart-background'><rect class='azc-chart-background-full' data-bind='attr: { width: data.width, height: data.height }' /><\/g><g class='azc-chart-axis'><\/g><svg focusable='false' class='azc-chart-plotArea' data-bind='attr: { width: data.width, height: data.height }' preserveAspectRatio='none'><g class='azc-chart-data'><\/g><\/svg><line class='azc-chart-area-border-line' data-bind='attr: { x1: 0, y1: 0, x2: data.width, y2: 0 }' /><line class='azc-chart-area-border-line' data-bind='attr: { x1: 0, y1: $ctl._height, x2: data.width, y2: $ctl._height }' /><\/svg>",nr=1e3,wt=60*nr,tr=60*wt,bt=24*tr,sf=30*bt,hf=365*bt,cf=1,k,kt,dt,st,ir=0,lf=iu.createLog(n),it,gt,rr,ht,ur,fr,rt,er,or,sr,ut,ni,hr,ti,d,ii,cr,a,ri,ct,ui,fi,ei,nt,lr,ar,vr,lt,yr,wr,br,at,kr,oi,vt,si,dr,tt,nu;(function(n){n[n.All=0]="All";n[n.XSlider_Off=1]="XSlider_Off";n[n.XSlider_noCallout=2]="XSlider_noCallout";n[n.ChartArea_Off=4]="ChartArea_Off";n[n.ChartArea_noClick=8]="ChartArea_noClick";n[n.ChartArea_noHover=16]="ChartArea_noHover"})(it=t.InteractionBehavior||(t.InteractionBehavior={}));gt=(function(){function n(){this.context=f.observable(0);this.style=f.observable(0);this.formatter=f.observable(null)}return n})();t.DataLabel=gt;rr=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartItems=f.observableArray(),t.context=f.observable(5),t}return __extends(t,n),t})(gt);t.CustomDataLabel=rr;ht=(function(){function n(n,t){this.name=f.observable("");this.scale=f.observable(0);this.reverseDomain=f.observable(!1);this.ticks=f.observable(0);this.position=f.observable(3);this.positionIndex=f.observable(0);this.showAxis=f.observable(!0);this.autoScaleUnit=f.observable(!0);this.showName=f.observable(!1);this.showLabel=f.observable(1);this.labelPadding=f.observable(50);this.rotateLabel=f.observable(0);this.showAxisLine=f.observable(!1);this.showTickMarks=f.observable(!1);this.showGridLines=f.observable(!1);this.inputFormat=f.observable("");this.outputFormat=f.observable("");this.formatOptions=f.observable(null);this.xSliderOutputFormat=f.observable(null);this.xSliderFormatOptions=f.observable(null);this.displayLabelFormatter=f.observable("");this.xSliderCalloutDisplayFormatter=f.observable("");this.min=f.observable(null);this.max=f.observable(null);this.unit=f.observable(w.Unit.None);this.displaySIUnit=f.observable(!1);this.defaultAxisPadding=f.observable(null);this.customAxisPadding=f.observable(null);n&&this.position(n);t&&this.scale(t)}return n})();t.Axis=ht;ur=(function(){function n(n,t,i,r,u,f,e){this.years=n;this.months=t;this.days=i||0;this.hours=r||0;this.minutes=u||0;this.seconds=f||0;this.milliseconds=e||0}return n})();t.DateSpan=ur;fr=(function(){function n(n){this.value=n}return n})();t.NumberSpan=fr;rt=(function(){function n(){this.type=f.observable(0);this.name=f.observable(String(ir=ir+1&65535))}return n})();t.SeriesBase=rt;er=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.values=f.observableArray(),t.xAxisName=f.observable(""),t.yAxisName=f.observable(""),t}return __extends(t,n),t})(rt);t.Series=er;or=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=f.observable(3),t.startXValue=f.observable(null),t.span=f.observable(null),t.yValues=f.observableArray(),t.xAxisName=f.observable(""),t.yAxisName=f.observable(""),t}return __extends(t,n),t})(rt);t.UniformSeries=or;sr=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=f.observable(1),t.value=f.observable(null),t.axisName=f.observable(""),t}return __extends(t,n),t})(rt);t.LineSeries=sr,(function(n){function p(n,t){switch(n.type()){case 0:return h(n.values(),t);case 3:return ut(n,t);default:return[]}}function w(n,t){var f=n.span(),u=n.startXValue(),i,r;if(f){if(u instanceof Date)return i=new Date(u.getTime()),r=f,i.setFullYear(i.getFullYear()+t*r.years),i.setMonth(i.getMonth()+t*r.months),i.setDate(i.getDate()+t*(r.days||0)),i.setHours(i.getHours()+t*(r.hours||0)),i.setMinutes(i.getMinutes()+t*(r.minutes||0)),i.setSeconds(i.getSeconds()+t*(r.seconds||0)),i.setMilliseconds(i.getMilliseconds()+t*(r.milliseconds||0)),i;if(typeof u=="number")return u+f.value*t}throw new Error("The span is not defined.");}function b(t){for(var r=[],i=0;i<t.yValues().length;i++)r.push(n.getNthXValueOfUniformSeries(t,i));return r}function k(t){return n.getNthXValueOfUniformSeries(t,t.yValues().length-1)}function u(t,i){return new at(n.getNthXValueOfUniformSeries(t,i),t.yValues()[i])}function f(t){return n.getNthChartItemOfUniformSeries(t,t.yValues().length-1)}function o(t){return t.yValues().map((function(i,r){return n.getNthChartItemOfUniformSeries(t,r)}))}function d(n,t){var f,i,u;if(e(n.min)||e(n.min))return null;if(typeof n.min=="number"){if(f=t,f&&f.value)return Math.floor(Math.abs((n.max-n.min)/f.value))+1;throw new Error("NumberSpan either is not set or is set with zero value. Provide a non-zero number span.");}if(n.min instanceof Date&&n.max instanceof Date)if(i=t,u=r(i),i){if(i.years===0&&i.months===0){if(u===0)throw new Error("DateSpan is set with zero value. Provide a non-zero date span.");return Math.floor(Math.abs((n.max.getTime()-n.min.getTime())/u))+1}if(i.years>=0&&i.months>=0&&u>=0)return s(n.min,n.max,i.years,i.months,u);if(i.years<=0&&i.months<=0&&u<=0)return s(n.max,n.min,i.years,i.months,u);throw new Error("Years, months and other parts of TimeSpan should be all non-negative or all non-positive.");}else throw new Error("DateSpan is not set. Provide a non-zero date span.");}function g(n,t){if(e(n)&&e(t))return!0;if(!e(n))return n.value===t.value;if(!e(n)){var i=n,u=t;return r(i)===r(u)&&i.years===u.years&&i.months===u.months}throw new Error("Span Type is undefined. Cannot perform Spans comparison.");}function nt(n){if(n.type()===0){var i=n,t=i.values(),r=t&&t.length>0&&typeof t[0].xValue=="string";return!r}return!1}function tt(t,r){var e;r===void 0&&(r=!1);switch(t.type()){case 0:var o=t,u=o.values()||[],s=u[0]&&typeof u[0].xValue=="string",f=u.slice();return s||r?f:i.stableSort(f,n._chartItemComparerByX);case 3:return e=t,n.createChartItemArray(e)}return[]}function it(n,t){var r=(t==="x"?"x":"y")+"AxisName",i=n.type(),u=i===1||i===2?"axisName":r;return n[u]()}function rt(n,t){return n.xValue<t.xValue?-1:n.xValue>t.xValue?1:0}function s(n,t,i,r,u){for(var f=new Date(n.getTime()),e=0;f<=t;)f.setFullYear(f.getFullYear()+i),f.setMonth(f.getMonth()+r),f.setMilliseconds(f.getMilliseconds()+u),e++;return e}function r(n){return(((n.days*24+n.hours)*60+n.minutes)*60+n.seconds)*1e3+n.milliseconds}function ut(n,t){var i=n.yValues(),r=t.context(),e;if(!i||i.length===0)return[];switch(r){case 2:case 3:return e=[u(n,0),f(n)],[e.concat().sort(r===2?c:l)[0]];default:return h(o(n),t)}}function h(n,t){if(!n||n.length===0)return[];switch(t.context()){case 2:return[n.concat().sort(c)[0]];case 3:return[n.concat().sort(l)[0]];case 1:return[n.concat().sort(ft)[0]];case 0:return[n.concat().sort(et)[0]];case 4:return n;case 5:return t.chartItems();default:return[]}}function c(n,i){var r=t(n.xValue,i.xValue);return r?r:t(n.yValue,i.yValue)}function l(n,i){var r=y(n.xValue,i.xValue);return r?r:t(n.yValue,i.yValue)}function ft(n,i){var r=t(n.yValue,i.yValue);return r?r:t(n.xValue,i.xValue)}function et(n,i){var r=y(n.yValue,i.yValue);return r?r:t(n.xValue,i.xValue)}function a(n,t){return n===null&&t!==null?-1:n!==null&&t===null?1:0}function v(n,t){return n<t?-1:n>t?1:0}function t(n,t){var i=a(n,t);return i?-i:v(n,t)}function y(n,t){var i=a(n,t);return i?-i:-v(n,t)}n.getChartItemsByDataLabelAndSeries=p;n.getNthXValueOfUniformSeries=w;n.createXValuesArray=b;n.getLastXValueOfUniformSeries=k;n.getNthChartItemOfUniformSeries=u;n.getLastChartItemOfUniformSeries=f;n.createChartItemArray=o;n.getCountOfValues=d;n.areEqualSpans=g;n.isXValueSortable=nt;n.getChartItemArrayBySeriesBase=tt;n.getAxisName=it;n._chartItemComparerByX=rt})(ut=t.SeriesUtilities||(t.SeriesUtilities={}));ni=(function(){function n(){this.chartViewIndex=f.observable(null);this.seriesViewIndex=f.observable(null)}return n})();t.SeriesId=ni;hr=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.seriesIndex=f.observable(null),t.chartItems=f.observableArray(),t}return __extends(t,n),t})(ni);t.SeriesSubset=hr;ti=(function(){function n(){}return n})();t.Events=ti;d=(function(){function n(){}return n})();t.SeriesChartEvents=d;ii=(function(){function n(){}return n})();t.BarChartEvents=ii;cr=(function(){function n(){this.seriesName=f.observable("");this.conditionOperator=f.observable(null);this.interpolation=f.observable(0)}return n})();t.RenderingCondition=cr;a=(function(){function n(){this.seriesName=f.observable("");this.displayName=f.observable("");this.cssClass=f.observable("");this.dataLabels=f.observableArray();this.showTooltip=f.observable(!1);this.tooltipFormatter=f.observable("Series: '{0}' Point: {1} Value: {2}");this.renderingConditions=f.observableArray();this.selectable=f.observable(!0);this.hoverable=f.observable(!0);this.hideFromLegend=f.observable(!1)}return n})();t.SeriesView=a;ri=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.interpolation=f.observable(0),t.lineStyle=f.observable(0),t.showTooltip=f.observable(!1),t.showDataPoints=f.observable(!0),t}return __extends(t,n),t})(a);t.LineChartSeriesView=ri;ct=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.interpolation=f.observable(0),t.areaHatchingPattern=f.observable(0),t.showTooltip=f.observable(!1),t}return __extends(t,n),t})(a);t.AreaChartSeriesView=ct;ui=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(ct);t.StackedAreaChartSeriesView=ui;fi=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.radius=f.observable(3),t.showTooltip=f.observable(!1),t}return __extends(t,n),t})(a);t.ScatterChartSeriesView=fi;ei={};nt=(function(){function n(){this.chartType=f.observable(0);this.seriesView=f.observableArray();this.createDefaultSeriesView=g(this)}return n})();t.View=nt;lr=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.seriesView=f.observableArray(),t.events=new d,t.createDefaultSeriesView=g(t),t}return __extends(t,n),t})(nt);t.LineChartView=lr;p(0,(function(){return new ri}));ar=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartType=f.observable(1),t.seriesView=f.observableArray(),t.events=new d,t.createDefaultSeriesView=g(t),t}return __extends(t,n),t})(nt);t.AreaChartView=ar;p(1,(function(){return new ct}));vr=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartType=f.observable(2),t.seriesView=f.observableArray(),t.events=new d,t.createDefaultSeriesView=g(t),t}return __extends(t,n),t})(nt);t.ScatterChartView=vr;p(2,(function(){return new fi}));lt=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.enableSparseSeries=f.observable(!0),t}return __extends(t,n),t})(nt);t.StackedChartView=lt;yr=(function(n){function t(t){var i=n.call(this)||this;i.barPaddingRatio=f.observable(.3);i.barChartType=f.observable(0);i.xAxisSpan=f.observable(null);i.events=new ii;i.createDefaultSeriesView=g(i);i.barChartType(t);switch(t){case 0:i.chartType(3);break;case 1:i.chartType(4);break;case 2:i.chartType(5)}return i}return __extends(t,n),t})(lt);t.BarChartView=yr;p(3,(function(){return new a}));p(4,(function(){return new a}));p(5,(function(){return new a}));wr=v.isIe?function(n){var t=1;try{t=n&&n.getComputedTextLength()}catch(i){}return t}:function(n){return n&&n.getComputedTextLength()||1};br=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartType=f.observable(6),t.seriesView=f.observableArray(),t.events=new d,t.lineState=f.observable(0),t.createDefaultSeriesView=g(t),t}return __extends(t,n),t})(lt);t.StackedAreaChartView=br;p(6,(function(){return new ui}));at=(function(){function n(n,t){this.xValue=n;this.yValue=t}return n})();t.ChartItem=at;kr=(function(n){function t(t,i,r){var u=n.call(this,t,i)||this;return u.y0=r,u}return __extends(t,n),t})(at);t.StackedChartItem=kr;oi=(function(n){function t(t){var i=n.call(this,t)||this;return i.title=f.observable(""),i.showTitle=f.observable(!1),i.width=f.observable(0),i.height=f.observable(0),i.noDataMessage="No data to display",i.series=f.observableArray(),i.xAxis=new ht,i.yAxis=new ht(4,1),i.secondaryXAxes=f.observableArray(),i.secondaryYAxes=f.observableArray(),i.views=f.observableArray(),i.legendPosition=f.observable(0),i.interactionBehavior=f.observable(it.All),i.autogenerateSeriesViews=f.observable(!0),i.events=new ti,i.seriesSelections=f.observableArray(),i.seriesHovers=f.observableArray(),i.hoveredID=f.observableArray(),i.enableTrackXSlider=f.observable(),i.disableXSliderMouseout=f.observable(),i.xSliderCoordinate=f.observable(),i._xSliderTickColorClass=f.observable(),i.xSliderFilterHoverThreshold=f.observable(),i.ariaLabel=f.observable(""),i.ariaDesc=f.observable(""),i.xAxis.showTickMarks(!0),i}return __extends(t,n),t})(h.ViewModel);t.ViewModel=oi;b[0]="none";b[1]="top";b[2]="right";b[3]="bottom";b[4]="left";vt=(function(){function n(){this.min=null;this.max=null}return n})();t.Extent=vt;si=(function(){function n(){this.tickCount=0;this.tickPadding=0;this.tickMarkSize=0;this.showAxisLabel=!1}return n})();t.Ticks=si;dr=(function(){function n(){}return n})();t.ScreenCoordinates=dr;t.getSVGxCoordinateValue=gr;tt=(function(){function n(n,t,r,u,e,s,h,c,l){var a=this;this.internalMin=f.observable(null);this.internalMax=f.observable(null);this.xAxisTickAdjustmentFeatureFlag=f.observable(!0);this._getAxisScreenCTM=i.memoize((function(){var t=a.currentAxis(),n;if(t&&(n=t.node(),n))return n.getScreenCTM()}));this._lifetime=n.createChildLifetime();this._element=t;this._axisElement=o.select(t[0]).select(wi);this._axisType=c;this._translateHandler=e;this._dateParser=null;this._numericParser=null;this._sliderCoordinate=l?l:f.observable();this._initializeComputed2(r,u,s,h);this._sliderTickColorClass=f.observable()}return n.prototype.dispose=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null);this.currentAxis&&this.currentAxis()&&this.currentAxis().remove()},n.prototype.extractValue=function(n){return this._dateParser?this._dateParser(n):this._numericParser?this._numericParser(n):n},n.prototype.getPointFormatter=function(t){var u=this.mappedAxis(),i=u.scale(),e=i.range()[1]-i.range()[0],o=i.domain()[1]-i.domain()[0],f=Math.abs(o/e),r,s=t||u.tickFormat()||i.tickFormat();return i.domain()[1]instanceof Date?function(t){return s(n._getDateRoundingFunction(f*20)(t))}:t?t:(r=-Math.floor(Math.log(f)/Math.log(10)),r=r>0?r:0,function(n){return l.NumberFormat.create({minimumFractionDigits:0,maximumFractionDigits:r}).format(n)})},n.prototype.checkForUpdate=function(){this._extent()?!0:!1;this._reverseDomain()?!0:!1},n.prototype.getAxisType=function(){return this._axisType},n._checkSeriesViewsReferSeries=function(n,t){return!!i.find(t,(function(t){return t.seriesName()===n}))},n._getD3TimeRoundFunction=function(n){return function(t){var i=t.getTimezoneOffset()*wt;return new Date(Math.floor((t.getTime()-i)/n)*n+i)}},n._getD3RoundFunctionObject=function(t){return{limit:t,func:n._getD3TimeRoundFunction(t)}},r.defineProperty(n,"_d3DateIndexLookUp",{get:function(){return kt||(kt=[function(n){return!!n.getMilliseconds()},function(n){return!!n.getSeconds()},function(n){return!!n.getMinutes()},function(n){return!!n.getHours()},function(n){return n.getDay()&&n.getDate()!==1},function(n){return n.getDate()!==1},function(n){return!!n.getMonth()},function(){return!0},]),kt},enumerable:!0,configurable:!0}),n._getDateFormatingIndex=function(t){for(var r=n._d3DateIndexLookUp,i=0;i<r.length;){if(r[i](t))return i;i++}return i-1},r.defineProperty(n,"_globalizedDateTimeFormatOptionsForD3DefaultFormat",{get:function(){return dt||(dt=[{second:"2-digit"},{second:"2-digit"},{hour:"numeric",minute:"2-digit"},{hour:"numeric"},{month:"short",day:"numeric"},{month:"short",day:"numeric"},{month:"long"},{year:"numeric"},]),dt},enumerable:!0,configurable:!0}),r.defineProperty(n,"_globalizedDateTimeFormattersForD3DefaultFormat",{get:function(){if(!st){st=[];for(var t=0;t<n._globalizedDateTimeFormatOptionsForD3DefaultFormat.length;t++)st.push(l.DateTimeFormat.create(n._globalizedDateTimeFormatOptionsForD3DefaultFormat[t]))}return st},enumerable:!0,configurable:!0}),n._getGlobalizedDateValueForD3Defaults=function(t){var u=n._getDateFormatingIndex(t),i,r;if(u===0)return o.time.format(".%L")(t);if(u!==-1){i="";r=void 0;try{r=n._globalizedDateTimeFormattersForD3DefaultFormat[u];i=r.format(t)}catch(f){lf.error("IntlPolyfill loaded: "+!!window.IntlPolyfill+"; given format: "+r+"; Date: "+t.toString()+"; Exception: "+f);i=o.time.format(".%L")(t)}return i}return null},n._getDateRoundingFunction=function(t){var i,r;for(k||(k=[{limit:hf,func:function(n){return new Date(n.getFullYear(),1)}},{limit:sf,func:function(n){return new Date(n.getFullYear(),n.getMonth())}},],[bt,tr,wt,nr,cf].forEach((function(t){k.push(n._getD3RoundFunctionObject(t))}))),i=0,i=k.length-1;i>0;i--)if(r=k[i-1].limit,t<r)break;return k[i].func},n.prototype._createGridLine=function(n){var t=this.axisPosition(),i,r;return t===4||t===2?(i=this._element[0].style.width,r=i&&parseInt(i)||this._element.width(),{"class":bi,x1:-n.x,y1:0,x2:r-n.x,y2:0}):t===1||t===3?{"class":bi,x1:0,y1:0,x2:0,y2:-n.y}:void 0},n.prototype._checkSeriesIsDisplayedByChartTypes=function(t,r,u){return!!i.find(u.views(),(function(i){var f=i.chartType(),u=i.seriesView();return r.indexOf(f)>=0&&(u===null||u.length===0||n._checkSeriesViewsReferSeries(t,u))}))},n.prototype._hasBarChartViews=function(){return this._barChartViews().length>0},n.prototype._hasScatterChartViews=function(){return this._scatterChartViews().length>0},n.prototype._getPositionBaseTranslateString=function(n,t){return this._isHorizontal()?ot.format(n,t):ot.format(t,n)},n._getCurrentTicks=function(n){return n?n.selectAll("g.tick"):null},n.prototype.getAxisLabelValue=function(n){var t=this.getAxisValue(n);return{value:t,label:this._formatAxisValue(t)}},n.prototype.getAxisValue=function(n){var t=vf(this._axisType,this._getAxisScreenCTM(),n);return t===null?null:this._getAxisValue(t)},n.prototype.getScreenCoordinate=function(n){var t=null,i;return this.axisScaleType()!==0?t=this.mappedAxis().scale()(n):(i=s.binarySearch(this.mappedAxis().scale().domain(),n),t=this.mappedAxis().scale().range()[i]),af(this._axisType,this._getAxisScreenCTM(),t)},n.prototype._getAxisValue=function(n){var i=null;if(this.axisScaleType()!==0)i=this.mappedAxis().scale().invert(n);else{var f=this.mappedAxis().scale(),r=f.range(),u=f.domain(),t=s.binarySearch(r,n);t<0&&(t=~t);0<t&&t<r.length&&Math.abs(n-r[t-1])<Math.abs(n-r[t])&&t--;u.length>0&&(i=t===0?u[0]:t===r.length?u[u.length-1]:u[t])}return typeof i=="number"&&(i=Number(o.format(".2f")(i))),i},n.prototype._formatAxisValue=function(n){var t="",i,r;return this.axisScaleType()!==0?(i=this._xSliderOutputFormatter(),r=this.getPointFormatter(i),t=r(n)):t=n,t},n.prototype._sliderAxisValue=function(n){var t=this._getAxisValue(n);return this._formatAxisValue(t)},n.prototype._initializeComputed2=function(t,r,h,a){var v=this,p=this._lifetime,d,k,g,nt,rt,tt;this.axisPosition=f.computed(p,(function(){return a.position()}));this._isHorizontal=f.computed(p,(function(){var n=v.axisPosition();return n%2==1}));this.axisScaleType=f.computed(p,(function(){switch(a.scale()){case 0:case 2:!a.inputFormat()||(v._dateParser=o.time.format(a.inputFormat()).parse)}return a.scale()}));this._translate=f.computed(p,(function(){return v._translateHandler(a)}));this._barChartViews=f.computed(p,(function(){return h.views().filter((function(n){var t=n.chartType();return t===4||t===5||t===3}))}));this._scatterChartViews=f.computed(p,(function(){return h.views().filter((function(n){return n.chartType()===2}))}));this._lineChartViews=f.computed(p,(function(){return h.views().filter((function(n){return n.chartType()===0}))}));this._maxScatterChartRadius=f.computed(p,(function(){return v._hasScatterChartViews()?o.max(v._scatterChartViews(),(function(n){return n.seriesView().length>0?o.max(n.seriesView(),(function(n){return n.radius()})):3})):0}));this.ticks=f.computed(p,(function(){var n=new si;return n.tickCount=a.ticks(),n.tickMarkSize=a.showTickMarks()?4:0,n.showAxisLabel=!!a.showLabel(),n}));this.series=f.computed(p,(function(){var n=v._axisType,t=n===0||n===2?"x":"y",i=n===0||n===1;return(h.series()||[]).filter((function(n){var r=ut.getAxisName(n,t);return!r&&i||r===a.name()}))}));this._domain=f.computed(p,(function(){var t=[],n;return v.series(),n=v._axisType,v.series().forEach((function(i){var e=i.type(),r,u,f;switch(e){case 0:u=i.values();u&&(r=u.map((function(t){return n===0||n===2?t.xValue:t.yValue})));break;case 3:f=i;r=n===0||n===2?ut.createXValuesArray(f):f.yValues();break;case 1:(n===1||n===3)&&(r=[i.value()]);break;case 2:(n===0||n===2)&&(r=[i.value()])}ft.merge(t,r||[])})),t}));this._extent=f.computed(p,(function(){var n=new vt,t=!1,i=!1,r=a.min(),u=a.max(),f=v._domain(),o;return e(r)||(n.min=v.extractValue(r),t=!0),e(u)||(n.max=v.extractValue(u),i=!0),t&&i||(v.series().forEach((function(t){var i=t.type();o=[];(i===0||i===3)&&(v._axisType===1||v._axisType===3)&&(n.min===null||n.min>0)&&v._checkSeriesIsDisplayedByChartTypes(t.name(),[4,5,3],h)&&(n.min=0)})),f.forEach((function(r){var u=v.extractValue(r);u!==null&&(!t&&(n.min===null||n.min>u)&&(n.min=u),!i&&(n.max===null||n.max<u)&&(n.max=u))}))),n}));this._filteredDomain=f.computed(p,(function(){var n=v._extent();return v._domain().filter((function(t){var i=v.extractValue(t);return i>=n.min&&i<=n.max}))}));this.step=f.computed(p,(function(){var n,f,i,u;if(v._axisType===1||v._axisType===3)return null;if(n=null,a.scale()!==0&&(f=v._barChartViews(),f.length>0)){if(i=f.map((function(n){return n.xAxisSpan()})),i.length>1)for(u=void 0,u=1;u<i.length;u++)if(!ut.areEqualSpans(i[0],i[u]))throw new Error("If multiple BarChartViews are assigned to an Axis, all BarChartViews must have the same xAxisSpan (null is the possible value).");e(i[0])||(n=ut.getCountOfValues(v._extent(),i[0])+1)}return e(n)&&(n=Math.max(1,o.set(v._filteredDomain()).values().length)),n+=2,a.position()===1||a.position()===3?t()/n:r()/n}));this._internalExtent=f.computed(p,(function(){var t,n,i=v._extent().min,r=v._extent().max,s=v.internalMin(),c=v.internalMax(),l=a.min(),y=a.max(),u,f=new vt;return v._hasBarChartViews(),u=v.series().some((function(n){return v._checkSeriesIsDisplayedByChartTypes(n.name(),[3,6],h)})),n=e(y)&&u?c!==null?o.max([c,r]):r:r,t=e(l)&&u?s!==null?o.min([s,i]):i:i,(v._axisType===1||v._axisType===3)&&typeof n=="number"&&t===n&&(n>0?n<=100&&a.unit()===w.Unit.Percentage?(t=0,n=100):(t=0,n=2*n):n<0?(t=2*t,n=0):(t=0,n=100)),f.min=t,f.max=n,f}));this._defaultAxisPadding=f.computed(p,(function(){var t=5,i=v._hasBarChartViews(),r=v._hasScatterChartViews(),u=v._lineChartViews().length>0,f=v.step(),e=v._maxScatterChartRadius(),n=0;if(v._axisType===0||v._axisType===2){var o=i?1.2:.5,s=i?f*o/2:0,h=r?e+t:0,c=u?2+t:0;n=Math.max(s,h);n=Math.max(n,c)}return a.defaultAxisPadding(n),n}));this.padding=f.computed(p,(function(){var n=a.customAxisPadding();return i.notNullOrUndefined(n)?n:v._defaultAxisPadding()}));this._range=f.computed(p,(function(){var i=a.position(),n=v.padding();return v._translate(),i===1||i===3?[n,t()-n]:[r()-n,ou+n]}));this.originalUnit=a.unit;this._convertedUnit=f.computed(p,(function(){var r=a.autoScaleUnit||!0,t=a.unit(),n,i;return f.unwrap(r)?(n=v._internalExtent(),i=Math.max(Math.abs(n.min),Math.abs(n.max)),w.getAppropriateUnit(i,t)):t}));this.conversionFactor=f.computed(p,(function(){return w.getConversionFactor(a.unit(),v._convertedUnit())}));this.multiFormatDateTimeFormatOptions=f.computed(p,(function(){var n,t;if(a.scale()===2&&(n=a.formatOptions(),n&&u.isArray(n)&&(t=n,t.length>0&&i.findIndex(t,(function(n){return!!n}))>=0)))return t}));this._numberFormatter=f.computed(p,(function(){var n=a.scale(),t=(n===1||n===3)&&a.formatOptions()||{minimumFractionDigits:0,maximumFractionDigits:2};return l.NumberFormat.create(t)}));this._dateTimeFormatter=f.computed(p,(function(){if(a.scale()===2){var n=a.formatOptions();if(n&&!u.isArray(n))return l.DateTimeFormat.create(n)}}));this._multiFormatDateFormatters=f.computed(p,(function(){if(v.multiFormatDateTimeFormatOptions())return v._getGlobalizedDateFormatterFunctions(v.multiFormatDateTimeFormatOptions())}));this._xSliderNumberFormatter=f.computed(p,(function(){var n=a.xSliderFormatOptions();return n&&a.scale()===1?l.NumberFormat.create(n):v._numberFormatter()}));this._axisLabelFormatter=f.computed(p,(function(){return function(t){var i=t,r;return e(t)||(t instanceof Date?v._multiFormatDateFormatters()?(r=n._getDateFormatingIndex(t),i=v._multiFormatDateFormatters()[r].format(t)):i=v._dateTimeFormatter()?v._dateTimeFormatter().format(t):n._getGlobalizedDateValueForD3Defaults(t):typeof t=="number"&&(i=v._numberFormatter().format(t))),i}}));this._reverseDomain=f.pureComputed((function(){return a.reverseDomain?a.reverseDomain():!1}));this.valueScale=f.computed(p,(function(){var n,i=v._range(),u=v._internalExtent(),f=u.min,e=u.max,h=a.position(),c,y=v._hasBarChartViews(),p=y?1.2:.5;v._reverseDomain()&&(f=u.max,e=u.min);switch(a.scale()){case 0:i=h===1||h===3?[0,t()]:[r(),0];c=v._filteredDomain();n=o.scale.ordinal().domain(c).rangePoints(i,p);break;case 2:n=o.time.scale().domain([f,e]).range(i);break;case 3:case 1:default:if(n=o.scale.linear(),v._axisType===1||v._axisType===3){var l=v.conversionFactor(),s=f/l,w=e/l;a.scale()===3&&(s=Math.max(.1,s),n=o.scale.log().clamp(!0));n.domain([s,w]).nice(a.ticks()||10)}else n.domain([f,e]);n.range(i)}return n}));this.mappedAxis=f.computed(p,(function(){var n=o.svg.axis().scale(v.valueScale()).orient(b[a.position()]);a.showTickMarks&&n.tickSize(v.ticks().tickMarkSize);v.ticks().tickCount>0&&(n.ticks(v.ticks().tickCount),a.scale()===0&&n.tickValues(v._domain().filter((function(n,t){return t%Math.max(1,Math.round(v._domain().length/v.ticks().tickCount))==0?!0:!1}))));var r=f.unwrap(a.displaySIUnit),u=w.toString(v._convertedUnit(),r),t=a.outputFormat(),i=a.displayLabelFormatter();return n.tickFormat((function(n){if(!e(n)){var r=t?n instanceof Date?c.toString(n,t):t.format(n):v._axisLabelFormatter()(n);return r+=u,i?i.format(r):r}})),n}));d=null;this.currentAxis=f.computed(p,(function(){var t,u=v._translate(),f=ot.format(u.x,u.y),i,r;if(v._getAxisScreenCTM.clear(),a.showAxis()){switch(v._axisType){case 0:t=bu;break;case 1:t=ku;break;case 2:t=du;break;case 3:t=gu}a.showAxisLine()||(t=t+" "+nf);t=t+" "+(a.showTickMarks()?rf:tf);d||(d=v._axisElement.append("g"));d.attr({"class":t,transform:f}).call(v.mappedAxis());i=n._getCurrentTicks(d);i.length>0&&(i.selectAll("line:not("+ki+")").attr("class",uf),r=i.selectAll("line"+ki),a.showGridLines()?y.requestAnimationFrame((function(){var n=v._createGridLine(u);r.data([0]).enter().append("line").attr(n);r.attr(n)})):r.remove(),i.selectAll("text").style("display",null))}else d&&(d.remove(),d=null);return d}));this.currentAxis.extend({rateLimit:30});this.hasAxis=f.computed(p,(function(){return!!v.currentAxis()}));this._xSliderOutputFormatter=f.computed(p,(function(){var t=a.xSliderOutputFormat(),e=a.xSliderFormatOptions(),s,h=a.xSliderCalloutDisplayFormatter(),b=f.unwrap(a.displaySIUnit),l=w.toString(v._convertedUnit(),b),k=v,c,y,p,r;return t&&t.length>0&&i.findIndex(t,(function(n){return!!n}))>=0?(p=t[0]&&o.format(t[0]),y=v._getDateFormatterFunctions(t,h,l),c=function(t){if(t instanceof Date){var i=t,r=n._getDateFormatingIndex(i);return y[r](t)}return p(t)}):e&&(u.isArray(e)&&(r=e,r.length>0&&i.findIndex(r,(function(n){return!!n}))>=0&&(s=v._getGlobalizedDateFormatterFunctions(r))),c=function(t){var i,r;return t instanceof Date?(r=n._getDateFormatingIndex(t),i=s?s[r].format(t):n._getGlobalizedDateValueForD3Defaults(t)):i=typeof t=="number"?k._xSliderNumberFormatter().format(t):t,h?h.format(i):i+l}),c}));k=null;this.currentSlider=f.computed(p,(function(){var f=!1,o=v.currentAxis(),s,c,l=v.axisPosition(),r=l/2==0?1:-1,a=!(h.interactionBehavior()&it.XSlider_Off),n,i;if(o!==null&&v.ticks().showAxisLabel&&a)if(n=v._sliderCoordinate(),k||(k=o.append("g"),k.attr("class",[ff].join(" "))),e(n))k.style("display","none");else{s=v.mappedAxis();k.style("display",null).attr({transform:v._getPositionBaseTranslateString(n,0)});g?g.attr("class",[di,"azc-chart-axis-tick-line",v._sliderTickColorClass()].join(" ")):g=k.append("line").attr({"class":[di,"azc-chart-axis-tick-line",v._sliderTickColorClass()].join(" "),x1:0,y1:0});var y=v._sliderTickColorClass()?2:1,u=v.ticks().tickMarkSize,t=v._isHorizontal();g.attr({x2:t?0:r*u,y2:t?-1*r*u*y:0});nt||(i=[0,r*(t?-1:1)*(u+s.tickPadding())],t||i.reverse(),nt=k.append("text").attr({"class":gi,x:i[0],y:i[1]}));c=v._sliderAxisValue(n);nt.text(c)}else f=!0;return f&&(k&&k.remove(),k=null,g=null,nt=null),k}));this._rotateAttributes=f.computed(p,(function(){var n="0",t="0",r="end",i=a.rotateLabel(),u=a.position(),f=function(){return ef.format(a.rotateLabel())};if(v.ticks.peek().showAxisLabel){switch(u){case 4:i===0?(r="end",n=au,t=hi):i===-90||i===270?(r="middle",n=cu,t=et):(r="end",n=pt,t=et);break;case 2:i===0?(r="start",n="0",t=hi):i===-90||i===270?(r="middle",n=li,t=lu):(r="start",t=yt,n=hu);break;case 3:i===0?(r="middle",n="0",t=ci):i===-90||i===270?(n=et,t=li):(n=et,t=pt);break;case 1:r="start";i===0?(r="middle",n="0",t=su):i===-90||i===270?(n=yt,t=ci):(n=yt,t=pt)}return{attr:{dx:n,dy:t,transform:f},style:{textAnchor:r}}}return null}));this.currentTicks=f.computed(p,[this.currentAxis,this.ticks],n._getCurrentTicks);rt=y.debounce(p,y.throttleByAnimationFrame((function(){if(!p.isDisposed()){var i=v.currentTicks();n._adjustXAxisTicks(t(),a,i,v._axisElement[0][0])}})),100);this._rotateAxisLabel=f.computed(p,(function(){var n,t=v._rotateAttributes();t&&(n=v.currentTicks(),n&&n.selectAll("text").style("text-anchor",t.style.textAnchor).attr(t.attr));v.ticks.peek().showAxisLabel&&v.xAxisTickAdjustmentFeatureFlag()&&(n=n||v.currentTicks(),n&&n.selectAll("text").classed("fxs-display-none",!1),rt())}));this.currentSliderText=f.computed(p,(function(){var n=v._rotateAttributes(),t=v.currentSlider(),i;n&&t&&(i=t.selectAll("."+gi),i.style("text-anchor",n.style.textAnchor).attr(n.attr))}));this._ticksCoordinateMap=f.computed(p,(function(){var n=v.currentTicks(),i=v.mappedAxis(),t,r=i.scale();return n?(t=n.data(),t.map((function(t,i){return{coordinate:r(t),selection:n[0][i]}})).sort((function(n,t){return n.coordinate-t.coordinate}))):null}));f.computed(p,(function(){var t=v._ticksCoordinateMap(),i=v._sliderCoordinate(),n,u,p,f,r=1;if(e(i)||!t||t.length===0)tt&&(tt.style.opacity=null,tt=null);else{if(u=t.length,n=s.binarySearch(t,{coordinate:i,selection:null},(function(n,t){return n.coordinate-t.coordinate})),n<0&&(n=~n),n===0?(p=0,f=1):n===u?(n=u-1,f=u-2):Math.abs(i-t[n-1].coordinate)<Math.abs(i-t[n].coordinate)?(f=n,n--):f=n-1,u>1)r=Math.abs((i-t[n].coordinate)*2/(t[n].coordinate-t[f].coordinate));else if(u===1){var l=t[0].coordinate,a=[0,2*l],h=o.quantile(a,.25),c=o.quantile(a,.75),y=void 0;v.mappedAxis();i<h||i>c?(n=null,r=1):(n=0,i>l?c=l:h=l,y=Math.abs(i-h)<Math.abs(i-c)?h:c,r=Math.abs((i-y)*2/(c-h)))}r=r>=1?1:Math.round(Math.pow(r,4)*100)/100;t.forEach((function(t,i){var u=ft(t.selection).find(">text")[0];i===n?(tt=u,u.style.opacity=r!==1?r.toString():null):u.style.opacity=null}))}}))},n.prototype._getDateFormatterFunctions=function(t,r,u){var e={},f=i.findIndex(t,(function(n){return!!n})),o=null;return n._d3DateIndexLookUp.map((function(n,s){for(var l=f,h,a;s>l&&o!==f;)a=i.findIndex(t,(function(n){return!!n}),f+1),l=a<0?o=f:f=a;return h=t[l],e[h]||(e[h]=function(n){var t=c.toString(n,h);return r?r.format(t):t+u}),e[h]}))},n.prototype._getGlobalizedDateFormatterFunctions=function(t){var r=i.findIndex(t,(function(n){return!!n})),u=null;return n._d3DateIndexLookUp.map((function(n,f){for(var e=r,s,o;f>e&&u!==r;)o=i.findIndex(t,(function(n){return!!n}),r+1),e=o<0?u=r:r=o;return s=t[e],l.DateTimeFormat.create(s)}))},n._adjustXAxisTicks=function(n,t,i,r){var u=-1,e=-1,f=[],o,s,a,v,y,h,p,c,l;i!==null&&t.rotateLabel.peek()===0&&(t.position.peek()===3||t.position.peek()===1)&&(i[0].forEach((function(n,t){return o=gr(n),ft.contains(r,n)&&(s=pr(n),a=wr(s),v=Math.ceil(o+a),f.push({left:o,right:v}),u===-1||o>f[u].left?(e=u,u=t):(e===-1||o>f[e].left)&&(e=t)),n})),f.length>1&&u!==-1&&e!==-1&&(y=i[0][u],f[u].right>n&&(h=f[u].right-n,p=f[u].left-f[e].right,s=pr(y),c=!0,l=ft(s),p>h?l.attr("x",-h+"").css("text-anchor","start"):c=!1,l.toggleClass("fxs-display-none",!c))))},n})();t.AxisWrapper=tt;nu=(function(n){function t(t,r,u){var e=this;return u=u||{},u.viewModelType=u.viewModelType||oi,e=n.call(this,t,r,u)||this,e._sizeUpdateCounter=0,e._dataUpdateCounter=0,e._mappedXAxisIndex=[],e._mappedYAxisIndex=[],e._seriesLiveData=f.observable(null),e._chartItemLiveData=f.observable(null),e._ariaLabel=r.ariaLabel,e._ariaDesc=r.ariaDesc,e._descId=f.observable(i.getUniqueId()+"-chart"),e.element.addClass(ai).addClass(vi).html(of),e.options.width()&&e.options.height()||(e.options.width(e.element.width()),e.options.height(e.element.height())),e._initializeComputed2(),e._initializeSubscriptions(e.options),e._bindDescendants(),e._widgetSvg=o.select(e.element[0]).select(vu),e._chartSvg=e._widgetSvg.select(yi).attr("transform",e._chartDataClassTransform()).on("mouseover",(function(){e._plotAreaMouseEnter()})).on("mouseout",(function(){e._plotAreaMouseLeave()})).on("mousemove",(function(){e._plotAreaMouseMove()})).on("click",(function(){e._plotAreaClick()})),e._backgroundSvg=e._widgetSvg.select(yu).on("mousemove",(function(){e._mouseMoveHandler()})).on("mouseleave",(function(){var n=o.event;e._mouseOutHandler(n)})),e._axisElement=e._widgetSvg.select(wi),f.computed(e.ltm,(function(){var n=e.options.interactionBehavior();e._chartSvg.classed(pi,n&it.ChartArea_Off);e._backgroundSvg.classed(pi,!e._xSliderOn())})),e}return __extends(t,n),t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._chartSvg=this._widgetSvg.select(yi).on("mouseover",null).on("mouseout",null).on("click",null),this._cleanElement(ai,vi))},t.prototype.getAxisInfoProvider=function(n){var t=null;switch(n){case 0:t=this._xAxes()[0];break;case 2:t=this._xAxes()[1];break;case 1:t=this._yAxes()[0];break;case 3:t=this._yAxes()[1]}return t},r.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),t.prototype._mouseMoveHandler=function(){},t.prototype._mouseOutHandler=function(){},t.prototype._initializeSubscriptions=function(t){var r=this,i;n.prototype._initializeSubscriptions.call(this,t);i=this.subLifetime;this._chartDataUpdated&&this._chartDataUpdated.subscribe(i,(function(){r._onChartDataUpdated()}));this._chartSizeUpdated&&this._chartSizeUpdated.subscribe(i,(function(){r._onChartSizeUpdated()}))},r.defineProperty(t.prototype,"_getXSliderCoordinate",{get:function(){return this.options.xSliderCoordinate},enumerable:!0,configurable:!0}),t.prototype._checkForChartUpdate=function(){for(var n,t=this.options.series(),r=t&&t.length||0,i=0;i<r;i++){n=t[i];switch(n.type()){case 0:n.values();break;case 3:n.yValues();break;case 1:case 2:n.value()}}return!0},t.prototype._onChartDataUpdated=function(){},t.prototype._onChartSizeUpdated=function(){},t.prototype._plotAreaMouseEnter=function(){},t.prototype._plotAreaMouseLeave=function(){},t.prototype._plotAreaMouseMove=function(){},t.prototype._plotAreaClick=function(){},t.prototype._mapSeriesToAxis=function(){var t=0,u=this.options.series()||[],n,i,r;for(this._mappedXAxisIndex=[],this._mappedYAxisIndex=[],t=0;t<u.length;t++){n=u[t];switch(n.type()){case 0:i=n;this._mappedXAxisIndex.push(this._getMappedAxisIndex("xAxisName",i.xAxisName()));this._mappedYAxisIndex.push(this._getMappedAxisIndex("yAxisName",i.yAxisName()));break;case 3:r=n;this._mappedXAxisIndex.push(this._getMappedAxisIndex("xAxisName",r.xAxisName()));this._mappedYAxisIndex.push(this._getMappedAxisIndex("yAxisName",r.yAxisName()));break;case 1:this._mappedXAxisIndex.push(-1);this._mappedYAxisIndex.push(this._getMappedAxisIndex("yAxisName",n.axisName()));break;case 2:this._mappedXAxisIndex.push(this._getMappedAxisIndex("xAxisName",n.axisName()));this._mappedYAxisIndex.push(-1)}}},t.prototype._getMappedAxisIndex=function(n,t){var i=0;if(t){if(n==="xAxisName"){if(this.options.xAxis.name()===t)return 0;this.options.secondaryXAxes().forEach((function(n,r){n.name()===t&&(i=r+1)}))}else if(n==="yAxisName"){if(this.options.yAxis.name()===t)return 0;this.options.secondaryYAxes().forEach((function(n,r){n.name()===t&&(i=r+1)}))}}else return 0;return i},t.prototype._isHorizontalChart=function(){return this._xAxes()[0].axisPosition()===4?!0:!1},t.prototype._initializeComputed2=function(){var n=this,i=[],r=[],t=this._disposables;this._topMargin=f.computed(t,(function(){return n._computeMargin(1)}));this._bottomMargin=f.computed(t,(function(){var t=n._computeMargin(3);return Math.max(t,eu)}));this._leftMargin=f.computed(t,(function(){return n._computeMargin(4)}));this._rightMargin=f.computed(t,(function(){return n._computeMargin(2)}));this._width=f.computed(t,(function(){var t=n.options.width()-n._leftMargin()-n._rightMargin();return t>=0?t:0}));this._height=f.computed(t,(function(){var t=n.options.height()-n._topMargin()-n._bottomMargin();return t>=0?t:0}));this._chartDataClassTransform=f.computed(t,(function(){return ot.format(n._leftMargin(),n._topMargin())}));this._transformChartArea=f.computed(t,(function(){n._chartSizeChanged()&&n._chartSvg!==null&&n._chartSvg!==undefined&&n._chartSvg.attr("transform",n._chartDataClassTransform())}));this._xAxes=f.computed(t,(function(){return n._xAxesLifetimeManager&&(n._xAxesLifetimeManager.dispose(),n._xAxesLifetimeManager=null),n._xAxesLifetimeManager=n.ltm.createChildLifetime(),i=[],i.push(new tt(n._xAxesLifetimeManager,n.element,n._width,n._height,function(t){return n._getAxisTranslate(t)},n.options,n.options.xAxis,0,n._getXSliderCoordinate)),n.options.secondaryXAxes().forEach((function(t){i.push(new tt(n._xAxesLifetimeManager,n.element,n._width,n._height,function(t){return n._getAxisTranslate(t)},n.options,t,2,n._getXSliderCoordinate))})),n._xAxesLifetimeManager.registerForDispose(i),i}));this._yAxes=f.computed(t,(function(){return n._yAxesLifetimeManager&&(n._yAxesLifetimeManager.dispose(),n._yAxesLifetimeManager=null),n._yAxesLifetimeManager=n.ltm.createChildLifetime(),r=[],r.push(new tt(n._yAxesLifetimeManager,n.element,n._width,n._height,function(t){return n._getAxisTranslate(t)},n.options,n.options.yAxis,1)),n.options.secondaryYAxes().forEach((function(t){r.push(new tt(n._yAxesLifetimeManager,n.element,n._width,n._height,function(t){return n._getAxisTranslate(t)},n.options,t,3))})),n._yAxesLifetimeManager.registerForDispose(r),r}));this._chartSizeUpdated=f.computed(t,(function(){return n._chartSizeChanged(),n._sizeUpdateCounter++}));this._chartDataUpdated=f.computed(t,(function(){return n._checkForChartUpdate(),n._dataUpdateCounter=(n._dataUpdateCounter+1)%4095}));f.computed(t,(function(){n.element.toggleClass(wu,n.options.seriesSelections().length>0)}));this._xSliderOn=f.computed(t,(function(){return!(n.options.interactionBehavior()&it.XSlider_Off)}));f.computed(t,(function(){var t=n.options.seriesHovers().length>0;n.element.toggleClass(pu,t)}));f.computed(t,(function(){var i=n._ariaLabel(),t;i&&(t=i.trim(),n.element.attr("aria-label",t.length?t:null))}));f.computed(t,(function(){var t=n._ariaDesc(),i;t&&(i=t.trim(),n.element.attr("aria-describedby",i.length?n._descId():null))}));this._chartSizeUpdated.extend({rateLimit:30});this._chartDataUpdated.extend({rateLimit:30});this.options.series.subscribeArrayDeletes(this.ltm,(function(){n.options.seriesSelections([]);n.options.seriesHovers([])}))},t.prototype._chartSizeChanged=function(){var n=this._height()+this._width()+this.options.height()+this.options.width();return this._xAxes&&this._xAxes()&&this._xAxes().forEach((function(t){n+=t.padding()})),this._yAxes&&this._yAxes()&&this._yAxes().forEach((function(t){n+=t.padding()})),!0},t.prototype._getAxisTranslate=function(n){var t={x:null,y:null},i;this._chartSizeChanged();switch(n.position()){case 1:i=this._computeAxisMargin(n,1,0);t.x=this._leftMargin.peek();t.y=this._topMargin.peek()-i*n.positionIndex();break;case 2:i=this._computeAxisMargin(n,2,0);t.x=this.options.width.peek()-(this._rightMargin.peek()-i*n.positionIndex());t.y=this._topMargin.peek();break;case 3:i=this._computeAxisMargin(n,3,0);t.x=this._leftMargin.peek();t.y=this.options.height.peek()-(this._bottomMargin.peek()-i*n.positionIndex());break;case 4:i=this._computeAxisMargin(n,4,0);t.x=this._leftMargin.peek()-i*n.positionIndex();t.y=this._topMargin.peek();break;case 0:t.x=0;t.y=0}return t},t.prototype._computeAxisMargin=function(n,t,i){var r=0;return(n.position()===t&&n.showAxis()&&(n.showLabel()===1&&(r+=n.labelPadding()),n.showName()&&(r+=ru)),r*(n.positionIndex()+1)>=i)?r:0},t.prototype._computeMargin=function(n){var i=this,t=0;return t+=this._computeAxisMargin(this.options.xAxis,n,t),t+=this._computeAxisMargin(this.options.yAxis,n,t),this.options.secondaryXAxes().forEach((function(r){t+=i._computeAxisMargin(r,n,t)})),this.options.secondaryYAxes().forEach((function(r){t+=i._computeAxisMargin(r,n,t)})),t+=this._getDefaultPadding(n)},t.prototype._getDefaultPadding=function(n){var i;return(i=t._getDefaultMargin(n,this.options.xAxis),i)?i:(i=t._getDefaultMargin(n,this.options.yAxis),i)?i:(this.options.secondaryXAxes().forEach((function(r){return i=t._getDefaultMargin(n,r),i?i:void 0})),this.options.secondaryYAxes().forEach((function(r){return i=t._getDefaultMargin(n,r),i?i:void 0})),0)},t._getDefaultMargin=function(n,t){if(t.showAxis()&&t.position()===n){if(n===4||n===2)return uu;if(n===1||n===3)return fu}return 0},t})(h.Widget);t.Widget=nu})(p||(p={})),p}))