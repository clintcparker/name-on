define("Fx/Composition/DashboardFilters",["require","exports"],(function(){"use strict";var n;return (function(n){var u,i,t,r,f,e,o,s,h;(function(n){n.filterId="MsPortalFx_TimeRange"})(u=n.TimeRangeFilter||(n.TimeRangeFilter={}));i=(function(){function n(){}return n})();n.FilterDefinition=i;t=(function(n){function t(t){var i=n.call(this)||this;return i.kind=t,i}return __extends(t,n),t})(i);r=(function(n){function t(t,i,r){var u=n.call(this,r)||this;return u.filterId=t,u.displayText=i,u}return __extends(t,n),t})(t),(function(n){function t(n){return new i(n)}n.createDefinition=t;var i=(function(n){function t(t){var i=this,r=t.filterId,u=t.displayText;return i=n.call(this,r,u,1)||this,i.getFilterValues=t.getFilterValues,i}return __extends(t,n),t})(r)})(f=n.EqualityFilter||(n.EqualityFilter={})),(function(n){function i(n){return new r(n)}n.createDefinition=i;n.filterId="MsPortalFx_Subscription";var r=(function(n){function t(t){var i=n.call(this,2)||this;return i.getSubscriptionIds=t.getSubscriptionIds,i}return __extends(t,n),t})(t)})(e=n.SubscriptionFilter||(n.SubscriptionFilter={})),(function(n){function i(n){return new r(n)}n.createDefinition=i;n.filterId="MsPortalFx_Location";var r=(function(n){function t(t){var i=n.call(this,3)||this;return i.getLocations=t.getLocations,i}return __extends(t,n),t})(t)})(o=n.LocationFilter||(n.LocationFilter={})),(function(n){function i(n){return new r(n)}n.createDefinition=i;n.filterId="MsPortalFx_ResourceGroup";var r=(function(n){function t(t){var i=n.call(this,5)||this;return i.getResourceGroupIds=t.getResourceGroupIds,i}return __extends(t,n),t})(t)})(s=n.ResourceGroupFilter||(n.ResourceGroupFilter={})),(function(n){function i(n){return new r(n)}n.createDefinition=i;n.filterId="MsPortalFx_ResourceType";var r=(function(n){function t(t){var i=n.call(this,4)||this;return i.getResourceTypes=t.getResourceTypes,i}return __extends(t,n),t})(t)})(h=n.ResourceTypeFilter||(n.ResourceTypeFilter={}))})(n||(n={})),n}));
define("Fx/DependencyInjection",["require","exports","o","a"],(function(n,t,i){"use strict";function u(n){return n.name||"<unknown type>"}function s(n){if(n&&r(h,n)!==n)throw new Error("The '"+u(n)+"' is not a scope.");}function v(){return function(n){o(h,n,n)}}function y(n){return s(n),function(t){o(f,{target:t,scope:n},t)}}function p(n){return s(n),function(t,i){o(f,{target:t,propertyKey:i,scope:n},t)}}function e(n){return typeof n.then=="function"}function c(n,t){var i=r("design:paramtypes",n.target,n.propertyKey);i&&i.forEach(t)}var l;i.defineProperty(t,"__esModule",{value:!0});var h="fx:scope",f="fx:class",a=Map,o=Reflect.defineMetadata,r=Reflect.getOwnMetadata;t.Scope=v;t.Class=y;t.Factory=p;l=(function(){function n(n,t){this._map=new a;s(n);this._scope=n;this._baseContainer=t}return n.prototype.has=function(n){return!!r(f,n)},n.prototype.get=function(n){return this._validate(new Map,n,!1),this._getInstance(n)},n.prototype.getAsync=function(n){return this._validate(new Map,n,!0),Q(this._getInstance(n))},n.prototype.set=function(n,t){return this._dispatch(n,(function(n,i){if(i.isComposed)throw new Error("Cannot set instance because the type has already been composed.");i.instance=t})),this},n.prototype.setInterceptor=function(n,t){return this._dispatch(n,(function(n,i){if(i.isComposed)throw new Error("Cannot set interceptor because the type has already been composed.");i.interceptor=t})),this},n.prototype.disposeAsync=function(){var n=new Map,t=[];return this._map.forEach((function(i){i.hasOwnership&&!n.get(i.instance)&&(n.set(i.instance,i.instance),t.push(Q(i.instance).then((function(n){return n.dispose&&n.dispose()}))))})),Q.all(t)},n.prototype._getInstance=function(t){return this._dispatch(t,(function(t,i,r){var u,s,f,o,h;return i.isComposed||(i.isComposed=!0),u=i.instance,u||(s=function(n){return r.propertyKey?(t=r.target)[r.propertyKey].apply(t,n):new((i=r.target).bind.apply(i,[void 0].concat(n)));var t,i},f=[],c(r,(function(i){f.push(i===n?t:t._getInstance(i))})),u=f.every((function(n){return!e(n)}))?s(f):Q.all(f).then(s),o=i.interceptor,o&&(u=e(u)?u.then((function(n){return o(n)||n})):o(u)||u),h=function(n){i.hasOwnership=!0;i.instance=n},h(u),e(u)&&u.then(h)),u}))},n.prototype._validate=function(t,i,f){this._dispatch(i,(function(i,o,s){if(o.instance){if(!f&&e(o.instance))throw new Error("Cannot compose async type.");}else{var h=s.target;if(!f&&s.propertyKey&&r("design:returntype",h,s.propertyKey)!==h)throw new Error("The factory method for '"+u(h)+"' does not have an explicit return type of '"+u(h)+"'.");if(t.get(h))throw new Error("Cannot compose '"+u(h)+"' because a cycle has been detected.");t.set(h,h);try{c(s,(function(r){r!==n&&i._validate(t,r,f)}))}finally{t.delete(h)}}}))},n.prototype._dispatch=function(n,t){var o=r(f,n),i,e;if(!o)throw new Error("Cannot compose '"+u(n)+"' because it is not correctly decorated.");for(i=this;;)if(i._scope===o.scope)break;else if(i._baseContainer)i=i._baseContainer;else if(o.scope)throw new Error("Scope is not valid.");else break;return e=i._map.get(n),e||(e={},i._map.set(n,e)),t(i,e,o)},n})();t.Container=l}));
define("Fx/Feedback",["require","exports","f","i"],(function(n,t,i,r){"use strict";var u;return (function(n){function o(n){u.showNpsEndpoint.invoke(t.client,f.Constants.Shell,n)}function s(){return u.canShowNpsEndpoint.invoke(t.client,f.Constants.Shell,null)}var f=i.Base,t=r.Rpc,e=r.Constants.RpcMethods,u;(function(n){n.showNpsEndpoint=new t.FuncEndPointDefinition(e.showNps);n.canShowNpsEndpoint=new t.FuncEndPointDefinition(e.canShowNps)})(u=n.Internal||(n.Internal={}));n.showNps=o;n.canShowNps=s;n.openResourceDeletedFeedbackPane=function(){return Q(!0)}})(u||(u={})),u}));
define("FxHubs/HubsSettingsSchema",["require","exports","i","o"],(function(n,t,i,r){"use strict";var f,e,u;r.defineProperty(t,"__esModule",{value:!0});f=i.Rpc;e=i.Constants.RpcMethods;t.readHubsUserSettings=new f.FuncEndPointDefinition(e.shellReadUserSettings);t.writeHubsUserSettings=new f.ActionEndPointDefinition(e.shellWriteUserSettings),(function(n){var t="gallery_create",r=t+"Launcher_lastUsed";n.createLastDeployedItems=t+"_lastDeployed_galleryItems";n.createLauncherLastUsedSubscriptionId=r+"_subscriptionId";n.createLauncherLastUsedResourceGroupLocation=r+"_resourceGroupLocation";n.deploymentsLastUsedLocations=i.Azure.lastUsedLocationsKey;n.whatsNewLastNotificationTime="whatsNew_lastNotificationTimestamp";n.lastRecommendationsFetchTime="recommendations_lastFetchTimestamp";n.subscriptionsSelected="subscriptions_selected";n.pastDueSubscriptionsSnoozed="pastduesubscriptions_snoozed";n.browseColumnsSettings="browse_columns";n.recentResourcesSettings="browse_recentResources"})(u=t.Keys||(t.Keys={}));t.allowedUserSettingsKeys=[u.createLastDeployedItems,u.createLauncherLastUsedSubscriptionId,u.createLauncherLastUsedResourceGroupLocation,u.deploymentsLastUsedLocations,]}));
define("FxHubs/MarketplaceRpc",["require","exports","f","i"],(function(n,t,i,r){"use strict";var u;return (function(n){function t(){return r.Extension.getWindowId({name:u.Constants.ExtensionNames.Marketplace})}function f(n){return i.Services.Rpc.invokeCallback(t(),"getCreateFlow",n).then((function(n){return n})).catch((function(n){throw n;}))}function e(n,r){return i.Services.Rpc.invokeCallback(t(),"validateSubscriptions",{galleryItem:n,subscriptions:r})}var u=i.Base;n.getCreateFlow=f;n.validateSubscriptions=e})(u||(u={})),u}));
define("FxHubs/Permissions",["require","exports","f","i","ko"],(function(n,t,i,r,u){"use strict";var f;return (function(n){function y(n,t){if(!t&&a.fxDisableRbacCache)return{getPermissions:n,getCachedPermissions:function(){return{}},clear:i.noop};var r,u=function(){return r=r||{}};return{getPermissions:function(t){var r=u(),f=r[t]||(r[t]=i.memoizeQ((function(){return Q(n(t))})));return f()},getCachedPermissions:u,clear:function(n){var i=u(),t=i[n];t&&t.clear()}}}function p(n){return n.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function w(n){n=n.replace(o,"\x00");var t=p(n).replace(o,".*").replace("\x00",o).replace("\\t","\t").replace("\\n","\n").replace("\\r","\r").replace("\\\\","\\").replace("\\'","'");return new RegExp("^"+t+"$","i")}function h(n){return w(n)}function b(n){var t=(n.actions||[]).map(h),i=(n.notActions||[]).map(h);return{actions:t,notActions:i}}function k(n,t){var i=!!t.actions.first((function(t){return t.test(n)})),r=!!t.notActions.first((function(t){return t.test(n)}));return i&&!r}function d(n,t,i,r){if(!t||!r||r.length===0)return!1;var u=r.map(b);return t.every((function(n){return n.length>1&&n.charAt(0)==="."&&n.charAt(1)==="/"&&(n="{resourceType}"+n.substring(1)),n=n.format(i),!!u.first((function(t){return k(n,t)}))}))}var c=i.Base,l=r.Rpc,t=i.ViewModels.Services.ResourceTypes,e=l.FuncEndPointDefinition,a=window,g=i.isDevelopmentMode,o="\\*",nt=new c.Diagnostics.Log("MsPortalFx/Azure/ResourceManager/Permissions"),f,v,s;(function(n){n.hasPermissionToHubs="MsPortalHubs.Constants.RpcMethods.hasPermissionToHubs";n.getPermissionToHubs="MsPortalHubs.Constants.RpcMethods.getPermissionToHubs";n.isCoAdmin="MsPortalHubs.Constants.RpcMethods.isCoAdmin"})(f=n.RpcMethodNames||(n.RpcMethodNames={})),(function(n){n.hasPermissionsToHubs=new e(f.hasPermissionToHubs);n.getPermissionsToHubs=new e(f.getPermissionToHubs);n.isCoAdminEndpoint=new e(f.isCoAdmin)})(v=n.Rpc||(n.Rpc={}));n.createCachedPermissionsGetter=y;s=(function(){function n(){}return n.hasPermission=function(r,f,e,o){var h,s,c,l;if(typeof r!="string")return Q().then((function(){throw new Error("EntityId is not a string. "+u.toJSON(r));}));if(r.charAt(0)!=="/"&&(r="/"+r),n.isRDFEAction(f))return s=new i.Errors.Error("Cannot evaluate RDFE actions, get permissions directly from hubs"),s.data={id:r,reqActions:f},Q.reject(s);if(t.isResourceGroupId(r))h="Microsoft.Resources/subscriptions/resourceGroups";else if(t.isSubscriptionId(r))h="Microsoft.Resources/subscriptions";else if(t.isResourceManagerId(r))h=t.buildResourceTypeFromResourceManagerId(r);else return s=new i.Errors.Error("Invalid subscription, resource or resource group id '"+t.sanitizeId(r)+"'"),s.data={id:r,reqActions:f},Q.reject(s);return c={resourceType:h},l=e&&e.length?Q([{actions:e||[],notActions:[]}]):Q(o(r)),l.then((function(n){return d(r,f,c,n)}),(function(){return!0}))},n.isRDFEAction=function(n){return n&&n.length===1&&n[0]==="rdfe"},n})();n.PermissionChecker=s})(f||(f={})),f}));
define("FxHubs/ResourceProvider",["require","exports","f"],(function(n,t,i){"use strict";var r;return (function(n){function f(n){if(t.isSubscriptionId(n))return r.Subscriptions.toLowerCase();if(t.isResourceGroupId(n))return r.ResourceGroups.toLowerCase();var i=t.parseResourceDescriptor(n);return t.buildResourceTypeFromResourceDescriptor(i)}var u=i.Base,r=u.Constants.ResourceTypes,t=i.ViewModels.Services.ResourceTypes;n.buildResourceType=f})(r||(r={})),r}));
define("FxHubs/RpcEndPoints",["require","exports","f","i","o"],(function(n,t,i,r,u){"use strict";var a,v,y,p,w,o,b,k,d,g,nt,tt,it,rt;u.defineProperty(t,"__esModule",{value:!0});var c=i.Base,s=r.Rpc,e=s.FuncEndPointDefinition,l=s.ActionEndPointDefinition,h=s.FuncEndPointDefinition,f;(function(n){n.showWhatsNewModal="MsPortalHubs.RpcEndPoints.showWhatsNewModal";n.showUpdateContactModal="MsPortalHubs.RpcEndPoints.showUpdateContactModal";n.updateContactEmail="MsPortalHubs.RpcEndPoints.updateContactEmail";n.getAssetTypesInformationObservable="MsPortalHubs.RpcEndPoints.getAssetTypesInformationObservable";n.getResourceAssetInformation="MsPortalHubs.RpcEndPoints.getResourceAssetInformation";n.mapResourceIdToDynamicSelectionAndIcon="MsPortalHubs.RpcEndPoints.mapResourceIdToDynamicSelectionAndIcon";n.pingSelectedSubscriptionsList="MsPortalHubs.RpcEndPoints.SelectedSubscriptions.pingSelectedSubscriptionsList";n.getFirstPageAndSelectedSubscriptions="MsPortalHubs.RpcEndPoints.SelectedSubscriptions.getFirstPageAndSelectedSubscriptions";n.getSubscriptionsDisplayedInSession="MsPortalHubs.RpcEndPoints.SelectedSubscriptions.getSubscriptionsDisplayedInSession";n.getSelectedSubscriptions="MsPortalHubs.RpcEndPoints.SelectedSubscriptions.getSelectedSubscriptions";n.getValidSelectedSubscriptions="MsPortalHubs.RpcEndPoints.SelectedSubscriptions.getValidSelectedSubscriptions";n.getAllSubscriptionIds="MsPortalHubs.RpcEndPoints.SelectedSubscriptions.getAllSubscriptionIds";n.processSelectedSubscriptionChanges="MsPortalHubs.RpcEndPoints.SelectedSubscriptions.processSelectedSubscriptionChanges";n.getOrSetUserSettingsSelectedSubscriptions="MsPortalHubs.RpcEndPoints.SelectedSubscriptions.getOrSetUserSettingsSelectedSubscriptions";n.getSubscriptionSearchResults="MsPortalHubs.RpcEndPoints.SelectedSubscriptions.getSubscriptionSearchResults";n.getAllSubscriptionsCount="MsPortalHubs.RpcEndPoints.SelectedSubscriptions.getAllSubscriptionsCount";n.search="MsPortalHubs.RpcEndPoints.search";n.getLocations="MsPortalHubs.RpcEndPoints.getLocations";n.getSharedCuration="MsPortalHubs.RpcEndPoints.getSharedCuration";n.getRecentResources="MsPortalHubs.RpcEndPoints.getRecentResources";n.getMarketplaceUserSettings="MsPortalHubs.RpcEndPoints.Marketplace.getMarketplaceUserSettings";n.publishIrisNotificationsTelemetry="MsPortalHubs.RpcEndPoints.publishIrisNotificationsTelemetry";n.getSpecsCosts="getSpecsCosts"})(f=t.Constants||(t.Constants={})),(function(n){n.isArtBrowseEnabledEndpoint=new e("MsPortalHubs.RpcEndPoints.isArtBrowseEnabled")})(a=t.ArtBrowse||(t.ArtBrowse={})),(function(n){n.getAssetTypesInformationObservableEndPoint=new s.ProxiedObjectTypeDefinition(f.getAssetTypesInformationObservable);n.getResourceAssetInformationEndPoint=new e(f.getResourceAssetInformation);n.getRecentResourcesEndPoint=new e(f.getRecentResources)})(v=t.AssetTypes||(t.AssetTypes={})),(function(n){n.showWhatsNewModal=new e(f.showWhatsNewModal)})(y=t.WhatsNew||(t.WhatsNew={})),(function(n){n.showUpdateContactModal=new e(f.showUpdateContactModal);n.updateContactEmail=new e(f.updateContactEmail)})(p=t.UpdateContact||(t.UpdateContact={})),(function(n){n.pingSelectedSubscriptionsListEndPoint=new e(f.pingSelectedSubscriptionsList)})(w=t.SelectedSubscriptions||(t.SelectedSubscriptions={})),(function(n){n.getFirstPageAndSelectedSubscriptionsEndPoint=new e(f.getFirstPageAndSelectedSubscriptions);n.getSubscriptionsDisplayedInSessionEndPoint=new e(f.getSubscriptionsDisplayedInSession);n.getSelectedSubscriptionsEndPoint=new e(f.getSelectedSubscriptions);n.getValidSelectedSubscriptionsEndPoint=new e(f.getValidSelectedSubscriptions);n.getAllSubscriptionIdsEndPoint=new e(f.getAllSubscriptionIds);n.processSelectedSubscriptionChangesEndPoint=new e(f.processSelectedSubscriptionChanges);n.getOrSetUserSettingsSelectedSubscriptionsEndPoint=new e(f.getOrSetUserSettingsSelectedSubscriptions);n.getSubscriptionSearchResultsEndPoint=new e(f.getSubscriptionSearchResults);n.getAllSubscriptionsCountEndPoint=new e(f.getAllSubscriptionsCount)})(o=t.Subscriptions||(t.Subscriptions={})),(function(n){n.getMarketplaceUserSettingsEndPoint=new e(f.getMarketplaceUserSettings)})(b=t.Marketplace||(t.Marketplace={})),(function(n){n.getSpecsCostsEndPoint=new e(f.getSpecsCosts)})(k=t.SpecsData||(t.SpecsData={})),(function(n){n.getSharedCurationEndpoint=new e(f.getSharedCuration)})(d=t.Curation||(t.Curation={})),(function(n){n.searchEndpoint=new e(f.search)})(g=t.Search||(t.Search={})),(function(n){n.locationEndpoint=new e(f.getLocations)})(nt=t.Location||(t.Location={})),(function(n){function e(n,i){return Q(o.getFirstPageAndSelectedSubscriptionsEndPoint.invoke(n,t,i))}function h(n){return Q(o.getSubscriptionsDisplayedInSessionEndPoint.invoke(n,t,null))}function l(n){return Q(o.getSelectedSubscriptionsEndPoint.invoke(n,t,null))}function a(n,i){return Q(o.getValidSelectedSubscriptionsEndPoint.invoke(n,t,i))}function v(n){return Q(o.getAllSubscriptionIdsEndPoint.invoke(n,t,null))}function y(n){return Q(o.getAllSubscriptionsCountEndPoint.invoke(n,t,null))}function p(n,i){return Q(o.processSelectedSubscriptionChangesEndPoint.invoke(n,t,i)).then((function(n){var t=n.selectedSubscriptions,i=n.areAllSubsSelected;return{displayedSubscriptionsItems:i?t.slice(0,1e3):n.displayedSubscriptionsItems,selectedSubscriptions:t,areAllSubsSelected:i}}))}function w(n,i){return Q(o.getSubscriptionSearchResultsEndPoint.invoke(n,t,i))}function b(n,t){return Q(r.Extension.mapResourceIdToDynamicSelectionAndIconEndPoint.invoke(s.client,c.Constants.Shell,{resourceId:n,forceBladeSelection:!0}).then((function(n){return i(n.selection,t)})))}function i(n,t){return Q(new u.PdlBladeReference(n.detailBlade,n.extension,{parameters:n.detailBladeInputs,onClosed:t}))}var u=r.Composition.Selectable,t=r.Extension.getHubsWindowId();n.getFirstPageAndSelectedSubscriptions=e;n.getSubscriptionsDisplayedInSession=h;n.getSelectedSubscriptions=l;n.getValidSelectedSubscriptions=a;n.getAllSubscriptionIds=v;n.getAllSubscriptionsCount=y;n.processSelectedSubscriptionChanges=p;n.getSubscriptionSearchResults=w;n.mapResourceIdToBladeReference=b;n.mapDynamicBladeSelectionToBladeReference=i;n.irisTelemetryEndpoint=new s.ActionEndPointDefinition(f.publishIrisNotificationsTelemetry)})(tt=t.Impl||(t.Impl={})),(function(n){n.readBrowserStorageSettingsEndpoint=new h("Shell.readBrowserStorageSettings");n.writeBrowserStorageSettingsEndpoint=new l("Shell.writeBrowserStorageSettings")})(it=t.BrowserStorageSettings||(t.BrowserStorageSettings={})),(function(n){n.getFilters=new h("Shell.getFilters");n.getFilterValues=new h("Shell.getFilterValues");n.getFilterValueDisplayText=new h("Shell.getFilterValueDisplayText");n.getFilterWarning=new h("Shell.getFilterWarning")})(rt=t.PartFilterEndpoints||(t.PartFilterEndpoints={}))}));
define("FxInternal/Composition/ViewModel",["require","exports","o"],(function(n,t,i){"use strict";function r(n){return n&&n._msPortalFx_viewModelApiV2}function u(n){return n._msPortalFx_viewModelApiV2=!0,n}i.defineProperty(t,"__esModule",{value:!0});t.isV2=r;t.markAsV2=u}));
define("FxInternal/Di",["require","exports","i","o","Fx/DependencyInjection"],(function(n,t,i,r,u){"use strict";function f(n,t){return t}r.defineProperty(t,"__esModule",{value:!0});t.Scope=u.Scope;t.Class=u.Class;t.Factory=u.Factory;t.Container=u.Container;t.container=new t.Container;u.Class()(i.Rpc.Client);t.container.set(i.Rpc.Client,i.Rpc.client);t.defineHandler=f}))