define("FxInternal/Utils/KnockoutArrayUtils",["require","exports","f","o","a","ko"],(function(n,t,i,r,u,f){"use strict";function e(n,t,r){var e=new i.Map,u=f.observableArray();return u.get=function(n){return e.get(n)},u.subscribeArrayBulkChanges(n,(function(n,i){i.forEach((function(n){e.delete(t(n))}));n.forEach((function(n){e.set(t(n),n)}))})),r=f.unwrap(r),r&&u(r.slice()),u}function o(n,r,u){return n.map((function(n){var f=i.clone(n);return f.value=n.status===t.EditStatusAdded?i.isUndefined(n.moved)?u(n.value):r[n.moved]:r[n.index],f}))}r.defineProperty(t,"__esModule",{value:!0});t.observableArrayMap=e;t.EditStatusAdded="added";t.EditStatusDeleted="deleted";t.EditStatusRetained="retained";t.mapArrayEdits=o}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Base",["require","exports","f","o","a","ko","FxInternal/Utils/KnockoutArrayUtils"],(function(n,t,i,r,u,f,e){"use strict";function s(n,t){for(var i in t)r.defineProperty(n,i,{enumerable:!1,value:t[i]})}function h(n){return n&&n._msPortalFxInternal}var o,c,l;r.defineProperty(t,"__esModule",{value:!0});o=i.Resources.Strings.CoreGrid;t.defLocalProps=s;t.defProps=i.extend;t.internal=h;c=(function(){function n(n,t,i,r){this._lifetime=n;this._grid=t;this._gridInternal=i;this._options=r}return n})();t.Plugin=c;l=(function(n){function u(t,r){var u=n.call(this,t)||this,c,l,a;u._columnId=0;u._options=r;u.disabled=i.initObservable(r.disabled,!1);u.ariaLabel=i.initObservable(r.ariaLabel);u.header={};u._loadingTasks=[];u.loading=f.observable(!1);u.loadingMessage=f.observable(o.loading);u.noData=f.observable(!0);u.noDataMessage=i.initObservable(r.noDataMessage,o.noData);var h=u._columnDefinitions=i.initObservableArray(r.columns),w=e.observableArrayMap(t,(function(n){return n.id})),b=u.columns=w;i.extend(b,{add:function(n,t){var r=[i.isNullOrUndefined(t)?(h.peek()||[]).length:t,0];h.splice.apply(h,r.concat(n))},remove:function(n){return h.remove((function(t){return n.indexOf(t.id)>=0}))},removeAll:function(){return h.removeAll()}});c=u._nodes=f.observableArray();l=u._nodesById=e.observableArrayMap(t,(function(n){return n.id}));c.mapInto(t,(function(n,t){return t}),l);a=u._nodesByItem=e.observableArrayMap(t,(function(n){return n.item}));c.mapInto(t,(function(n,t){return t}),a);var v={},y={},p=u._msPortalFxInternal={trigger:y,_nodes:c,_nodesById:l,_nodesByItem:a};return s(p,{on:function(n){var i,t;for(i in n)t=v[i],t||(t=[],v[i]=t),t.push(n[i])},addEventTriggers:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(n){y[n]=function(){var i=arguments,t=v[n];if(t)return t.map((function(n){return n.apply(null,i)}))}}))}}),p.addEventTriggers("extendGrid","initGrid","extendHeader","initHeader","extendColumnHeader","initColumnHeader","extendColumn","initColumn","extendRow","initRow","extendCell","initCell","onSizeChanged","onHeightChanged","onWidthChanged","onViewportChanged","onReset"),u}return __extends(u,n),u.prototype._extendGrid=function(n,t,i,r){i.trigger.extendGrid(n,t,i,r)},u.prototype._initGrid=function(n,t,i,r){var u=this;this._columnDefinitions.mapInto(n,(function(n,t){var i=t.header,h=i,e,r,o,s;return(!i||f.isObservable(i)||typeof i.controlType=="number"||typeof i=="string"||typeof i.htmlTemplate=="string")&&(h={content:i}),e={},r={_msPortalFxInternal:e},u._createColumnHeader(n,r,e,h),u._initColumnHeader(n,r,e,h),o={},s={_msPortalFxInternal:o},u._createColumn(n,s,o,t,r),u._initColumn(n,s,o,t,r),s}),this.columns);i.on({onSizeChanged:function(n,u,f,e,o,s){var h,c;if(n!==e){i.trigger.onWidthChanged(n,e);h=r.onWidthChanged;h&&h(n,e,t)}if(u!==o){i.trigger.onHeightChanged(u,o);c=r.onHeightChanged;c&&c(u,o,t)}if(f!==s)i.trigger.onViewportChanged(f,s)}});i.trigger.initGrid(n,t,i,r)},u.prototype._extendHeader=function(n,t,r){t.visible=i.initObservable(r.visible,!0);this._msPortalFxInternal.trigger.extendHeader(n,t,r)},u.prototype._initHeader=function(n,t,i){this._msPortalFxInternal.trigger.initHeader(n,t,i)},u.prototype._createColumnHeader=function(n,r,u,f){t.defProps(r,{ariaLabel:i.initObservable(f.ariaLabel),content:i.initObservable(f.content)});t.defProps(u,{bold:i.initValue(f.bold,!0),upperCase:i.initValue(f.upperCase,!0)});this._msPortalFxInternal.trigger.extendColumnHeader(n,r,u,f)},u.prototype._initColumnHeader=function(n,t,i,r){this._msPortalFxInternal.trigger.initColumnHeader(n,t,i,r)},u.prototype._createColumn=function(n,r,u,f,e){u._definition=f;u._lifetime=n;t.defProps(r,{id:f.id||"column_"+this._columnId++,header:e,width:i.initObservable(f.width),visible:i.initObservable(f.visible,!0)});this._msPortalFxInternal.trigger.extendColumn(n,r,u,f)},u.prototype._initColumn=function(n,t,i,r){this._msPortalFxInternal.trigger.initColumn(n,t,i,r)},u.prototype._createCell=function(n,r,u,f,e){u._lifetime=n;t.defProps(r,{column:e,content:i.initObservable(f.content),ariaLabel:i.initObservable(f.ariaLabel)});this._msPortalFxInternal.trigger.extendCell(n,r,u,f)},u.prototype._initCell=function(n,t,i,r){this._msPortalFxInternal.trigger.initCell(n,t,i,r)},u.prototype._createRow=function(n,u,o,s,h){o._node=h;o._lifetime=n;r.defineProperty(u,"item",{enumerable:!1,get:function(){return o._node.item}});t.defProps(u,{id:h.id,ariaLabel:i.initObservable(s.ariaLabel),disabled:i.initObservable(s.disabled,!1)});o.excluded=f.observable(!1);o.isGroup=f.observable(!1);u.cells=e.observableArrayMap(n,(function(n){return n.column.id}));this._msPortalFxInternal.trigger.extendRow(n,u,o,s)},u.prototype._initRow=function(n,t,i,r){var u=this,o;i.isGroup()?(o=e.observableArrayMap(n,(function(n){return n.id})),o.push({id:i._node.id,canResize:f.observable(!0),visible:f.observable(!0),width:f.observable("100%"),_msPortalFxInternal:{_definition:{defineCell:function(){return i.groupDefinition},header:"ID",id:i._node.id,width:"100%"},_lifetime:n}}),o.mapInto(n,(function(n,t){var r={},f={_msPortalFxInternal:r};return u._createCell(n,f,r,i.groupDefinition,t),u._initCell(n,f,r,i.groupDefinition,t),f}),t.cells)):this.columns.mapInto(n,(function(n,i){var c=h(i),r=c._definition.defineCell(n,t.item,t),s=r,e,o;return(!r||f.isObservable(r)||typeof r.controlType=="number"||typeof r=="string"||typeof r.htmlTemplate=="string")&&(s={content:r}),e={},o={_msPortalFxInternal:e},u._createCell(n,o,e,s,i),u._initCell(n,o,e,s,i),o}),t.cells);this._msPortalFxInternal.trigger.initRow(n,t,i,r)},u.prototype._processLoadingTask=function(){var t=this,n=this._loadingTasks.shift();n?(this.loading(!0),this.loadingMessage(n.message||o.loading),n.completion.finally((function(){t._processLoadingTask()})).catch((function(){}))):(this.loading(!1),this.loadingMessage(o.loading))},u.prototype.displayLoadingMessage=function(n,t){this._loadingTasks.push({completion:n,message:t});this.loading()||this._processLoadingTask()},u})(i.ViewModels.Controls.Base.ViewModel);t.ViewModel=l}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Activation",["require","exports","o","ko","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(n,t,i,r,u){"use strict";i.defineProperty(t,"__esModule",{value:!0});var f=(function(n){function t(t,i,f,e){function a(n,t){var i=u.internal(n),r=u.internal(t),f=!1;return o!==i&&(o&&o.activated(!1),i?(i.activated(!0),h=n.column.id):h=null,o=i,f=!0),s!==r&&(s&&s.activated(!1),r?(r.activated(!0),c=t.id,l=t.item):(c=null,l=null),s=r,f=!0),f}var v=n.call(this,t,i,f,e)||this,o,s,h,c,l,y=function(n,t){var i=a(n,t);return i&&f.freezeSelection(t),i},p=function(){var n=a();return n&&f.restoreSelection(),n};f.on({extendGrid:function(n,t,i){u.defProps(i,{activate:y,deactivate:p})},extendRow:function(n,t,i){var f=r.observable(!1);t.activated=f;u.defLocalProps(i,{activated:f})},initRow:function(n,t){var r=c===t.id||l===t.item,i;r&&(t.activated(!0),i=t.cells.get(h),i&&i.activated(!0))},extendCell:function(n,t,i){var f=r.observable(!1);t.activated=f;u.defLocalProps(i,{activated:f})}});return v}return __extends(t,n),t})(u.Plugin);t.Plugin=f}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.ContextMenu",["require","exports","f","o","ko","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(n,t,i,r,u,f){"use strict";r.defineProperty(t,"__esModule",{value:!0});var e=(function(n){function t(t,r,e,o,s){var y=n.call(this,t,r,e,o)||this,h=o.contextMenu;if(h){var p=i.wrap(!0),a=i.wrap([]),w=h.canShowMenu||s.canShowMenu||p,b=h.supplyMenuCommands||s.supplyMenuCommands||a,k=h.supplyMenuBulkCommands||s.supplyMenuBulkCommands||a,d=h.supplyButtonCommands||s.supplyButtonCommands||a,g=i.initObservable(h.visible,!0),c=t.createChildLifetime(),l=u.observableArray(),nt=i.initValue(h.maxButtonCommands,i.initValue(s.maxButtonCommands,1)),tt=function(n,t){return Q(d(n,t,r))},it=function(n){return w(n,r)},v=function(n){var t=f.internal(n);return t.canShowMenu()},rt=function(n){if(l.removeAll(),c.dispose(),c=t.createChildLifetime(),v(n)){var i=r.selection.selectedRows();if(i.length>1){if(i.indexOf(n)>=0&&i.every(v))return Q(k(c,r.selection,r)).then((function(n){l(n||[])}))}else return Q(b(c,n,r)).then((function(n){l(n||[])}))}return Q()};e.on({extendGrid:function(n,t){t.contextMenu={maxButtonCommands:nt,supplyMenuCommands:rt,menuCommands:l,visible:g}},extendRow:function(n,t,i){i.commandButtons=u.observable([]);i.canShowMenu=u.observable(!1)},initRow:function(n,t,i){u.reactor(n,(function(){i.canShowMenu(it(t))}));Q(tt(n,t)).then((function(n){i.commandButtons(n||[])}))}})}return y}return __extends(t,n),t})(f.Plugin);t.Plugin=e}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Focus",["require","exports","f","o","ko","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(n,t,i,r,u,f){"use strict";r.defineProperty(t,"__esModule",{value:!0});var e=(function(n){function t(t,r,e,o){var v=n.call(this,t,r,e,o)||this,l=o.focus||{},s=u.observable(),a=u.observable(),c=e.rows,y=function(n){return!!n&&c().some((function(t){return t===n}))},h=function(n){var r=y(n),i,t;return r&&(i=s(),t=n,i!==t&&(s(t),e.trigger.rowChanged(t,i))),r},p=function(){for(var t,f=s(),i=!1,r,u=c(),n=0;n<u.length;n++)if(t=u[n],t===f)i=!0;else if(i){r=t;break}return h(r)},w=function(){for(var t,u=s(),i,r=c(),n=0;n<r.length;n++){if(t=r[n],t===u)break;i=t}return h(i)},b=function(){var n=c()[0];return h(n)},k=function(){var n=c(),t=n[n.length-1];return h(t)};e.on({extendGrid:function(n,t){t.focus={currentRow:s,currentCell:a,moveToRow:h,moveDown:p,moveUp:w,moveFirst:b,moveLast:k}},initGrid:function(n,t,i){u.reactor(n,(function(){var n=i.rows(),t=n.length&&n[0],r=s(),u=n.some((function(n){return n===r}));u||(s(t),i.trigger.rowChanged(t,r))}))},extendRow:function(n,t,r,e){f.defProps(t,{disabled:i.initObservable(e.disabled,!1),focused:u.observable(!1)});f.defProps(r,{tabbable:u.observable(!1)})},enterRow:function(n,t){var i=l.onEnterRow,u;i&&(u=f.internal(n),u.excluded()||i(n,r));h(n);a(t)},exitRow:function(n){var t=l.onExitRow,i;t&&(i=f.internal(n),i.excluded()||t(n,r))},enterCell:function(n,t){var i=l.onEnterCell,u;i&&(u=f.internal(t),u.excluded()||i(n,t,r));a(n)},exitCell:function(n,t){var i=l.onExitCell,u;i&&(u=f.internal(t),u.excluded()||i(n,t,r))},rowChanged:function(n,t){n&&n.focused(!0);t&&t.focused(!1)}});return e.addEventTriggers("enterRow","exitRow","enterCell","exitCell","rowChanged"),v}return __extends(t,n),t})(f.Plugin);t.Plugin=e}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Resizing",["require","exports","f","o","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(n,t,i,r,u){"use strict";r.defineProperty(t,"__esModule",{value:!0});var f=(function(n){function t(t,r,f,e){var c=n.call(this,t,r,f,e)||this,s=i.initValue(e.resizing,{}),o,h;if(s){o=s.onColumnsResized;h=function(n,t){n.forEach((function(n,i){n.width(t[i])}));o&&o(n,r)};f.on({extendGrid:function(n,t){t.resizing={resizeColumns:h}},extendColumn:function(n,t,r,f){u.defProps(t,{canResize:i.initObservable(f.canResize,!0)})}})}return c}return __extends(t,n),t})(u.Plugin);t.Plugin=f}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Scrolling",["require","exports","o","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(n,t,i,r){"use strict";i.defineProperty(t,"__esModule",{value:!0});var u=(function(n){function t(t,i,r,u){return n.call(this,t,i,r,u)||this}return __extends(t,n),t})(r.Plugin);t.Plugin=u}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection",["require","exports","f","o","a","ko","FxInternal/Utils/KnockoutArrayUtils","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(n,t,i,r,u,f,e,o){"use strict";function h(n){var t=n.selectedOrCurrentRows;return f.pureComputed((function(){var r=[],i;return t?r=t():(i=f.unwrap(n),i&&(r=u.isArray(i)?i:[i])),r}))}function s(n){var t=o.internal(n);return!t.isGroup||!t.isGroup()}r.defineProperty(t,"__esModule",{value:!0});t.wrapContextRows=h;var c=(function(n){function t(t,r,u,h,c){function yr(n){var t;return n&&(t={row:ft.get(n.id)||ut.get(n.item),item:n.item,id:n.id}),t}function w(n){var t;return n&&(t={row:n,item:n.item,id:n.id}),t}function st(n){var t,i,r,f;return n&&(i=ut.get(n),i?t=w(i):(r=u._nodesByItem.get(n),f=void 0,r&&(f=r.id),t={item:n,id:f})),t}function ri(n){var r;if(n!==undefined){var i=ft.get(n),t=void 0,f=u._nodesById.get(n);f&&(t=f.item,t&&!i&&(i=ut.get(t)));r={row:i,item:t,id:n}}return r}var ei=n.call(this,t,r,u,h)||this,ft,dt,ui,fi;c||(c={virtualized:!1});var a=h.selection||{},y=i.wrap(!0),ht=i.initValue(a.selectionMode,0),v=f.observable(!1),ct=i.initValue(a.selectAllDisabled,!1),gt=ht===0,rt=ht===1,g=c.virtualized,oi=i.initObservable(a.visible,!0),nt=r.rows,ut=e.observableArrayMap(t,(function(n){return n.item}));nt.mapInto(t,(function(n,t){return t}),ut);ft=e.observableArrayMap(t,(function(n){return n.id}));nt.mapInto(t,(function(n,t){return t}),ft);var p=f.observable(!1),l=e.observableArrayMap(t,(function(n){return n.id})),b=e.observableArrayMap(t,(function(n){return n.id})),et=f.observableArray();l.subscribe(t,(function(n){et(n.filter((function(n){return!!n.row})).map((function(n){return n.row})))}));var ni=f.observableArray(),lt=c.virtualized?undefined:f.observable(0),ot=c.virtualized?undefined:f.observable(0),at=l.mapInto(t,(function(n,t){return t.item})),si=b.mapInto(t,(function(n,t){return t.item})),ti=f.observableArray(),hi=a.canSelectItem||y,ci=a.canUnselectItem||y,li=a.canSelectAllItems||y,ai=a.canUnselectAllItems||y,vi=a.canSelectRow||y,yi=a.canUnselectRow||y,pi=a.canSelectAllRows||y,wi=a.canUnselectAllRows||y,bi=p,tt=f.computed(t,(function(){return g&&p()}));tt.subscribe(t,(function(n){n?l([]):b([])}));var vt=function(n){var t=!!n&&!v(),i,u;return t&&(i=n.row,u=n.item,t=!!i||!!u,t&&i&&(t=s(i)&&vi(i,r)),t&&u&&(t=hi(u,r))),t},ki=function(n){return vt(st(n))},k=function(n){var i=vt(n);if(i){var r=n.row,u=n.item,t=!1;tt()?t=!0:r?t=r.selected():u&&(t=at().includes(u));t||(gt?l([n]):l.push(n))}return i},di=function(n){return k(st(n))},yt=function(n){var t=!!n&&!v(),i,u;return t&&(i=n.row,u=n.item,t=!!i||!!u,t&&i&&(t=s(i)&&yi(i,r)),t&&u&&(t=ci(u,r))),t},gi=function(n){return yt(st(n))},d=function(n){var i=yt(n),r,t;return i&&(r=n.id,tt()?b.push(n):(t=l.get(r),t&&(l.remove(t),p(!1)))),i},nr=function(n){return d(st(n))},pt=function(){var n=!ct&&rt&&!v();return n&&li(r)&&pi(r)},tr=f.pureComputed((function(){return pt()})),wt=function(){var n=pt();return n&&(p(!0),tt()?l([]):l(nt().filter(s).map(w))),n},ir=function(){return wt()},bt=function(){var n=!ct&&rt&&!v();return n&&ai(r)&&wi(r)},rr=f.pureComputed((function(){return bt()})),it=function(){var n=bt();return n&&(l([]),b([]),p(!1)),n},ur=function(){return it()},fr=function(n){return k(ri(n))},er=function(n){return d(ri(n))},or=f.pureComputed((function(){if(tt())return!0;if(!c.virtualized){var n=lt(),t=ot();return n>0&&t>0&&n===t}return!1})),sr=function(n){return vt(w(n))},ii=function(n){return k(w(n))},hr=function(n){return yt(w(n))},kt=function(n){return d(w(n))},cr=f.pureComputed((function(){return pt()})),lr=wt,ar=f.pureComputed((function(){return bt()})),vr=it;ui=function(n){!v()&&rt&&(dt={allSelected:p(),selected:l(),unselected:b()});try{v(!1);it();k(w(n))}finally{v(!0)}};fi=function(){if(v()){v(!1);var n=dt;dt=null;n&&rt&&(it(),n.allSelected&&wt(),n.selected&&n.selected.forEach((function(n){k(n)})),n.unselected&&n.unselected.forEach((function(n){d(n)})))}};u.on({extendGrid:function(n,t,i){t.selection={};o.defProps(t.selection,{selectionMode:ht,selectAllDisabled:ct,allRowsSelected:or,selectedRows:et,selectedOrCurrentRows:ni,canSelectRow:sr,selectRow:ii,canUnselectRow:hr,unselectRow:kt,canSelectAllRows:cr,selectAllRows:lr,canUnselectAllRows:ar,unselectAllRows:vr,visible:oi});o.defLocalProps(t.selection,{allItemsSelected:bi,selectedItems:at,unselectedItems:si,selectedOrCurrentItems:ti,canSelectItem:ki,selectItem:di,canUnselectItem:gi,unselectItem:nr,canSelectAllItems:tr,selectAllItems:ir,canUnselectAllItems:rr,unselectAllItems:ur,selectItemById:fr,unselectItemById:er});o.defProps(i,{selectionFrozen:v});o.defLocalProps(i,{freezeSelection:ui,restoreSelection:fi})},initGrid:function(n,t,i){g||ot(nt().length);nt.subscribeArrayBulkChanges(n,(function(n,t){n=n.filter(s);t=t.filter(s);g?n.forEach((function(n){var t=p()?!b.get(n.id):!!l.get(n.id);n.selected(t)})):(t.forEach((function(n){kt(n)})),ot(ot()+n.length-t.length))}));et.subscribeArrayBulkChanges(n,(function(n,t){n.forEach((function(n){n.selected(!0)}));t.forEach((function(n){n.selected(!1)}));g||lt(lt()+n.length-t.length)}));f.reactor(n,(function(){var i=[],r=et(),n,u;r.length?i=r.slice():(n=t.focus.currentRow(),n&&(u=o.internal(n),u.excluded()||(i=[n])));ni(i)}));g||i._nodesById.subscribeArrayBulkChanges(n,(function(n,t){t.forEach((function(n){var t=l.get(n.id),r;t&&(r=i._nodesById.get(n.id),r?(d(t),k(yr(r))):d(t))}))}));f.reactor(n,(function(){var i=[],r=at(),n,u;r.length?i=r.slice():(n=t.focus.currentRow(),n&&(u=o.internal(n),u.excluded()||(i=[n.item])));ti(i)}))},extendRow:function(n,t){t.selected=f.observable(!1)},rowChanged:function(n,t){gt&&(t&&kt(t),n&&ii(n))},onReset:function(){it()}});return ei}return __extends(t,n),t})(o.Plugin);t.Plugin=c}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Toolbar",["require","exports","f","o","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(n,t,i,r,u){"use strict";r.defineProperty(t,"__esModule",{value:!0});var f=(function(n){function t(t,r,u,f,e){var s=n.call(this,t,r,u,f)||this,o=f.toolbar;if(o)u.on({extendGrid:function(n,t){t.toolbar={visible:i.initObservable(o.visible,!0),viewModel:null}},initGrid:function(){var n=o.createToolbar||e.createToolbar,t=n(s._lifetime,r);r.toolbar.viewModel=t}});return s}return __extends(t,n),t})(u.Plugin);t.Plugin=f}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Addition",["require","exports","f","o","ko","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(n,t,i,r,u,f){"use strict";r.defineProperty(t,"__esModule",{value:!0});var e=(function(n){function t(t,r,e,o){var y=n.call(this,t,r,e,o)||this,h=o.addition;if(h){var s=u.observable(),l=h.canAddRow||i.wrap(!0),a=h.onAddRow,p=function(){var n=s(),t=!!n&&n.dirty();return t&&l(r)},w=function(){var i=p(),t,n;return i&&(t=s(),e.transferAdditionalRows(),n=f.internal(t),n._canStopEditing(!0),n.placeholder(!1),n.excluded(!1),n.tabbable(!1),s(null),r.dirty(!0),t.cells().forEach((function(n){return n.dirty(!0)})),a&&a(t,r)),i},c=function(){return!0&&l(r)},v=function(){var l=c(),u=s(),a,o;if(l&&!u){var o=t.createChildLifetime(),v=h.createItem(),n=e.createRow(o,v),i=f.internal(n);i.placeholder(!0);i.excluded(!0);i.tabbable(!0);s(n);e.additionalRows([n]);i._canStopEditing(!1);r.editing.editRow(n)}else!l&&u&&(s(null),e.additionalRows([]),a=f.internal(u),o=a._lifetime,o.dispose())};e.on({extendGrid:function(n,t){t.addition={canAddRow:u.pureComputed(c)}},initGrid:function(n){var t=n.createChildLifetime();u.reactor(t,(function(){var n=s();n&&n.dirty()&&Q.nextTick((function(){t.isDisposed()||(w(),v())}))}));u.reactor(t,(function(){c();Q.nextTick((function(){t.isDisposed()||v()}))}))},extendRow:function(n,t,i){i.placeholder=u.observable(!1)}})}return y}return __extends(t,n),t})(f.Plugin);t.Plugin=e}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Deletion",["require","exports","f","o","ko","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection"],(function(n,t,i,r,u,f,e){"use strict";r.defineProperty(t,"__esModule",{value:!0});var o=i.Resources.Strings.EditableGrid,s=i.Base.Images.Delete({isLogo:!0}),h=(function(n){function t(t,r,h,c){var p=n.call(this,t,r,h,c)||this,l=c.deletion;if(l){var w=l.canDeleteRows||i.wrap(!0),v=l.onDeleteRows,b=r.items,a=function(n){var t=!!n&&n.length;return t&&w(n,r)},y=function(n){var t=a(n);return t&&(n=n.slice(),t=n.every((function(n){return n.focused()&&r.focus.moveDown(),b.remove(n.item),!0})),t&&(r.dirty(!0),v&&v(n,r))),t},k=function(n,t,r){var f=e.wrapContextRows(t);return r=i.extend({name:"DeleteRows",label:o.deleteCommandText,icon:s,command:{canExecute:u.pureComputed((function(){return a(f())})),execute:function(n){return y(n),Q()}},commandContext:f},r),new i.ViewModels.Toolbars.CommandButton(r)};h.on({extendGrid:function(n,t){t.deletion={};f.defProps(t.deletion,{canDeleteRows:a,deleteRows:y});f.defLocalProps(t.deletion,{createDeleteRowsCommand:k})}})}return p}return __extends(t,n),t})(f.Plugin);t.Plugin=h}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Editing",["require","exports","f","o","ko","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(n,t,i,r,u,f){"use strict";r.defineProperty(t,"__esModule",{value:!0});var e=i.wrap(!0),o=(function(n){function t(t,o,s,h){var p=n.call(this,t,o,s,h)||this,c=h.editing||{},w=c.canEditRow||e,b=c.canStopEditingRow||i.wrap(Q(!0)),l=function(n){var t=!!n&&!n.disabled();return t&&w(n,o)},a=function(n){var i=l(n),t,r;return i&&!n.editing()&&(t=f.internal(n),r=t._editingLifetime=t._lifetime.createChildLifetime(),n.cells.mapInto(r,(function(t,i){var h=f.internal(i.column),o=h._definition.createCellEditor,e=f.internal(i),r=e._editorLifetime,s;o&&!r&&(r=e._editorLifetime=e._lifetime.createChildLifetime(),s=o(r,n.item,n),u.reactor(r,(function(){var n=u.unwrap(s);i.editor(n)})))})),n.editing(!0)),i},v=function(n){var t=!!n,i;return t&&(i=f.internal(n),t=i._canStopEditing()&&!n.focused()&&!n.disabled()&&n.editing()&&n.validationErrors().length===0,t)?b(n,o).then((function(t){return t&&n.dirty()?n.triggerValidation().then((function(){return n.validationErrors().length===0})):t})):Q(t)},k=function(n){return v(n).then((function(t){if(t){var i=f.internal(n);i._editingLifetime&&(i._editingLifetime.dispose(),i._editingLifetime=null);n.editing(!1)}return t}))},y=u.observable().extend({rateLimit:{method:"notifyWhenChangesStop",timeout:200}});y.subscribe(t,(function(n){a(n)}));s.on({extendGrid:function(n,t){t.editing={canEditRow:l,editRow:a,canStopEditingRow:v,stopEditingRow:k}},extendRow:function(n,t,i){t.editing=u.observable(!1);var r=u.observable(!0);i._canStopEditing=u.pureComputed({read:function(){return r()&&!t.validationErrors().length},write:function(n){r(n)}});i._editingLifetime=null;t.dirty=u.pureComputed((function(){return t.cells().some((function(n){return n.dirty()}))}))},extendCell:function(n,t,i){r.defineProperty(t,"editorLifetime",{enumerable:!1,writable:!0,configurable:!1,value:undefined});t.editor=u.observable();t.dirty=u.observable(!1);i._editorLifetime=null},initCell:function(n,t){u.reactor(n,(function(){var n=t.editor(),i=n&&n.dirty;i&&u.unwrap(i)&&(t.dirty(!0),o.dirty(!0))}))},rowChanged:function(n,t){t&&t.editing()&&o.editing.stopEditingRow(t);y(n)},clearDirty:function(){o.rows().forEach((function(n){n.dirty()&&n.cells().forEach((function(n){if(n.dirty()){var t=n.editor(),i=t&&t.dirty;u.isObservable(i)&&i(!1);n.dirty(!1)}}))}))}});return p}return __extends(t,n),t})(f.Plugin);t.Plugin=o}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Insertion",["require","exports","f","o","ko","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection"],(function(n,t,i,r,u,f,e){"use strict";r.defineProperty(t,"__esModule",{value:!0});var o=i.Resources.Strings.EditableGrid,s=i.Base.Images.Insert({isLogo:!0}),h=(function(n){function t(t,r,h,c){var w=n.call(this,t,r,h,c)||this,l=c.insertion;if(l){var b=l.createItem,a=r.rows,k=r.items,d=i.wrap(!0),g=l.canInsertRow||d,y=l.onInsertRow,v=function(n){var t=n&&a().indexOf(n)>=0;return t&&g(n,r)},p=function(n){var i=v(n),f,u,t;return i&&(f=b(),u=a().indexOf(n),k.splice(u,0,f),t=a()[u],i=r.focus.moveToRow(t),r.dirty(!0),t.cells().forEach((function(n){return n.dirty(!0)})),y&&y(t,r)),i},nt=function(n,t){var r=e.wrapContextRows(t);return new i.ViewModels.Toolbars.CommandButton({name:"InsertRow",label:o.insertCommandText,icon:s,command:{canExecute:u.pureComputed((function(){var n=r();return n.length===1?v(n[0]):!1})),execute:function(n){var t=n&&n[0];return p(t),Q()}},commandContext:r})};h.on({extendGrid:function(n,t){t.insertion={};f.defProps(t.insertion,{canInsertRow:v,insertRow:p});f.defLocalProps(t.insertion,{createInsertRowCommand:nt})}})}return w}return __extends(t,n),t})(f.Plugin);t.Plugin=h}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Reordering",["require","exports","f","o","ko","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection"],(function(n,t,i,r,u,f,e){"use strict";r.defineProperty(t,"__esModule",{value:!0});var s=i.Resources.Strings.EditableGrid,h=i.Base.Images.ArrowUp({isLogo:!0}),c=i.Base.Images.ArrowDown({isLogo:!0}),l=i.Base.Images.Upload({isLogo:!0}),a=i.Base.Images.Download({isLogo:!0}),o=i.wrap(!0),v=(function(n){function t(t,r,v,y){var ot=n.call(this,t,r,v,y)||this,w=y.reordering;if(w){var p=r.rows,b=r.items,st=i.initObservable(w.visible,!0),ht=w.canMoveRowsToRow||o,ct=w.canMoveRowsUp||o,lt=w.canMoveRowsDown||o,at=w.canMoveRowsTop||o,vt=w.canMoveRowsBottom||o,it=function(n,t){return!0&&ht(n,t,r)},k=function(n,t){var o=it(n,t),f,e,c,h;if(o){n=n.slice();var l=p(),s=n.length+1,u=void 0,a=[],i=[],v=void 0,y=0;for(f=0;f<l.length&&s;f++)e=l[f],c=n.remove(e)[0],c?(a.push(c),u===undefined&&(y++,u=f),s--):e===t?(v=i.length,i.push(e),u===undefined&&(u=f),s--):u!==undefined&&i.push(e);o=s===0;o&&(i.splice.apply(i,[v+y,0].concat(a)),h=[u,i.length],h=h.concat(i.map((function(n){return n.item}))),b.splice.apply(b,h),r.dirty(!0))}return o},d=function(n){var i=p(),t=n&&n.length&&i.length>n.length,u;return t&&(u=i[0],t=n.indexOf(u)<0),t&&ct(n,r)},rt=function(n){var o=d(n),u,t,h,c,l;if(o){u=p();n=n.slice();var s=void 0,f=[],e=void 0,i=n.length+1;for(t=0;t<u.length&&i;t++)if(h=u[t],c=n.remove(h)[0],c){if(t===0)return!1;e===undefined&&(e=t-1,s=u[e]);i--;f.push(h);t===u.length-1&&(i--,f.push(s))}else e!==undefined&&(f.push(s),s=h,i===1&&i--);o=i===0;o&&(l=[e,f.length],b.splice.apply(b,l.concat(f.map((function(n){return n.item})))),r.dirty(!0))}return o},g=function(n){var t=p(),i=n&&n.length&&t.length>n.length,u;return i&&(u=t[t.length-1],i=n.indexOf(u)<0),i&&lt(n,r)},ut=function(n){var f=g(n),s,u,o,c,l;if(f){s=p();n=n.slice();var t=[],e=void 0,i=n.length+1,h=0;for(u=0;u<s.length&&i;u++)o=s[u],c=n.remove(o)[0],c?(e===undefined&&(e=u),t.push(o),i--):e!==undefined&&(t.splice(h,0,o),h=t.length,i===1&&i--);f=i===0;f&&(l=[e,t.length],b.splice.apply(b,l.concat(t.map((function(n){return n.item})))),r.dirty(!0))}return f},nt=function(n){var t=p(),i=n&&n.length&&t.length>n.length;return i&&at(n,r)},ft=function(n){var t=nt(n),i;return t&&(i=p(),t=k(n,i[0])),t},tt=function(n){var t=p(),i=n&&n.length&&t.length>n.length;return i&&vt(n,r)},et=function(n){var t=tt(n),i;return t&&(i=p(),t=k(n,i[i.length-1])),t},yt=function(n,t,r){var f=e.wrapContextRows(t);return r=i.extend({name:"MoveUp",label:s.moveUpCommandText,icon:h,command:{canExecute:u.pureComputed((function(){return d(f())})),execute:function(n){return rt(n),Q()}},commandContext:f},r),new i.ViewModels.Toolbars.CommandButton(r)},pt=function(n,t,r){var f=e.wrapContextRows(t);return r=i.extend({name:"MoveDown",label:s.moveDownCommandText,icon:c,command:{canExecute:u.pureComputed((function(){return g(f())})),execute:function(n){return ut(n),Q()}},commandContext:f},r),new i.ViewModels.Toolbars.CommandButton(r)},wt=function(n,t,r){var f=e.wrapContextRows(t);return r=i.extend({name:"MoveTop",label:s.moveTopCommandText,icon:l,command:{canExecute:u.pureComputed((function(){return nt(f())})),execute:function(n){return ft(n),Q()}},commandContext:f},r),new i.ViewModels.Toolbars.CommandButton(r)},bt=function(n,t,r){var f=e.wrapContextRows(t);return r=i.extend({name:"MoveBottom",label:s.moveBottomCommandText,icon:a,command:{canExecute:u.pureComputed((function(){return tt(f())})),execute:function(n){return et(n),Q()}},commandContext:f},r),new i.ViewModels.Toolbars.CommandButton(r)};v.on({extendGrid:function(n,t){t.reordering={};f.defProps(t.reordering,{canMoveRowsToRow:it,moveRowsToRow:k,canMoveRowsUp:d,moveRowsUp:rt,canMoveRowsDown:g,moveRowsDown:ut,canMoveRowsTop:nt,moveRowsTop:ft,canMoveRowsBottom:tt,moveRowsBottom:et,visible:st});f.defLocalProps(t.reordering,{createMoveRowsUpCommand:yt,createMoveRowsDownCommand:pt,createMoveRowsTopCommand:wt,createMoveRowsBottomCommand:bt})}})}return ot}return __extends(t,n),t})(f.Plugin);t.Plugin=v}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Validation",["require","exports","f","o","ko","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(n,t,i,r,u,f){"use strict";r.defineProperty(t,"__esModule",{value:!0});var e=i.Base.Promises.cancelOnDispose,o=i.identity,s=(function(n){function t(t,i,r,f){var c=n.call(this,t,i,r,f)||this,s=f.validation||{},h=u.observable(!0),l=function(){var n=[],r,f;return s.validate&&(r=s.validate(i),n.push(Q(r))),s.validateAsync&&(f=e(t,(function(){return s.validateAsync(i)})),n.push(f)),i.rows().forEach((function(i){if(u.unwrap(i.editing)&&u.unwrap(i.dirty)){var r=e(t,(function(){return i.triggerValidation()}));n.push(r)}})),Q.all(n).then((function(n){var t=n.every(o);return h(t),t}))};r.on({extendGrid:function(n,t){t.validation={triggerValidation:l,valid:h}},initGrid:function(n,t){u.reactor(n,(function(){var n=t.rows().every((function(n){return!n.validationErrors().length}));h(n)}))},extendRow:function(n,t,i){t.triggerValidation=function(){var n=[];return n.push.apply(n,t.cells().map((function(n){return n.triggerValidation()}))),Q.all(n).then((function(n){return n.every(o)}))};t.validationErrors=u.pureComputed((function(){var n=[];return t.cells().forEach((function(t){var i=t.customValidationErrors();i&&i.length&&n.push.apply(n,i);i=t.editorValidationErrors();i&&i.length&&n.push.apply(n,i)})),n}));i.validationFooter=u.observable()},initRow:function(n,t,i){if(s.createRowValidationFooter){var r=n.createChildLifetime();t.validationErrors.subscribe(r,(function(f){f&&f.length&&(r.dispose(),u.reactor(n,(function(){i.validationFooter(u.unwrap(s.createRowValidationFooter(n,t)))})))}))}},extendCell:function(n,t){t.triggerValidation=function(){var n=u.unwrap(t.editor);return n&&n.triggerValidation?(n.ensureValidation&&n.ensureValidation(!0),Q(n.triggerValidation())):Q(!0)};t.customValidationErrors=u.observableArray();t.editorValidationErrors=u.pureComputed((function(){var i=u.unwrap(t.editor),r=i&&i.validationResults,f=[],n;return r&&(n=u.unwrap(r),n&&n.forEach((function(n){var t=n.message;t&&!n.valid&&f.push(t)}))),f}))}});return c}return __extends(t,n),t})(f.Plugin);t.Plugin=s}));
define("FxInternal/Data/BaseProjection",["require","exports","f","i","ko"],(function(n,t,i,r,u){"use strict";var f=u.utils,e=i.initValue,o=i.initObservableArray;return (function(){function n(n){var t=this;this._lifetime=n.lifetime.createChildLifetime();this._source=n.source;this._autoRefresh=e(n.autoRefresh,!0);this.destination=o(n.destination);this._internalEdit=!1;this.destination.subscribe(this._lifetime,(function(){if(!t._internalEdit)throw new Error("Modification of projection array not allowed while the projection is active.");}));this._autoRefresh&&r.subscribeArrayEdits(this._lifetime,this._source,(function(n){t._update(n)}))}return n.prototype._replace=function(n){var t=this.destination.peek(),i=f.compareArrays(t,n,{sparse:!0});this._apply(i)},n.prototype._apply=function(n){var t=f.createArraySplices(n);try{this._internalEdit=!0;t.length?f.applyArraySplices(this.destination,t):this.destination.notifySubscribers([],"arrayChange")}finally{this._internalEdit=!1}},n})()}));
define("FxInternal/Data/JoinProjection",["require","exports","f","i","o","FxInternal/Data/BaseProjection"],(function(n,t,i,r,u,f){"use strict";u.defineProperty(t,"__esModule",{value:!0});var e=(function(n){function t(t){var i=n.call(this,t)||this;return i._joinSource=t.joinSource,i._transferring=!1,i._autoRefresh&&r.subscribeArrayEdits(i._lifetime,i._joinSource,(function(n){i._updateJoin(n)})),i.refresh(),i}return __extends(t,n),t.prototype.refresh=function(){var n=this._source().concat(this._joinSource());this._replace(n)},t.prototype._update=function(n){this._transferring||this._apply(n)},t.prototype._updateJoin=function(n){if(!this._transferring){var t=this._source().length,r=n.map((function(n){return i.extend2(n,{index:n.index+t})}));this._apply(r)}},t.prototype.transfer=function(n){try{this._transferring=!0;n()}finally{this._transferring=!1}},t})(f);t.default=e}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid",["require","exports","f","o","ko","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Activation","FxInternal/Controls/Grid2/Grid2.CoreGrid.ContextMenu","FxInternal/Controls/Grid2/Grid2.CoreGrid.Focus","FxInternal/Controls/Grid2/Grid2.CoreGrid.Resizing","FxInternal/Controls/Grid2/Grid2.CoreGrid.Scrolling","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Toolbar","FxInternal/Controls/Grid2/Grid2.EditableGrid.Addition","FxInternal/Controls/Grid2/Grid2.EditableGrid.Deletion","FxInternal/Controls/Grid2/Grid2.EditableGrid.Editing","FxInternal/Controls/Grid2/Grid2.EditableGrid.Insertion","FxInternal/Controls/Grid2/Grid2.EditableGrid.Reordering","FxInternal/Controls/Grid2/Grid2.EditableGrid.Validation","FxInternal/Data/JoinProjection"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){"use strict";r.defineProperty(t,"__esModule",{value:!0});var g=(function(n){function t(t,r){var g=n.call(this,t,r)||this,rt,tt,it,et,ot;g.controlType=125;rt=u.observableArray();g._appendRow=null;var nt=g,d=g._msPortalFxInternal,ut=g.header,ft=r.header||{};return d.addEventTriggers("clearDirty"),tt=u.observable(!1),g.dirty=u.computed(t,{read:function(){return tt()},write:function(n){tt(n);n||d.trigger.clearDirty()}}),it=i.initObservableArray(r.items),f.defLocalProps(nt,{items:it,rows:rt}),et=0,d.rows=u.observableArray(),f.defLocalProps(d,{additionalRows:u.observableArray(),createRow:function(n,t){var f=r.defineRow,e=f?f(n,t):{},o={id:et++,item:t},i={_node:o},u={_msPortalFxInternal:i};return g._createRow(n,u,i,e,o),g._initRow(n,u,i,e,t),u},transferAdditionalRows:function(){g._join.transfer((function(){var n=d.additionalRows();d.additionalRows([]);n.forEach((function(n){g._appendRow=n;it.push(n.item)}))}));g._appendRow=null}}),g._plugins=[new s.Plugin(t,nt,d,r),new l.Plugin(t,nt,d,r),new e.Plugin(t,nt,d,r),new h.Plugin(t,nt,d,r),new c.Plugin(t,nt,d,r),new o.Plugin(t,nt,d,r,{maxButtonCommands:r.deletion?2:undefined,supplyButtonCommands:function(n,t,i){var r=[],u=i.contextMenu.maxButtonCommands;return i.deletion&&r.length<u&&r.push(i.deletion.createDeleteRowsCommand(n,t)),r},supplyMenuCommands:function(n,t,i){var r=[];return i.deletion&&r.push(i.deletion.createDeleteRowsCommand(n,t)),i.reordering&&(r.push(i.reordering.createMoveRowsUpCommand(n,t)),r.push(i.reordering.createMoveRowsDownCommand(n,t)),r.push(i.reordering.createMoveRowsTopCommand(n,t)),r.push(i.reordering.createMoveRowsBottomCommand(n,t))),i.insertion&&r.push(i.insertion.createInsertRowCommand(n,t)),r},supplyMenuBulkCommands:function(n,t,i){var r=[];return i.deletion&&r.push(i.deletion.createDeleteRowsCommand(n,t)),i.reordering&&(r.push(i.reordering.createMoveRowsUpCommand(n,t)),r.push(i.reordering.createMoveRowsDownCommand(n,t)),r.push(i.reordering.createMoveRowsTopCommand(n,t)),r.push(i.reordering.createMoveRowsBottomCommand(n,t))),i.insertion&&r.push(i.insertion.createInsertRowCommand(n,t)),r}}),ot=new a.Plugin(t,nt,d,r,{createToolbar:function(n,t){var f=new i.ViewModels.Toolbars.Toolbar(n),r=t.reordering,e=t.insertion,o=t.deletion,u=t.selection;return f.setItems([r&&r.createMoveRowsUpCommand(n,u),r&&r.createMoveRowsDownCommand(n,u),r&&r.createMoveRowsTopCommand(n,u),r&&r.createMoveRowsBottomCommand(n,u),e&&e.createInsertRowCommand(n,u),o&&o.createDeleteRowsCommand(n,u),].filter((function(n){return!!n}))),f.showLabels(!0),f}}),new p.Plugin(t,nt,d,r),new k.Plugin(t,nt,d,r),new v.Plugin(t,nt,d,r),new y.Plugin(t,nt,d,r),new w.Plugin(t,nt,d,r),new b.Plugin(t,nt,d,r),],g._extendGrid(t,nt,d,r),g._extendHeader(t,ut,ft),g._initGrid(t,nt,d,r),g._initHeader(t,ut,ft),g}return __extends(t,n),t.prototype._initGrid=function(t,i,r,u){var o=this,e;n.prototype._initGrid.call(this,t,i,r,u);e=this.items.mapInto(t,(function(n,t){var i=o._appendRow,u;return i?(u=f.internal(i),n.registerForDispose(u._lifetime),i):r.createRow(n,t)}),i.rows);i.rows.mapInto(t,(function(n,t){return f.internal(t)._node}),this._nodes);this.noData(!1);this._join=new d.default({lifetime:t,source:e,joinSource:r.additionalRows,destination:r.rows})},t})(f.ViewModel);t.ViewModel=g}));
define("Fx/Controls/EditableGrid",["require","exports","o","ko","FxInternal/Controls/Grid2/Grid2.EditableGrid"],(function(n,t,i,r,u){"use strict";function f(n,t){return r.ignoreDependencies((function(){return new u.ViewModel(n,t)}))}i.defineProperty(t,"__esModule",{value:!0});t.create=f}))