var __extends;define("WebsitesExtension/TypeScript/Models/Recommendation",["require","exports"],(function(){"use strict";var n;return (function(n){var t,i;(function(n){n[n.None=0]="None";n[n.Critical=1]="Critical";n[n.Warning=2]="Warning";n[n.Information=3]="Information";n[n.NonUrgentSuggestion=4]="NonUrgentSuggestion"})(t=n.NotificationLevel||(n.NotificationLevel={})),(function(n){n[n.Notification=0]="Notification";n[n.Api=1]="Api";n[n.Email=2]="Email";n[n.All=65535]="All"})(i=n.Channels||(n.Channels={}))})(n||(n={})),n}));__extends=this&&this.__extends||(function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}})();define("WebsitesExtension/TypeScript/WebHostingPlan/Blades/BaseWebHostingPlanBlade",["require","exports","f","o","ko","Websites/ClientResources/GeneralResources",
"WebsitesExtension/TypeScript/Models/WebHostingPlanResourceId","WebsitesExtension/TypeScript/ExtensionAssets/Constants","WebsitesExtension/TypeScript/Models/ConfigOptions","WebsitesExtension/TypeScript/Utility/Utility.WebHostingPlan","WebsitesExtension/TypeScript/Utility/Utility.Specs","WebsitesExtension/TypeScript/_generated/Svg"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";var a;return (function(n){var t=(function(n){function t(t,r,f){var e=n.call(this)||this;return e._serverFarmView=f.websitesData.webHostingPlanCache.createView(t),e._aseView=f.aseData.aseCache.createView(t),e.title=u.observable(""),e.subtitle=u.observable(""),e.icon=u.observable(i.Base.Images.Polychromatic.WebHosting()),e.WebHostingPlanId=u.observable(undefined),e.resourceUri=u.observable(undefined),e.statusBar=u.observable(),u.reactor(t,(function(){var n=e._aseView.item(),t=e._serverFarmView.item();t&&n&&n.Kind()===o.ASEv2.kind&&e._updateStatusBar(t,n)})),e}return __extends(t,n),t.prototype.onInputsSet=function(n){var
t=this;return this.resourceUri(h.getResourceUriFromInputs(n)),this.WebHostingPlanId(e.WebHostingPlanResourceId.fromCsmResourceId(this.resourceUri())),this._serverFarmView.fetch(this.WebHostingPlanId()).then((function(){t.onWebHostingPlanChange(t._serverFarmView.item());t._serverFarmView.item().HostingEnvironmentId()&&t._aseView.fetch(t._serverFarmView.item().HostingEnvironmentId())}))},t.prototype.onWebHostingPlanChange=function(n){this.subtitle(n.Name());n.Sku()===o.ServerFarmSku.dynamic?this.icon(l.Content.Images.dynamicAppServicePlan):n.Reserved()?this.icon(l.Content.Images.linuxPlan):n.IsXenon()&&this.icon(l.Content.Images.xenonPlan);this.resourceUri(o.Monitoring.ServerFarmResourceUri.format(n.SubscriptionId(),n.ResourceGroup(),n.Name()))},t.prototype._updateStatusBar=function(n,t){var i;if(t.Kind()===o.ASEv2.kind)if(i=n.Status()===s.StatusOptions.Pending,i){var r=c.getSkuDisplayName(n.Sku()),u="({0}: {1} {2})".format(r,n.NumberOfWorkers(),h.getVirtualMachineSizeDisplayName(n.WorkerSizeId(
))),e="({0}: {1} {2})".format(r,n.TargetWorkerCount(),h.getVirtualMachineSizeDisplayName(n.TargetWorkerSizeId()));this.statusBar({text:f.webHostingPlanScaleInProgress.format(u,e),state:5})}else this.statusBar(null)},t})(i.ViewModels.Blade);n.BaseWebHostingPlanBlade=t})(a||(a={})),a}));__extends=this&&this.__extends||(function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}})();define("WebsitesExtension/TypeScript/ViewModels/Blades/BladeViewModels",["require","exports","f","o","ko","$","Websites/ClientResources/SpecPickerResources","Websites/ClientResources/GeneralResources","Websites/ClientResources/PdlResources","Websites/ClientResources/ConfigResources","WebsitesExtension/TypeScript/ExtensionAssets/Constants","WebsitesExtension/TypeScript/Models/WebsiteResourceId",
"WebsitesExtension/TypeScript/Models/WebHostingPlanResourceId","WebsitesExtension/TypeScript/Data/Data.Websites","WebsitesExtension/TypeScript/Utility/Utility.WebHostingPlan","WebsitesExtension/TypeScript/WebHostingPlan/Blades/BaseWebHostingPlanBlade","WebsitesExtension/TypeScript/ViewModels/Blades/BaseWebsiteBlade","WebsitesExtension/TypeScript/Models/Website","WebsitesExtension/TypeScript/Models/Recommendation","WebsitesExtension/TypeScript/Utility/Utility.Website","WebsitesExtension/TypeScript/_generated/Svg","WebsitesExtension/TypeScript/_generated/ExtensionDefinition","WebsitesExtension/TypeScript/Utility/Utility.Slots","WebsitesExtension/TypeScript/Deprecated/Monitoring/Models/TimeRange","WebsitesExtension/TypeScript/Utility/Utility.Specs","WebsitesExtension/TypeScript/Environment/RuntimeType"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut){"use strict";var ft;return (function(n){var t=window,gr=i.ViewModels.Controls.Visualization.Chart,dr=(function(n){function t(
){var t=n.call(this)||this;return t.title=u.observable(o.bladeTitleList),t.subtitle=u.observable(o.bladeTitleList),t}return __extends(t,n),t})(i.ViewModels.Blade),r,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi,yi,pi,wi,bi,ki,di,gi,nr,tr,ir,rr,ur,fr,er,or,sr,hr,cr,lr,ar,vr,yr,pr,wr,br,kr;n.WebsitesListBlade=dr;r=(function(n){function r(t,r,f){var e=n.call(this,t,r,f)||this;return e.subscriptionId=u.observable(),e.resourceUris=u.observable(),e.resourceGroup=u.observable(),e.assetName=u.observable(),e.resourceId=u.observable(),e.serverFarm=u.observable(),e.serverFarmSku=u.observable(),e.serverFarmResourceUri=u.observable(),e.resourceUsageUri=u.observable(),e.resourceUsageName=u.observable(),e.metricQuerySetting=u.observable(),e.metricDisplayNames=o.metricsRequestsAndError,e.usageStorageMetric=c.Usage.storageMetric,e.metricsOptions=u.observable({}),e.usagesOptions=u.observable({}),e.applicationsOptions=u.observable({}),e.assetDetails=u.observable(
new l.WebsiteAssetDetails({})),e._referrerInfo=u.observable(),e.statusBar=u.observable(),e._featuredRecommendationView=f.websitesData.featuredRecommendationCache.createView(t),e._recommendationView=f.websitesData.recommendationCache.createView(t),e._serverFarmView=f.websitesData.webHostingPlanCache.createView(t),e._filesView=f.scmData.filesCache.createView(t),e._propertiesDataView=f.websitesData.websitePropertiesCache.createView(t),e.metricsOptions({isDisabled:!1,disabledMessage:o.metricsDisabledMessage}),e.icon(i.Base.Images.Polychromatic.Website()),u.reactor(t,(function(){!e._featuredRecommendationView.item()||e._featuredRecommendationView.loading()||!e._serverFarmView.item()||!e._filesView.items()||e._filesView.loading()||!e._propertiesDataView.item()||e._setRecommendation()})),e}return __extends(r,n),r.prototype.onInputsSet=function(t){var f=this,i,e,o,r,s;return t.resourceUri&&t.resourceUri.SubscriptionId?(i=t.resourceUri,o=l.WebsiteResourceId.toCsmResourceId(t.resourceUri)):(i=l.WebsiteResourceId.
fromCsmResourceId(t.resourceUri),o=t.resourceUri),t.referrerInfo&&(this._referrerInfo(t.referrerInfo),e={WebsiteId:i,RecommendationName:this._referrerInfo().recommendationRuleName,RecommendationId:this._referrerInfo().recommendationId}),r=[],s=tt.parseWebsiteName(i.Name),s.SlotName||ut.isOnPrem()||(r.push(this._featuredRecommendationView.fetch(i)),r.push(this._recommendationView.fetch(e))),r.push(this._propertiesDataView.fetch(i)),Q.all(r).then((function(){f._filesView.fetch(u.utils.unwrapObservable(f._propertiesDataView.item().SiteScmHostName)).then((function(){f._setRecommendation()}))})),n.prototype.onInputsSet.call(this,t)},r.prototype.onWebsiteChange=function(r){var f=this,e;if(n.prototype.onWebsiteChange.call(this,r),e=r.ServerFarmId(),this.subscriptionId(r.SubscriptionId()),this.resourceUris([this.resourceUri()]),this.resourceId(this.resourceUri()),this.resourceGroup(r.ResourceGroup()),this.assetName(r.Name()),this.title(r.Name()),this.subtitle(""),r.AvailabilityState()!==b.AvailabilityState.
Limited){var h=i.ViewModels.Services.ResourceTypes.parseResourceDescriptor(r.ServerFarmId()),v=h.resource,y=h.subscription,p=h.resourceGroup;this.serverFarm(v);this.metricQuerySetting({title:o.metricsRequestsAndError,timespan:{duration:"PT1H",start:null,end:null},metrics:[{resourceId:this.resourceUri(),name:"Requests",timeGrain:"PT1M",displayName:""},{resourceId:this.resourceUri(),name:"Http5xx",timeGrain:"PT1M",displayName:""}]});this.applicationsOptions({hostName:r.HostNames().first()});this.assetDetails(new l.WebsiteAssetDetails(r));this.serverFarmResourceUri(e);this.WebHostingPlanId(new a.WebHostingPlanResourceId({Name:v,SubscriptionId:y,ResourceGroup:p}));this._setState(r);r.Status.subscribe(this.container,(function(){f._setState(r)}));r.Sku.subscribe(this.container,(function(){f._setState(r)}));this.serverFarmResourceUri.subscribe(this.container,(function(){f._dataContext.resourceExtender.signalWebsiteRefresh(f.WebsiteId());f._dataContext.resourceExtender.signalWebHostingPlanRefresh(f.
WebHostingPlanId())}));u.reactor(this.container,(function(){var h=f._websiteView.item(),y=f._serverFarmView.item(),l,v;if(h){y||(l=a.WebHostingPlanResourceId.fromWebsite(f._websiteView.item()),v=a.WebHostingPlanResourceId.toCsmResourceId(l),i.Base.Security.hasPermission(v,[nt.AssetTypes.WebHostingPlan.Permissions.read,]).then((function(n){n&&f._serverFarmView.fetch(l)})));var n=s.webAppSubtitle,r=i.Base.Images.Polychromatic.Website(),u=!h.Kind()?"":h.Kind().toLowerCase();u.indexOf(c.KindsAvailable.Gateway)>-1?n=s.gatewayAppSubtitle:u.indexOf(c.KindsAvailable.ApiApp)>-1?(n=s.apiAppSubtitle,r=g.Content.Images.apiApp):u.indexOf(c.KindsAvailable.Mobileappcode)>-1?(n=s.mobileAppCodeSubtitle,r=i.Base.Images.Polychromatic.Mobile()):u.indexOf(c.KindsAvailable.MobileApp)>-1?(n=s.mobileAppSubtitle,r=i.Base.Images.Polychromatic.Mobile()):u.indexOf(c.KindsAvailable.ApiAppV2)>-1?(n=s.apiAppV2Subtitle,r=g.Content.Images.apiApp):u.indexOf(c.KindsAvailable.Webjob)>-1?(n=s.webjobsAppSubtitle,r=i.Base.Images.
Polychromatic.WebJobs()):u.indexOf(c.KindsAvailable.Functions)>-1&&(n=o.functionsAppSubtitle,r=g.Content.Images.functions);f.subtitle(n);f.icon(r);f.serverFarmSku(h.Sku());switch(f.serverFarmSku().toLowerCase()){case c.ServerFarmSku.free.toLowerCase():case c.ServerFarmSku.shared.toLowerCase():f.resourceUsageUri("{0}{1}".format(t.fx.environment.csmManagementServiceUri,f.resourceUri()));f.resourceUsageName(f.assetName());break;case c.ServerFarmSku.basic.toLowerCase():case c.ServerFarmSku.standard.toLowerCase():case c.ServerFarmSku.premium.toLowerCase():case c.ServerFarmSku.premiumV2.toLowerCase():case c.ServerFarmSku.isolated.toLowerCase():case c.ServerFarmSku.premiumContainer.toLowerCase():f.resourceUsageUri("{0}{1}".format(t.fx.environment.csmManagementServiceUri,e));f.resourceUsageName(f.serverFarm());break;default:f.resourceUsageUri(null);f.resourceUsageName(f.assetName())}}}))}},r.prototype._setContentState=function(n){var t=0;switch(n){case k.NotificationLevel.Warning:case k.NotificationLevel.
Critical:t=2;break;case k.NotificationLevel.Information:case k.NotificationLevel.NonUrgentSuggestion:t=5;break;default:t=5}return t},r.prototype._setRecommendation=function(){var n,t=0,r="",f,e,h=new i.Base.UriBuilder(window.fx.environment.trustedParentOrigin).getAuthority().toLowerCase(),s;this._referrerInfo()&&this._recommendationView.item()&&this._serverFarmView.item()?(n=this._recommendationView.item(),t=this._setContentState(n.Level()),r=n.DisplayName(),f={detailBlade:nt.BladeNames.recommendationsBlade,detailBladeInputs:{resourceUri:this.resourceUri,source:"AppsOverviewBladeViewModel",ruleName:n.Name()}},t!==0&&d.logTelemetry(c.EnvPartNames.RecommendationsPart,n.Name()+"ViewedInStatusBar",JSON.stringify({Site:this._websiteView.item().Name(),Sku:this._websiteView.item().Sku(),RecommendationRuleName:n.Name(),RecommendationId:n.RecommendationId()}))):this._featuredRecommendationView.item()&&this._serverFarmView.item()?(this._featuredRecommendation=this._featuredRecommendationView.item(
),t=this._setContentState(this._featuredRecommendation.Level()),r=this._featuredRecommendation.DisplayName(),f={detailBlade:nt.BladeNames.recommendationsBlade,detailBladeInputs:{resourceUri:this.resourceUri,source:"AppsOverviewBladeViewModel",ruleName:this._featuredRecommendation.RuleName()}},t!==0&&d.logTelemetry(c.EnvPartNames.RecommendationsPart,this._featuredRecommendation.RuleName()+"ViewedInStatusBar",JSON.stringify({Site:this._websiteView.item().Name(),Sku:this._websiteView.item().Sku(),RecommendationRuleName:this._featuredRecommendation.RuleName(),RecommendationId:this._featuredRecommendation.RecommendationId()}))):d.isKind(this._websiteView.item().Kind(),d.AppKind.MOBILE)||d.isKind(this._websiteView.item().Kind(),d.AppKind.API)||d.isKind(this._websiteView.item().Kind(),d.AppKind.APIv2)||d.isKind(this._websiteView.item().Kind(),d.AppKind.WEBJOB)||this._websiteView.item().Reserved()||!this._filesView.items()||this._filesView.items().length!==1?this._filesView.items()&&this._filesView.
items().length>1&&h.endsWith(c.PortalHostName.public)&&(s=u.utils.arrayFilter(this._filesView.items(),(function(n){return n.name().indexOf("runtimeconfig.json")>-1})),s.length>0&&(r=o.aspNetCoreRecommendation,t=6,f={extension:nt.External.AppInsightsExtension.name,detailBlade:nt.External.AppInsightsExtension.Blades.AppServicesEnablementBlade.name,detailBladeInputs:{resourceUri:this.resourceUri,linkedComponent:null}},d.logTelemetry(c.EnvPartNames.RecommendationsPart," Asp.Net Core recommendation viewed",JSON.stringify({Site:this._websiteView.item().Name(),Sku:this._websiteView.item().Sku()})))):(r=o.quickStartRecommendation,t=6,f={detailBlade:nt.BladeNames.webAppQuickStart,detailBladeInputs:{resourceUri:this.resourceUri}},d.logTelemetry(c.EnvPartNames.WebAppQuickStartPart," Quickstart recommendation viewed",JSON.stringify({Site:this._websiteView.item().Name(),Sku:this._websiteView.item().Sku()})));e={text:r,state:t,selection:f};this._websiteView.item()&&this._websiteView.item().Status()===
c.WebsiteStatus.Running&&this.statusBar(e)},r.prototype._setState=function(n){var f=this,t=v.getWebsiteStatus(n),u,r;if(n.TargetSwapSlot()&&t!==c.WebsiteStatus.Swapping&&t!==c.WebsiteStatus.SwapReverting){this.statusBar({text:o.pendingSwapOperation,state:5});return}switch(t){case c.WebsiteStatus.Running:break;case c.WebsiteStatus.QuotaExceeded:u={detailBlade:nt.BladeNames.upgradeAsp,detailBladeInputs:{resourceUri:this.resourceId(),selectSpecId:c.ServerFarmSKUSpecs.small_standard,maxDisableSpecId:c.ServerFarmSKUSpecs.shared,displayMessage:o.quotaExceededMessage,buttonName:o.Settings.scaleUp}};this.statusBar({text:o.quotaExceededState,state:2,selection:u});break;case c.WebsiteStatus.AdminDisabled:i.Assets.mapAssetIdToDynamicSelection({assetId:this.subscriptionId(),assetType:"Subscription",extensionName:"Microsoft_Azure_Billing"},!0).then((function(n){f.statusBar({text:o.adminDisabledState,state:3,selection:n})}));break;case c.WebsiteStatus.Configuring:this.statusBar({text:o.websiteStatusConfiguring,
state:5});break;case c.WebsiteStatus.Deleting:this.statusBar({text:o.websiteStatusDeleting,state:5});break;case c.WebsiteStatus.Restarting:this.statusBar({text:o.websiteStatusRestarting,state:5});break;case c.WebsiteStatus.Starting:this.statusBar({text:o.websiteStatusStarting,state:5});break;case c.WebsiteStatus.Stopping:case c.WebsiteStatus.Stopped:if(this._websiteView.item()&&this._websiteView.item().HostingEnvironmentId()!=null)this.statusBar({text:o.stoppedSiteHostedInASE,state:2});else if(this._websiteView.item()&&y.isBasicSKUOrHigher(this._websiteView.item().Sku())){this.statusBar({text:o.stoppedSiteOnPaidSKU,state:2});break}else r="",r=t===c.WebsiteStatus.Stopping?o.websiteStatusStopping:o.websiteStatusStopped,this.statusBar({text:r,state:5});break;case c.WebsiteStatus.Swapping:this.statusBar({text:o.websitDetailsStatusSwapping,state:2});break;case c.WebsiteStatus.SwapReverting:this.statusBar({text:o.swapRevert,state:2});break;default:this.statusBar({text:t,state:2})}this._setRecommendation(
)},r})(w.BaseWebsiteBlade);n.WebsiteDashboardBlade=r;ft=(function(n){function t(t,i,r){var f=n.call(this,t,i,r)||this;return f.title=u.observable(o.bladeTitleQueryBuilder),f}return __extends(t,n),t})(w.BaseWebsiteBlade);n.WebsiteMetricQueryBuilderBlade=ft;et=(function(n){function t(t,i,r){var f=n.call(this,t,i,r)||this;return f.usageStorageMetric=c.Usage.storageMetric,f.usageNetworkMetric=c.Usage.networkMetric,f.usageMemoryMetric=c.Usage.memoryMetric,f.usageCpuMetric=c.Usage.cpuMetric,f.memoryWorkingSetMetric=c.Usage.memoryWorkingSetMetric,f.usageCpuShortPeriodMetric=c.Usage.cpuShortPeriodMetric,f.usageMemoryTimeRange=it.MetricTimeRange.TwentyFourHours.TimeRange,f.usageCpuTimeRange=it.MetricTimeRange.TwentyFourHours.TimeRange,f.usageNetworkTimeRange=it.MetricTimeRange.TwentyFourHours.TimeRange,f.subscriptionId=u.observable(),f.serverFarmResourceUri=u.observable(),f.websiteResourceUris=u.observableArray(),f.stackedBarChart=u.observable(3),f.lineChart=u.observable(0),f.sku=u.observable(),f.byteSentUsageMessage=
u.observable(),f.cputimeUsageMessage=u.observable(),f.memoryUsageMessage=u.observable(),f.title=u.observable(o.bladeTitleUsage),f}return __extends(t,n),t.prototype.onInputsSet=function(n){var s,r,u,h,e,l=[],t;if(r=i.ViewModels.Services.ResourceTypes.parseResourceDescriptor(n.resourceUri),u=r.subscription,h=r.resourceGroup,e=r.resource,this.websiteResourceUris(undefined),this.subscriptionId(u),this.serverFarmResourceUri(n.resourceUri),this.sku(n.sku),this.subtitle(e),n.sku&&(t=rt.getSkuDisplayName(n.sku),t))switch(n.sku.toLowerCase()){case c.ServerFarmSku.free.toLowerCase():s=v.getWebsitesInServerFarm(e,h,u);f.each(s(),(function(n,t){l.push("/subscriptions/{0}/resourceGroups/{1}/providers/Microsoft.Web/sites/{2}".format(t.SubscriptionId(),t.ResourceGroup(),t.Name()))}));this.cputimeUsageMessage(null);this.memoryUsageMessage(null);this.byteSentUsageMessage(null);break;case c.ServerFarmSku.shared.toLowerCase():this.cputimeUsageMessage(o.serverfarmUsageSummaryMessageForSharedMode);this.memoryUsageMessage(
o.serverfarmUsageSummaryMessageForSharedMode);this.byteSentUsageMessage(o.serverfarmByteSentUsageGraphMessageForSharedMode);break;case c.ServerFarmSku.basic.toLowerCase():case c.ServerFarmSku.standard.toLowerCase():case c.ServerFarmSku.premium.toLowerCase():case c.ServerFarmSku.premiumV2.toLowerCase():case c.ServerFarmSku.isolated.toLowerCase():case c.ServerFarmSku.premiumContainer.toLowerCase():this.cputimeUsageMessage(o.serverfarmCpuTimeUsageGraphMessageNoQuota.format(t));this.memoryUsageMessage(o.serverfarmMemoryUsageGraphMessageNoQuota.format(t));this.byteSentUsageMessage(o.serverfarmByteSentUsageGraphMessageNoQuota.format(t))}return this.websiteResourceUris(l),null},t})(w.BaseWebsiteBlade);n.WebsiteUsageBlade=et;ot=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(w.BaseWebsiteBlade);n.ComingSoonBlade=ot;st=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(w.BaseWebsiteBlade);n.UpgradeSubscriptionNoticeBladeViewModel=
st;ht=(function(n){function t(){var t=n.call(this)||this;return t.resourceUri=u.observable(),t.icon(i.Base.Images.Polychromatic.LogStreaming()),t.title(o.bladeTitleLogStream),t}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.resourceUri(n.resourceUri),null},t})(i.ViewModels.Blade);n.LogStreamBlade=ht;ct=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onWebsiteChange=function(t){n.prototype.onWebsiteChange.call(this,t);this.title(o.bladeTitleWebsiteLogs);this.icon(i.Base.Images.Polychromatic.LogDiagnostics())},t})(w.BaseWebsiteBlade);n.WebsiteLogsBlade=ct;lt=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onWebsiteChange=function(t){n.prototype.onWebsiteChange.call(this,t);this.title(o.bladeTitleConsole);this.icon(i.Base.Images.Polychromatic.DevConsole())},t})(w.BaseWebsiteBlade);n.ConsoleBlade=lt;at=(function(n){function t(){return n!==null&&n.apply(this,
arguments)||this}return __extends(t,n),t.prototype.onWebsiteChange=function(t){n.prototype.onWebsiteChange.call(this,t);this.title(o.bladeTitleInstanceBrowser)},t})(w.BaseWebsiteBlade);n.InstanceBrowserBlade=at;vt=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onWebsiteChange=function(t){n.prototype.onWebsiteChange.call(this,t);this.title(o.bladeTitleFindHandle)},t})(w.BaseWebsiteBlade);n.ProcessFindHandleBlade=vt;yt=(function(n){function t(t,r,f){var e=n.call(this,t,r,f)||this;return e._name=u.observable(""),e._id=u.observable(""),e._isProcessExplorerBladeOpen=f.processExplorerData.isProcessExplorerBladeOpen,e.subtitle(o.bladeTitleProcessDetails),e.icon(i.Base.Images.Polychromatic.ProcessExplorer()),e._dataContext=f,e}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=this;return u.reactor(this.container,(function(){t._isProcessExplorerBladeOpen()?(t.contentState(1),t.contentStateDisplayText(o.processExplorerActiveProcess)):
(t.contentState(3),t.contentStateDisplayText(o.processExplorerNoDataProcess))})),this.title(n.name),null},t})(w.BaseWebsiteBlade);n.ProcessDetailsBlade=yt;pt=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.title(o.bladeTitleModules),this.subtitle(n.name),this.icon(i.Base.Images.Polychromatic.ProcessExplorer()),null},t})(w.BaseWebsiteBlade);n.ModulesBlade=pt;wt=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.title(n.ModuleInfo.moduleName),this.subtitle(o.bladeTitleModuleDetails),this.icon(i.Base.Images.Polychromatic.ResourceDefault()),null},t})(w.BaseWebsiteBlade);n.ModuleDetailsBlade=wt;bt=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.title(o.bladeTitleThreads),this.icon(i.Base.Images.Polychromatic.ProcessExplorer(
)),this.subtitle(n.name),null},t})(w.BaseWebsiteBlade);n.ThreadsBlade=bt;kt=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.title(n.ThreadInfo.threadId),this.subtitle(o.bladeTitleThreadDetails),this.icon(i.Base.Images.Polychromatic.ResourceDefault()),null},t})(w.BaseWebsiteBlade);n.ThreadDetailsBlade=kt;dt=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.title(o.bladeTitleHandleDetails),this.icon(i.Base.Images.Polychromatic.ProcessExplorer()),this.subtitle(n.name),null},t})(w.BaseWebsiteBlade);n.HandlesDetailsBlade=dt;gt=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.title(o.bladeTitleWorkingSetDetails),this.subtitle(n.name),this.icon(i.Base.Images.Polychromatic.ProcessExplorer()),this.description(o.processWorkingSetDefinition),
null},t})(w.BaseWebsiteBlade);n.WorkingSetDetailsBlade=gt;ni=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.title(o.bladeTitleVirtualMemoryDetails),this.subtitle(n.name),this.icon(i.Base.Images.Polychromatic.ProcessExplorer()),this.description(o.processVirtualMemoryDefinition),null},t})(w.BaseWebsiteBlade);n.VirtualMemoryDetailsBlade=ni;ti=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.title(o.bladeTitleCPUUsageDetails),this.icon(i.Base.Images.Polychromatic.ProcessExplorer()),this.subtitle(n.name),null},t})(w.BaseWebsiteBlade);n.CPUUsageDetailsBlade=ti;ii=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onWebsiteChange=function(t){n.prototype.onWebsiteChange.call(this,t);this.icon(i.Base.Images.Polychromatic.Ftp());this.title(o.bladeTitleFtpCredentialsForm)}
,t})(w.BaseWebsiteBlade);n.ResetFtpCredentialsBlade=ii;ri=(function(n){function t(){var t=n.call(this)||this;return t.title(h.customDomainAndSSLBladeSettingsPurchaseDomainBtn),t}return __extends(t,n),t.prototype.onInputsSet=function(){return null},t})(i.ViewModels.Blade);n.WebsiteConfigPurchaseDomainsBlade=ri;ui=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onWebsiteChange=function(t){n.prototype.onWebsiteChange.call(this,t);this.title(o.bladeTitleScale)},t})(w.BaseWebsiteBlade);n.ScaleBlade=ui;fi=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onWebHostingPlanChange=function(t){n.prototype.onWebHostingPlanChange.call(this,t);this.title(o.bladeTitleScale)},t})(p.BaseWebHostingPlanBlade);n.AutoscaleBlade=fi;ei=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onWebsiteChange=function(t){n.prototype.onWebsiteChange.call(this,
t);this.title(o.bladeTitleQuickStart)},t})(w.BaseWebsiteBlade);n.QuickStartBlade=ei;oi=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.options=u.observable(null),t}return __extends(t,n),t.prototype.onWebHostingPlanChange=function(t){n.prototype.onWebHostingPlanChange.call(this,t);this.title(o.bladeTitleQuickStart)},t})(p.BaseWebHostingPlanBlade);n.WebHostingPlanQuickStartBlade=oi;si=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.title=u.observable(h.websiteConfigTitleSiteSettings),t.icon=u.observable(i.Base.Images.Polychromatic.ControlsHorizontal()),t}return __extends(t,n),t})(w.BaseWebsiteBlade);n.WebsiteConfigSiteSettingsBlade=si;hi=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.title=u.observable(h.WebsiteConfigForm.authenticationBladeTitle),t.icon=u.observable(i.Base.Images.Polychromatic.TeamProject()),t}return __extends(t,n),t})(w.BaseWebsiteBlade);n.EasyAuthenticationBlade=hi;ci=(function(
n){function t(){var t=n.call(this)||this;return t.applicationsOptions=u.observable(),t.resourceUri=u.observable(),t.icon(i.Base.Images.HeartPulse(4)),t.title(o.ApplicationPerformanceMonitoring.title),t}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.applicationsOptions({hostName:""}),this.resourceUri(n.resourceUri),null},t})(i.ViewModels.Blade);n.ApplicationMonitoringBlade=ci;li=(function(n){function t(){var t=n.call(this)||this;return t.resourceUri=u.observable(),t.icon(g.Content.Images.aRMExplorer),t.title(o.ResourceExplorer.title),t}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.resourceUri(n.resourceUri),null},t})(i.ViewModels.Blade);n.ResourceExplorerBlade=li;ai=(function(n){function t(){var t=n.call(this)||this;return t.title(h.purchaseDomainReAssignBladeTitle),t}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.subtitle(n.HostName),null},t})(i.ViewModels.Blade);n.PurchasedDomainReAssignBlade=ai;vi=(function(n){function t(
){var t=n.call(this)||this;return t.title(h.purchaseDomainConfirmationAndLegalBladeTitle),t}return __extends(t,n),t.prototype.onInputsSet=function(){return null},t})(i.ViewModels.Blade);n.AdditionalTermsBlade=vi;yi=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onWebsiteChange=function(t){n.prototype.onWebsiteChange.call(this,t);this.title(o.bladeTitlePropertySheet)},t})(w.BaseWebsiteBlade);n.PropertySheetBladeViewModel=yi;pi=(function(n){function t(){var t=n.call(this)||this;return t.title(o.bladeTitleAddSlot),t}return __extends(t,n),t})(i.ViewModels.Blade);n.WebsiteAddSlotBlade=pi;wi=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.onWebsiteChange=function(t){n.prototype.onWebsiteChange.call(this,t);this.icon(i.Base.Images.Polychromatic.WebSlots());this.title(o.bladeTitleDeploymentSlots)},t})(w.BaseWebsiteBlade);n.WebsiteSlotsListBlade=wi;bi=(function(n){function t(){var t=n.
call(this)||this;return t.title(o.bladeTitleChooseDeploymentSlot),t}return __extends(t,n),t})(i.ViewModels.Blade);n.WebsiteSwapSlotsPickerBladeViewModel=bi;ki=(function(n){function t(){var t=n.call(this)||this;return t.title(o.bladeTitleDeploymentSlotsForm),t.description(o.bladeDescriptionChooseDeploymentSlotForm),t}return __extends(t,n),t})(i.ViewModels.Blade);n.WebsiteSwapSlotsFormBladeViewModel=ki;di=(function(n){function t(){var t=n.call(this)||this;return t.title(s.previewChangesBladeTitle),t}return __extends(t,n),t.prototype.onInputsSet=function(){return null},t})(i.ViewModels.Blade);n.SlotPreviewBlade=di;gi=(function(n){function t(){var t=n.call(this)||this;return t.title(s.locationChooseBladeTitle),t}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=[];return n&&n.pickerErrors&&n.pickerErrors.length>0&&(t=n.pickerErrors),t.length>0?(this.contentStateDisplayText(t[0].parameterName+": "+t[0].errorMessage),this.contentState(3)):(this.contentStateDisplayText(""),this.contentState(
0)),null},t})(i.ViewModels.Blade);n.RegionPickerBladeViewModel=gi;nr=(function(n){function t(){var t=n.call(this)||this;return t.title(s.workerPoolChooseBladeTitle),t}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=[];return n&&n.pickerErrors&&n.pickerErrors.length>0&&(t=n.pickerErrors),t.length>0?(this.contentStateDisplayText(t[0].parameterName+": "+t[0].errorMessage),this.contentState(3)):(this.contentStateDisplayText(""),this.contentState(0)),null},t})(i.ViewModels.Blade);n.WorkerPoolPickerBladeViewModel=nr;tr=(function(n){function t(t,i,r){var f=n.call(this,t,i,r)||this;return f.assetName=u.observable(),f.eventsOptions=u.observable({}),f.alertsOptions=u.observable({}),f.resourceUris=u.observable(),f._webHostingPlan=u.observable(),f.sku=u.pureComputed((function(){return f._webHostingPlan()?f._webHostingPlan().Sku():undefined})),f.isAlertsAndMetricsDisabled=u.pureComputed((function(){return f.sku()?f.sku().toUpperCase()===c.ServerFarmSku.free.toUpperCase()||f.sku().toUpperCase(
)===c.ServerFarmSku.shared.toUpperCase():!1})),u.computed(t,(function(){f.alertsOptions({isDisabled:f.isAlertsAndMetricsDisabled(),disabledMessage:o.alertsDisabledMessage,enableEvents:!0})})),f}return __extends(t,n),t.prototype.onWebHostingPlanChange=function(t){n.prototype.onWebHostingPlanChange.call(this,t);this.resourceUris([this.resourceUri()]);this._webHostingPlan(t);this.assetName(t.Name());this.title(o.bladeTitleDashboard.format(t.Name()));this.subtitle(o.webHostingPlan)},t})(p.BaseWebHostingPlanBlade);n.WebHostingPlanDashboardBlade=tr;ir=(function(n){function t(){var t=n.call(this)||this;return t.title(o.WebsitePicker.ChooseWebsite.title),t}return __extends(t,n),t})(i.ViewModels.Blade);n.ExistingWebsitesPickerBladeViewModel=ir;rr=(function(n){function t(){var t=n.call(this)||this;return t.title(o.WebsitePicker.ChooseWebsite.title),t}return __extends(t,n),t})(i.ViewModels.Blade);n.WebsitePickerBladeViewModel=rr;ur=(function(n){function t(){var t=n.call(this)||this;return t.title(h.restoreSlotsBladeTitle),
t}return __extends(t,n),t})(i.ViewModels.Blade);n.WebsiteSlotsPickerBladeViewModel=ur;fr=(function(n){function t(t,r,u){var f=n.call(this,t,r,u)||this;return f.title(h.backupBladeTitle),f.icon(i.Base.Images.Polychromatic.Backup()),f}return __extends(t,n),t})(w.BaseWebsiteBlade);n.BackupBladeViewModel=fr;er=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u.title(h.backupDetailBladeTitle),u}return __extends(t,n),t})(w.BaseWebsiteBlade);n.BackupDetailBladeViewModel=er;or=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u.title(o.bladeTitleLinkedDatabases),u}return __extends(t,n),t})(w.BaseWebsiteBlade);n.WebsiteLinkedDatabasesBladeViewModel=or;sr=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u.title(o.restoreSettingsBladeTitle),u}return __extends(t,n),t})(w.BaseWebsiteBlade);n.RestoreSettingsBladeViewModel=sr;hr=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u.title(o.restoreCreateWebsiteBladeTitle),u}return __extends(
t,n),t})(w.BaseWebsiteBlade);n.RestoreCreateWebsiteBladeViewModel=hr;cr=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u.title(o.restoreDatabasesBladeTitle),u}return __extends(t,n),t})(w.BaseWebsiteBlade);n.RestoreDatabasesBladeViewModel=cr;lr=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u.title(o.restoreDatabasesBladeTitle),u}return __extends(t,n),t})(w.BaseWebsiteBlade);n.DatabaseRestoreOptionsBladeViewModel=lr;ar=(function(n){function t(t,i,r){var f=n.call(this)||this;return f.title(e.SpecPickerBlad.title),f.subtitle(e.SpecPickerBlad.subTitle),u.reactor(t,(function(){f.description(r.pricingTiersData.pricingTierMesg());f.helpUri(r.pricingTiersData.pricingTierMesgLink())})),f}return __extends(t,n),t})(i.ViewModels.Blade);n.WebsiteSpecPickerBlade=ar;vr=(function(n){function t(t,r,u){var f=n.call(this,t,r,u)||this;return f.icon(i.Base.Images.Polychromatic.Extensions()),f.title(o.Blade.SiteExtensionsBlades.installedSiteExtensions),f}return __extends(t,
n),t})(w.BaseWebsiteBlade);n.SiteExtensionsListBlade=vr;yr=(function(n){function t(t,r,u){var f=n.call(this,t,r,u)||this;return f.icon(i.Base.Images.Polychromatic.Extensions()),f.title(o.Blade.SiteExtensionsBlades.siteExtensionDetails),f}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.title(n.siteExtensionTitle),null},t})(w.BaseWebsiteBlade);n.SiteExtensionItemDetailsBlade=yr;pr=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u.title(o.Blade.SiteExtensionsBlades.addSiteExtension),u}return __extends(t,n),t})(w.BaseWebsiteBlade);n.AddSiteExtensionWizardBlade=pr;wr=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u.title(o.Blade.SiteExtensionsBlades.chooseSiteExtension),u}return __extends(t,n),t})(w.BaseWebsiteBlade);n.AddSiteExtensionWizardPickExtensionBlade=wr;br=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u.title(o.Blade.SiteExtensionsBlades.acceptLegalTerms),u}return __extends(t,n),t})(w.BaseWebsiteBlade);n.
AddSiteExtensionWizardAcceptLegalTermsBlade=br;kr=(function(n){function t(t,r,u){var f=n.call(this,t,r,u)||this;return f.title(o.Settings.routingRules),f.icon(i.Base.Images.Polychromatic.WebsiteStaging()),f}return __extends(t,n),t})(w.BaseWebsiteBlade);n.WebsiteRoutingRulesBlade=kr})(ft||(ft={})),ft}));__extends=this&&this.__extends||(function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}})();define("WebsitesExtension/TypeScript/ViewModels/Parts/ProcessDetailsBasicChart",["require","exports","f","o","ko","WebsitesExtension/TypeScript/Data/Data.ProcessExplorer","Websites/ClientResources/GeneralResources"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var o=i.ViewModels.Controls.Visualization.Chart,t=i.ViewModels.Controls.Visualization.Metrics,
r=(function(n){function i(t,i,r){var e=n.call(this,t)||this;return e.resourceUri=u.observable(undefined),e.colorOnHover=!1,e._container=t,e.id=u.observable(undefined),e.name=u.observable(undefined),e.instanceName=u.observable(undefined),e.cacheKey=u.observable(undefined),e._kuduProcessInfoCache=r.processExplorerData.kuduProcessInfoCache,e._createAddtionalResizingHandler(),e.yAxis.labelPadding(20),e.xAxis.scale(2),e.yAxis.scale(1),e.yAxis.min(0),e.xAxis.position(3),e.yAxis.position(4),e._isProcessExplorerBladeOpen=r.processExplorerData.isProcessExplorerBladeOpen,u.reactor(t,(function(){f.ProcessExplorerData.cacheKeySetAndProcessCacheEntryDefined(e.cacheKey,e._kuduProcessInfoCache)?f.ProcessExplorerData.processCacheEntryContainsData(e.cacheKey,e._kuduProcessInfoCache)?e.updateInformation():e.setNoDataMessage():f.ProcessExplorerData.cacheKeySetAndProcessCacheEntryUndefined(e.cacheKey,e._kuduProcessInfoCache)&&(e._kuduProcessInfoCache[e.cacheKey()]=u.observableArray([]),u.reactor(t,(function(
){f.ProcessExplorerData.cacheKeySetAndProcessCacheEntryDefined(e.cacheKey,e._kuduProcessInfoCache)&&(f.ProcessExplorerData.processCacheEntryContainsData(e.cacheKey,e._kuduProcessInfoCache)?e.updateInformation():e.setNoDataMessage())})))})),e}return __extends(i,n),i.prototype.onInputsSet=function(n){return this.id(n.id),this.name(n.name),this.instanceName(n.instanceName),this.resourceUri(n.resourceUri),this._container.assetName(this.name()+" - "+this.id()+" - "+this.instanceName()),this.cacheKey(f.ProcessExplorerData.createProcessCacheKey(n.name,n.id,n.instanceName)),null},i.prototype.setNoDataMessage=function(){this._isProcessExplorerBladeOpen()?this._container.noDataMessage(e.processDetailsProcessNoLongerExistsMessage.format(this.name(),this.id(),this.instanceName())):this._container.noDataMessage(e.processDetailsDataSubscriptionLostMessage)},i.prototype.updateInformation=function(){},i.prototype._createAddtionalResizingHandler=function(){var n=this;this.size.subscribe(this._container,(function(
t){t===4?n.xAxis.ticks(3):(t===10||t===6)&&n.xAxis.ticks(4)}))},i.prototype._setMetricItemsCssClass=function(n,t){t.forEach((function(t){t.barCssClass(n)}))},i.prototype._wireUpMetricsToLineView=function(){var n=this;this._lineView.events.pointMouseEnter=this._lineView.events.pointClick=function(t){n.series().forEach((function(i){var r,u;i.name()===t.seriesName&&(r=n._createHoveringMetrics(i.values(),t.value.yValue),n.colorOnHover&&(u=n._lineView.seriesView().first((function(n){return n.seriesName()===i.name()})).cssClass(),n._setMetricItemsCssClass(u,r)),n.metrics.items(r))}))};this._lineView.events.seriesMouseLeave=this._lineView.events.pointMouseLeave=function(){n._setDefaultMetricItems()}},i.prototype._setDefaultMetricItems=function(){},i.prototype._truncate=function(n){return(Math.round(n*100)/100).toString()},i.prototype._getMin=function(n){var t=n[0].yValue;return n.forEach((function(n){n.yValue<t&&(t=n.yValue)})),this._truncate(t)},i.prototype._getMax=function(n){var t=n[0].yValue;return n.
forEach((function(n){n.yValue>t&&(t=n.yValue)})),this._truncate(t)},i.prototype._getAverage=function(n){var i=0,t=0;return n.forEach((function(n){i+=n.yValue>=0?n.yValue:0})),t=n.filter((function(n){return n.yValue>=0})).length,t!==0?this._truncate(i/t):e.percentagePlaceholder},i.prototype._createSingleMetric=function(n,i,r){var u=new t.SingleMetric(this._container);return u.value(n),u.unit(i),u.caption(r),u},i.prototype._createHoveringMetrics=function(){return[]},i})(i.ViewModels.ChartPart);n.ProcessDetailsBasicChart=r})(o||(o={})),o}));define("WebsitesExtension/TypeScript/ViewModels/Parts/ProcessDetailsBasicPart",["require","exports","f","ko","WebsitesExtension/TypeScript/Data/Data.ProcessExplorer","Websites/ClientResources/GeneralResources"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){var t=(function(){function n(n,t,i){var f=this;this.resourceUri=r.observable(undefined);this.name=r.observable("");this.id=r.observable("");this.instanceName=r.observable("");this.cacheKey=r.observable(
"");this.title=r.observable("");this.shortTitle=r.observable("");this.description=r.observable("");this.icon=r.observable(undefined);this.size=r.observable(undefined);this._container=n;this._kuduProcessInfoCache=i.processExplorerData.kuduProcessInfoCache;this._createGrid();this._isProcessExplorerBladeOpen=i.processExplorerData.isProcessExplorerBladeOpen;r.reactor(n,(function(){u.ProcessExplorerData.cacheKeySetAndProcessCacheEntryDefined(f.cacheKey,f._kuduProcessInfoCache)?u.ProcessExplorerData.processCacheEntryContainsData(f.cacheKey,f._kuduProcessInfoCache)?(f.updateInformation(),f._container.noDataMessage(undefined)):f.setNoDataMessage():u.ProcessExplorerData.cacheKeySetAndProcessCacheEntryUndefined(f.cacheKey,f._kuduProcessInfoCache)&&(f._kuduProcessInfoCache[f.cacheKey()]=r.observableArray([]),r.reactor(n,(function(){u.ProcessExplorerData.cacheKeySetAndProcessCacheEntryDefined(f.cacheKey,f._kuduProcessInfoCache)&&(u.ProcessExplorerData.processCacheEntryContainsData(f.cacheKey,f._kuduProcessInfoCache)?
(f.updateInformation(),f._container.noDataMessage(undefined)):f.setNoDataMessage())})))}))}return n.prototype.gridColumns=function(){return[]},n.prototype.setNoDataMessage=function(){this._isProcessExplorerBladeOpen()?this._container.noDataMessage(f.processDetailsProcessNoLongerExistsMessage.format(this.name(),this.id(),this.instanceName())):this._container.noDataMessage(f.processDetailsDataSubscriptionLostMessage)},n.prototype._createGrid=function(){var n=this.getGridExtensions(),t=this.getGridExtensionOptions();this.processGrid=new i.ViewModels.Controls.Lists.Grid.ViewModel(this._container,r.observableArray([]),n,t);this.processGrid.showHeader=!0;this.processGrid.noRowsMessage=r.observable(f.processExplorerLoadingMessage);this.processGrid.columns=r.observableArray(this.gridColumns())},n.prototype.getGridExtensions=function(){return null},n.prototype.getGridExtensionOptions=function(){return null},n.prototype.onInputsSet=function(n){return this.id(n.id),this.name(n.name),this.instanceName(
n.instanceName),this.cacheKey(u.ProcessExplorerData.createProcessCacheKey(n.name,n.id,n.instanceName)),this.resourceUri(n.resourceUri),this._noDataFoundRowMessage&&this.processGrid.noRowsMessage(this._noDataFoundRowMessage),null},n.prototype.updateInformation=function(){},n})();n.ProcessDetailsBasicPart=t})(e||(e={})),e}));__extends=this&&this.__extends||(function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}})();define("WebsitesExtension/TypeScript/ViewModels/Parts/ProcessWorkingSetChart",["require","exports","f","o","ko","WebsitesExtension/TypeScript/ViewModels/Parts/ProcessDetailsBasicChart","WebsitesExtension/TypeScript/Data/Data.ProcessExplorer","Websites/ClientResources/GeneralResources"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(
n){var t=i.ViewModels.Controls.Visualization.Chart,r=(function(n){function r(r,f,e){var s=n.call(this,r,f,e)||this;return s._lineView=new t.LineChartView,s.views.push(s._lineView),s._wireUpMetricsToLineView(),r.partTitle(o.processWorkingSetChartTitle),r.selectable=i.ViewModels.Part.createSelectableViewModel(f),r.selectable.isClickable=u.pureComputed((function(){return!r.noDataMessage()})),s.colorOnHover=!0,s}return __extends(r,n),r.prototype.updateInformation=function(){var r=[],n,u=[],i;n=new t.Series;n.name(o.processWorkingSetChartWorkingSetSeriesName);i=new t.LineChartSeriesView;i.seriesName(o.processWorkingSetChartWorkingSetSeriesName);n.values(this._kuduProcessInfoCache[this.cacheKey()]().map((function(n){return new t.ChartItem(new Date(n.time_stamp),e.ProcessExplorerData.bytesToMB(n.working_set))})));i.cssClass("azc-color-g0");u.push(i);r.push(n);n=new t.Series;n.name(o.processWorkingSetChartPagedMemorySeriesName);i=new t.LineChartSeriesView;i.seriesName(o.processWorkingSetChartPagedMemorySeriesName);
n.values(this._kuduProcessInfoCache[this.cacheKey()]().map((function(n){return new t.ChartItem(new Date(n.time_stamp),e.ProcessExplorerData.bytesToMB(n.paged_memory))})));i.cssClass("azc-color-f0");this._container.noDataMessage(undefined);u.push(i);r.push(n);this.series(r);this._lineView.seriesView(u);this._setDefaultMetricItems()},r.prototype._wireUpMetricsToLineView=function(){var n=this;this._lineView.events.pointMouseEnter=this._lineView.events.pointClick=function(t){n.series().forEach((function(i){var r,u;i.name()===t.seriesName&&(r=[n._createSingleMetric(n._truncate(t.value.yValue),"MB",t.seriesName)],n.colorOnHover&&(u=n._lineView.seriesView().first((function(n){return n.seriesName()===i.name()})).cssClass(),n._setMetricItemsCssClass(u,r)),n.metrics.items(r))}))};this._lineView.events.seriesMouseLeave=this._lineView.events.pointMouseLeave=function(){n._setDefaultMetricItems()}},r.prototype._setDefaultMetricItems=function(){var n=this,t=[];this.series().forEach((function(i){var r,u;i.values(
).length&&(r=n._createSingleMetric(n._truncate(i.values().last().yValue),"MB",i.name()),n.colorOnHover&&(u=n._lineView.seriesView().first((function(n){return n.seriesName()===i.name()})).cssClass(),n._setMetricItemsCssClass(u,[r])),t.push(r))}));this.metrics.items(t)},r})(f.ProcessDetailsBasicChart);n.ProcessWorkingSetChart=r})(s||(s={})),s}))