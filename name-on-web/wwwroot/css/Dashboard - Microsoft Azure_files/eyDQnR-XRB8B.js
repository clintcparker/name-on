define("HubsExtension/Common/CommonErrorHandling",["require","exports","HubsExtension/Assets/AssetsClientStrings"],(function(n,t,i){"use strict";var r;return (function(n){function t(n,t){var i=[0,400,401,403,404];return t&&(i=i.concat([500,503])),n&&i.indexOf(n.status)>=0}function r(n,t,r){var u=n&&n.status;return u===404?{title:i.notFound,message:i.notFoundAssetTitle.format(t||""),type:0}:u===403||u===401?{title:i.unauthorized,message:i.unauthorizedAssetTitle.format(t||""),type:1}:!u||u===400||u===500||u===503||u===undefined&&r?{title:i.unavailable,message:i.unavailableAssetTitle.format(t||""),type:0}:null}function u(n,t){var i=n.type;i===0?t.notFound(n.message):i===1&&t.unauthorized(n.message)}function f(n){n.unauthorizedMessage(null);n.notFoundMessage(null)}n.isExpectedArmError=t;n.getErrorTitleAndMessage=r;n.updateContainerForError=u;n.clearContainerError=f})(r||(r={})),r}));
define("HubsExtension/_generated/Microsoft_Azure_Monitoring/BladeReferences",["require","exports","Fx/Composition/Selectable"],(function(n,t,i){"use strict";var r;return (function(n){function r(n,t,i){return{onClosed:n,parameters:t,callbacks:i}}var t="Microsoft_Azure_Monitoring",s=(function(n){function i(i,u){return n.call(this,"AlertsBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference),u,f,e,o;n.AlertsBladeReference=s;u=(function(n){function i(i,u){return n.call(this,"AppXOverviewBladeViewModel",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.AppXOverviewBladeViewModelReference=u;f=(function(n){function i(i,u){return n.call(this,"DiagnosticsLogsBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.DiagnosticsLogsBladeReference=f;e=(function(n){function i(i,u){return n.call(this,"EventsBrowseBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.EventsBrowseBladeReference=e;o=(function(n){function i(i,u){return n.call(this,"MetricsBladeV2",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.MetricsBladeV2Reference=o})(r||(r={})),r}));
define("HubsExtension/ResourceMap/AssetViewModels/ResourceGroupViewModel",["require","exports","f","o","ko","Fx/Composition/Selectable","HubsExtension/ResourceMap/ResourceMapClientStrings","HubsExtension/_generated/BladeReferences","HubsExtension/_generated/Microsoft_Azure_Monitoring/BladeReferences"],(function(n,t,i,r,u,f,e,o,s){"use strict";function h(n,t,i,r,f){return{id:n,displayText:t,keywords:i,enabled:u.observable(!0),icon:r,supplyBladeReference:f}}function d(n){var t=e.ResourceGroup,r=t.Settings,u=n.resourceId,g={id:u},nt={resourceGroup:u},p=[h("quickstart",t.QuickStart.bladeTitle,null,c.QuickStart(),(function(){return new o.ResourceGroupQuickStartBladeReference(nt)})),],w,tt,d,it;return b||p.push(h("costs",r.costs,null,c.BillingHub(),(function(){return new f.PdlBladeReference("CostByResourceFilterableGridBlade",l.Constants.ExtensionNames.Billing,{parameters:g})}))),p.push(h("deployments",r.deployments,[t.SettingsKeywords.Deployments.templates],v.Commits(),(function(){return new o.DeploymentsListBladeReference(nt)}))),w=[],y&&k&&(tt=i.ViewModels.Services.ResourceTypes.parseResourceGroupDescriptor(u),w.push(h("e2emonitoring",r.e2emonitoring,[t.SettingsKeywords.E2EMonitoring.alerts,t.SettingsKeywords.E2EMonitoring.insights,t.SettingsKeywords.E2EMonitoring.monitoring],c.AppInsights(),(function(){return new s.AppXOverviewBladeViewModelReference({appDefinition:{subscriptions:["/subscriptions/"+tt.subscription],resourceGroups:[u]}},i.noop)})))),d=[{referenceId:a.ManagementGroupId,items:p},],y&&d.push({referenceId:a.MonitoringGroupId,items:w}),it={defaultItemId:"overview",overview:h("overview",r.overview,null,c.ResourceGroup(),(function(){return new o.ResourceGroupMapBladeReference(g)})),options:{enableRbac:!0,enableTags:!0,enableProperties:!0,enableMetrics:!0,enableAlerts:!0,enableSupportResourceAdvisor:!0,enableDiagnostics:!0,enableLogAnalytics:!0,enableLogSearch:!0,enableSupportHelpRequest:!0,enableEventGridPublisher:!0},groups:d},Q(it)}var p;r.defineProperty(t,"__esModule",{value:!0});var l=i.Base,a=i.Assets,w=l.Diagnostics,v=l.Images,c=v.Polychromatic,g=i.ViewModels.Services.ResourceTypes,nt=w.createLog(n),b=i.isFeatureEnabled("hidecosts"),k=i.isFeatureEnabled("enablee2emonitoring"),y=i.isFeatureEnabled("enablemonitoringgroup");p=(function(){function n(){}return n.prototype.getMenuConfig=function(n){return d(n)},n})();t.ResourceGroupViewModel=p}));
define("HubsExtension/_generated/AppInsightsExtension/BladeReferences",["require","exports","Fx/Composition/Selectable"],(function(n,t,i){"use strict";var r;return (function(n){function r(n,t,i){return{onClosed:n,parameters:t,callbacks:i}}var t="AppInsightsExtension",w=(function(n){function i(i,u){return n.call(this,"AppServicesEnablementBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference),u,f,e,o,s,h,c,l,a,v,y,p;n.AppServicesEnablementBladeReference=w;u=(function(n){function i(i,u){return n.call(this,"AspNetOverview",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.AspNetOverviewReference=u;f=(function(n){function i(i,u){return n.call(this,"AspNetOverviewClassic",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.AspNetOverviewClassicReference=f;e=(function(n){function i(i){return n.call(this,"CreateApplicationBladeV3",t,i)||this}return __extends(i,n),i})(i.ParameterProviderBladeReference);n.CreateApplicationBladeV3Reference=e;o=(function(n){function i(i,u){return n.call(this,"Docker",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.DockerReference=o;s=(function(n){function i(i,u){return n.call(this,"EmbeddedMonitoringSettingsBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.EmbeddedMonitoringSettingsBladeReference=s;h=(function(n){function i(i,u){return n.call(this,"JavaWebOverview",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.JavaWebOverviewReference=h;c=(function(n){function i(i,u){return n.call(this,"MetricsBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.MetricsBladeReference=c;l=(function(n){function i(i,u){return n.call(this,"NodeJsOverview",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.NodeJsOverviewReference=l;a=(function(n){function i(i,u){return n.call(this,"ServiceProfilerOverviewBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.ServiceProfilerOverviewBladeReference=a;v=(function(n){function i(i,u){return n.call(this,"Usage",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.UsageReference=v;y=(function(n){function i(i,u){return n.call(this,"UsageNotebookBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.UsageNotebookBladeReference=y;p=(function(n){function i(i,u){return n.call(this,"WebTestsBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.WebTestsBladeReference=p})(r||(r={})),r}));
define("HubsExtension/_generated/Microsoft_Azure_ActivityLog/BladeReferences",["require","exports","Fx/Composition/Selectable"],(function(n,t,i){"use strict";var r;return (function(n){function r(n,t,i){return{onClosed:n,parameters:t,callbacks:i}}var t="Microsoft_Azure_ActivityLog",u=(function(n){function i(i,u){return n.call(this,"ActivityLogBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.ActivityLogBladeReference=u})(r||(r={})),r}));
define("HubsExtension/_generated/Microsoft_Azure_EventGrid/BladeReferences",["require","exports","Fx/Composition/Selectable"],(function(n,t,i){"use strict";var r;return (function(n){function r(n,t,i){return{onClosed:n,parameters:t,callbacks:i}}var t="Microsoft_Azure_EventGrid",u=(function(n){function i(i,u){return n.call(this,"ListEventSubscriptionsFromPublisherBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.ListEventSubscriptionsFromPublisherBladeReference=u})(r||(r={})),r}));
define("HubsExtension/_generated/Microsoft_Azure_Health/BladeReferences",["require","exports","Fx/Composition/Selectable"],(function(n,t,i){"use strict";var r;return (function(n){function r(n,t,i){return{onClosed:n,parameters:t,callbacks:i}}var t="Microsoft_Azure_Health",h=(function(n){function i(i){return n.call(this,"HealthAlertsBlade",t,r(i,undefined),{})||this}return __extends(i,n),i})(i.PdlBladeReference),u,f,e,o,s;n.HealthAlertsBladeReference=h;u=(function(n){function i(i,u){return n.call(this,"HealthHistoryBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.HealthHistoryBladeReference=u;f=(function(n){function i(i,u){return n.call(this,"OtherAnnouncementsBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.OtherAnnouncementsBladeReference=f;e=(function(n){function i(i,u){return n.call(this,"PlannedMaintenanceBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.PlannedMaintenanceBladeReference=e;o=(function(n){function i(i,u){return n.call(this,"ResourceHealthDetailBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.ResourceHealthDetailBladeReference=o;s=(function(n){function i(i,u){return n.call(this,"ServiceIssuesBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.ServiceIssuesBladeReference=s})(r||(r={})),r}));
define("HubsExtension/_generated/Microsoft_Azure_Policy/BladeReferences",["require","exports","Fx/Composition/Selectable"],(function(n,t,i){"use strict";var r;return (function(n){function r(n,t,i){return{onClosed:n,parameters:t,callbacks:i}}var t="Microsoft_Azure_Policy",o=(function(n){function i(i,u){return n.call(this,"ArmPolicyBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference),u,f,e;n.ArmPolicyBladeReference=o;u=(function(n){function i(i,u){return n.call(this,"AssignmentBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.AssignmentBladeReference=u;f=(function(n){function i(i,u){return n.call(this,"EditPolicySetDefinitionBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.EditPolicySetDefinitionBladeReference=f;e=(function(n){function i(i,u){return n.call(this,"PolicyMenuBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.PolicyMenuBladeReference=e})(r||(r={})),r}));
define("HubsExtension/_generated/Microsoft_Azure_Resources/BladeReferences",["require","exports","Fx/Composition/Selectable"],(function(n,t,i){"use strict";var r;return (function(n){function r(n,t,i){return{onClosed:n,parameters:t,callbacks:i}}var t="Microsoft_Azure_Resources",e=(function(n){function i(i){return n.call(this,"ArmPolicyAddBlade",t,i)||this}return __extends(i,n),i})(i.ParameterProviderBladeReference),u,f;n.ArmPolicyAddBladeReference=e;u=(function(n){function i(i,u){return n.call(this,"ArmPolicyBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.ArmPolicyBladeReference=u;f=(function(n){function i(i,u){return n.call(this,"QuotasBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.QuotasBladeReference=f})(r||(r={})),r}));
define("HubsExtension/ResourceMenuBlade/ViewModels/ResourceMenuBlade",["require","exports","f","i","o","ko","Fx/Composition/Pdl/MenuBlade","Fx/Composition/Selectable","HubsExtension/Browse/BrowseClientStrings","HubsExtension/ResourceMap/ResourceMapClientStrings","HubsExtension/_generated/BladeReferences","HubsExtension/_generated/ExtensionDefinition","HubsExtension/_generated/Microsoft_Azure_Monitoring/BladeReferences","HubsExtension/_generated/Microsoft_Azure_ActivityLog/BladeReferences","HubsExtension/_generated/AppInsightsExtension/BladeReferences","HubsExtension/_generated/Microsoft_Azure_Policy/BladeReferences","HubsExtension/_generated/Microsoft_Azure_EventGrid/BladeReferences","HubsExtension/_generated/Microsoft_Azure_Resources/BladeReferences","HubsExtension/_generated/Microsoft_Azure_Health/BladeReferences","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/Browse/BrowseArea","HubsExtension/Common/AssetTypeCache","HubsExtension/Common/AssetViewModelCommon","HubsExtension/Common/BrowseCuration","HubsExtension/Common/CommonErrorHandling","HubsExtension/Common/HubsObservables","HubsExtension/Common/RecentResources","HubsExtension/ResourceMap/AssetViewModels/ResourceGroupViewModel","HubsExtension/ResourceMap/ResourceMapCommon"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot){"use strict";function kt(n){return(n||"").toLowerCase()}function ct(n,t,r,u,f,e){return{itemId:n,displayText:t,keywords:r,icon:u,id:f,supplyBladeReference:i.wrap(e)}}function cr(n){return{id:n.itemId,displayText:n.displayText,keywords:n.keywords,enabled:f.observable(!0),icon:n.icon,supplyBladeReference:n.supplyBladeReference}}function lr(n,t,r){var f=kt(r.id),u=t[f];return u||(u=i.clone(r,!0,!0),n.push(u),t[f]=u),u}function ar(n,t,i){var r=i[n.itemId];r&&t[r.group].items.remove(r.menuItem)}function ri(n,t,i,r,u){if(n&&n.length){var f=lr(i,r,t);n.forEach((function(n){var i=cr(n.reference);ar(n.reference,r,u);u[n.reference.itemId]={group:t.id,menuItem:i};n.prepend?f.items.unshift(i):f.items.push(i)}))}}function pi(n,t){return ct(st.TroubleshootItemId,lt.troubleshoot,gt.troubleshoot,pt.Tools(),n,new o.PdlBladeReference(t?"TroubleshootV2Blade":"TroubleshootBlade",hi,{parameters:{assetId:n}}))}function wi(n){var t=function(t){return ct("policies",s.ArmPolicyBlade.title,s.ArmPolicyBlade.keywords,at.Files(),n,t)};return yt("showpolicies")?t(new p.ArmPolicyBladeReference({bladeInputs:{id:n}})):yt("showpolicyhub")?t(new p.PolicyMenuBladeReference({scope:n})):void 0}function bi(n){return new o.ParameterProviderBladeReference(yt("linknewquesttosupportblade")?"HelpAndSupportBlade":"NewSupportRequestBlade",hi,{parameters:{assetId:n},supplyInitialData:i.wrap(""),receiveResult:i.noop,supplyProviderConfig:function(){return{provisioningConfig:{provisioningEnabled:!0,dontDiscardJourney:!0}}}})}function vr(n){var t={queryInputs:{id:n}};return er?new v.ActivityLogBladeReference(t):new a.EventsBrowseBladeReference(t)}function yr(n,t,u,f,e,h){e=e||{};var tt=ht.isTenantResource(n),d=ht.isSubscriptionId(n),v=ht.isResourceGroupId(n),g=ht.isResourceId(n),p=d||v||g,it=v?n:g?ht.buildResourceGroupIdFromResourceId(n):null,rt=v?ti:g?ht.buildResourceTypeFromResourceId(n):null,ft=kt(rt).startsWith("microsoft.classic"),et=Q(),nt=!1,l=null;return d&&(l=ht.parseSubscriptionDescriptor(n),et=l&&ut.getSubscription(l.subscription).then((function(n){nt=r.Azure.isZeroCapSubscription(n)}))),et.then((function(){var yt=[],ot=[],et=[],ut=[],vt;ii||e.enableSupportHelpRequest===!1||yt.push({reference:ct(st.SupportHelpRequestItemId,lt.helpRequest,gt.helpRequest,pt.Support(),n,bi(n))});ii||or||!e.enableSupportResourceHealth||yt.push({prepend:!0,reference:ct(st.ResourceHealthItemId,lt.resourceHealth,gt.resourceHealth,pt.HeartPulse(),n,new k.ResourceHealthDetailBladeReference({resourceId:n}))});p&&e.enableSupportEventLogs!==!1&&ot.push({prepend:!0,reference:ct(st.EventLogsItemId,lt.eventLogs,gt.eventLogs,at.Log(),n,vr(n))});!ii&&e.enableSupportTroubleshoot&&ot.push({prepend:!0,reference:pi(n,!1)});!ii&&e.enableSupportTroubleshootV2&&ot.push({prepend:!0,reference:pi(n,!0)});ni&&e.enableMetrics&&et.push({reference:ct(st.MetricsItemId,s.ResourceMenuBlade.metrics,s.ResourceMenuBlade.metricsKeywords,at.Chart(),n,new a.MetricsBladeV2Reference({id:n},i.noop))});ni&&e.enableAlerts&&et.push({reference:ct(st.AlertsItemId,s.ResourceMenuBlade.alertRules,s.ResourceMenuBlade.alertRulesKeywords,at.Notification(),n,new a.AlertsBladeReference({queryInputs:{id:n}}))});ni&&e.enableDiagnostics&&et.push({reference:ct(st.DiagnosticsItemId,s.ResourceMenuBlade.diagnostics,s.ResourceMenuBlade.diagnosticsKeywords,at.LogDiagnostics(),n,new a.DiagnosticsLogsBladeReference({queryInputs:{id:n}}))});ni&&ci&&e.enableLogAnalytics&&et.push({reference:ct(st.LogAnalyticsItemId,s.ResourceMenuBlade.logAnalytics,s.ResourceMenuBlade.logAnalyticsKeywords,at.LogAnalytics(),n,new c.BrowseInMenuReference({resourceType:"Microsoft.OperationsManagement/solutions",scope:ht.isResourceId(n)&&!ht.isTenantResource(n)?"/subscriptions/"+ht.parseResourceDescriptor(n).subscription:n}))});ni&&ci&&e.enableLogSearch&&et.push({reference:ct(st.LogSearchItemId,s.ResourceMenuBlade.logSearch,s.ResourceMenuBlade.logSearchKeywords,at.Search(),n,new c.BrowseInMenuReference({resourceType:"Microsoft.OperationalInsights/workspaces"}))});ni&&e.enableWorkbooks&&et.push({reference:ct("workbooks",s.ResourceMenuBlade.workbooks,s.ResourceMenuBlade.workbooksKeywords,at.Workbooks(),n,new y.UsageNotebookBladeReference({ComponentId:n,TimeContext:null,ResourceIds:[n]}))});ni&&e.enableSupportResourceAdvisor&&et.push({prepend:!0,reference:ct(st.ResourceAdvisorItemId,lt.resourceAdvisor,gt.resourceAdvisor,at.Advisor(),n,new o.PdlBladeReference("AdvisorBlade",bt.Constants.ExtensionNames.AzureExpert,{parameters:{resourceId:n}}))});d&&(nt||(ut.push({reference:ct(st.ResourceGroupsItemId,lt.resourceGroups,lt.resources,at.ResourceGroup(),n,new c.BrowseGroupsInMenuReference({resourceType:ti,scope:n}))}),ut.push({reference:ct(st.ResourcesItemId,lt.resources,lt.resourceGroups,at.Grid(),n,new c.BrowseAllInMenuReference({resourceType:ei.AllResources,scope:n}))}),ur||ut.push({reference:ct(st.SubscriptionQuotasItemId,lt.quotas,gt.quotas,at.ControlsHorizontal(),n,new b.QuotasBladeReference({bladeInputs:{subscriptionId:l&&l.subscription}}))}),vt=wi(n),vt&&ut.push({reference:vt}),rr||ut.push({reference:ct(st.SubscriptionCertsItemId,lt.subCerts,null,at.Certificate(),n,new o.PdlBladeReference("ManagementCertsBlade","Microsoft_Azure_ClassicResources",{parameters:{id:l&&l.subscription}}))})),ut.push({reference:ct(st.MyAccessItemId,lt.accessDetails,null,pt.Person({palette:3}),n,new c.MyAccessBladeReference({resourceId:n}))}),ut.push({reference:ct(st.ResourceProvidersItemId,lt.resourceProviders,null,at.Backlog(),n,new c.RPStatusBladeReference({subscriptionId:l.subscription}))}));v&&(vt=wi(n),vt&&ut.push({reference:vt}));!p&&tt||nt||e.enableLocks===!1||ut.push({reference:ct(st.LocksItemId,d?lt.locksForSubscriptions:lt.locks,null,pt.Lock(),n,new c.LocksBladeReference({resourceId:n}))});p&&!ft&&e.enableTags!==!1&&ot.push({reference:ct(st.TagsItemId,lt.tags,null,pt.Tag(),n,new c.ResourceTagsListBladeReference({resourceId:n}))});p&&e.enableRbac!==!1&&ot.push({reference:ct(st.UsersItemId,lt.accessControl,lt.access,pt.PersonWithFriend({palette:3}),n,new r.Composition.Selectable.PdlBladeReference("UserAssignmentsV2Blade","Microsoft_Azure_AD",{parameters:{scope:n}}))});fr||!it||ft||e.enableExportTemplate===!1||ut.push({reference:ct(st.ExportTemplateItemId,lt.exportTemplate,gt.exportTemplate,at.Download(),n,new c.TemplateViewerBladeReference({options:{resourceGroup:it,telemetryId:rt}},null))});h&&(v||g)&&e.enableProperties===!0&&ut.push({reference:ct(st.PropertiesItemId,lt.properties,null,pt.Properties(),n,new c.ResourcePropertiesReference({id:n}))});sr&&p&&!tt&&e.enableEventGridPublisher&&ot.push({reference:ct("events",s.ResourceMenuBlade.events,s.ResourceMenuBlade.eventsKeywords,at.Power(),n,new w.ListEventSubscriptionsFromPublisherBladeReference({inputs:{publisherResourceId:n}}))});ri(yt,ai,t,u,f);ri(ot,vi,t,u,f);ri(et,yi,t,u,f);ri(ut,li,t,u,f)}))}function ki(n,t,u){if(t===i.getEnvironmentValue("extensionName"))return u;var f=i.clone(u,!1);return delete f.supplyBladeReference,f.supplyBladeReferenceAsync=function(){return n.isDisposed()?Q.reject(new oi.DisposedError({message:"Blade opening cancelled.",errorLevel:0})):r.Assets.supplyMenuDetailBladeReferenceAsync(n,{name:t},u)},f}function di(n){var t=i.clone(n,!0,!0);return t.items.forEach((function(t){var i=n.items.first((function(n){return n.id===t.id}));t.enabled=i.enabled;t.visible=i.visible})),t}function ui(n,t,i){var u=[],r=[];n.items.forEach((function(n){t.indexOf(n.id)>=0?r.push(n):u.push(n)}));r.sort((function(n,i){return t.indexOf(n.id)-t.indexOf(i.id)}));n.items=i?u.concat(r):r.concat(u)}function pr(n){var i,r,u,f,t=[],e=[],o;return n.forEach((function(n){switch(n.id){case st.QuickAccessGroupId:i=n;break;case st.ManagementGroupId:r=n;break;case st.MonitoringGroupId:f=n;break;case st.SupportGroupId:u=n;break;default:n.elevated?e.push(n):t.push(n)}})),r&&(ui(r,[st.PropertiesItemId,st.LocksItemId,st.ExportTemplateItemId],!0),t.unshift(r)),t=e.concat(t),i&&(ui(i,[st.EventLogsItemId,st.UsersItemId,st.TagsItemId,st.TroubleshootItemId]),t.unshift(i)),f&&(o=["e2emonitoring",st.AlertsItemId,st.MetricsItemId,st.LogAnalyticsItemId,st.DiagnosticsItemId,st.LogSearchItemId,],ui(f,o),t.push(f)),u&&(ui(u,[st.SupportHelpRequestItemId],!0),t.push(u)),t}function wr(n,t,r,f,e){var o=r.map((function(n){var t,r,u,f;if(n.hasOwnProperty("referenceId")){if(t=di(n),r=hr[t.referenceId],!r)throw new Error("There was a menu group extension for an unknown internal menu group '"+t.referenceId+"'");return u=i.clone(r,!0,!0),(f=u.items).push.apply(f,t.items),u}return di(n)})),h=i.extendArrayIntoMap(u.create(null),o,(function(n){return kt(n.id)}),i.identity),s=u.create(null);return o.forEach((function(n){return i.extendArrayIntoMap(s,n.items,(function(n){return n.id}),(function(t){return{group:n.id,menuItem:t}}))})),vt(n,yr(t,o,h,s,f,e)).then((function(){var t=e&&e.extensionName||l.definitionName;return o=o.map((function(i){return i.items=i.items.map((function(i){return ki(n,t,i)})),i})),pr(o,f)}))}function br(n,t,i){return n=kt(n),t&&n===kt(t.id)||i.some((function(t){return t.items.some((function(t){return kt(t.id)===n}))}))}function gi(n,t,r){var u;if(i.forEachKey(n,(function(t){kt(t)==="menuid"&&(u=n[t])})),r&&u&&!br(u,t,r)){wt.warning("The specified menu id '{0}' does not exist on the menu".format(u));return}return u}function dt(n,t,i){n[t]=i()}function nr(n,t){return it.getExcludedResourceTypes().then((function(i){var u=n.toLowerCase(),f=t&&t.name.toLowerCase(),r=i&&i[u];return r&&(r===!0||r[f]===!0)}))}function fi(n,t){return oi.isInstanceOfErrorType(n,oi.CanceledError)?Q.reject(n):t?t(n):Q.reject(n)}var tr;u.defineProperty(t,"__esModule",{value:!0});var bt=i.Base,ir=i.ViewModels,pt=bt.Images,at=pt.Polychromatic,ht=ir.Services.ResourceTypes,st=i.Assets,ei=bt.Constants.ResourceTypes,hi=bt.Constants.ExtensionNames.Support,ti=ei.ResourceGroups,oi=i.Errors,vt=bt.Promises.cancelOnDispose,wt=bt.Diagnostics.createLog(n),lt=i.Resources.Strings.Part.SettingList,gt=lt.Keywords,si=lt.Group,yt=i.isFeatureEnabled,rr=yt("hidecertsmenuforsubscription"),ur=yt("hidequotasmenuforsubscription"),fr=yt("hideexport"),er=yt("activitylogextension"),kr=yt("ashhealth"),ii=yt("hidesupport"),or=yt("hidehealthcheck"),sr=yt("eventgrid"),ni=yt("enablemonitoringgroup"),ci=yt("isomsextensionavailable"),li={id:st.ManagementGroupId,displayText:si.settings,items:[]},ai={id:st.SupportGroupId,displayText:si.support,items:[]},vi={id:st.QuickAccessGroupId,displayText:st.QuickAccessGroupId,items:[]},yi={id:st.MonitoringGroupId,displayText:si.monitoring,items:[]},hr=[li,ai,vi,yi].reduce((function(n,t){return n[t.id]=t,n}),{});t.getNewSupportRequestBladeReference=bi;tr=(function(n){function t(t){var i=n.call(this,t)||this;return i._showExpectedError=function(n){i.menu.groups([]);i.menu.setOptions({});i.title(n.title);rt.updateContainerForError(n,i._container)},i.title(s.ResourceMenuBlade.title),i.icon(at.ResourceDefault()),i._lifetime=i._container=t,i.menu.groupSortFunction=e.SortFunction.Default,i.menu.groupSortOrder=0,i}return __extends(t,n),t.prototype.onInputsSet=function(n){var f=this,t=n.id,e=u.create(null),b,st,ct,lt,k,at,s,it,yt,v,pt,y,c;i.disposeDisposable(this._childLifetime);var r=this._childLifetime=this._lifetime.createChildLifetime(),p=function(n,i,r,u){f._recentsManager=f._recentsManager||ft.getRecentsManager();f._recentsManager.addRecent(n,t,i,r,u)},w=function(t,i,r,u,f){return{id:t,inputs:n,telemetryInfo:e,resourceType:i,resource:r,isResource:u,subscription:f}};if(ht.isSubscriptionId(t))return b=ht.parseSubscriptionDescriptor(t).subscription,this.title(b),st="subscriptionGetSubscriptionInfoTime",ct=i.startTimer(),vt(r,ut.getSubscription(b)).then((function(n){rt.clearContainerError(f._container);dt(e,st,ct);lt=n.displayName;f.title(n.displayName);var i=ei.Subscriptions;return f._processResourceType(r,w(t,i,n,!1))})).then((function(){p(r,lt)})).catch((function(n){return fi(n,(function(n){var i=rt.getErrorTitleAndMessage(n,t,!0);return i?f._showExpectedError(i):Q.reject(n)}))}));if(ht.isResourceGroupId(t)){k=ht.parseResourceGroupDescriptor(t);this.title(k.resourceGroup);this.subtitle(h.AssetTypeNames.ResourceGroup.singular);var l="resourceGroupGetResourceGroupTime",a=i.startTimer(),tt=n.referrerInfo,o=tt&&tt.sessionId===i.sessionId&&tt.instance,bt=d.makeResourceManagerTelemetry("ResourceMenu.resourceGroup");return o&&!ht.compareResourceGroupId(t,o.id)&&(wt.error("Resource menu blade referrer resource group ID <"+o.id+"> doesn't match passed ID <"+t+">"),o=null),at=o?Q(o):Q(ot.ResourceGroupClient.getResourceGroup(t,bt)),vt(r,at).then((function(n){return rt.clearContainerError(f._container),dt(e,l,a),s=n,l="resourceGroupGetSubscriptionInfoTime",a=i.startTimer(),vt(r,ut.getSubscription(k.subscription))})).then((function(n){return dt(e,l,a),l="resourceGroupResourceTypeAssetTypeInfoTime",a=i.startTimer(),it=n,vt(r,nt.getResourceTypeAssetTypeInformation(ti))})).then((function(n){dt(e,l,a);yt=n;var t=new et.ResourceGroupViewModel(null,null,null);return vt(r,t.getMenuConfig({resource:s,resourceId:s.id,subscription:it}))})).then((function(n){return f._processMenuConfig(r,w(t,ti,s,!1,it),n,yt,i.startTimer())})).then((function(){p(r,g.getResourceName(s),s.location)})).catch((function(n){return fi(n,(function(n){var i=rt.getErrorTitleAndMessage(n,t);return i?f._showExpectedError(i):Q.reject(n)}))}))}if(ht.isResourceId(t)){v=ht.parseResourceDescriptor(t);pt=ht.buildResourceTypeFromResourceDescriptor(v);this.title(v.resource);y=n.referrerInfo;c=y&&y.sessionId===i.sessionId&&y.instance;c&&!ht.compareResourceId(t,c.id)&&(wt.error("Resource menu blade referrer resource ID <"+c.id+"> doesn't match passed ID <"+t+">"),c=null);var gt="resourceGroupGetSubscriptionInfoTime",ni=i.startTimer(),ii=Q(ht.isTenantResource(t)?null:ut.getSubscription(v.subscription));return vt(r,ii).then((function(n){return dt(e,gt,ni),f._processResourceType(r,w(t,kt(pt),c,!0,n))})).then((function(n){n&&p(r,g.getResourceName(n),n.location,n.kind)}))}return wt.warning("No resource menu for given ID (must be subscription, resource group or resource): '"+ht.sanitizeId(t)+"'"),Q()},t.prototype._processResourceType=function(n,t){var r=this,e=t.id,l=h.ResourceGroup.SettingsKeywords.Properties,v={id:"overview",displayText:h.ResourceGroup.Settings.overview,enabled:f.observable(!0),icon:at.Controls(),keywords:[l.location,l.subscription],supplyBladeReference:function(){return new c.ResourcePropertiesReference({id:e,overrideIcon:!0})}},u={groups:[],overview:v,options:{enableTags:!1}},a=function(){var f="resourceGetResourceTime",o=i.startTimer(),s=t.resource?Q(t.resource):ot.ResourceClient.getResource(e,d.makeResourceManagerTelemetry("ResourceMenu.resource"));return vt(n,s).then((function(e){return rt.clearContainerError(r._container),dt(t.telemetryInfo,f,o),t.resource=e,r._processMenuConfig(n,t,u,null,i.startTimer())}))},y="processResourceTypeGetResourceTypeAssetTypeInfoTime",p=i.startTimer();return vt(n,nt.getResourceTypeAssetTypeInformation(t.resourceType,!0)).then((function(f){if(dt(t.telemetryInfo,y,p),!f)return a();var e=function(n){var e,u,h,c;t.isResource&&f.bladeName&&(e=st.assetTypeInformationSupportsContract(f,32)&&(f.staticOverview||{}),e&&(u=n&&n.staticOverview,h={id:u&&u.id||e.id||"overview",displayText:u&&u.displayName||e.displayName||s.ResourceMenuBlade.overview,icon:u&&u.icon||n&&n.icon||e.icon||f.icon,keywords:(u&&u.keywords||e.keywords||s.ResourceMenuBlade.overviewKeywords).split(" "),supplyBladeReference:function(){return new o.PdlBladeReference(n&&n.bladeName||f.bladeName,n&&n.bladeExtensionName||f.bladeExtensionName||f.extensionName,{parameters:{id:t.id}})}},t.telemetryInfo.telemetryStaticOverview=1,i.shallowCopyFromObject(t,t.telemetryInfo),r.menu.groups([]),c=gi(t.inputs),t.staticOverview=h))};return st.assetTypeInformationSupportsContract(f,128)?r._processExtensionSuppliesResourceAndMenuConfig(n,f,t,e,u):st.assetTypeInformationSupportsContract(f,8)?r._processResourceMenuConfig(n,f,t,e,u):a()}))},t.prototype._processExtensionSuppliesResourceAndMenuConfig=function(n,t,r,u,f){var h=this,e=r.id,l=t.extensionName===bt.Constants.ExtensionNames.Hubs?tt.getAssetTypeViewModel(t):tt.getAssetTypeViewModelAndExec(t,{keepReturnsIn:"getMenuWithExtensionSuppliedResource",tasks:[{method:"getResourceAndMenuConfig",args:[{resourceId:e}]}]}),o,s,c;return vt(n,l).then((function(t){var u,r,f;return n.registerForDispose(t),u=t.getAssetTypeContract(128),c=i.startTimer(),r=i.first(u._msPortalFx_earlyExecgetMenuWithExtensionSuppliedResource),r||(r=u.getResourceAndMenuConfig({resourceId:e}),f=r&&r.hold&&r.hold(),f&&n.registerForDispose(f)),vt(n,r)})).then((function(i){s=i;var u=r.resource=s.resource,f=u.id||"/subscriptions/"+u.subscriptionId;if(!ht.compareResourceManagerId(e,f)){wt.error("Resource returned with menu blade config <"+f+"> doesn't match passed ID <"+e+">");throw new Error("Invalid resource retrieved.");}return o=g.getKindFromAssetTypeFromResource(t,u.kind),vt(n,nr(r.resourceType,o))})).then((function(e){return e?h._processMenuConfig(n,r,f,t,i.startTimer()):(u(o),h._processMenuConfig(n,r,s.menuConfig,t,c,o))}))},t.prototype._processResourceMenuConfig=function(n,t,r,u,f){var e=this,o=r.id,h="resourceGetResourceTime",c=i.startTimer(),l=r.resource?Q(r.resource):ot.ResourceClient.getResource(o,d.makeResourceManagerTelemetry("ResourceMenu.resource")),s;return vt(n,l).then((function(i){rt.clearContainerError(e._container);dt(r.telemetryInfo,h,c);var u=i.id||"/subscriptions/"+i.subscriptionId;if(!ht.compareResourceManagerId(o,u)){wt.error("Resource retrieved for menu blade config <"+u+"> doesn't match passed ID <"+o+">");throw new Error("Invalid resource retrieved.");}return r.resource=i,s=g.getKindFromAssetTypeFromResource(t,i.kind),vt(n,nr(r.resourceType,s))})).then((function(o){if(o)return e._processMenuConfig(n,r,f,t,i.startTimer());u(s);var h={resourceId:r.id,resource:r.resource,subscription:r.subscription},a=t.extensionName===bt.Constants.ExtensionNames.Hubs?tt.getAssetTypeViewModel(t):tt.getAssetTypeViewModelAndExec(t,{keepReturnsIn:"getMenuConfig",tasks:[{method:"getMenuConfig",args:[h]}]}),l,c;return vt(n,a).then((function(t){var u,r,f;if(t)return c=t,n.registerForDispose(c),u=c.getAssetTypeContract(8),l=i.startTimer(),r=i.first(u._msPortalFx_earlyExecgetMenuConfig),r||(r=u.getMenuConfig(h),f=r&&r.hold&&r.hold(),f&&n.registerForDispose(f)),vt(n,r)})).then((function(i){if(i)return e._processMenuConfig(n,r,i,t,l,s)})).catch((function(n){return fi(n,(function(n){var i=h.resource.id,r,u;return ht.compareResourceId(i,h.resourceId)||wt.error("getMenuConfig failed: the resource's ID <"+i+"> doesn't match the resource ID <"+h.resourceId+">"),r=ht.buildResourceTypeFromResourceId(i),r.toLowerCase()!==t.resourceType.toLowerCase()&&wt.error("getMenuConfig failed: the resource's type <"+r+"> doesn't match the asset type info <"+t.resourceType+">"),u={resourceInfo:h,resourceId:i,resourceType:r,assetTypeInformation:t,assetTypeViewModel:{assetTypeInformation:c.assetTypeInformation,assetTypeName:c.assetTypeName,assetTypeViewModelName:c.assetTypeViewModelName},error:{message:n.message,stack:n.stack}},wt.error("getMenuConfig failed: dumping data: "+JSON.stringify(u,null,2)),Q.reject(n)}))}))})).then((function(n){return r.staticOverview?r.resource:n})).catch((function(n){return fi(n,(function(n){var t=rt.getErrorTitleAndMessage(n,o);return t?e._showExpectedError(t):Q.reject(n)}))}))},t.prototype._processMenuConfig=function(n,t,r,u,f,e){var c=this,v=e&&e.singularDisplayName||u&&u.compositeDisplayName&&u.compositeDisplayName.singular||t.resourceType,o,s,a,h;return(this.subtitle(v),!r)?null:(o=t.staticOverview,!o&&r.overview&&(s=i.clone(r.overview,!0,!0),s.enabled=r.overview.enabled,a=u&&u.extensionName||l.definitionName,o=ki(n,a,s)),h={overview:o,defaultId:undefined,resourceMenuOptions:r.options,resourceType:t.resourceType,getMenuConfigDuration:f()},i.shallowCopyFromObject(h,t.telemetryInfo),this.contentStateDisplayText(null),this.contentState(0),vt(n,wr(n,t.id,r.groups,r.options,u)).then((function(n){c.menu.groups(n);var u=i.clone(h);return u.defaultId=gi(t.inputs,o,n)||r.defaultItemId,c.menu.setOptions(u),t.resource})))},t})(e.ViewModel);t.ResourceMenuBlade=tr}));
define("HubsExtension/_generated/Blades/ResourceMenuBlade",["require","exports","o","HubsExtension/ResourceMenuBlade/ViewModels/ResourceMenuBlade"],(function(n,t,i){"use strict";i.defineProperty(t,"__esModule",{value:!0});t.blade={name:"ResourceMenuBlade",entryPoint:{module:"HubsExtension/ResourceMenuBlade/ViewModels/ResourceMenuBlade","export":"ResourceMenuBlade"},inputs:["id"],optionalInputs:["menuid","referrerInfo"],viewModelName:"ResourceMenuBlade$ResourceMenuBlade",lenses:[],width:51,locked:!0,assetIdInputProperty:"id",pinnable:!0,menuBlade:{},attributes:0}}))