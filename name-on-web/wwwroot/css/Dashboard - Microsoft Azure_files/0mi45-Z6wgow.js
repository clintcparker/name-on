define("HubsExtension/ArtBrowse/ViewModels/ArtRequestGenerator",["require","exports","f","o","ko"],(function(n,t,i,r,u){"use strict";function f(n,t){var r=u.observable(),f=function(n,t,u,f,e){var o={subscriptions:n,query:t,facets:u,options:{enablePaging:!0,maxRows:50,rowsToSkip:50*((f||1)-1),skipToken:e,includeTotalRecords:!0}};i.deepEquals(r.peek(),o)||r(o)};return u.explicitComputed(n,[t.subscriptionsObservable,t.queryObservable],(function(n,i){f(n,i,t.facets(),1,"")})),u.explicitComputed(n,[t.pageObservable],(function(n){f(t.subscriptionsObservable(),t.queryObservable(),t.facets(),n,t.skipTokenObservable())})),r}r.defineProperty(t,"__esModule",{value:!0});t.getRequest=f}));
define("HubsExtension/ArtBrowse/ViewModels/BrowseBulkCommandImpl",["require","exports","f","o","ko"],(function(n,t,i,r,u){"use strict";r.defineProperty(t,"__esModule",{value:!0});var f=i.ViewModels,o=f.Dialogs,e=(function(){function n(n,t,i){var r=this;this._canExecute=u.observable(!0);this._cmdDef=t;this._cmdContext=i;this.canExecute=u.computed(n,(function(){return r._cmdContext.hasSelectedItems()&&r._canExecute()}))}return n.prototype.execute=function(n){var t=this;if(this._canExecute(!1),n===6||n===4){var r=this._cmdContext.selectedBrowseItems(),u=r.map((function(n){return{name:n.name,resourceId:n.id,resourceType:n.resourceType.toLowerCase()}})),f=i.require("HubsExtension/ArmHelpers/ArmBulkCommand").then((function(n){return n.execute(t._cmdDef,t._cmdContext.resourceType,u)}));return this._canExecute(!0),f.then((function(){if(t._cmdContext.onCompleteCallback)return t._cmdContext.onCompleteCallback(r)}))}return this._canExecute(!0),Q()},n})();t.BulkCommandImpl=e}));
define("HubsExtension/ArtBrowse/ViewModels/FacetsViewModel",["require","exports","f","o","ko","HubsExtension/ArtBrowse/ArtBrowseResources","Fx/Controls/Accordion","Fx/Controls/Button","Fx/Controls/CheckBox","Fx/Controls/DropDown","HubsExtension/Common/HubsObservables"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";function v(n,t,r,f){var e=u.observable(t),o;return n==="subscriptionId"?i.tryImmediateResolve(c.getSubscription(t),(function(n){return e(n.uniqueDisplayName)})):n==="location"?e(r[t.toLowerCase()]||t):n==="type"&&(o=f[t.toLowerCase()]||{},e(o.displayName||t)),e}function y(n,t,i){return s.create(n,{labelOnRight:!0,label:i,suppressDirtyBehavior:!0})}var l,a,p;r.defineProperty(t,"__esModule",{value:!0});l=f.countFormat.format("0");a="<a data-bind='fxclick: onClearClick, visible: clearVisible, image: clearImage' class='ext-hubs-artbrowse-facetclear'><\/a><ul class='ext-hubs-artbrowse-facets' data-bind='foreach: checkBoxItems'><li class='ext-hubs-artbrowse-facet-item' data-bind='css:{ ext-hubs-artbrowse-facet-item-selected: $data.checkBox.value }'><div class='ext-hubs-artbrowse-facetvalue-checkbox' data-bind='pcControl: $data.checkBox'><\/div><div class='ext-hubs-artbrowse-facetvalue-count' data-bind='text: $data.value.count'><\/div><\/li><\/ul><!-- ko ifnot: checkBoxItems().length --><div data-bind='text: noFacetValues'><\/div><!-- /ko --><!-- ko if: showDropdown --><div class='ext-hubs-artbrowse-facet-dropdown' data-bind='pcControl: dropDown'><\/div><!-- /ko -->";p=(function(){function n(n,t,r,s){var c=this,l;this.selectedFacetValuesMap=new i.Map;this.clearAllVisible=u.observable(!1);this._updateInProgress=u.observable(!1);this._sectionViewModelMap=new i.Map;this._checkBoxItemsMap=new i.Map;this._container=n;l=u.observableArray([]);this.accordionViewModel=e.create(n,{canExpandMultipleSections:!0,canCollapseAllSections:!0,sections:l});t.forEach((function(t,o){var d=u.observableArray([]),b=u.observableArray([]),w,p,k,g;c.selectedFacetValuesMap.set(o,u.observableArray([]));c._checkBoxItemsMap.set(o,new i.Map);p=h.create(n,{items:d,multiselect:!0,multiItemDisplayText:f.allOptions,filter:!0,placeholder:f.search,suppressDirtyBehavior:!0,customFilter:function(n){return w!==n&&(p.statusMessage({htmlTemplate:f.searching}),p.showStatusMessage(!0)),Q([])}});u.computed(c._container,p.filterString,(function(n){p.isPopUpOpen()&&w!==n&&(w=n,p.statusMessage({htmlTemplate:f.searching}),p.showStatusMessage(!0),p.suppressSelectedUpdate(!0),Q.spread([r,s,t.searchProvider(n)],(function(t,r,u){if(w===n&&u){var e=u.expression,o=u.data,s=i.convertArrayToMap(o.columns,(function(n){return n.name}),(function(n,t){return t})),c=s[e],l=s.count,h=o.rows.map((function(n){var i=n[c],u=f.countFormat.format(n[l]),o=v(e,i,r,t);return{text:f.dropdownItemDisplayFmt.format(o(),u),value:{name:i,displayName:o,count:u}}}));h.length?p.showStatusMessage(!1):p.statusMessage({htmlTemplate:f.noFacetValues});p.items(h)}})).finally((function(){w===n&&p.suppressSelectedUpdate(!1)})))}));k={checkBoxItems:b,dropDown:p,showDropdown:u.observable(!1),clearImage:i.Base.Images.FilterRemove(),onClearClick:function(){b().forEach((function(n){n.checkBox.value(!1)}))},clearVisible:u.computed(n,(function(){var n=b();return n.some((function(n){return n.checkBox.value()}))})),noFacetValues:f.noFacetValues};c._sectionViewModelMap.set(o,k);g=e.createSection(n,{title:t.displayName,content:{htmlTemplate:a,viewModel:k},expanded:u.observable(!0)});l.push(g);p.isPopUpOpen.subscribe(n,(function(t){var r=c._checkBoxItemsMap.get(o),e,u,f;t?(f=[],r.forEach((function(n){n.checkBox.value()&&f.push(n.value)})),p.value(f),p.filterString(w||"")):(e=p.value(),u=new i.Map,e.forEach((function(t){u.set(t.name,!0);var f=t.name,i=r.get(f);i||(i={value:t,checkBox:y(n,f,t.displayName)},r.set(f,i),b.push(i));i.checkBox.value(!0)})),d().forEach((function(n){if(!u.has(n.value.name)){var t=r.get(n.value.name);t&&t.checkBox.value(!1)}})),p.value([]))}))}));this.applyButton=o.create(n,{text:f.apply,onClick:function(){var n=!1;c._updateInProgress(!0);c._checkBoxItemsMap.forEach((function(t,i){var r=[];t.forEach((function(n,i){n.checkBox.value()?r.push(i):t.delete(i)}));c.selectedFacetValuesMap.get(i)(r);n||(n=r.length>0)}));c._updateInProgress(!1);c.clearAllVisible(n)}});this.clearAllButton=o.create(n,{text:f.clearAllFilters,style:1,onClick:function(){c._updateInProgress(!0);c._checkBoxItemsMap.forEach((function(n,t){n.forEach((function(n){n.checkBox.value(!1)}));c._checkBoxItemsMap.set(t,new i.Map);c.selectedFacetValuesMap.get(t)([])}));c._updateInProgress(!1);c.clearAllVisible(!1)}})}return n.prototype.updateFacetData=function(n,t,r){var e=this;n.forEach((function(n){var s=n.expression,w=n.data,o=e._sectionViewModelMap.get(s);if(o){var b=e._checkBoxItemsMap.get(s),g=b.size,h=new i.Map;b.forEach((function(n,t){n.checkBox.value()&&h.set(t,{checkBox:n.checkBox,value:{count:l,name:n.value.name,displayName:n.value.displayName}})}));var k=i.convertArrayToMap(w.columns,(function(n){return n.name}),(function(n,t){return t})),nt=k[s],tt=k.count;w.rows.forEach((function(n){var i=n[nt],o=f.countFormat.format(n[tt]),c=h.get(i),u,l;c?c.value.count=o:(u=v(s,i,t,r),l={name:i,displayName:u,count:o},h.set(i,{checkBox:y(e._container,i,u),value:l}))}));var c=[],d=new i.Map,a=[],p=0;h.forEach((function(n,t){(p<g||p<5)&&(c.push(n),d.set(t,n),p++);var i=n.value;a.push({text:u.pureComputed((function(){return f.dropdownItemDisplayFmt.format(i.displayName(),i.count)})),value:i})}));o.checkBoxItems(c);o.dropDown.items(a);o.showDropdown(a.length>c.length);e._checkBoxItemsMap.set(s,d)}else o.checkBoxItems([]),o.dropDown.items([])}))},n})();t.FacetsVM=p}));
define("HubsExtension/ArtBrowse/ViewModels/KustoQueryGenerator",["require","exports","f","o","ko"],(function(n,t,i,r,u){"use strict";function o(n,t,i){return i.map((function(i){if(i)return"("+t+" "+s[n]+" ('"+i.trim().replaceAll("'","''")+"'))"})).join(" "+h[n]+" ")}var s,h,c,f,e;r.defineProperty(t,"__esModule",{value:!0});s=(f={},f[0]="==",f[1]="=~",f[2]="contains",f[3]="!=",f[4]="!~",f);h=(e={},e[0]="or",e[1]="or",e[2]="or",e[3]="and",e[4]="and",e);t.getPredicate=o;c=(function(){function n(n,t,i){var r=this;this._queryProviders=[];this._disabledQueryProviders={};this.query=u.observable("");this._container=n;this._sortProvider=t;this._projectedColumns=i;u.explicitComputed(this._container,[t.sortBy,t.order,i],(function(){r._updateQuery()}))}return n.prototype.registerQueryProvider=function(n){var i=this,r=this._queryProviders.push(n),t;return u.isObservable(n.value)&&u.explicitComputed(this._container,n.value,(function(){i._updateQuery()})),t=n.nestedQueryProvider,t&&u.isObservable(t.value)&&u.explicitComputed(this._container,t.value,(function(){i._updateQuery()})),r-1},n.prototype.disableQueryProviders=function(n){this._disabledQueryProviders=i.convertArrayToMap(n,i.identity,i.wrap(!0));this._updateQuery()},n.prototype._updateQuery=function(){var e=this,n=[],t,r,f;this._queryProviders.forEach((function(t,r){var h,c,f,l,s;e._disabledQueryProviders[r]||(h=o(t.comparisonType,t.columnName,i.makeArray(u.unwrap(t.value))),h&&(c="",f=t.nestedQueryProvider,f&&(l=o(f.comparisonType,f.columnName,i.makeArray(u.unwrap(f.value))),l&&(c="and ("+l+")")),s=h+" "+c,t.negate&&(s="not("+s+")"),n.push(("where "+s).trim())))}));t=this._projectedColumns();t.length&&n.push("project "+t.join(","));this._sortProvider&&(r=this._sortProvider.sortBy(),f=this._sortProvider.order()||0,r&&n.push("sort by ['"+r+"'] "+(f===0?"asc":"desc")));this.query(n.join("|"))},n})();t.KustoQueryGenerator=c}));
define("HubsExtension/BrowseGrid2/BrowseBlades/BrowseConfigurations/BrowseBulkCommandConfig",["require","exports","f","HubsExtension/Browse/BrowseClientStrings"],(function(n,t,i,r){"use strict";var u;return (function(n){function o(n){return t.confirmCommand.format(n.toLowerCase())}var u=i.Base.Images,t=r.BulkCommand,s="api-version=2015-06-01",h="api-version=2016-08-01",c="api-version=2016-03-30",l="api-version=2016-04-30-preview",a="api-version=2015-12-01",v="api-version=2016-06-01",f=t.confirmDeleteDescription,p=t.confirmStopVirtualMachineScaleSets,y=o(t.start),w=o(t.stop),b=o(t.restart),e=o(t.delete),g=o(t.enable),nt=o(t.disable),k={"microsoft.compute/virtualmachines":{type:"DELETE",uri:"{resourceid}?"+c,isDeleteOperation:!0,asyncOperation:{pollingHeaderOverride:"Azure-AsyncOperation"}},"microsoft.classiccompute/virtualmachines":{type:"DELETE",uri:"{resourceid}?keep-disks=true&"+a,isDeleteOperation:!0,asyncOperation:{pollingHeaderOverride:"Azure-AsyncOperation"}}},d={"microsoft.web/sites":{type:"DELETE",uri:"{resourceid}?deleteEmptyServerFarm=false&"+h,isDeleteOperation:!0}};n.AllResourcesCommandDefinition=[{id:"BulkDelete",label:t.delete,icon:u.Delete(),confirmationTitle:e,confirmationMessage:f.format(t.resources,t.confirmDeleteAllResources),confirmWithTextInput:!0,armCommandDefinitions:i.extend2({"*":{type:"DELETE",uri:null,isDeleteOperation:!0}},k,d)},];n.VirtualMachineCommandDefinition=[{id:"BulkStart",label:t.start,icon:u.Start(),confirmationMessage:y,armCommandDefinitions:{"microsoft.compute/virtualmachines":{uri:"{resourceid}/start?"+c,asyncOperation:{pollingHeaderOverride:"Azure-AsyncOperation"}},"microsoft.classiccompute/virtualmachines":{uri:"{resourceid}/start?"+a,asyncOperation:{pollingHeaderOverride:"Azure-AsyncOperation"}}}},{id:"BulkRestart",label:t.restart,icon:u.Redo(),confirmationMessage:b,armCommandDefinitions:{"microsoft.compute/virtualmachines":{uri:"{resourceid}/restart?"+c,asyncOperation:{pollingHeaderOverride:"Azure-AsyncOperation"}},"microsoft.classiccompute/virtualmachines":{uri:"{resourceid}/restart?"+a,asyncOperation:{pollingHeaderOverride:"Azure-AsyncOperation"}}}},{id:"BulkStop",label:t.stop,icon:u.Stop(),confirmationMessage:w,armCommandDefinitions:{"microsoft.compute/virtualmachines":{uri:"{resourceid}/deallocate?"+c,asyncOperation:{pollingHeaderOverride:"Azure-AsyncOperation"}},"microsoft.classiccompute/virtualmachines":{uri:"{resourceid}/shutdown?"+a,asyncOperation:{pollingHeaderOverride:"Azure-AsyncOperation"}}}},{id:"BulkDelete",label:t.delete,icon:u.Delete(),confirmationTitle:e,confirmationMessage:f.format(t.virtualMachines,t.confirmDeleteVirtualMachines),confirmWithTextInput:!0,armCommandDefinitions:k},];n.VirtualMachineScaleSetsCommandDefinition=[{id:"BulkStart",label:t.start,icon:u.Start(),confirmationMessage:y,armCommandDefinitions:{"microsoft.compute/virtualmachinescalesets":{uri:"{resourceid}/start?"+l}}},{id:"BulkRestart",label:t.restart,icon:u.Redo(),confirmationMessage:p.format(t.restart.toLowerCase()),armCommandDefinitions:{"microsoft.compute/virtualmachinescalesets":{uri:"{resourceid}/restart?"+l}}},{id:"BulkStop",label:t.stop,icon:u.Stop(),confirmationMessage:p.format(t.stop.toLowerCase()),armCommandDefinitions:{"microsoft.compute/virtualmachinescalesets":{uri:"{resourceid}/deallocate?"+l}}},{id:"BulkDelete",label:t.delete,icon:u.Delete(),confirmationTitle:e,confirmationMessage:f.format(t.virtualMachineScaleSets,t.confirmDeleteVirtualMachineScaleSets),confirmWithTextInput:!0,armCommandDefinitions:{"microsoft.compute/virtualmachinescalesets":{type:"DELETE",uri:"{resourceid}?"+l,isDeleteOperation:!0}}},];n.CloudServicesCommandDefinition=[{id:"BulkStartProduction",label:t.startProduction,icon:u.Start(),confirmationMessage:t.confirmStartProdCloudServices,armCommandDefinitions:{"microsoft.classiccompute/domainnames":{uri:"{resourceid}/slots/production/start?"+s}}},{id:"BulkStopProduction",label:t.stopProduction,icon:u.Stop(),confirmationTitle:t.confirmStopProdCloudServicesTitle,confirmationMessage:t.confirmBillingInfo,armCommandDefinitions:{"microsoft.classiccompute/domainnames":{uri:"{resourceid}/slots/production/stop?"+s}}},{id:"BulkStartStaging",label:t.startStaging,icon:u.Start(),confirmationMessage:t.confirmStartStagingCloudServices,armCommandDefinitions:{"microsoft.classiccompute/domainnames":{uri:"{resourceid}/slots/staging/start?"+s}}},{id:"BulkStopStaging",label:t.stopStaging,icon:u.Stop(),confirmationTitle:t.confirmStopStagingCloudServicesTitle,confirmationMessage:t.confirmBillingInfo,armCommandDefinitions:{"microsoft.classiccompute/domainnames":{uri:"{resourceid}/slots/staging/stop?"+s}}},{id:"BulkSwap",label:t.swap,icon:u.Swap(),confirmationMessage:t.confirmSwapCloudServices,armCommandDefinitions:{"microsoft.classiccompute/domainnames":{uri:"{resourceid}/swap?"+s}}},{id:"BulkDelete",label:t.delete,icon:u.Delete(),confirmationTitle:e,confirmationMessage:f.format(t.cloudServices,t.confirmDeleteCloudServices),confirmWithTextInput:!0,armCommandDefinitions:{"microsoft.classiccompute/domainnames":{type:"DELETE",uri:"{resourceid}?force=true&"+s,isDeleteOperation:!0}}},];n.AppServiceCommandDefinition=[{id:"BulkStart",label:t.start,icon:u.Start(),confirmationMessage:y,armCommandDefinitions:{"microsoft.web/sites":{uri:"{resourceid}/start?"+h}}},{id:"BulkRestart",label:t.restart,icon:u.Redo(),confirmationMessage:b,armCommandDefinitions:{"microsoft.web/sites":{uri:"{resourceid}/restart?"+h}}},{id:"BulkStop",label:t.stop,icon:u.Stop(),confirmationMessage:w,armCommandDefinitions:{"microsoft.web/sites":{uri:"{resourceid}/stop?"+h}}},{id:"BulkDelete",label:t.delete,icon:u.Delete(),confirmationTitle:e,confirmationMessage:f.format(t.webApps,t.confirmDeleteAppService),confirmWithTextInput:!0,armCommandDefinitions:d},];n.StorageCommandDefinition=[{id:"BulkDelete",label:t.delete,icon:u.Delete(),confirmationTitle:e,confirmationMessage:f.format(t.storage,t.confirmDeleteStorage),confirmWithTextInput:!0,armCommandDefinitions:{"microsoft.storage/storageaccounts":{type:"DELETE",uri:"{resourceid}?api-version=2015-06-15",isDeleteOperation:!0},"microsoft.classicstorage/storageaccounts":{type:"DELETE",uri:"{resourceid}?api-version=2015-12-01",isDeleteOperation:!0}}},];n.SqlDatabasesCommandDefinition=[{id:"BulkDelete",label:t.delete,icon:u.Delete(),confirmationTitle:e,confirmationMessage:f.format(t.databases,t.confirmDeleteDatabases),confirmWithTextInput:!0,armCommandDefinitions:{"microsoft.sql/servers/databases":{type:"DELETE",uri:"{resourceid}?api-version=2014-04-01-preview",isDeleteOperation:!0}}},];n.LogicAppsCommandDefinition=[{id:"BulkEnable",label:t.enable,icon:u.Signout(),confirmationMessage:g,armCommandDefinitions:{"microsoft.logic/workflows":{uri:"{resourceid}/enable?"+v}}},{id:"BulkDisable",label:t.disable,icon:u.Disable(),confirmationMessage:nt,armCommandDefinitions:{"microsoft.logic/workflows":{uri:"{resourceid}/disable?"+v}}},{id:"BulkDelete",label:t.delete,icon:u.Delete(),confirmationTitle:e,confirmationMessage:f.format(t.logicApps,t.confirmDeleteLogicApps),confirmWithTextInput:!0,armCommandDefinitions:{"microsoft.logic/workflows":{type:"DELETE",uri:"{resourceid}?"+v,isDeleteOperation:!0}}},];n.BulkCommandDefinitions={"microsoft.resources/resources":n.AllResourcesCommandDefinition,"microsoft.compute/virtualmachines":n.VirtualMachineCommandDefinition,"microsoft.classiccompute/virtualmachines":n.VirtualMachineCommandDefinition,"microsoft.compute/virtualmachinescalesets":n.VirtualMachineScaleSetsCommandDefinition,"microsoft.classiccompute/domainnames":n.CloudServicesCommandDefinition,"microsoft.web/sites":n.AppServiceCommandDefinition,"microsoft.storage/storageaccounts":n.StorageCommandDefinition,"microsoft.classicstorage/storageaccounts":n.StorageCommandDefinition,"microsoft.sql/servers/databases":n.SqlDatabasesCommandDefinition,"microsoft.logic/workflows":n.LogicAppsCommandDefinition}})(u||(u={})),u}));
define("HubsExtension/_generated/Microsoft_Azure_Storage/BladeReferences",["require","exports","Fx/Composition/Selectable"],(function(n,t,i){"use strict";var r;return (function(n){function r(n,t,i){return{onClosed:n,parameters:t,callbacks:i}}var t="Microsoft_Azure_Storage",u=(function(n){function i(i,u){return n.call(this,"StorageExplorerBlade",t,r(u,i),{})||this}return __extends(i,n),i})(i.PdlBladeReference);n.StorageExplorerBladeReference=u})(r||(r={})),r}));
define("HubsExtension/BrowseGrid2/BrowseBlades/BrowseConfigurations/StorageExplorerButton",["require","exports","f","ko","HubsExtension/Browse/BrowseClientStrings","HubsExtension/_generated/Microsoft_Azure_Storage/BladeReferences","HubsExtension/Svg/SvgDefinitions"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){function s(n){return t&&o[n]}function h(n,t){var o=new i.ViewModels.Toolbars.OpenBladeButton2({label:u.BulkCommand.openInStorageExplorerPreview,icon:e.Svg.Library.storageExplorer,tooltip:u.BulkCommand.tooltip.format(u.BulkCommand.openInStorageExplorerPreview),disabled:r.pureComputed((function(){return!t().length})),supplyBladeReference:function(){var n=t().map((function(n){return n.id}));return new f.StorageExplorerBladeReference({storageAccountIds:n})}});return o.name=o.id="{0}.BulkCmd.OpenStorageExplorer".format(n),o}var t=i.isFeatureEnabled("storageexplorerfrombrowse"),o={"microsoft.storage/storageaccounts":!0,"microsoft.classicstorage/storageaccounts":!0};n.canDisplay=s;n.create=h})(o||(o={})),o}));
define("HubsExtension/ArtBrowse/ViewModels/ArtBrowseBlade",["require","exports","f","i","o","ko","Fx/Composition/TemplateBlade","Fx/Controls/Button","Fx/Controls/CheckBox","Fx/Controls/DropDown","FxInternal/Controls/Grid2/GridB","FxInternal/Data/GroupNavigator","HubsExtension/ArtBrowse/ArtBrowseResources","HubsExtension/Browse/BrowseClientStrings","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/Common/AssetTypeCache","HubsExtension/_generated/BladeReferences","HubsExtension/BrowseGrid2/BrowseBlades/BrowseConfigurations/BrowseBulkCommandConfig","HubsExtension/Browse/BrowseArea","HubsExtension/Common/HubsObservables","HubsExtension/BrowseGrid2/BulkDeleteBlade/BulkDeleteBladeModel","HubsExtension/ArtBrowse/ViewModels/BrowseBulkCommandImpl","HubsExtension/ArtBrowse/ViewModels/KustoQueryGenerator","HubsExtension/ArtBrowse/ViewModels/ArtRequestGenerator","HubsExtension/ArtBrowse/ViewModels/FacetsViewModel","HubsExtension/Common/BrowseCuration","HubsExtension/BrowseGrid2/BrowseGrid2Startup","HubsExtension/_generated/HtmlTs/BrowseGrid2/BrowseBlades/Templates/TagColumn","Extensions/Hubs/PillList","HubsExtension/BrowseGrid2/BrowseBlades/BrowseConfigurations/StorageExplorerButton","Fx/Composition/PartReferences","FxInternal/Controls/Toolbars.FeedbackButton","Fx/Controls/InfoBox","HubsExtension/ArtBrowse/ArtBrowseHelper"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at){"use strict";function bt(n,t,i){return{id:ki[n],name:t.title,description:t.description,visible:!i}}function di(){return[bt(11,pt.AssetType),bt(3,pt.ResourceGroup),bt(4,pt.Location),bt(9,pt.Subscription),bt(2,pt.Kind,!0),bt(7,pt.ResourceGroupId,!0),bt(5,pt.LocationId,!0),bt(6,pt.ResourceId,!0),bt(8,pt.ResourceType,!0),bt(10,pt.SubscriptionId,!0),bt(12,pt.Tags,!0),]}function oi(n){return Q(i.Base.Net2.ajax({uri:y.getAbsoluteArmUri("/providers/Microsoft.ResourcesTopology/resources?api-version=2017-10-05-preview"),type:"POST",contentType:"application/json",accepts:"application/json",setAuthorizationHeader:!0,data:JSON.stringify(n)}))}function ii(n){return{label:n.label,icon:yt.Edit(),enabled:f.observable(!0),onClick:function(){n.container.closeContextBlade().then((function(){n.container.openContextPane(new w.EditTagsBladeReference({resource:n.item.id,tagName:n.tagName},function(t,i){t===2&&i&&i.update&&(n.item.tags(i.newTags),ri(n.container,n.tagColumns,n.item,n.allTagsColumnEnabled))}))}))}}}function ri(n,t,r,e){var h=f.unwrap(r.tags)||u.create(null),o,c,l,s;e&&(o=i.forEachKey(h,(function(n,t,i){y.isHiddenTag(n)||i.push({value:v.tagLabel.format(n,t)})}),[]),r.tagsArray()?r.tagsArray().items(o):(c=ii({container:n,tagName:"",item:r,label:v.editResourceTags.format(r.name),tagColumns:t,allTagsColumnEnabled:e}),r.tagsArray(new ot.ViewModel(n,{label:v.tagsLabel.format(r.name),items:f.observableArray(o),actionButtons:[c]}))));l=f.unwrap(r.tagsPillListViewModels);s=u.create(null);(t||[]).forEach((function(u){var c=h[u],o=l[u],y,a;c?o&&o.item?o.item({value:c}):(a=ii({container:n,tagName:u,item:r,label:v.editTag.format(u),tagColumns:t,allTagsColumnEnabled:e}),y={label:v.deleteTag.format(u),icon:yt.Delete(),enabled:f.observable(!0),onClick:function(){var f={telemetryName:"ConfirmDeleteTag",title:v.deleteTagTitle,content:v.deleteTagMessage.format(u),buttons:4,onClosed:function(f){f.button===6&&i.require("HubsExtension/Tags/TagsArea").then((function(i){return i.deleteTag(u,c,r.id).then((function(i){r.tags(i);ri(n,t,r,e)}))}))}};n.openDialog(f)}},o=new ot.ViewModel(n,{label:v.tagsLabel.format(r.name),item:f.observable({value:c}),actionButtons:[a,y]})):(a=ii({container:n,tagName:u,item:r,label:v.addTag.format(u),tagColumns:t,allTagsColumnEnabled:e}),o=new ot.ViewModel(n,{label:v.tagsLabel.format(r.name),items:f.observableArray([]),actionButtons:[a]}));s[u]=o}));r.tagsPillListViewModels(s)}function si(n,t,i,r){(i||[]).forEach((function(i){ri(n,t,i,r)}))}var pt,ni,vt;u.defineProperty(t,"__esModule",{value:!0});var kt=i.Base,hi=kt.Constants,ci=kt.Diagnostics,li=r.ViewModels,dt=i.ViewModels,ui=li.Controls.Lists.Grid2.Formatters,yt=kt.Images,ti=kt.Diagnostics.Telemetry,wt=dt.Toolbars,ai=dt.Services.ResourceTypes,vi=i.Assets,yi=dt.Dialogs,pi=v.BulkCommand,wi=f.utils.peekObservable,gi=ci.createLog(n),fi=new ui.HtmlTemplate({template:et()}),bi={assetType:{id:"resourceTypeDisplayName",name:f.observable(a.type),width:f.observable("100px"),hiddenInCollapsed:!0},location:{id:"locationDisplayName",name:f.observable(a.location),width:f.observable("100px"),hiddenInCollapsed:!0},locationId:{id:"locationId",name:f.observable(a.locationId),width:f.observable("100px"),hiddenInCollapsed:!0},kind:{id:"kind",name:f.observable(a.kind),width:f.observable("100px"),hiddenInCollapsed:!0},resourceGroup:{id:"resourceGroup",name:f.observable(a.resourceGroup),width:f.observable("100px"),activatable:!0,hiddenInCollapsed:!0,dynamicSelectionProvider:function(n,t){return Q({detailBlade:"ResourceMenuBlade",detailBladeInputs:{id:t.resourceGroupId}})}},subscription:{id:"subscriptionDisplayName",name:f.observable(a.subscription),width:f.observable("100px"),hiddenInCollapsed:!0},resourceGroupId:{id:"resourceGroupId",name:f.observable(a.resourceGroupId),width:f.observable("100px"),hiddenInCollapsed:!0},subscriptionId:{id:"subscriptionId",name:f.observable(a.subscriptionId),width:f.observable("100px"),hiddenInCollapsed:!0},resourceId:{id:"id",name:f.observable(a.resourceId),width:f.observable("100px"),hiddenInCollapsed:!0},resourceType:{id:"resourceType",name:f.observable(a.resourceType),width:f.observable("100px"),hiddenInCollapsed:!0},tagsArray:{id:"tagsArray",name:f.observable(a.tags),format:fi,width:f.observable("100px"),hiddenInCollapsed:!0}},gt=i.memoizeQ((function(){return p.getAssetTypesInformation().then((function(n){var i=n(),t={};return i.forEach((function(n){var u,i,r,f;!vi.assetTypeInformationSupportsContract(n,8)&&n.bladeName&&(u={bladeName:n.bladeName,extensionName:n.bladeExtensionName||n.extensionName});i=n.kinds||[];r={};i.length&&i.forEach((function(t){var u,i;t.useResourceMenu===!1&&t.bladeName&&(u={bladeName:t.bladeName,extensionName:t.bladeExtensionName||n.extensionName});i={displayName:t.singularDisplayName,icon:t.icon,bladeDetails:u};r[t.name]=i;t.isDefault&&(f=i)}));t[(n.resourceType||"").toLowerCase()]={icon:n.icon,displayName:n.compositeDisplayName.singular,bladeDetails:u,kindMap:r,defaultKind:f}})),t}))})),ei=i.memoizeQ((function(){return d.getLocationDisplayNames()})),ki=(vt={},vt[1]="name",vt[2]="kind",vt[3]="resourceGroup",vt[4]="location",vt[5]="locationId",vt[6]="resourceId",vt[7]="resourceGroupId",vt[8]="resourceType",vt[9]="subscription",vt[10]="subscriptionId",vt[11]="assetType",vt[12]="tagsArray",vt);pt=v.Columns;ni=(function(){function n(){this.title=f.observable("");this.subtitle=f.observable("");this.countMessage=f.observable("");this.refineText=f.observable(a.refine);this.filterImage=f.observable(yt.Shell.Filter());this.chevronImage=f.observable(yt.DoubleChevron());this.isRefineCollapsed=f.observable(!1);this.infoBox=f.observable(null);this._items=f.observableArray([]);this._pages=f.observableArray();this._skipTokenObservable=f.observable("");this._allSubscriptions=[];this._tagColumns=f.observable();this._allTagsColumnEnabled=f.observable(!1)}return n.prototype.onPin=function(){var n=this.context.parameters;return new ht.PartReference("SkinnyBrowseTile",n)},n.prototype.onInitialize=function(){var n=this,vt=i.forEachKey({type:{displayName:a.resourceType,filterProvider:function(n){return gt().then((function(t){var r=[];return i.forEachKey(t,(function(t,i){(t.toLowerCase().includes(n)||(i.displayName||"").toLocaleLowerCase().includes(n))&&r.push(t)})),tt.getPredicate(1,"type",r)}))}},subscriptionId:{displayName:a.subscription,filterProvider:function(n){return d.getSelectedSubscriptions().then((function(t){var i=[];return t().reduce((function(t,i){return(i.displayName.toLocaleLowerCase().includes(n)||i.subscriptionId.toLowerCase().includes(n))&&t.push(i.subscriptionId),t}),i),tt.getPredicate(1,"subscriptionId",i)}))}},location:{displayName:a.location,filterProvider:function(n){return d.getLocationDisplayNames().then((function(t){var r=[];return i.forEachKey(t,(function(t,i){(t.toLowerCase().includes(n)||i.toLocaleLowerCase().includes(n))&&r.push(t)})),tt.getPredicate(1,"location",r)}))}},resourceGroup:{displayName:a.resourceGroup}},(function(t,r,u){u.set(t,{displayName:r.displayName,searchProvider:function(u){u=(u||"").toLowerCase();var f=n._artRequest(),e=u&&r.filterProvider?r.filterProvider(u):Q(null);return e.then((function(n){var r={maxRows:10,sortOrder:"desc"},e;return i.extend(r,n?{filter:n}:{keywordFilter:u}),e={query:f.query,subscriptions:f.subscriptions,facets:[{expression:t,options:r}],options:{maxRows:0,enablePaging:!1}},oi(e).then((function(n){return(n.facets||[])[0]}))}))}})}),new i.Map),b,g,nt,u,r,e,et,ot,ht;(this.context.parameters.resourceType||"").toLowerCase()===kt.Constants.ResourceTypes.AllResources.toLowerCase()&&(this._resourceType=this.context.parameters.resourceType,this.title(v.AssetTypeNames.AllResource.plural),this.facetsViewModel=new rt.FacetsVM(this.context.container,vt,gt(),ei()));var pt=new l(this.context.container,{sourceItems:this._items,getId:function(n){return wi(n.id)}}),y=f.observableArray(),p=f.observable(!1),w=f.observableArray(),bt={columns:f.observableArray([]),scrolling:{enabled:!0,horizontal:!1},resizing:{enabled:!0},showHeader:!0,noRowsMessage:a.emptyGrid,dataNavigator:pt,selection:{selectionMode:3,activationMode:2,hiddenInCollapsed:!0,selectedIds:y,unselectedIds:w,selectedAll:p,dynamicSelectionProvider:function(n,t){return Q(t.resourceBlade)},activationContainer:this.context.container}};this.gridViewModel=new c.ViewModel(this.context.container,bt);this.resourceFilterText=new i.Azure.ResourceFilter.ViewModel(this.context.container,{actionHandler:this.gridViewModel,showTextFilter:f.observable(!0),showSubscriptionFilter:f.observable(!1),isPersistentSubscriptionFilter:!1,showSubscriptionSummary:f.observable(!1),showTenantLevelSubscriptionSummary:f.observable(!1),textFilterPlaceholder:f.observable(a.search)});this.showAllCheckBox=s.create(this.context.container,{labelOnRight:!0,label:v.showAll,infoBalloonContent:v.showAllInfo,value:!1,suppressDirtyBehavior:!0});this.pageDropdown=h.create(this.context.container,{label:a.pageDropdownLabel,filter:!0,filterPlaceholder:a.pageDropdownFilter,multiselect:!1,items:this._pages,suppressDirtyBehavior:!0});b=f.computed(this.context.container,(function(){return n.gridViewModel.loading()||n.pageDropdown.value()===1}));this.previousButton=o.create(this.context.container,{text:a.previous,style:1,disabled:b,onClick:function(){n.pageDropdown.value(Math.max(0,n.pageDropdown.value()-1))}});g=f.computed(this.context.container,(function(){var t=n._pages();return n.gridViewModel.loading()||!t||n.pageDropdown.value()===t.length}));this.nextButton=o.create(this.context.container,{text:a.next,style:1,disabled:g,onClick:function(){n.pageDropdown.value(n.pageDropdown.value()+1)}});this.sortByDropdown=h.create(this.context.container,{label:a.sortByDropdownLabel,value:"name",items:f.observableArray([{text:a.name,value:"name"},{text:a.type,value:"type"},{text:a.location,value:"location"},{text:a.subscriptionId,value:"subscriptionId"},{text:a.resourceGroup,value:"resourceGroup"},]),suppressDirtyBehavior:!0});this._selectedBrowseItems=f.pureComputed((function(){var i=n._items(),t=w(),r=function(n){return p()?!t.length||!t.some((function(t){return n.id===t.id})):y().some((function(t){return n.id===t.id}))};return i.reduce((function(n,t){return r(t)?(n.push(t),n):n}),[])}));nt=this.context.container.commandBar=new wt.Toolbar(this.context.container);u=new wt.OpenBladeButton2({supplyBladeReferenceAsync:function(){return k.getCreateBlade({resourceType:n._resourceType,marketplaceMenuItemId:hi.GalleryMenuItems.HomeMenuItem})}});u.name=u.id="art-addresource"+i.getUniqueId();u.label(v.addTitle);u.icon(yt.Add());r=new wt.CommandButton;r.name="art-refresh"+i.getUniqueId();r.label(v.refreshCommand);r.icon(yt.Refresh());r.disabled=f.computed(this.context.container,(function(){return n.gridViewModel.loading()}));r.command={canExecute:f.observable(!0),execute:function(){return n._loadDataFromArt(n._artRequest(),"Refresh")}};e=[u,this._createChooseColumnButton(),r,new wt.Separator,this._createAssignTagsButton()];e.push.apply(e,this._createBulkCommands());et=new wt.OpenLinkButton({uri:i.getEnvironmentValue("hubsLinks").learnNewBrowse,label:a.learnMore,icon:yt.Info()});ot=new wt.OpenLinkButton({uri:"#menu/settings",target:"_self",label:a.optOut,icon:yt.Swap()});e.push.apply(e,[new wt.Separator,ct.create(),et,ot,]);nt.setItems(e);this.context.container.revealContent();var st=f.observable([]),ni=f.observable(["id","name","type","kind","location","subscriptionId","resourceGroup","tags"]),t=new tt.KustoQueryGenerator(this.context.container,{sortBy:this.sortByDropdown.value,order:f.observable(0)},ni);return t.registerQueryProvider({columnName:"name",comparisonType:2,value:this.resourceFilterText.filterText}),t.registerQueryProvider({columnName:"location",comparisonType:1,value:this.facetsViewModel.selectedFacetValuesMap.get("location")}),t.registerQueryProvider({columnName:"resourceGroup",comparisonType:1,value:this.facetsViewModel.selectedFacetValuesMap.get("resourceGroup")}),ht=function(){return ft.initializeColumns().then((function(){return ft.setDefaultBrowseColumns(n._resourceType,null,di()),ft.getVisibleBrowseColumns(n._resourceType,null)}))},Q.spread([d.getSelectedSubscriptions(),gt(),ut.getExcludedResourceTypes(),ht(),],(function(r,u,e,o){var s,c,l,h,y;return o.subscribeAndRun(n.context.container,(function(t){var i=[{id:"name",name:f.observable(a.name),width:f.observable("200px"),activatable:!0,format:new ui.HtmlTemplate({template:"<span class='msportalfx-gridcolumn-assetsvg-icon' data-bind='image: item.icon'><\/span><span data-bind='text:value' style='margin-left:10px'><\/span>"})},],r;n._gridColumnIds=[];n._gridColumnIds.push(i[0].id);t&&(r=[],t.forEach((function(t){var u,e,o;t.visible&&(u=t.id,n._gridColumnIds.push(u),u.startsWith("tags.")?(e=u.substr(5),r.push(e),i.push({id:"tagsPillListViewModels."+e,name:f.observable(v.chooserTagColumnNameFormat.format(e)),width:f.observable("100px"),format:fi})):(o=bi[u],o&&(i.push(o),u==="tagsArray"&&n._allTagsColumnEnabled(!0))))})),n._tagColumns(r));n.gridViewModel.columns(i);si(n.context.container,n._tagColumns(),n._items(),n._allTagsColumnEnabled())})),f.reactor(n.context.container,[n.facetsViewModel.selectedFacetValuesMap.get("subscriptionId"),r],(function(t,i){n._allSubscriptions=(i||[]).map((function(n){return n.subscriptionId}));t=t||[];t.length||(t=n._allSubscriptions);st(t);at.checkArtStatusForSelectedSubscriptions().then((function(t){t.length?n.infoBox(lt.create(n.context.container,{image:yt.StatusBadge.Warning(),text:a.notonboarded.format(t.join(", ")),canClose:!0,onClick:new dt.ClickableLink(f.observable("#blade/HubsExtension/Resources/resourceType/Microsoft.Resources%2Fresources"),f.observable("_self"))})):n.infoBox(null)}))})),s=[],c=function(){var n=[];return i.forEachKey(u,(function(t){t&&n.push(t)})),n},t.registerQueryProvider({columnName:"type",comparisonType:1,value:n.facetsViewModel.selectedFacetValuesMap.get("type")}),l=f.computed(n.context.container,(function(){var t=n.facetsViewModel.selectedFacetValuesMap.get("type")();return t.length?[]:c()})),s.push(t.registerQueryProvider({columnName:"type",comparisonType:1,value:l})),i.forEachKey(e,(function(n,r){if(r===!0)s.push(t.registerQueryProvider({columnName:"type",comparisonType:4,value:n}));else{var u=i.forEachKey(r,(function(n,t,i){t&&i.push(n)}),[]);u.length&&s.push(t.registerQueryProvider({columnName:"type",comparisonType:1,value:f.observable(n),negate:!0,nestedQueryProvider:{columnName:"kind",comparisonType:1,value:u}}))}})),h=["type","subscriptionId","location","resourceGroup"].map((function(n){return{expression:n,options:{sortOrder:"desc",maxRows:10}}})),y={subscriptions:n._allSubscriptions,facets:h,query:t.query(),options:{enablePaging:!0,maxRows:50,rowsToSkip:0,includeTotalRecords:!0}},n._loadDataFromArt(y,"InitialLoad").then((function(){var i=n._artRequest=it.getRequest(n.context.container,{subscriptionsObservable:st,pageObservable:n.pageDropdown.value,facets:f.observable(h),queryObservable:t.query,skipTokenObservable:n._skipTokenObservable});i.subscribe(n.context.container,(function(t){n.facetsViewModel._updateInProgress()||n._loadDataFromArt(t,"Filter")}));n.facetsViewModel._updateInProgress.subscribe(n.context.container,(function(t){t||n._loadDataFromArt(i(),"Filter")}));n.showAllCheckBox.value.subscribe(n.context.container,(function(n){n?t.disableQueryProviders(s):t.disableQueryProviders([])}))}))}))},n.prototype._createChooseColumnButton=function(){var n=this;return new wt.OpenBladeButton2({id:"choosecolumns"+i.getUniqueId(),label:v.chooseColumnsCommand,icon:yt.Columns(),supplyBladeReference:function(){var t=new w.ChooseColumnsBladeReference({resourceType:n._resourceType,scopeResourceType:null,subscriptions:n._allSubscriptions},function(){});return t.metadata?t.metadata.isContextBlade=!0:t.metadata={isContextBlade:!0},t}})},n.prototype._createAssignTagsButton=function(){var t=this,n=new wt.OpenBladeButton2({supplyBladeReference:function(){var i=t._selectedBrowseItems().map((function(n){return n.id})),n=new w.AssignTagsBladeReference({resources:i},function(){});return n.metadata?n.metadata.isContextBlade=!0:n.metadata={isContextBlade:!0},n}});return n.name=n.id="art-assigntags"+i.getUniqueId(),n.label(v.assignTagsCommand),n.icon(yt.Tags()),f.reactor(this.context.container,(function(){n.disabled(t._selectedBrowseItems().length<1)})),n},n.prototype._createBulkCommands=function(){var n=this,t=[],i=this._resourceType.toLowerCase(),u=b.BulkCommandDefinitions[i],r;return u.forEach((function(i){var u=pi.tooltip.format(i.label),e,o;i.confirmWithTextInput?t.push(n._createBulkDeleteButton(i,u)):(r||(r=f.computed(n.context.container,(function(){return n._selectedBrowseItems().length>0}))),e=new yi.MessageBox(i.confirmationTitle,i.confirmationMessage,4),o=new wt.DialogButton({name:"{0}.BulkCmd.{1}".format(n._resourceType,i.id),label:i.label,icon:i.icon,tooltip:u,dialogOptions:e,command:new nt.BulkCommandImpl(n.context.container,i,{resourceType:n._resourceType,hasSelectedItems:r,selectedBrowseItems:n._selectedBrowseItems,onCompleteCallback:function(){return Q()}})}),t.push(o))})),st.canDisplay(i)&&t.push(st.create(i,this._selectedBrowseItems)),t},n.prototype._createBulkDeleteButton=function(n,t){var i=this,r=new wt.OpenBladeButton2({label:n.label,icon:n.icon,tooltip:t,supplyBladeReference:function(){var r=[],u=i._selectedBrowseItems().length,t;return u<=g.MaxBatchDeleteResources&&(r=i._selectedBrowseItems().map((function(n){return{name:n.name,resourceId:n.id,resourceType:n.resourceType.toLowerCase(),assetType:n.resourceTypeDisplayName,icon:n.icon}}))),t=new w.BulkDeleteBladeReference({resources:r,commandDefinition:n,resourceType:i._resourceType,resourceInfoCount:u}),t.metadata?t.metadata.isContextBlade=!0:t.metadata={isContextBlade:!0},t}});return r.name=r.id="art-{0}.BulkCmd.{1}".format(this._resourceType,n.id),f.reactor(this.context.container,(function(){r.disabled(!(i._selectedBrowseItems().length>0))})),r},n.prototype.toggleRefinePanel=function(){var n=this.isRefineCollapsed();n?this.isRefineCollapsed(!1):this.isRefineCollapsed(!0)},n.prototype._updateUI=function(n,t,r,e){this.countMessage(a.Blade.totalRecords.format(n.totalRecords));this.context.container.statusBar({text:"",state:0});var s=n.data,o=i.convertArrayToMap(s.columns,(function(n){return n.name}),(function(n,t){return t})),h=this.showAllCheckBox.value(),c=o.id,l=o.name,v=o.type,y=o.kind,p=o.subscriptionId,w=o.location,b=o.resourceGroup,k=o.tags,g=s.rows.reduce((function(n,e){var a=e[c],g=e[v],nt=e[y],o=t[g.toString().toLowerCase().trim()],rt,ut;if(!o&&h&&(o={}),o){var tt=o.icon||yt.Polychromatic.ResourceDefault(),it=o.displayName||g,s=o.bladeDetails;nt&&(rt=function(n){tt=n.icon||tt;it=n.displayName||it;s=n.bladeDetails||s},ut=(o.kindMap||u.create(null))[nt],ut?rt(ut):o.defaultKind&&rt(o.defaultKind));s||(s={bladeName:"ResourceMenuBlade",extensionName:"HubsExtension"});var ft=e[p],et=e[w],ot={id:a,icon:tt,name:e[l],kind:nt,resourceTypeDisplayName:it,resourceType:g,locationDisplayName:r[et.toLowerCase()]||et,locationId:et,resourceGroup:e[b],resourceGroupId:ai.buildResourceGroupIdFromResourceId(a),subscriptionDisplayName:f.observable(ft),subscriptionId:ft,tags:f.observable(e[k]||u.create(null)),tagsArray:f.observable(null),tagsPillListViewModels:f.observable(u.create(null)),resourceBlade:{extension:s.extensionName,detailBlade:s.bladeName,detailBladeInputs:{id:a}}};i.tryImmediateResolve(d.getSubscription(ft),(function(n){ot.subscriptionDisplayName(n.displayName)}));n.push(ot)}return n}),[]);this._items(g);si(this.context.container,this._tagColumns(),this._items(),this._allTagsColumnEnabled());e&&this.facetsViewModel.updateFacetData(n.facets||[],r,t)},n.prototype._loadDataFromArt=function(n,t){var r=this,e;if(!this._allSubscriptions.length||this.gridViewModel.loading())return Q();var o=ti.start({source:"AllResources",action:"BrowseLoad"}),s=i.startTimer(),u={art:null,resourceTypes:null,locations:null,render:null},f=function(n,t){return n.then((function(n){return u[t]=s(),n}))};return this.gridViewModel.loading(!0),e=Q.spread([f(oi(n),"art"),f(gt(),"resourceTypes"),f(ei(),"locations"),],(function(f,e,s){var a=i.startTimer(),l=n.options.rowsToSkip===0,c,h;if(l){for(r.pageDropdown.value(1),c=[],h=1;h<=Math.ceil(f.totalRecords/50);h++)c.push({text:h.toString(),value:h});r._pages(c)}r._skipTokenObservable(f.skipToken);r._updateUI(f,e,s,l);u.render=a();ti.completeTrace(o,{durations:u,reason:t,pageSize:50,pageNumber:n.options.rowsToSkip/50+1,showHiddenTypes:r.showAllCheckBox.value(),totalRecords:f.totalRecords,columns:r._gridColumnIds,sortInfo:{id:r.sortByDropdown.value()}})}),(function(n){r.context.container.statusBar({text:n.jqXHR.responseText,state:3});ti.cancelTrace(o)})).finally((function(){r.gridViewModel.loading(!1)})),this.context.container.operations.add(e,{blockUi:!0,shieldType:1}),e},n})();ni=__decorate([e.Decorator({htmlTemplate:"../Templates/ArtBrowse.html",styleSheets:["../Styles/ArtBrowse.css"],shrinkOnOpenChildBlade:!0}),e.Pinnable.Decorator()],ni);t.ArtBrowseBlade=ni}));
define("HubsExtension/_generated/adapters/blade/ArtBrowseBladeAdapter",["require","exports","o","Fx/Composition/ViewModelAdapters","HubsExtension/ArtBrowse/ViewModels/ArtBrowseBlade"],(function(n,t,i,r,u){"use strict";i.defineProperty(t,"__esModule",{value:!0});var f=(function(n){function t(t,i,r){return n.call(this,t,i,r,u.ArtBrowseBlade)||this}return __extends(t,n),t})(r.ViewModelAdapter);t.ArtBrowseBladeAdapter=f}));
define("HubsExtension/_generated/Blades/ArtBrowse.css",["require","exports"],(function(){"use strict";return".ext-hubs-artbrowse-container{display:-webkit-flex;display:flex;-webkit-flex:1 1 auto;flex:1 1 auto;-webkit-flex-direction:row;flex-direction:row;height:100%;padding-left:10px;position:relative}.ext-hubs-artbrowse-filters{display:-webkit-flex;display:flex;flex-wrap:wrap;padding-right:20px;padding-top:20px}.ext-hubs-artbrowse-refine{-webkit-flex:0 0 auto;flex:0 0 auto;margin-top:12px;min-height:0;position:relative;width:275px}.ext-hubs-artbrowse-refine-title{font-size:15px}.ext-hubs-artbrowse-refine-icon{height:20px;width:20px;border:none;cursor:pointer;opacity:.7;transform:rotate(-90deg)}.ext-hubs-artbrowse-refine-iconrotate{margin-left:-3px;margin-top:5px;transform:rotate(90deg)}.ext-hubs-artbrowse-refine-section{display:-webkit-flex;display:flex;align-items:center}.ext-hubs-artbrowse-collapsedicon{padding-top:7px}.ext-hubs-artbrowse-refine-collapse{display:none}.ext-hubs-artbrowse-collapser{border-right:1px solid gray;margin-right:20px;padding-top:12px;width:30px}.ext-hubs-artbrowse-icon{height:15px;width:15px;padding-right:12px}.ext-hubs-artbrowse-accordion{height:calc(100vh - 270px);margin-top:12px;overflow-x:hidden;overflow-y:auto;width:300px}.ext-hubs-artbrowse-resources{display:-webkit-flex;display:flex;-webkit-flex:1 1 auto;flex:1 1 auto;-webkit-flex-direction:column;flex-direction:column;position:relative;width:585px}.ext-hubs-artbrowse-groupBy{-webkit-flex:1 1 20%;flex:1 1 20%}.ext-hubs-artbrowse-countsection{display:flex}.ext-hubs-artbrowse-count{-webkit-flex:0 0 auto;flex:0 0 auto;margin-top:5px;padding-right:20px}.ext-hubs-artbrowse-showall{margin-top:5px}.ext-hubs-artbrowse-grid{bottom:0;left:0;right:0;top:0}.ext-hubs-artbrowse-facets{list-style:none;margin-bottom:0;margin-left:-37px;margin-top:-15px;padding:0}.ext-hubs-artbrowse-facetclear{float:right;height:15px;position:absolute;right:10px;top:8px;width:15px}.ext-hubs-artbrowse-facet-item{display:-webkit-flex;display:flex;height:22px;padding:5px 0 0 3px}.ext-mode-light .ext-hubs-artbrowse-facet-item-selected{background-color:#e5f8fd}.ext-mode-dark .ext-hubs-artbrowse-facet-item-selected{background-color:#131313}.ext-hubs-artbrowse-facetvalue-checkbox{max-width:220px;min-width:0;overflow:hidden;padding-right:5px;text-overflow:ellipsis;white-space:nowrap}.ext-hubs-artbrowse-facet-dropdown{margin-left:-37px;margin-top:10px}.ext-hubs-artbrowse-resourcefilter{flex:1 1 0;margin-top:-4px}.ext-hubs-artbrowse-sortby{margin-right:10px;margin-top:-20px;width:200px}.ext-hubs-artbrowse-pager{margin-top:-20px;width:80px}.ext-hubs-artbrowse-applypanel{bottom:0;box-shadow:0 0 14px 0 rgba(128,128,128,.5);display:flex;height:65px;left:0;margin-left:-10px;position:absolute;right:0;width:315px}.ext-hubs-artbrowse-button{margin-left:25px;margin-top:20px;width:120px}.ext-hubs-artbrowse-pagecontainer{display:flex}.ext-hubs-artbrowse-prevbutton{margin-right:10px;margin-top:-5px}.ext-hubs-artbrowse-nextbutton{margin-left:10px;margin-top:-5px}.ext-hubs-artbrowse-infobox{margin:10px 20px 0 0}"}));
define("HubsExtension/_generated/Blades/ArtBrowseBlade",["require","exports","o","HubsExtension/_generated/Blades/ArtBrowse.css","HubsExtension/_generated/adapters/blade/ArtBrowseBladeAdapter"],(function(n,t,i,r){"use strict";i.defineProperty(t,"__esModule",{value:!0});t.blade={name:"ArtBrowseBlade",entryPoint:{module:"HubsExtension/_generated/adapters/blade/ArtBrowseBladeAdapter","export":"ArtBrowseBladeAdapter"},inputs:["resourceType"],viewModelName:"ArtBrowse$ArtBrowseBladeAdapter",lenses:[],pinnable:!0,initialDisplayState:2,style:8,toolbar:{source:{valuesFrom:[{referenceType:0,property:"content.commandBar"}]}},templateBlade:{partSize:9,htmlTemplateInline:{file:"ArtBrowse.html",content:'<div class="ext-hubs-artbrowse-container"> <div class="ext-hubs-artbrowse-refine msportalfx-hideonactivated" data-bind="css: {\'ext-hubs-artbrowse-refine-collapse\' : isRefineCollapsed()}"> <div class="ext-hubs-artbrowse-refine-section"> <div class="ext-hubs-artbrowse-icon" data-bind="image: filterImage"><\/div> <div class="ext-hubs-artbrowse-refine-title" data-bind="text: refineText"><\/div> <\/div> <div class="ext-hubs-artbrowse-accordion"> <div data-bind="pcControl: facetsViewModel.accordionViewModel"><\/div> <\/div> <div class="ext-hubs-artbrowse-applypanel"> <div class="ext-hubs-artbrowse-button" data-bind="pcControl: facetsViewModel.applyButton"><\/div> <div class="ext-hubs-artbrowse-button" data-bind="pcControl: facetsViewModel.clearAllButton, visible: facetsViewModel.clearAllVisible"><\/div> <\/div> <\/div> <div class="ext-hubs-artbrowse-collapser msportalfx-hideonactivated"> <!-- ko if: isRefineCollapsed --> <div class="ext-hubs-artbrowse-icon ext-hubs-artbrowse-collapsedicon" data-bind="image: filterImage"><\/div> <!-- /ko --> <button class="ext-hubs-artbrowse-refine-icon" aria-expanded="true" data-bind="image: chevronImage, click: toggleRefinePanel,  css: {\'ext-hubs-artbrowse-refine-iconrotate\': isRefineCollapsed()}"><\/button> <\/div> <div class="ext-hubs-artbrowse-resources"> <div class="ext-hubs-artbrowse-infobox" data-bind="pcControl: infoBox"><\/div> <div class="ext-hubs-artbrowse-filters"> <div class="ext-hubs-artbrowse-resourcefilter" data-bind="pcControl: resourceFilterText"><\/div> <div class="ext-hubs-artbrowse-sortby msportalfx-hideonactivated" data-bind="pcControl: sortByDropdown"><\/div> <div class="ext-hubs-artbrowse-pagecontainer"> <div class="ext-hubs-artbrowse-prevbutton msportalfx-hideonactivated" data-bind="pcControl: previousButton"><\/div> <div class="ext-hubs-artbrowse-pager" data-bind="pcControl: pageDropdown"><\/div> <div class="ext-hubs-artbrowse-nextbutton msportalfx-hideonactivated" data-bind="pcControl: nextButton"><\/div> <\/div> <\/div> <div class="ext-hubs-artbrowse-countsection msportalfx-hideonactivated"> <div class="ext-hubs-artbrowse-count" data-bind="text: countMessage"><\/div> <div class="ext-hubs-artbrowse-showall" data-bind="pcControl: showAllCheckBox"><\/div> <\/div> <div class="ext-hubs-artbrowse-grid" data-bind="pcControl: gridViewModel"><\/div> <\/div> <\/div>'},styleSheets:[{file:"Blades/ArtBrowse.css",content:r}],isV2:!0},activationStyle:{width:0},attributes:1,hasOnPinMethod:!0}}))