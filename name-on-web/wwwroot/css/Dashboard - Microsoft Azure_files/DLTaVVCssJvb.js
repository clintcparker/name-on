define("HubsExtension/MoveResource/MoveResourceCommon",["require","exports","f","o"],(function(n,t,i,r){"use strict";function a(n,t){var i=n.split("/")[0];return s[i]===f||s[i]===t}function v(n){var t=o.parseResourceDescriptor(n).provider;return!!(["Microsoft.ClassicCompute","Microsoft.ClassicStorage","Microsoft.ClassicNetwork"].filter((function(n){return n===t})).length>0)}function y(n,i){return t.resourceTypeCachePromise=Q(n.getResourceTypeCache(i)).then((function(n){t.resourceTypeCache=n})),t.resourceTypeCachePromise}function p(n,i){var r=n.toLowerCase(),v=u[r],y=t.excludedResourceTypes[r],e,o;if(a(r,i))return!0;if(y===i||y===f)return!1;if(v===i||v===f)return!0;var p=t.resourceTypeCache[r],w=p&&p.capabilities,s=w&&w.split(",");if(!s)return u[r]=4,!1;if(e=s.some((function(n){return n.trim().toLowerCase()===h})),o=s.some((function(n){return n.trim().toLowerCase()===c})),e&&o)return u[r]=f,!0;switch(i){case 1:if(e)return u[r]=l,!0;break;case 0:if(o)return u[r]=0,!0;break;case 3:if(e&&o)return u[r]=f,!0}return u[r]=4,!1}var o,e,u,w;r.defineProperty(t,"__esModule",{value:!0});o=i.ViewModels.Services.ResourceTypes;e="microsoft.resources/subscriptions/resourcegroups/";t.excludedResourceTypes={};var h="CrossResourceGroupResourceMove".toLowerCase(),c="CrossSubscriptionResourceMove".toLowerCase(),l=1,f=3,s={"microsoft.classiccompute":f,"microsoft.classicstorage":f,"microsoft.classicnetwork":0};t.resourceTypeCache={};u={};t.isClassicResource=v;t.initializeResourceTypeCache=y;t.supportsMoveType=p,(function(n){n.MoveResourcesAction=e+"moveresources/action";n.ValidateMoveResourceAction=e+"validatemoveresources/action";n.MoveResourcesToSubscriptionAction="microsoft.classiccompute/movesubscriptionresources/action";n.ValidateSubscriptionMoveAvailabilityAction="microsoft.classiccompute/validatesubscriptionmoveavailability/action"})(w=t.Actions||(t.Actions={}))}));
define("HubsExtension/ResourceMap/ResourceTypeCache",["require","exports","o","HubsExtension/ArmHelpers/ArmApis","HubsExtension/ArmHelpers/ArmApisStartup"],(function(n,t,i,r,u){"use strict";function h(n){var t=u.makeResourceManagerTelemetry("ResourceTypesCache.get");return Q(f(n,t)).then((function(n){var t={};return n&&n.forEach((function(n){var i=n;i.resourceTypes&&i.resourceTypes.forEach((function(n){var r={resourceType:(i.namespace+"/"+n.resourceType).toLowerCase(),capabilities:n.capabilities};t[r.resourceType]=r}))})),t}))}function c(n){var i=n||"",t=e[i],u;return t||(u=r.listResourceProvidersWithMetadataApi(n),t=h(u),e[i]=t),t}function f(n,t,i){return i===void 0&&(i=0),s(n,"GET",null,t).then((function(n){var i=(n||{}).value;return i?n.nextLink&&i.length<100?f(n.nextLink,t).then((function(n){return i.concat(n)})):i:n?n:void 0})).catch((function(r){var u=r&&r.jqXHR||r;return u&&u.status>=500&&i<2?Q.delay(500).then((function(){return f(n,t,i+1)})):Q.reject(u)}))}i.defineProperty(t,"__esModule",{value:!0});var o=window,s=o.HubsExtensionBrowseMockAjax||function(n,t,i,r){return u.call(n,t,i,r)},e={};t.getResourceTypeCache=c}));
define("HubsExtension/ResourceMap/ViewModels/ResourceProviderViewModel",["require","exports","o","HubsExtension/Common/CommonErrorHandling","HubsExtension/ResourceMap/ResourceMapCommon","HubsExtension/ResourceMap/ResourceTypeCache","HubsExtension/ResourceMap/ViewModels/ResourceProviderHelpers"],(function(n,t,i,r,u,f,e){"use strict";function s(n){if(r.isExpectedArmError(n,!0))return{error:n};throw n;}function o(n){return n().then((function(n){return{result:n}})).catch((function(n){return s(n)}))}i.defineProperty(t,"__esModule",{value:!0});var h=(function(){function n(){}return n.prototype.getResourceGroupResults=function(n,t){return e.getResourceGroupResults(n,t)},n.prototype.getResourceResults=function(n,t){return e.getResourceResults(n,t)},n.prototype.getResourceGroup=function(n,t,i){return o((function(){return u.ResourceGroupClient.getResourceGroupWithStrings(n,t,i)}))},n.prototype.getResource=function(n,t,i){return o((function(){return u.ResourceClient.getResourceWithStrings(n,t,i)}))},n.prototype.getExtensionResource=function(n,t,i){return o((function(){return u.ResourceClient.getExtensionResourceWithStrings(n,t,i)}))},n.prototype.deleteResourceGroup=function(n){return u.ResourceGroupClient.deleteResourceGroup(n)},n.prototype.getOperationResponse=function(n){return u.ResourceManagerOperationsClient.getOperationResponse(n)},n.prototype.getResourceTypeCache=function(n){return f.getResourceTypeCache(n)},n})();t.ResourceProviderViewModel=h}));
define("HubsExtension/MoveResource/ViewModels/MoveResourceBlade",["require","exports","f","i","o","a","ko","Fx/Controls/DropDown","HubsExtension/MoveResource/MoveResourceStrings","HubsExtension/ResourceMap/ResourceMapClientStrings","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/ArmHelpers/Models/ArmResourceGroup","HubsExtension/Common/HubsObservables","HubsExtension/HubsCommon","HubsExtension/ResourceMap/ResourceMapCommon","HubsExtension/ResourceMap/ViewModels/ResourceProviderViewModel","HubsExtension/Store/DeploymentManagerV2","HubsExtension/MoveResource/MoveResourceCommon","HubsExtension/Common/AssetTypeCache"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){"use strict";function lt(n){var t=g.parseResourceDescriptor(n);return t.types.length===1}function ri(n){var t=n&&n.provisioningState;return t&&t.toLowerCase()!==bt.ResourceManager.DeploymentStates.Succeeded}function ui(n,t){var r=n.filter((function(n){return lt(n.id)})),u=t.filter((function(n){return n.selected()&&lt(n.id)}));return i.union(r,u).map((function(n){return n.id}))}function nt(n,t,r){var u=r?at.StatusBadge.Error():dt,f="<a>{0}<\/a>".format(i.encodeHtml(s.moveDocLabel));return new ft.LinkViewModel(n,{image:e.observable(u),text:e.observable("<div>"+i.encodeHtml(t)+"<\/div> "+f),clickableLink:e.observable(d.Part.createClickableLinkViewModel(e.observable(i.getEnvironmentValue("hubsLinks").moveResourcesDoc)))})}var wt;u.defineProperty(t,"__esModule",{value:!0});var bt=i.Azure,it=i.Base,at=it.Images,ut=at.Polychromatic,d=i.ViewModels,kt=d.ActionBars,ft=d.Controls.InfoBox,vt=d.Controls.DockedBalloon,et=d.Controls.Lists.Grid,ot=et.Format,st=et.ViewModel,g=d.Services.ResourceTypes,yt=d.Forms,ht=s.Move,rt=s.ClassicMove,fi=ht.NotSupported.insufficientPermissions,pt=h.EmptyResourceGroup.Form,dt=ut.Info(),gt=it.Diagnostics.createLog(n),ni=i.memoizeQ((function(){return k.getAssetTypesInformation().then((function(n){var t=n();return i.extendArrayIntoMap({},t,(function(n){return(n.resourceType||"").toLowerCase()}),i.identity)}))})),ct="<div class='ext-hubs-moveresource-item'><div class='ext-hubs-moveresource-itemicon' data-bind='image: settings.item.icon'><\/div><div><div data-bind='text: settings.item.name' class='msportalfx-text-regular msportalfx-text-ellipsis msportalfx-tooltip-overflow'><\/div><\/div><div><div class='msportalfx-text-regular msportalfx-text-muted-50 msportalfx-text-ellipsis msportalfx-tooltip-overflow' data-bind='text: settings.item.type'><\/div><\/div><\/div>";t.maxMovableResourceCount=250;var ti=1,ii=3,tt="MoveResource.";wt=(function(){function n(n,t,u){var f=this,b,l,a,k,g,h;this.infoBox=e.observable(null);this.showResourcesToMoveHeader=e.observable(!0);this.resourcesToMoveHeaderText=e.observable(s.resourcesToMoveHeaderText);this.resourcesToMoveGrid=e.observable(null);this.showRelatedResourcesHeader=e.observable(!1);this.disabledResourcesHeaderText=ht.disabledResources;this.relatedResourcesHeaderText=e.observable(s.relatedResourcesHeaderText);this.infoBalloonViewModel=e.observable(null);this.relatedResourcesGrid=e.observable(null);this.disabledResourcesGrid=e.observable(null);this.moveToHeaderText=e.observable(s.moveToHeaderText);this.hideMoveToSection=e.observable(!1);this.actionBarOutput=e.observable();this.showResourceGroupDropDown=e.observable(!0);this.allowRGMove=e.observable(!0);this.allowSubMove=e.observable(!0);this.isClassicSubscriptionMove=e.observable(!1);this.createNewPickExistingLabel=e.observable(s.createNewResourceGroup);this.hasOtherResourceGroups=e.observable(!0);this.validationErrorDetails=e.observable("");this.title=e.observable(s.bladeTitle);this.subtitle=e.observable("");this.icon=e.observable(null);this.switchCreateAndPickResourceGroup=function(){f.showResourceGroupDropDown(!f.showResourceGroupDropDown());f.showResourceGroupDropDown()?f.createNewPickExistingLabel(s.createNewResourceGroup):f.createNewPickExistingLabel(s.pickExistingResourceGroup)};this._relatedResources=e.observableArray([]);this._requiredResources=e.observableArray([]);this._disabledResources=e.observableArray([]);this._resourceGroupsArray=e.observableArray([]);this._subscriptionsArray=e.observableArray([]);this._resourceGroupId="";this._isResourceGroupMove=!1;this._hasAccessToMultipleSubs=!1;this._container=n;this._dataContext=u;b=t&&t.content||{};l=b.errorPaneSelectable||{};this.errorPaneSelectable=new d.Selectable({allowUnselect:!1,selectedValue:l.selectedValue,isSelected:l.isSelected,isActivated:l.isActivated});n.registerForDispose(this.errorPaneSelectable);n.registerSelectable(n.createChildLifetime(),i.newGuid(),this.errorPaneSelectable,{openInContextPane:!0});this.subscriptionDropdown=o.create(n,{label:e.observable(s.subscriptionLabel),filter:!0,suppressDirtyBehavior:!0,items:this._subscriptionsArray,validations:e.observableArray([new d.RequiredValidation(s.subscriptionRequiredValidationMessage),new d.CustomValidation(s.subscriptionDisabledValidationMessage,function(n){var t=n&&n.state.toLowerCase()!==v.subscriptionDisabledStatus;return Q({message:s.subscriptionDisabledValidationMessage,valid:t})}),])});a=!1;this.resourceGroupDropdown=o.create(n,{label:e.observable(s.resourceGroupLabel),filter:!0,suppressDirtyBehavior:!0,items:this._resourceGroupsArray,validations:e.observableArray([new d.RequiredValidation,new d.CustomValidation(s.resourceGroupBusyValidationMessage,function(n){var t=!ri(n);return Q({message:s.resourceGroupBusyValidationMessage,valid:t})}),new d.CustomValidation(s.resourceGroupPermissionsValidationMessage,function(n){return n?Q(r.Security.hasPermission(n.id,["microsoft.resources/subscriptions/resourcegroups/write"])).then((function(n){return{message:s.resourceGroupPermissionsValidationMessage,valid:n}}),(function(){return{message:s.resourceGroupPermissionsValidationMessage,valid:!0}})):i.ViewModels.getValidationResultPromise()}),])});this.resourceGroupDropdown.isPopUpOpen.subscribe(n,(function(n){var t,i;n&&!a&&(t=void 0,!f.allowSubMove()&&f.allowRGMove()?t=f._subscriptionId:(i=f.subscriptionDropdown.value(),t=i&&i.subscriptionId),t&&(f._populateResourceGroupsArray(t,f._resourceGroupsArray),a=!0))}));this.subscriptionDropdown.value.subscribe(n,(function(){f._resourceGroupsArray([]);a=!1}));k={label:e.observable(s.resourceGroupLabel),validations:e.observableArray([new d.RequiredValidation(pt.resourceGroupTextBoxEmptyValue),new d.CustomValidation(pt.resourceGroupTextBoxEmptyValue,function(n){var t=f.allowSubMove()?f.subscriptionDropdown.value():f._subscription;return n&&y.validateResourceGroupName(n,t)}),])};this.newResourceGroupTextBox=new yt.TextBox.ViewModel(n,k);g={inlineLabel:!0,label:e.observable(s.confirmResourceMove),infoBalloonContent:e.observable(s.confirmMoveInfoBalloonLabel),infoBalloonLinkContent:e.observable(new d.Controls.Balloon.Link(s.moveDocLabel,i.getEnvironmentValue("hubsLinks").moveResourcesDoc)),defaultValue:e.observable(!1)};this.confirmationCheckBox=new yt.CheckBox.ViewModel(n,g);h=this.actionBar=new kt.GenericActionBar.ViewModel(this._container);h.infoBoxSelectable=this.errorPaneSelectable;h.enableErrorInfoBox(!0);h.actionButtonLabel(s.actionBarText);h.groupValidation={validate:function(){var t;if(f.hideMoveToSection())return f.actionBarOutput(!0),f._container.closeCurrentBlade(),i.ViewModels.getValidationResultPromise();var h=f._resourceGroupId,n,r=ui(f._requiredResources(),f._relatedResources()),u=function(){return f.isClassicSubscriptionMove()?(f._moveResourcesToSubscription(),f._container.closeCurrentBlade(),i.ViewModels.getValidationResultPromise()):f._dataContext.validateMoveResources(h,n,r).then((function(t){return f._moveResources(n,r),f._container.closeCurrentBlade(),t}),(function(n){return{valid:!1,message:s.validationFailedMsg,blade:{extension:it.Constants.ExtensionNames.Hubs,detailBlade:"ArmErrorsBlade",detailBladeInputs:{errors:n},openInContextPane:!0}}}))};if(f.showResourceGroupDropDown())return t=f.resourceGroupDropdown.value(),n=t&&t.id,u();var l=f.allowSubMove()?f.subscriptionDropdown.value().subscriptionId:f._subscriptionId,e=f.newResourceGroupTextBox.value(),o=c.makeResourceManagerTelemetry(tt+"createRG");return y.ResourceGroupClient.getResourceGroup(f._resourceGroupId,o).then((function(t){return w.createResourceGroup(l,e,t.location,o).then((function(t){var i=t&&t.properties&&t.properties.provisioningState&&t.properties.provisioningState.toLowerCase();return i==="succeeded"?(n=t.id,u()):Q({valid:!1,message:s.rgCreateFailureMsg.format(e)})}))})).catch((function(n){if(n.status===404||n.status===0||n.status===403)return Q({valid:!1,message:s.resourceGroupPermissionsValidationMessage});gt.error("Failed to create a new resource group".format(n.message))}))}};e.reactor(this._container,(function(){var i=f.subscriptionDropdown.valid(),n,t;n=f.showResourceGroupDropDown()?f.resourceGroupDropdown.valid():f.newResourceGroupTextBox.valid();t=f.confirmationCheckBox.value();e.ignoreDependencies((function(){h.valid(i&&n&&t)}))}));this.hideMoveToSection(!0);this._resourceProvider=new p.ResourceProviderViewModel(this._container,null,null)}return n.prototype.onInputsSet=function(n){var t=this,u,o,r;if(this._resourceGroupsArray([]),this._subscriptionsArray([]),this._relatedResources([]),this._requiredResources([]),this._disabledResources([]),this.showResourcesToMoveHeader(!1),this.infoBox(null),this.actionBar.clearGroupValidationMessage(),this._container.revealContent(),n.moveType!==undefined&&(this._moveType=n.moveType,u=n.moveType===ii,this.allowSubMove(u||n.moveType===0),this.allowRGMove(u||n.moveType===ti)),n.resourceId){var i=this._resourceId=n.resourceId,e="",f="";return g.isResourceGroupId(i)?(this._resourceGroupId=i,this._isResourceGroupMove=!0,e=it.Constants.ResourceTypes.ResourceGroups,f=g.buildSubscriptionIdFromResourceGroupId(this._resourceGroupId)):(e=g.buildResourceTypeFromResourceId(i),o=b.isClassicResource(i),r=g.parseResourceDescriptor(i),f=g.buildSubscriptionIdFromResourceDescriptor(r),this.isClassicSubscriptionMove(o&&this.allowSubMove()),this._topmostParentResourceId=g.buildTopmostParentResourceIdFromDescriptor(r),this._resourceGroupId=g.buildResourceGroupIdFromResourceDescriptor(r)),this._subscriptionId=g.parseSubscriptionDescriptor(f).subscription,a.getSubscription(this._subscriptionId).then((function(n){t._subscription=n;b.initializeResourceTypeCache(t._resourceProvider,t._subscriptionId);var i=t.isClassicSubscriptionMove()?t._checkClassicSubMovePreConditions():t._checkMovePreConditions();return i.then((function(n){if(n)return t._arrangeResourcesToMoveSection()}))}))}return},n.prototype._checkMovePreConditions=function(){return this._subscription.state.toLowerCase()===v.subscriptionDisabledStatus?(this._setBladeToMoveNotAllowed(s.movingResourcesFromDisabledSubscriptionNotAllowed),Q(!1)):Q(!0)},n.prototype._checkClassicSubMovePreConditions=function(){var n=this,t=g.buildSubscriptionIdFromSubscriptionName(this._subscriptionId);return this._dataContext.validateSubscriptionMoveAvailability(t,"source").then((function(t){return t&&t.status.toLowerCase()==="unavailable"?(n._setBladeToMoveNotAllowed(rt.sourceSubNotAvailable),n.validationErrorDetails((t.reasons||[]).join()),!1):!0}))},n.prototype._getResourcesForMove=function(){return this._isResourceGroupMove?this._getResourcesForResourceGroupMove(this._resourceId):this._getResourcesForResourceMove(this._topmostParentResourceId)},n.prototype._setBladeToMoveNotAllowed=function(n){this.showRelatedResourcesHeader(!1);this.hideMoveToSection(!0);this.infoBox(nt(this._container,n,!0))},n.prototype._arrangeResourcesToMoveSection=function(){var n=this;return Q.spread([b.resourceTypeCachePromise,ni()],(function(t,i){return(n._assetTypes=i,!n.allowSubMove()&&n.allowRGMove())?n._getResourcesForMove():n.allowSubMove()?n._populateSubscriptionsArray(n._subscriptionsArray).then((function(){if(n._hasAccessToMultipleSubs){if(n.isClassicSubscriptionMove()){n.allowRGMove(!1);var t=new d.CustomValidation(rt.targetSubNotAvailable,function(t){return n._dataContext.validateSubscriptionMoveAvailability("/subscriptions/"+t.subscriptionId,"target").then((function(n){return Q({message:(n.reasons||[]).join(),valid:n.status&&n.status.toLowerCase()==="available"})}))});return n.subscriptionDropdown.validations.push(t),n._getResourcesForClassicSubscriptionMove(n._resourceId)}return n._getResourcesForMove()}})):void 0}))},n.prototype._populateResourceGroupsArray=function(n,t){var i=this,f=c.resourceGroupsInSubscriptionApi(n),r=[],o=this._resourceGroupId.toLowerCase(),u;this._resourceGroupsArray([{text:e.observable("Loading..."),value:null,disabled:e.observable(!0)}]);u=c.makeResourceManagerTelemetry(tt+"resourceGroupsArray");c.callWithContinuation([f],(function(n){var t=n.map(l.toResourceGroup).filter((function(n){return!!n}));r=r.concat(t)}),(function(n){throw n;}),u).then((function(){i._resourceGroupsArray([]);r&&r.length&&(r.forEach((function(n){n.id.toLowerCase()!==o&&t.peek().push({text:e.observable(n.name),value:n})})),t.valueHasMutated());t().length?(i.showResourceGroupDropDown(!0),i.hasOtherResourceGroups(!0)):(i.showResourceGroupDropDown(!1),i.hasOtherResourceGroups(!1))}))},n.prototype._populateSubscriptionsArray=function(n){var t=this;return Q(i.Azure.getAllSubscriptions()).then((function(r){var f,o,u;r&&r.length&&(f=t.allowRGMove(),o=t._subscriptionId.toLowerCase(),r.forEach((function(t){(f||t.subscriptionId.toLowerCase()!==o)&&n.peek().push({text:e.observable(t.uniqueDisplayName),value:t})})),n.valueHasMutated());n().length?t._hasAccessToMultipleSubs=!0:(t.hideMoveToSection(!0),u=void 0,i.getEnvironmentValue("hubsLinks").createNewSubscription?u=new ft.LinkViewModel(t._container,{image:e.observable(ut.ErrorIcon()),text:e.observable(s.noSubscriptionsInfoBoxMessage),clickableLink:e.observable(d.Part.createClickableLinkViewModel(e.observable(i.getEnvironmentValue("hubsLinks").createNewSubscription)))}):(u=new ft.ViewModel(t._container,!1),u.image=e.observable(ut.ErrorIcon()),u.text=e.observable(s.noSubscriptionsInfoBoxMessage)),t.infoBox(u))}))},n.prototype._moveResources=function(n,t){var i=this;return this._dataContext.moveResources(this._resourceGroupId,n,t).then((function(){i.actionBarOutput(!0)}))},n.prototype._moveResourcesToSubscription=function(){var i=this,r=this._subscriptionId,n,t=[];return this._requiredResources().forEach((function(n){var i=n.id;lt(i)&&t.push(i)})),n=this.allowSubMove()?this.subscriptionDropdown.value().subscriptionId:this._subscriptionId,n=n,this._dataContext.moveResourcesToSubscription(r,n,t).then((function(){i.actionBarOutput(!0)}))},n.prototype._getResourcesForResourceGroupMove=function(n){var t=this,i=c.makeResourceManagerTelemetry(tt+"resourcesForGroupMove");return this._resourceProvider.getResourceGroupResults(n,i).then((function(i){var r=i.result,u=r&&r.resourcesInResourceGroup||[];u.length?t._populateResources(n,u,[],[]):t.infoBox(nt(t._container,s.noResourcesMessage,!1))}))},n.prototype._getResourcesForResourceMove=function(n){var t=this,i=c.makeResourceManagerTelemetry(tt+"resourcesForMove");return this._resourceProvider.getResourceResults(n,i).then((function(i){var r=i.result,u=r&&r.resourcesInResourceGroup||[],f=r&&r.resourcesLinkedFromResource||[],e=r&&r.resourcesLinkedToResource||[];u.length?t._populateResources(n,u,f,e):t.infoBox(nt(t._container,s.noResourcesMessage,!1))}))},n.prototype._getResourcesForClassicSubscriptionMove=function(n){var t=this,i=g.parseResourceDescriptor(n).subscription,r=c.makeResourceManagerTelemetry(tt+"resourcesForSubMove");return Q(y.ResourceClient.getClassicResourcesInSubscription(i,r)).then((function(i){i&&i.length?t._populateResources(n,i,[],[]):t.infoBox(nt(t._container,s.noResourcesMessage,!1))}))},n.prototype._populateResources=function(n,r,u){var h=this,v=this._container,f="",o=[],c=[],l=[],y=!1,p=n.toLowerCase(),k=p+"/",w,a;r.forEach((function(t){var w=t.type.toLowerCase(),s=h._assetTypes[w]||{},d=i.Base.Images.Polychromatic.ResourceDefault(),nt=w,tt;s.assetType&&(d=s.icon,nt=s.compositeDisplayName.singular);var r={id:t.id,name:t.name,icon:d,type:nt,selected:e.observable(!1)},a=b.isClassicResource(t.id),it=h.allowSubMove(),v=t.id.toLowerCase(),ut=h._moveType;if(b.supportsMoveType(t.type,ut))if(g.isResourceGroupId(n))a?(y=!0,r.selected(!1),l.push(r)):(r.selected(!0),o.push(r));else if(h.isClassicSubscriptionMove())f=ht.cannotMoveWithClassicRes,a&&(r.selected(!0),c.push(r));else{if(it&&a){f=rt.cannotMoveWithNonClassicRes;return}v===p||v.startsWith(k)?(r.selected(!0),c.push(r)):(u&&u.length&&(tt=u.first((function(n){return g.compareResourceId(n,v)})),tt&&r.selected(!0)),o.push(r))}else l.push(r)}));c.length?(this._requiredResources(c),this._initializeRequiredResourcesGrid(),this.showResourcesToMoveHeader(!0),this.hideMoveToSection(!1)):o.length&&this.hideMoveToSection(!1);o.length&&(this._relatedResources(o),this.hideMoveToSection(!1),this._isResourceGroupMove||this.showRelatedResourcesHeader(!0),this.showResourcesToMoveHeader(!0),this._initializeRelatedResourcesGrid());l.length&&(this._disabledResources(l),this._initializeDisabledResourcesGrid());y&&!this.infoBox()&&this.infoBox(nt(v,rt.cannotMoveWithNonClassicRes,!1));(this._requiredResources().length>1||f)&&!this.infoBox()&&(w=f.length?f:s.requiredResourcesInfoBoxMessage,this.infoBox(nt(v,w,!1)));this._relatedResources().length>t.maxMovableResourceCount&&(a=new vt.ViewModel(v),a.type=vt.Type.Info,a.content(s.selectMaxResourcesInResourceGroup.format(t.maxMovableResourceCount)),this.infoBalloonViewModel(a))},n.prototype._initializeRequiredResourcesGrid=function(){var t=[{name:e.observable(""),itemKey:"name",format:ot.HtmlBindings,formatOptions:{htmlBindingsTemplate:ct}},],n=new st(this._container,this._requiredResources);n.columns=e.observableArray(t);n.showHeader=!1;this.resourcesToMoveGrid(n)},n.prototype._initializeRelatedResourcesGrid=function(){var t=[{name:e.observable(s.selectAll),itemKey:"name",format:ot.HtmlBindings,formatOptions:{htmlBindingsTemplate:ct}},],n=new st(this._container,this._relatedResources,et.Extensions.SelectableRow,{selectableRow:{selectionMode:2}});n.columns=e.observableArray(t);n.showHeader=!0;this.relatedResourcesGrid(n);this._relatedResources().forEach((function(t){if(t.selected()){var i=n.getRowMetadata(t);i.selected(!0)}}));this.relatedResourcesGrid().selectableData.selectedItems.subscribeArrayEdits(this._container,(function(n){n.forEach((function(n){var t=n.status,i=n.value;t==="added"?i.selected(!0):t==="deleted"&&i.selected(!1)}))}))},n.prototype._initializeDisabledResourcesGrid=function(){var t=[{name:e.observable(""),itemKey:"name",format:ot.HtmlBindings,formatOptions:{htmlBindingsTemplate:ct}},],n=new st(this._container,this._disabledResources);n.columns=e.observableArray(t);n.showHeader=!1;this.disabledResourcesGrid(n)},n})();t.MoveResourceBlade=wt}));
define("HubsExtension/_generated/Blades/MoveResource.css",["require","exports"],(function(){"use strict";return".ext-hubs-moveresource-resourcesection{flex:1 1 auto;overflow:auto}.ext-hubs-moveresource-optionalheader{float:left;margin-right:5px;margin-top:5px;max-width:280px}.ext-hubs-moveresource-movetosection{bottom:0;width:100%}.ext-relatedresourcegrid{float:left}.ext-hubs-moveresource-movetosection-confirmationCheckBox{margin-top:20px}.ext-hubs-moveresource-movetosection-header{margin-bottom:10px;padding-top:10px;border-top:1px #e9e9f3 solid}.ext-hubs-moveresource-movetosection-createrglink{float:right}.ext-hubs-moveresource-errormsg{text-overflow:ellipsis;width:250px;word-wrap:break-word}.ext-hubs-moveresource-container{display:flex;display:-ms-flexbox;flex-direction:column;height:100%}.ext-hubs-moveresource-item{margin-top:5px}.ext-hubs-moveresource-itemicon{width:30px;height:30px;float:left;margin-right:10px;margin-top:5px}"}));
define("HubsExtension/_generated/Blades/MoveResourceBlade",["require","exports","o","HubsExtension/_generated/Blades/MoveResource.css","HubsExtension/MoveResource/ViewModels/MoveResourceBlade"],(function(n,t,i,r){"use strict";i.defineProperty(t,"__esModule",{value:!0});t.blade={name:"MoveResourceBlade",entryPoint:{module:"HubsExtension/MoveResource/ViewModels/MoveResourceBlade","export":"MoveResourceBlade"},inputs:["resourceId","moveType"],templateKeyInputs:["resourceId"],outputs:["actionBarOutput"],viewModelName:"MoveResource$MoveResourceBlade",lenses:[],width:1,initialDisplayState:2,actionBar:{name:"",actionBarKind:6,bindings:[]},templateBlade:{partSize:9,htmlTemplateInline:{file:"MoveResourceBlade.html",content:'<div class="ext-hubs-moveresource-container"> <div class="ext-hubs-moveresource-resourcesection"> <!-- ko if: infoBox() --> <div data-bind="pcControl: infoBox"><\/div> <!-- /ko --> <!-- ko if: validationErrorDetails() --> <div class="ext-hubs-moveresource-errormsg" data-bind="text: validationErrorDetails, attr: { title: validationErrorDetails }"><\/div> <!-- /ko --> <!-- ko if: showResourcesToMoveHeader() --> <div class="msportalfx-text-header-regular msportalfx-text-ellipsis msportalfx-tooltip-overflow" data-bind="text: resourcesToMoveHeaderText"><\/div> <!-- /ko --> <!-- ko if: resourcesToMoveGrid() --> <div class="msportalfx-grid-borderless" data-bind="pcControl: resourcesToMoveGrid"><\/div> <!-- /ko --> <!-- ko if: showRelatedResourcesHeader() --> <div> <div class="msportalfx-text-regular msportalfx-text-muted-50 msportalfx-text-ellipsis msportalfx-tooltip-overflow ext-hubs-moveresource-optionalheader" data-bind="text: relatedResourcesHeaderText"><\/div> <!-- ko if: infoBalloonViewModel() --> <div data-bind="pcControl: infoBalloonViewModel"><\/div> <!-- /ko --> <\/div> <!-- /ko --> <!-- ko if: relatedResourcesGrid() --> <div class="msportalfx-grid-borderless ext-relatedresourcegrid" data-bind="pcControl: relatedResourcesGrid"><\/div> <!-- /ko --> <!-- ko if: disabledResourcesGrid() --> <div class="msportalfx-text-regular msportalfx-text-muted-50 msportalfx-text-ellipsis msportalfx-tooltip-overflow ext-hubs-moveresource-optionalheader" data-bind="text: disabledResourcesHeaderText"><\/div> <div class="msportalfx-grid-borderless ext-relatedresourcegrid" data-bind="pcControl: disabledResourcesGrid"><\/div> <!-- /ko --> <\/div> <!-- ko if: !hideMoveToSection() --> <div class="ext-hubs-moveresource-movetosection"> <div class="msportalfx-text-header-regular msportalfx-text-ellipsis msportalfx-tooltip-overflow ext-hubs-moveresource-movetosection-header" data-bind="text: moveToHeaderText"><\/div> <!--ko if: allowSubMove() --> <div data-bind="pcControl: subscriptionDropdown"><\/div> <!-- /ko--> <!-- ko if: showResourceGroupDropDown() && !isClassicSubscriptionMove() --> <div data-bind="pcControl: resourceGroupDropdown"><\/div> <!-- /ko --> <!-- ko if: !showResourceGroupDropDown() && !isClassicSubscriptionMove() --> <div data-bind="pcControl: newResourceGroupTextBox"><\/div> <!-- /ko --> <!-- ko if: hasOtherResourceGroups() && !isClassicSubscriptionMove() --> <a href="" class="ext-hubs-moveresource-movetosection-createrglink msportalfx-link-primary" data-bind=\'click: switchCreateAndPickResourceGroup, text: createNewPickExistingLabel\'><\/a> <!-- /ko --> <div data-bind="pcControl: confirmationCheckBox" class="ext-hubs-moveresource-movetosection-confirmationCheckBox msportalfx-form"><\/div> <\/div> <!-- /ko --> <\/div>'},styleSheets:[{file:"Blades/MoveResource.css",content:r}]},attributes:0}}))