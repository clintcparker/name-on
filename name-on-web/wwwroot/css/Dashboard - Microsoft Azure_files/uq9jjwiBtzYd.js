define("Shared/QueryBase",["require","exports","f","o","a","$","Shared/TimeContext"],(function(n,t,i,r,u,f,e){"use strict";function o(n,t){var r,i;if(n===undefined||n===null)return"null";if(typeof n!="object")throw new Error("Only objects may be serialized.");r=[];for(i in n)t&&t.some((function(n){return n===i}))||!n.hasOwnProperty(i)||/_.*/.test(i)||f.isFunction(n[i])||r.push({key:i,value:n[i]});return r.sort((function(n,t){return n.key.localeCompare(t.key)})),r.map((function(n){return"{0}={1}".format(n.key,s(n.value))})).join(";")}function c(n){var t=[];return t.push("queryProperties={{0}}".format(o(n,["queryParams","timeContext"]))),n.queryParams&&t.push("queryParams={{0}}".format(o(n.queryParams))),n.timeContext&&t.push(e.getKey(n.timeContext)),t.join(";")}function s(n){var t=null;if(n===undefined||n===null)t="null";else if(typeof n=="object")if(n instanceof Date)t=n.toISOString();else throw new Error("Only values which are a string, number, boolean, Date or undefined may be serialized.");else t=n.toString();return t}function l(n){return n&&n._payload?JSON.stringify(n._payload):""}r.defineProperty(t,"__esModule",{value:!0});var h=(function(){function n(n,t,r){this._componentId=n;this._containerName=t;this._queryName=r;i.isNullOrUndefined(n)||(this.subscriptionId=n.SubscriptionId,this.resourceGroup=n.ResourceGroup,this.componentName=n.Name);this._groupId=i.getUniqueId();this._customProperties={}}return n.prototype.getPayload=function(){throw new Error("Derived classes must implement getPayload.");},n.prototype._transformResponse=function(n){return n},n.prototype.prepareQuery=function(){if(this.timeContext&&this.queryParams){var n=e.toTimeRange(this.timeContext);this.queryParams.endTime=n.endTime.toISOString();this.queryParams.startTime=n.startTime.toISOString()}return null},n.prototype.getLoggablePayloadForTrace=function(){return""},n})();t.QueryBase=h;t._serializeObject=o;t.getKey=c;t._serializeValue=s;t._serializePayload=l}))