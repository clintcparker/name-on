var executeInDevelopmentModeOnly=function(){},ko,HubsExtension,MsPortalFx,FxImpl;(function(n){"use strict";function f(n){i.push(n)}function e(){}function o(){n.onEnvironmentSet=r;i.forEach(r)}function s(n){return(MsPortalFx.getEnvironmentValue("frameworkCapabilities",0)&n)>0}function h(t){if(t=t||"",/^\w+:\/\//.test(t))return t;if(t.startsWith("//"))return n.protocol+t;if(t.startsWith("/"))return n.origin+t;var i=n.origin+MsPortalFx.getEnvironmentValue("applicationPath");return i[i.length-1]!=="/"&&(i+="/"),i+t}var u=window,t=u.location,i,r;t.origin||(t.origin=t.protocol+"//"+t.host);n.origin=t.origin;n.protocol=n.origin.substr(0,n.origin.indexOf("/"));n.href=t.href;i=[];n.onEnvironmentSet=f;n.throwBeforeEnvironment=e;r=function(n){n(MsPortalFx.getEnvironmentValue)};n.setEnvironment=o;n.hasCapability=s;n.ensureAbsoluteUri=h})(FxImpl||(FxImpl={})),
(function(n){"use strict";function o(n){return f[n.toLowerCase()]}function s(n){var t=o(n);return!!t&&t.length===4&&t.toLowerCase()==="true"}function h(n,t){return i[n]||t}var u=window,r=u.fx,i=r.environment,t=FxImpl.internalEnv=r.internalEnv,f=t.features,e;r.bootstrapTelemetry.fxScriptsBegin=r.getTimestamp();u.performance.mark("MsPortalFxStart");t.isShell&&FxImpl.setEnvironment();FxImpl.onEnvironmentSet((function(){function u(n,t){n.forEach((function(n){Object.keys(n||{}).forEach((function(i){t.forEach((function(t){var u=t.toLowerCase(),o=u.length,e=i.toLowerCase(),r;e.indexOf(u)===0&&(r=e.substr(o),(u||r.indexOf(".")<0&&r.indexOf("_")<0)&&(f[r]=n[i]+""))}))}))}))}if(!t.isShell){i=r.environment;var n=i.extensionEnv;u([FxImpl.featuresFromShellConfig,n&&n.features,i.featuresFromConfig,FxImpl.featuresFromShellQuery],["","feature.",i.extensionName+"_"]);t.features=i.features=f;n&&Object.keys(n).forEach((function(t){t!=="features"&&t!=="extensionEnv"&&(i[t]=n[t])}));console.log("Extension: "+i.extensionName)}}));e=u.parent;n.isIFrame=e&&u.window!==e.window;n.getFeatureValue=o;n.isFeatureEnabled=s;n.getEnvironmentValue=h;n.isDevelopmentMode=FxImpl.isDevelopmentMode=t.isDevelopmentMode;n.isTestMode=FxImpl.isTestMode=t.isTestMode;n.isInWebWorker=FxImpl.inWebWorker=t.inWebWorker;n.sessionId=FxImpl.sessionId=t.sessionId;n.trace=FxImpl.trace=t.trace||{};n.portalUri=FxImpl.trustedParentOrigin=t.trustedParentOrigin;n.defineProperty=n.defineProperty||Object.defineProperty;i.javascriptObjectPropertiesAreEnumerable||(Object.defineProperty=function(t,i,r){return r&&r.get&&r.enumerable===!0&&(r.enumerable=!1),n.defineProperty(t,i,r)})})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";function t(n){return function(){return tt.apply(n,arguments)}}function dr(n){return n&&n===n.window}function pf(n){for(var t in n)return!1;return!0}function wf(){var n=kr();return function(){return kr()-n}}function ti(n){if(yf.type(n)!==i||n.nodeType||dr(n))return!1;var t=n.constructor,r=t&&t.prototype;return!(r&&!rt(r,"isPrototypeOf"))}function gr(n){var t,r;switch(typeof n){case a:t=[];for(r in n)l(t,r);return t;case f:case i:case br:return yr(n);default:return[]}}function e(n,t){return typeof n===t}function lt(n){return n instanceof Date}function uu(n){var t=n&&n.dispose;return e(t,f)&&t}function ft(n,t,i){return n&&c(v(n),(function(r){t(r,n[r],i)})),i}function ii(n){return n?v(n).length:0}function bf(n){return!ii(n)}function kf(n){return!!uu(n)}function fu(n){if(u(n))c(n,fu);else{var t=uu(n);t&&t.call(n)}}function df(n){return n===null}function eu(n){return n===undefined}function r(n){return n===null||n===undefined}function ou(n){return!r(n)}function gf(n){return r(n)||e(n,a)&&!ru.test(n)}function ne(n){return!isNaN(n)&&!r(n)&&e(n,ni)}function su(n,t,i){try{return t(n)}catch(r){return i(r)}}function ie(n){return et.error=n,et}function at(n,t){t===void 0&&(t={});var e=t.cacheFactory,u=t.checkResult,i=t.cacheFactory?e():new ri,f=!u&&!t.noDebugCheck&&te,r=function(r){var e,o,s;if(i.has(r))return i.get(r);if(e=su(r,n,ie),e!==et){if(f&&f(e),!u||u(e,r,i))return i.set(r,e),e}else o=et.error,s=t.onError,s&&s(o,r,i)||Q.fcall((function(){return Q.reject(o)}))};return r.dispose=r.clear=function(){i.clear()},r.delete=function(n){return i.delete(n)},r.map=function(){return i},r}function re(t,i){return function(r,u,f){return!!(r&&r.catch((function(r){f.delete(u);var e=n.Errors.isInstanceOfErrorType(r,n.Errors.CanceledError)?r:new n.Errors.Error({message:"memoizeQ remove ("+u+") from the cache due to return promise rejection",data:i&&i(r),innerErrors:r});if(!(t&&t(e,u,f)))return Q.reject(e)})))}}function hu(n,t){t===void 0&&(t={});var i={},r=i.onError=t.onError;return i.cacheFactory=t.cacheFactory,i.checkResult=re(r,(function(){return'memoizeQ(callback: "'+n.toString()+'")'})),i.onError=r,at(n,i)}function ue(n,t,i){function r(u){return t-->0?Q.delay(i).then(n).catch(r):Q.reject(u)}return Q.fcall(n).catch(r)}function vt(t,i,r){return new n.Errors.CanceledError({message:t,data:i&&i+"",innerErrors:r})}function fe(n){var u=n&&n.requireType,t,i,r;return(u!=="scripterror"||rt(n,"status")||(i=n.originalError||{},i.type==="error"&&i.srcElement&&(t=i.srcElement.src)),t)?(r=Q.defer(),FxImpl.Diagnostics.getStatusCode(t,(function(i,u,f){n.srcUrl=t;n.status=i;n.statusText=f;r.reject(n)})),r.promise):Q.reject(n)}function ee(t,i,r){return i&&(t=i.normalize(t)),r&&(n.getEnvironmentValue("requireConfig").ignoreErrorsForModule[t]=!0),lu(t)}function fi(n,t,i){var u;if(i===void 0&&(i=0),n&&(u=n.length)){var f=u,e=1,r=i;if(i<0&&(r+=u,e=f=-1),!t)return r<u&&r>=0?r:-1;while(r!==f){if(t(n[r],r,n))return r;r+=e}}return-1}function oe(n,t,i){var r=fi(n,t,i);return r<0?undefined:n[r]}function se(n){if(n)return n[0]}function he(n){var t;if(n&&(t=n.length))return n[t-1]}function ce(n,t,i){var s,r,h,u,c,o;for(i===void 0&&(i=0),s=[],r=0,e(t,f)&&(h=t),u=i,c=n.length;u<c;u++)o=n[u],r&&(n[u-r]=o),(t===o||h&&h(o))&&(r++,l(s,o));return r&&lf(n,-1*r),s}function ei(n,t,i,r){var h,e,f,c,s;if(r===void 0&&(r=!1),u(t)){for(h=i?function(t){return fi(n,(function(n){return i(n,t)}))}:function(t){return n.indexOf(t)},e=r?[]:n,f=0,c=t.length;f<c;f++)s=t[f],h(s)<0&&l(e,s);r&&o(hr,n,e)}return n}function au(n,t){return ei([],n,t)}function le(){var r=[],i=arguments.length-2,n=arguments[i+1],t,u;for(e(n,f)||(n=undefined,i++),t=0;t<=i;t++)u=au(arguments[t],n),ei(r,u,n,!0);return r}function ae(t,i){return o(n.merge,null,t.map(i))}function ve(n,t){if(n.length<3){var i=n.slice();return n.length>1?i.sort(t):i}return n.map((function(n,t){return{i:t,v:n}})).sort((function(n,i){return t(n.v,i.v)||n.i-i.i})).map((function(n){return n.v}))}function ye(n){return n+""}function oi(n,t,i,r,u){var f,e,c,s,o,h;if(t)for(i=i||ye,f=[t,,,""],e=0,c=t.length;e<c;e++)s=t[e],f[1]=s,f[2]=e,f[3]=undefined,o=tt.apply(i,f),u&&n[o]!==undefined||(f[3]=o,h=r?tt.apply(r,f):s,h!==undefined&&(n[o]=h));return n}function pe(n,t,i,r){var u=[t,,];return ft(t,(function(t,f){if(!r||n[t]===undefined){u[1]=f;u[2]=t;var e=i?tt.apply(i,u):f||t;e!==undefined&&(n[t]=e)}})),n}function si(n){return n=u(n)?ht(n):arguments,function(){var t={};return c(arguments,(function(i,r){var u=n[r];i!==undefined&&(t[u]=i)})),t}}function we(n){return o(si,undefined,n)}function be(t,i){var r=[];return ft(t,(function(t,i){e(t,a)&&e(i,ni)&&l(r,n.getNameValue(t,i))})),i?lr(r,(function(n,t){return n.value-t.value})):r}function ke(n){return u(n)||(n=r(n)?[]:[n]),n}function vu(n,t){return lt(n)&&lt(t)&&!(n>t||n<t)}function de(n){return n.getTime()/1e3|0}function yu(n){return ut(n)&&u(n())}function ge(n){return u(n)||yu(n)}function pu(n,t,i){var r=pt[n]&t;pt[n]=r|i}function no(){ci.getRandomValues(pt);pu(8,15,64);pu(11,63,128);for(var t=0;t<hi;t++)k[t]=yt[pt[t]];return k[4]=k[7]=k[10]=k[13]="-",n.applyUncurry(ar,"",k)}function to(n){for(var t,i=new Array(n),r;n;)for(t=4294967296*w.random()|0,r=8;r--;){if(i[--n]=y[t&15],n<0)return i;t>>>=4}}function io(){var n=to(36);return n[8]=n[13]=n[18]=n[23]="-",n[14]="4",n[19]=y[8+(y.indexOf(n[19])&3)],o(ar,"",n)}function wu(n){return yt[n>>4]+y[n&15]}function bu(t){t=t?t+"-":"";var r="",i=ot;return function(){return++i>ot&&(i=0),i||(r=t+n.newGuid().substring(0,33)),r+wu(i)}}function ro(n){var i=-1,t=ot,r="";return function(){return++t>ot&&(t=0,i++,r=n+i.toString(16)+"-"),r+wu(t)}}function uo(n,t){return t=w.pow(10,t||0),w.round(Number(n)*t)/t}function fo(n){return n|0}function eo(n,t){return n?!t:t}function oo(n,t){if(n!==undefined&&t!==undefined&&!(n>t))return w.floor(w.random()*(t-n+1))+n}function so(n,t,i){var r=rt(n,t)&&n[t];r&&ut(r)?r(i):n[t]=nu(i)}function ho(n,t){return n===t||vu(n,t)}function co(n,t){if(n===t)return!0;if(n&&t){if(n.length!==t.length)return!1;for(var i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0}return!1}function wt(n){var t=typeof n;return t===i&&(n===null?t="null":u(n)?t="array":lt(n)&&(t="date")),t}function li(n,t,r){var u,e,f;if(r&&(n=r(n),t=r(t)),n===t)return!0;if(!n||!t||(u=wt(n),u!==wt(t)))return!1;switch(u){case"array":return e=n,n.length===t.length&&e.every((function(n,i){return li(n,t[i],r)}));case"date":return n.getTime()===t.getTime();case i:return f=v(n),f.length===ii(t)&&f.every((function(i){return li(n[i],t[i],r)}));default:return!1}}function lo(n,t,i){var r=i?ku.peekObservable:ko.unwrap;return li(n,t,r)}function ao(n){return wt(n)===i}function vo(t,i,r){var u=[t,,,r],f=v(t).map((function(n){return u[1]=t[n],u[2]=n,tt.apply(i,u)}));return o(n.merge,null,f)}function yo(n,t,i){var r,u,f;for(i=i||v(t),r=0;r<i.length;r++)u=i[r],f=t[u],f!==undefined&&(n[u]=f)}function bt(n,t,i){var u,f;return e(t,a)?(n=r(n)?"":String(n),u=n.length,(i===undefined||i>u)&&(i=u),i-=t.length,f=ct(n,t,i),f!==-1&&f===i):!1}function po(n,t,i,u){return r(n)?-1:e(t,a)?n.toLocaleLowerCase().localeCompare(t.toLocaleLowerCase(),i,u):1}function wo(n,t){var i="";for(t=t<0?0:t;t--;)i+=n;return i}function bo(n){for(var t="",i=n.length;i;)t+=n[--i];return t}function go(n){return function(){return cr(arguments,n)}}function ns(n,t){return n=n||"",t=t||n,function(i){return n+i+t}}function ts(n,t,i){return n.replace(new RegExp(ai(t),"g"),i)}function is(n,t){var i,r;return n&&t&&(i=v(t).map(ai),i.length)?(r=new RegExp(cr(i,"|"),"g"),n.replace(r,(function(n){return t[n]}))):n}function rs(n,t,i){var r=[];if(n&&t&&i){var u=0,e=t.length,f=0;for(i--;;){if(r.length>=i||(f=ct(n,t,u))<0){l(r,b(n,u));break}l(r,b(n,u,f));u=f+e}}return r}function d(n,t,i){return n=r(n)?"":String(n),i=r(i)||i<0?0:w.min(i,n.length),n.lastIndexOf(t,i)===i}function du(n,t){for(var o=t?bt:d,i=n[0]||"",r,u,e,f;i;){for(r=void 0,u=1,e=n.length;u<e;u++)if(f=n[u],f&&o(i,f)){r=f;break}if(!r)break;i=t?b(i,0,i.length-r.length):b(i,r.length)}return i}function us(n,t){return n=n||"",bt(n,t)||(n+=t),n}function gu(n,t){return n=n||"",d(n,t)||(n=t+n),n}function fs(t,i){u(i)||(i=ht(arguments,1));var r="";return c(i||[],(function(i){r?i&&(r=n.trimEnd(r,t)+gu(i,t)):r=i||""})),r}function es(n,t){var i,r,u;return t===void 0&&(t=!0),n&&(i=0,d(n,"//")?i=2:(r=ct(n,"://"),r>-1&&(i=r+3)),n=b(n,i),u=n.search(t?/[?#/]/:/[?#/:]/),u>-1&&(n=b(n,0,u))),n}function os(n,t){if(!n||!t||n.length<t.length)return!1;var i=vr(n),r=vr(t);return i===r||bt(i,"."+r)}function ss(n){return ct(n,"://")!==-1||d(n,"//")}function hs(n){return kt.error=n,kt}function nf(n,t,i){if(Q.isFulfilled(n)){var r=su(n.inspect().value,t,hs);return r===kt?Q.reject(r.error).catch(i):Q(r)}return n.then(t,i)}function cs(n,t){return n.isPending()?n.finally(t):(t(),n)}function ai(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function vi(){}function ls(n){return n}function as(n){return function(){return n}}function tf(n){return n===null||typeof n in dt}function vs(n,t,i){var r=n.prototype;ft(t,(function(n,t){(i||!r[n])&&s.defineProperty(r,n,{value:t,configurable:!0,enumerable:!1,writable:!0})}))}function rf(n){if(n>yi)throw new Error("The requiredMaxInteger("+n+") should be less than "+yi);if(n<=0)throw new Error("The requiredMaxInteger("+n+") should be greater than zero.");}function ys(n){return rf(n),pi}function ps(n){return rf(n),wi}function ws(n){var t=s.create(s.getPrototypeOf(n)),i=function(i){var r=n[i];e(r,f)?t[i]=function(){return o(r,n,arguments)}:rt(n,i)&&(t[i]=r)};for(var r in n)i(r);return t}function bs(n){return n&&n.toLowerCase()}function ki(n){if(n){var t=typeof n;if(t===a)return bs(n);if(u(n))return n.map((function(n){return ki(n)}));if(t===i)return ft(n,(function(t,i){n[t]=ki(i)})),n}return n}function ef(t,i,r){return r?n.jqueryExtend(!0,t,i):n.jqueryExtend(t,i)}function ds(n,t,i){if(i&&tf(n))return n;var r=nt(n)?[]:{};return ef(r,n,t)}function gs(t,i,r,u){var f=nt(t)?[]:{};return n.jqueryExtend(f,t,i,r,u)}function ir(n){return r(n)?"":String(n).replace(nh,dh)}function uh(n){return ir(n)}function fh(t){var i,u,r,f,e;return t||n.isDiagnosticsEnabled?(i=st(),i&&(u="\n",r=0,r=i.indexOf(u,0),r=i.indexOf(u,r+1),f=i.indexOf("@",0),e=f>-1&&f<r,e||(r=i.indexOf(u,r+1)),i=i.substr(r+1)),i||""):"(Callstack capturing is not enabled. Use ?trace=diagnostics to enable it.)"}function eh(n,t){var r=function(t,i){if(t===n&&!t.hasOwnProperty(i))throw new Error("Missing property '"+i+"' on root object '"+nr(t)+"'.");},u=function(u,f){var s=f===n,e,o;return f&&typeof f===i&&!nt(f)?(e=s&&t?t:gi(f),e.length===0?s?{}:f:(o=new vh,e.forEach((function(n){r(f,n);o.addProperty(n,f[n])})),o.toJSON())):f};return nr(n||{},u)}function oh(n){if(!n||typeof n!==i||nt(n))throw new Error(rr+".");var t=gi(n);if(t.length!==1)throw new Error(rr+" with only one property.");return t[0]}function sh(n,t,i){return n[i]}function hh(n){var t=function(t,i){if(t===ff&&nt(i)){var r=this;oi(r,i,(function(t){try{return oh(t)}catch(i){i.message=i.message+(" String: '"+n+"'.");throw i;}}),sh);return}return i};return ks(n,t)}function ch(t){t&&n.disposeDisposable(t.content,t.container)}function lh(n){return di+n+di}function ah(n){return n!=="constructor"&&!d(n,di)}function er(n){var t=i,r;return n.constructor&&(r=n.constructor,t=fr(r)),t}function p(n){return"<"+n+">"}function ph(n,t,r,u){function l(n){return r.visited.includes(n)?!1:(r.visited.push(n),!0)}var e,o,s,k=!n,a=k||u,v,y,h,c,w,b;if(!n||n[0]!=="_")return s=typeof t,e=p(s),s in dt||(s===i?t===null?e=p("null"):nt(t)?(v=t,y=l(t)?"":ur,e=y+p("Array["+v.length+"]")):lt(t)?e=p("Date"):r.current!==t?(h=p(er(t)),a?(e=o={},o[h]=t,o=o[h],r.current=t):e=h):(r.current=null,e=l(t)?t:ur+p(er(t))):s===f&&(c=p(s)+fr(t),ut(t)&&a?l(t)?(e=o={},w=t,b=w.peek(),o[c]=b):e=ur+c:e=c)),e}function wh(n,t){var i={current:null,visited:[]};return nr(n,(function(n,r){return ph(n,r,i,t)}),2).replace(/\"/g,"")}function bh(n,t,i){return oi({},n,t,i)}function kh(n,t){var i=tu(),r=n.createChildLifetime();return ko.computed(r,(function(){i(t())})),i.dispose=function(){r.dispose()},i}function dh(n,t,i){var r=n.charCodeAt(0);return of[n]||(of[n]="&#"+(t?0:i?(r-th)*1024+n.charCodeAt(1)-ih+rh:r)+";")}function gh(t){for(var c=new n.Map,e=[[t]],o,s,u,l,r,h;e.length;)for(o=e.pop(),s=v(o),u=0,l=s.length;u<l;u++){if(r=o[s[u]],h=typeof r,h===f||r instanceof Error||r instanceof Node||r===document.all)return!1;r&&h===i&&!c.has(r)&&(c.set(r,!0),e.push(r))}return!0}function nc(n,t){n=iu(n);t=iu(t);var u=!r(n),i=!r(t);if(u&&i){if(n.localeCompare)return n.localeCompare(t);n=+n;t=+t;u=!isNaN(n);i=!isNaN(t)}return u?i?n-t:-1:i?1:0}function or(n,t){return eu(n)?t:n}function tc(n,t){return ut(n)?n:nu(or(n,t))}function ic(n,t){return ut(n)?n:tu(or(n,t))}var gt=window,sr=Function,w=Math,s=Object,tt=sr.call,sf=sr.apply,o,ru,ri,te,et,ui,cu,lu,y,yt,ci,ot,ku,kt,dt,g,bi,st,tr,rr;n.uncurryThis=t;o=t(sf);n.applyCall=o;n.applyUncurry=o;var h=Array.prototype,hf=h.concat,hr=h.push,cf=t(h.filter),c=t(h.forEach),cr=t(h.join),l=t(hr),ht=t(h.slice),lr=t(h.sort),lf=t(h.splice),u=Array.isArray,it=String.prototype,ar=t(it.concat),af=t(it.split),b=t(it.substring),ct=t(it.indexOf),vr=t(it.toLowerCase),rt=t(s.prototype.hasOwnProperty),yr=s.keys,vf=gt.fx,pr=s.freeze,wr="boolean",f="function",a="string",ni="number",i="object",br="undefined",yf=jQuery,kr=vf.getTimestamp;n.isWindow=dr;n.isEmptyObject=pf;n.startTimer=wf;n.isPlainObject=ti;n.jqueryExtend=function(){for(var p,h,w=[],c=0;c<arguments.length;c++)w[c]=arguments[c];var l,o,r,a,v,t=arguments[0]||{},s=1,y=!1;for(typeof t===wr&&(y=t,t=arguments[s]||{},s++),typeof t===i||e(t,f)||(t={}),p=arguments.length,s===p&&(t=this,s--);s<p;s++)if((l=arguments[s])!=null)for(h in l)(o=t[h],r=l[h],t!==r)&&(y&&r&&(ti(r)||(a=u(r)))?(a?(a=!1,v=o&&u(o)?o:[]):v=o&&ti(o)?o:{},t[h]=n.jqueryExtend(y,v,r)):r!==undefined&&(t[h]=r));return t};n._objectKeysPolyfill=gr,(function(){try{yr("")}catch(n){s.keys=gr}})();var v=s.keys,ut=ko.isObservable,nu=ko.observable,tu=ko.observableArray,iu=ko.utils.peekObservable;ru=/\S/;n.forEachKey=ft;n.keysLength=ii;n.isEmpty=bf;n.isDisposable=kf;n.disposeDisposable=function(){c(arguments,fu)};n.isNull=df;n.isUndefined=eu;n.isNullOrUndefined=r;n.notNullOrUndefined=ou;n.isNullOrWhiteSpace=gf;n.isNumeric=ne;ri=gt.Map;n.Map=ri;et={};n.memoize=at;n.memoizeQ=hu;n.retryPromise=ue;ui={noDebugCheck:!0};n.throttle=function(t,i,r){var h,c,u,l,e,o,s;return typeof i!==f&&(r=i,i=t,t=null),e=at((function(){var n=u||(u=Q.defer()),t=r>0?Q.delay(r):Q();return t.then((function(){return n.promise.isPending()&&c()})).then(n.resolve,n.reject),n.promise}),ui),c=function(){return e.clear(),u=null,i.apply(null,h)},o=function(){return h=arguments.length?ht(arguments):undefined,e()},s=function(n){u&&u.promise.isPending()&&u.reject(n||vt("canceled",i));u=null;l||e.clear()},o.cancel=s,o.dispose=function(){var t,r;l=!0;t=vt("disposed",i);s(t);r=Q.reject(t);r.catch(n.noop);e.map().set(undefined,r)},t&&t.registerForDispose(o),o};n.debounce=function(t,i,r){function v(n){u&&u.promise.isPending()&&u.reject(n||vt("canceled",i));u=null;a||e.clear()}var h,s,c,l,u,a,e,o;return r===void 0&&(r=0),typeof i!==f&&(r=i,i=t,t=null),s=0,e=at((function(){var n=u||(u=Q.defer()),i=Date.now(),t=s+r-i;return t>0?Q.delay(t).then((function(){return n.promise.isPending()&&l()})):Q.fcall((function(){return n.promise.isPending()&&c()})).then(n.resolve,n.reject),n.promise}),ui),l=function(){return e.clear(),e()},c=function(){return e.clear(),u=null,i.apply(null,h)},o=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return s=Date.now(),h=arguments.length?ht(arguments):undefined,e()},o.cancel=v,o.dispose=function(){var t,r;a=!0;t=vt("disposed",i);v(t);r=Q.reject(t);r.catch(n.noop);e.map().set(undefined,r)},t&&t.registerForDispose(o),o};cu={checkResult:function(t,i,r){return Q.isFulfilled(t)||t.catch((function(t){n.Errors.isInstanceOfErrorType(n.Errors.CanceledError,t)||r.delete(i)})),!0}};lu=n.memoize((function(t){var i=Q.defer();return nf(FxImpl.requireReady,(function(){gt.requirejs([t],i.resolve,(function(n){return fe(n).catch(i.reject)}))}),i.reject),i.promise.catch((function(i){var r=n.getEnvironmentValue("requireConfig").ignoreErrorsForModule[t]?new n.Errors.CanceledError({message:"Suppressing require rejection for failed download of ignore-able module "+t,innerErrors:i}):i;return Q.reject(r)}))}),cu);n.require=ee;n.findIndex=fi;n.find=oe;n.first=se;n.last=he;n.remove=ce;n.pushUnique=ei;n.unique=au;n.union=le;n.merge=function(){var n=cf(arguments,ou);return hf.apply([],n)};n.mapMany=ae;n.stableSort=ve;n.extendArrayIntoMap=oi;n.extendStringMapIntoMap=pe;n.getStringMapFunc=si;n.applyStringMapFunc=we;n.getNameValue=si("name","value");n.getEnumArray=be;n.makeArray=ke;n.areEqualDates=vu;n.toSeconds=de;n.isObservableArray=yu;n.isArrayOrObservableArray=ge;y=af("0123456789abcdef","");yt=[];c(y,(function(n){c(y,(function(t){l(yt,n+t)}))}));var hi=20,pt=new Uint8Array(hi),k=new Array(hi);ci=window.crypto||window.msCrypto;n.newGuid=ci?no:io;ot=4095;n.getUniqueIdGenerator=bu;n.getIdGenerator=ro;n.getUniqueId=bu();n.round=uo;n.truncate=fo;n.xor=eo;n.random=oo;n.hasOwnProperty=rt;n.setObjPropAsObservable=so;n.areEqual=ho;n.arrayEquals=co;n.getTypeOf=wt;ku=ko.utils;n.deepEquals=lo;n.isObject=ao;n.map=vo;n.shallowCopyFromObject=yo;n.endsWith=bt;n.localeCompareIgnoreCase=po;n.repeat=wo;n.reverse=bo;n.getJoinFunc=go;n.getQuoteFunc=ns;n.replaceAll=ts;n.replaceMany=is;n.split=rs;n.startsWith=d;n.trimEnd=function(){return du(arguments,!0)};n.trimStart=function(){return du(arguments)};n.ensureSuffix=us;n.ensurePrefix=gu;n.pathJoin=fs;n.getUriAuthority=es;n.isSubdomain=os;n.isUriAbsolute=ss;kt={};n.tryImmediateResolve=nf;n.tryImmediateFinally=cs;n.memoizePromise=hu;n.regexEscape=ai;n.noop=vi;n.identity=ls;n.wrap=as;dt={};c([wr,br,ni,a,"symbol"],(function(n){dt[n]=!0}));n.isPrimitive=tf;n.polyfill=vs;var yi=50,pi=[],wi={};for(g=0;g<=yi;g++)bi=g+"",pi[g]=bi,wi[bi]=g;n.isDevelopmentMode&&(pr(pi),pr(wi));n.getIntToStringMap=ys;n.getStringToIntMap=ps;n.cloneAndRebindFunctions=ws;n.lowerCaseAllStrings=ki;var uf=function(){return(new Error).stack},ff="#",di="###",nt=Array.isArray,gi=Object.keys,nr=JSON.stringify,ks=JSON.parse;n.isDiagnosticsEnabled=(function(){var t=n.trace;return t&&t.diagnostics?!0:t&&t.nocallstacks?!1:n.isDevelopmentMode&&!!uf()?!0:!1})();st=uf;st()||(st=vi,n.isDiagnosticsEnabled&&(tr=function(){try{throw new Error;}catch(n){return n.stack}},tr()&&(st=tr)));n.extend=ef;n.clone=ds;n.extend2=gs;var nh=/[`><"'&\t\n\r\xa0-\xff]|([\x00-\x1f\x7f\x80-\x9f])|([\ud800-\udbff][\udc00-\udfff])/g,of={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&#34;","`":"&#96;"},th=55296,ih=56320,rh=65536;n.encodeHtml=ir;n.encodeAttribute=uh;n.attributeEncode=ir;n.htmlEncode=n.attributeEncode;n.getCurrentCallStack=fh;n.toSortedString=eh;rr="Invalid sorted string, property array must contain objects";n.parseSortedString=hh;n.disposeViewModelProperties=ch;n.generateNonSerializableProperty=lh;n.isSerializableProperty=ah;var vh=(function(){function n(){this._propertyMap={}}return n.prototype.addProperty=function(n,t){t!==undefined&&typeof t!==f&&(this._propertyMap[n]=t)},n.prototype.toJSON=function(){var n=this._propertyMap,i=gi(n),t;return i.length>1?(t={},t[ff]=lr(i).map((function(t){var i={};return i[t]=n[t],i})),t):n},n})(),yh=/function\s+(\w*)\(.*?\)/,ur="[potential-circular-reference]",fr=function(n){var t,r,i;return n?(t=n.name,t===undefined&&(r=n.toString(),r&&(i=yh.exec(r),i&&i.length>=1&&(t=i[1]))),t||"[anonymous]"):""};n.getFunctionName=fr;n.getObjectConstructorName=er;n.getObjectDescriptor=wh;n.convertArrayToMap=bh;n.thunkArray=kh;n.canSendThroughPostMessage=gh;n.compare=nc;n.initValue=or;n.initObservable=tc;n.initObservableArray=ic;n.markIgnoreHighDependenciesCount=vi})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";function r(){var n=arguments,e=this,o=!1,u,h=n.length===1&&n[0]&&typeof n[0]=="object",s=n.length===2&&n[0]&&typeof n[0]=="object"&&(typeof n[1]=="function"||n[1]===null),r=s?n[1]:null,f;return(h||s)&&(f=n[0],u=e.replace(t,(function(n){var i=n.substring(1,n.length-1),t;return f.hasOwnProperty(i)?(o=!0,t=f[i],r?r(t):t):n}))),o||(u=e.replace(i,(function(t,i){if(i<n.length){var u=n[i];return r?r(u):u}return t}))),u}var t=/\{[a-zA-Z$_\d]*\}/g,i=/\{(\d+)\}/g;n.polyfill(String,{format:r,localeCompareIgnoreCase:function(t,i,r){return n.localeCompareIgnoreCase(this,t,i,r)},replaceAll:function(t,i){return n.replaceAll(this,t,i)},replaceMany:function(t){return n.replaceMany(this,t)},repeat:function(t){return n.repeat(this,t)},startsWith:function(t,i){return n.startsWith(this,t,i)},endsWith:function(t,i){return n.endsWith(this,t,i)}},!0);n.polyfill(String,{includes:function(n,t){return!!~this.indexOf(n,t)}})})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";var t;(function(t){var i;(function(t){function o(n,t){throw new Error(n.format(t));}function r(n,t,i){return n.substr(t,i)}function a(){f=n.getEnvironmentValue("contentUriBasePath")||"/";e=n.getEnvironmentValue("contentVersionToken")||""}function b(n,t){return c(n,(function(n,i,r){typeof i=="string"&&(r[n]=t(i))}),{})}function k(n){return b(n,(function(n){return v(i("Content/Images",n))}))}function i(){for(var n,u,f=[],i=0;i<arguments.length;i++)f[i]=arguments[i];return n="",u=!1,f.forEach((function(t){if(t){n&&(t=l(t,"/"),n+="/");var i=t.length-1;u=t[i]==="/";u&&(t=r(t,0,i));n+=t}})),u&&(n+="/"),t.isUriAbsolute(n)||n[0]==="/"||(n="/"+n),n}function u(u,s,c){var a,v,y;return u=l(u,"/"),v=u.toLowerCase(),v.startsWith(h)&&(y=h.length,(v.length===y||v[y]==="/")&&(a=y)),s===1||s===2?(t.isUriAbsolute(u)&&o("The '{0}' URI is not a valid content URI because it is an absolute URI.",u),a||o("The '{0}' URI is an application relative URI. However a content URI was expected. Did you mean to call getAppRelativeUri?",u),e!==""&&(u=i(r(u,0,a),e,r(u,a))),u=i(f,u)):t.isUriAbsolute(u)||(a&&o("The '{0}' URI is a content URI. However an application relative URI was expected. Did you mean to call getContentUri?",u),u=i(n.getEnvironmentValue("applicationPath"),u)),c&&!t.isUriAbsolute(u)&&(u=i(FxImpl.origin,u)),u}function v(n,t){return t===void 0&&(t=!0),u(n,2,t)}function d(n){return u(n,1,!1)}function g(n){return u(n,0,!1)}function nt(n){return u(n,0,!0)}function y(n,r){return r===void 0&&(r=!0),n=n||"",t.isUriAbsolute(n)||(n=i(f,n),r&&!t.isUriAbsolute(n)&&(n=i(FxImpl.origin,n))),n}function tt(n){var t=n.lastIndexOf(".");return t!==-1?r(n,0,t):n}function w(n,t,i,r){var u=t[i];return u||(t[i]=u={}),n.forEach((function(n){if(typeof n=="string"){var i=tt(n);u[i]=p+r+"_"+n}else c(n,(function(n,i){w(i,t,n,r+"/"+n)}))})),t}function it(n,t){var i=s.get(n);return i||(i=w(n,{},"",""),s.set(n,i)),i[t]}var h="content",c=n.forEachKey,l=n.trimStart,f,e,p,s;t.initialize=a;t.getImages=k;t.isUriAbsolute=n.isUriAbsolute;t.getContentUri=v;t.getScriptUri=d;t.getAppRelativeUri=g;t.getAbsoluteUri=nt;t.getVersionlessContentUri=y;FxImpl.onEnvironmentSet((function(){a()}));p=y(i("Content/Static/"));s=new n.Map;t._getImageMap=it})(i=t.Resources||(t.Resources={}))})(t=n.Base||(n.Base={}));n.getImages=t.Resources._getImageMap})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";function t(n){var t;try{t=i(n)}catch(u){t="ERROR serializing message: "+i(u)}return r(t)}function i(i){if(!i||typeof i!="object")return String(i);var r=[];return Object.getOwnPropertyNames(i).forEach((function(u){var f=i[u],e=typeof f;if(e!=="function"){if(e!=="string"&&!n.startsWith(u,"###"))if(f instanceof Error)f=t(f);else if(Array.isArray(f))f=JSON.stringify(f.map((function(n){return n instanceof Error?t(n):n})));else try{f=JSON.stringify(f)}catch(o){f="<cyclic object>"}r.push(u+": "+f+"\r\n")}})),r.sort().join("")}function r(n){return n=n||"",n=n.replace(/(\?|&)sig=[a-z0-9%]+/ig,"$1sig=<REDACTED_SAS_TOKEN_SIG>"),n=n.replace(/(\?|&|\/|%2F)(SourceKey|DestKey)(=|%3A|%3D|\:)([a-z0-9]|\/|%2F|-|_)+(==|%3D%3D)/ig,"$1$2$3<REDACTED_AZCOPY_TOKEN>"),n=n.replace(/(\W|=)([a-z0-9+\/\-_]{86}==)(\W|\s)/ig,"$1<REDACTED_ACCESS_KEY>$3"),n=n.replace(/("|')(bearer )([a-z0-9\-\._~\+\/]{100,})("|')/ig,"$1$2<REDACTED_BEARER_TOKEN>$4"),n.replace(/("|')(ssh-rsa )(AAAA[a-z0-9\-\._~\+\/]{100,})("|')/ig,"$1$2<REDACTED_SSH_KEY>$4")}n.getLogFriendlyMessage=t;n.sanitizeMessage=r;var u;(function(i){var r;(function(i){function it(t){var u="["+n.getEnvironmentValue("extensionName")+"] ",i=[],r=0;return u&&(i[r++]=u),t.level===-1&&(i[r++]="[DEBUG]"),i[r++]=new Date(t.timestamp).toString(tt),t.area&&(i[r++]=t.area),typeof t.code=="number"&&(i[r++]=t.code),t.message&&(i[r++]=t.message),i.push.apply(i,t.args),i}function a(n){return{timestamp:b(),level:2,area:"MsPortalFx/Base/Base.Diagnostics",message:n,code:undefined}}function rt(){var n=[],u,t,l=6e4,h=1,i=1001,f=function(){n=u(n);t&&(o.clearTimeout(t),t=null)},r=function(i){n.push(i);n.length>g?f():t||(t=o.setTimeout((function(){f()}),l))};k&&(r=e);var v=function(n){var t=n.level;if(t===-2){r(n);return}t>=h&&(i--,(i>=0||d)&&(i===0&&(n=a("Maximum errors exceeded")),r(n)));s[t](n)},y=function(t){return n.filter((function(n){return n.level>=t}))},p=function(){n=[]},w=function(n){h=n;i=1001},c=function(n){u=n?function(t){try{return n(t)}catch(i){return[]}}:function(n){return n.length>g&&n.splice(0,2,a("Log entry buffer overflowed")),n}};return c(),{empty:p,flush:f,entries:y,log:v,pushLog:r,init:w,setCallback:c}}function y(n){var t=n||"",i=t.lastIndexOf("/");return i>=0?t.substr(i+1):t}function ut(n){var t=r;return r=n||p,t}function h(n,t){var i=o.console||{},r=e;return[n,t].forEach((function(n){var t=n&&i[n];typeof t=="function"&&(r=function(n){try{var r=it(n);t.apply(i,r)}catch(u){}})})),r}function ft(){var n={};return n[0]=h("log","debug"),n[1]=h("warn"),n[2]=h("error"),n[-1]=!c.debuglog?e:h("debug","log"),n}function et(n,t){var i=[n,t],r=[2,1];i.forEach((function(n,t){var i=r[t],u=s[i];s[i]=function(t){u(t);n(t)}}))}function ot(t){var i=ft(),r=n.isNullOrUndefined(t)?-1:t;[-1,0,1,2].forEach((function(n){s[n]=n>=r?i[n]:e}))}function st(n,t,i,r,u){var f=!0;f=typeof t=="function"?t():!!t;f||(n.debugBreak,n.error(i,r,u))}var b=Date.now,o=window,c=n.trace,s={},e=function(){},k=n.isFeatureEnabled("canmodifyextensions"),tt={hour:"numeric",minute:"numeric",second:"numeric"},d=n.isDevelopmentMode||!!c.diagnostics,g=50,l,u,v,p,r,f,ht,nt,w;(function(n){n[n.Custom=-2]="Custom";n[n.Debug=-1]="Debug";n[n.Verbose=0]="Verbose";n[n.Warning=1]="Warning";n[n.Error=2]="Error"})(l||(l={}));i.LogEntryLevel=l;u=rt();v=e;p=function(n,i,r,f,e,o){var s=t(f)+"",h;n>=1&&r&&(s=[r,s].join(": "));h={timestamp:b(),level:n,area:i,message:s,code:e,args:o&&o.map((function(n){return n instanceof Error?t(n):n}))};u.log(h)};r=p;i.setWriter=ut;i.setupErrorDetection=et;f=(function(){function t(n){this.debugBreak=!!c.assert;this._area=n;this._type=y(n)}return t.writeEntry=function(n,t,i){for(var e,f=[],u=3;u<arguments.length;u++)f[u-3]=arguments[u];e=n>=1?y(t):null;r(n,t,e,i,null,f)},t.writeEntry2=function(n,t,i,u,f){var e=n>=1?y(t):null;r(n,t,e,i,u,f)},t.initialize=function(t,i){var r=!n.isNullOrUndefined(t),f=!n.isNullOrUndefined(i),o=e;r||f?r&&!f?i=t:!r&&f&&(t=-1):(t=i=-1,o=st);u.init(i);ot(t);v=o},t.disable=function(){t.initialize(3,3)},t.prototype.verbose=function(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];r(0,this._area,this._type,n,null,i)},t.prototype.warning=function(n,t){for(var u=[],i=2;i<arguments.length;i++)u[i-2]=arguments[i];r(1,this._area,this._type,n,t,u)},t.prototype.error=function(n,t){for(var u=[],i=2;i<arguments.length;i++)u[i-2]=arguments[i];r(2,this._area,this._type,n,t,u)},t.prototype.debug=function(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];r(-1,this._area,this._type,n,null,i)},t.prototype.custom=function(n,t){for(var u=[],i=2;i<arguments.length;i++)u[i-2]=arguments[i];r(-2,this._area,this._type,n,t,u)},t.prototype.assert=function(n,t,i,r){v(this,n,t,i,r)},t.prototype.writeEntry=function(n,t,i,u){r(n,this._area,this._type,t,i,u)},t})();f.getEntries=u.entries;f.clear=u.empty;f.flush=u.flush;f._setBufferFullCallback=u.setCallback;i.Log=f,(function(n){n.pushLogEntry=u.pushLog})(ht=i.Internal||(i.Internal={}));d?f.initialize():k?f.initialize(1,1):f.initialize(2,1);!n.isIFrame||n.trace.nonsecure&&n.isDevelopmentMode||(nt={alert:undefined,confirm:!1,prompt:null},w=0,n.forEachKey(nt,(function(n,t){w++;o[n]=function(i){var r=a("This call to "+n+" is not allowed in an extension.");return r.args=[w,i,],u.log(r),t}})))})(r=i.Diagnostics||(i.Diagnostics={}))})(u=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function f(n,t,i,u){var o=t.getAttribute("crossorigin"),f=r(n,i,u,o),e=function(){t.removeEventListener("load",e);t.removeEventListener("error",f)};t.addEventListener("load",e);t.addEventListener("error",f)}function r(t,r,f,e){var s=n.internalEnv.bootMessageSignature,o=i.parent===i?function(n){var t=n&&n.data&&n.data.statusCode===0?1:2;MsPortalFx.Base.Diagnostics.Log.writeEntry(t,"ScriptError","Portal Load Error: Error loading script",JSON.stringify(n))}:function(n){i.parent.postMessage(n,MsPortalFx.portalUri)};return function(n){var c=n.message||n.filename||n.lineno||n.colno,i={error:MsPortalFx.getLogFriendlyMessage(n.error),url:r,crossOriginAttribute:e},h={signature:s,kind:t,data:i};f&&(i.moduleName=f);c?(i.details={fileName:n.filename,lineNumber:n.lineno,columnNumber:n.colno,message:n.message},o(h)):u(r,(function(n,t){i.statusCode=n;i.httpMessage=t;o(h)}))}}function u(n,t){try{var i=new XMLHttpRequest;i.onerror=function(){t(i.status,i.responseText,i.statusText)};i.onload=function(){t(i.status,i.status===200?"":i.responseText,i.statusText)};i.open("GET",n,!0);i.send()}catch(r){t(undefined,undefined)}}var i=window;t.getLogFriendlyMessage=MsPortalFx.getLogFriendlyMessage;t.addScriptErrorListener=f;t.getScriptErrorHandler=r;t.getStatusCode=u})(t=n.Diagnostics||(n.Diagnostics={}))})(FxImpl||(FxImpl={})),
(function(n){"use strict";function y(n){var t=a(n);return t[f]=!0,t}function p(n){return n&&n.hasOwnProperty(f)}function w(n){return i(n)}function a(n,i,r){var y=o(n),f=y?n.peek():n,u={},p,b,w,v;if(l&&(p=i||new WeakMap,b=y||Array.isArray(n)||t.isObject(n)),b){if(w=p.get(n),w===s)return c("toSerializableObjectImpl detects a cycle. root: "+t.getObjectDescriptor(n,!1),n)||h;if(w!==undefined)return w;p.set(n,s)}return v=r||function(n){return a(n,p,v)},y&&(u.t=1),Array.isArray(f)?y?(n.splice&&(u.t=2),u.v=v(f)):u.v=f.map(v):o(f)?u.v=v(f):t.isObject(f)?y?u.v=v(f):(u.v={},e(f).forEach((function(n){t.isSerializableProperty(n)&&(u.v[n]=v(f[n]))}))):f instanceof Date?(u.d=!0,u.v=f.valueOf()):u.v=f,b&&p.set(n,u),u}function i(n){var u,r=n.v,o=n.t,s=!1,f;return r===h.v&&(r=undefined),o&&t.isObject(r)&&r.hasOwnProperty("v")&&(u=i(r),s=!0),s||(Array.isArray(r)?u=r.map(i):t.isObject(r)?(u={},e(r).forEach((function(n){t.isSerializableProperty(n)&&(u[n]=i(r[n]))}))):u=n.d?new Date(r):r),f=u,o===1?f=ko.observable(u):o===2&&(f=ko.observableArray(u)),f}function k(n){r.push(n);n.reset()}function d(){r.forEach((function(n){n.reset()}))}function g(n,t,i){var u="Code: '"+n+"'. ",r="";return t?r=t.format.apply(t,i):i&&i.length&&(r="\nParameters: "+[].join.call(i,",")+". "),u+r}function u(n,t){return new MsPortalFx.Errors.Error({message:n,data:t&&t.data,innerErrors:t&&t.innerErrors})}function nt(n,t){return Q.reject(u(n,t))}function tt(n){return t.forEachKey(n,(function(n,t,i){i[n]=function(){var i=[].slice.call(arguments),r=g(n,t,i);throw u(r,t?undefined:{data:{args:i}});}}),{})}function it(n,t){var i=new MsPortalFx.Base.Diagnostics.Log(t);return i.error(new Error("Eval detected.  Trying to eval: "+n)),MsPortalFx.isFeatureEnabled("nojqueryeval")}var t=MsPortalFx,f="#fxSerialized#",v=new t.Base.Diagnostics.Log("FxImpl.Serialization"),e=Object.getOwnPropertyNames,o=ko.isObservable,l,r;n.toSerializableObject=y;n.isSerializedObject=p;n.fromSerializableObject=w;var s={},h={v:t.generateNonSerializableProperty("object_cycle_detected")},c=function(n){v.error(n+"at callstack:"+t.getCurrentCallStack(!0))},b;b=c;l=!!window.WeakMap;r=[];n.registerGlobalState=k;n.resetGlobalState=d;n.createError=u;n.QReject=nt;n.getErrorMap=tt;n.skipEval=it})(FxImpl||(FxImpl={}));
define("Fx/Extension",(function(){return{Decorator:function(){return function(){}}}})),
(function(n){"use strict";function e(n,t,i){try{return new n(t,i)}catch(r){throw new Error("Intl.DateTimeFormat failed. format culture: {0}, options: {1}, Exception: {2}".format(t,JSON.stringify(i),r));}}function u(n){return new r(n,t.Intl)}var f=MsPortalFx,t=window,i=(function(){function n(n,t){var i={};this.getValue=function(r){var o="",u,s;return r&&Object.keys(r).sort().forEach((function(n,t){t&&(o+=",");o+=n+":"+r[n]})),u=i[o],u||(t?(s=f.clone(r),u=e(t,n,s)):u={format:function(n){return n+""}},i[o]=u),u}}return n})(),r=(function(){function n(n,t){var r=n.split(".");this.displayLanguage=r[0];this.formatCulture=r[1]||this.displayLanguage;this.numbers=new i(this.formatCulture,t&&t.NumberFormat);this.dateTimes=new i(this.formatCulture,t&&t.DateTimeFormat);this.supported=function(n){return t?(n=t.DateTimeFormat.supportedLocalesOf(n),t.NumberFormat.supportedLocalesOf(n)):["en-us"]}}return n})(),o;n.IntlContext=r;n.createWithBrowserIntl=u,(function(i){var r,f,e,o;n.onEnvironmentSet((function(n){r=u(n("effectiveLocale")||"en.en-us");i.displayLanguage=r.displayLanguage;i.formatCulture=r.formatCulture}));(function(n){function t(n){return r.numbers.getValue(n)}function i(n){return t().format(n)}n.create=t;n.format=i})(f=i.NumberFormat||(i.NumberFormat={})),(function(n){function u(n){return r.dateTimes.getValue(n)}var t="numeric",i="long";n.shortDatePattern={day:t,month:t,year:t};n.longDatePattern={weekday:i,year:t,month:i,day:t};n.fullDateTimePattern={weekday:i,year:t,month:i,day:t,hour:t,minute:t,second:t};n.monthDayPattern={month:i,day:t};n.shortTimePattern={hour:t,minute:t};n.longTimePattern={hour:t,minute:t,second:t};n.yearMonthPattern={year:t,month:i};n.weekDayPattern={weekday:i};n.create=u})(e=i.DateTimeFormat||(i.DateTimeFormat={})),(function(n){function t(n){return r.supported(n)}n.supportedLocalesOf=t})(o=i.Internal||(i.Internal={}));t.define("MsPortalFx/Globalization",[],(function(){return n.Intl}))})(o=n.Intl||(n.Intl={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){"use strict";function i(){return t||(t=FxImpl.Extension.getRuntime().getSharedSettings())}var t;n.getSharedSettings=i})(t=n.Settings||(n.Settings={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function f(n){return n||""}function i(n,t,i){return f(n).substr(t,i)}function s(n,t,i){return e(n)?o(n,r,4).slice(t,i).join(r):""}var h="?",c="#",l="=",a="&",r="/",u=n.isUndefined,e=n.isUriAbsolute,o=n.split,v=n.ensurePrefix,y=decodeURIComponent,p=encodeURIComponent,w=(function(){function n(n,t){var e=this,r,f;this._qs=[];this._qsMap={};this._leadingSeparator=u(t)?h:t;n&&(r=n,r[0]===this._leadingSeparator&&(r=i(r,1)),f=r.split(a),f.forEach((function(n){if(n){var r=n.indexOf(l),f=r>=0,t=f?i(n,0,r):n,u=f?i(n,r+1):"";t&&(t=y(t),u=y(u),e.setParameter(t,u))}})))}return n.prototype.clear=function(){return this._qs=[],this._qsMap={},this},n.prototype.setParameters=function(n){for(var t in n)n.hasOwnProperty(t)&&this.setParameter(t,n[t]);return this},n.prototype.getParameterIndex=function(n){var t=n.toUpperCase();return this._qsMap[t]},n.prototype.setParameter=function(n,t){var f=n.toUpperCase(),r=this._qsMap[f],i=this._qs;return u(r)?(this._qsMap[f]=i.length,i.push(n),i.push(t)):(i[r]=n,i[r+1]=t),this},n.prototype.getParameter=function(n){var t=this.getParameterIndex(n),i;return u(t)||(i=this._qs[t+1]),i},n.prototype.getParameters=function(){for(var r,i={},t=this._qs,n=0,u=t.length;n<u;n+=2)r=t[n],r!==undefined&&(i[t[n]]=t[n+1]);return i},n.prototype.removeParameters=function(n){return n.forEach(this.removeParameter,this),this},n.prototype.removeParameter=function(n){var t=this.getParameterIndex(n),i;return u(t)||(i=this._qs,i[t]=i[t+1]=undefined),this},n.prototype.toString=function(n){var e,o;n===void 0&&(n=!0);for(var t="",r=this._qs,s=r.length,f=0;f<s;)e=r[f++],o=r[f++],u(e)||(t+=a,t+=p(e),t+=l,t+=p(o));return t&&(t=i(t,1),n&&(t=this._leadingSeparator+t)),t},n})(),b;t.QueryStringBuilder=w;b=(function(){function n(n){var t=f(n),u=t.indexOf(c),o=u>=0,r=o?i(t,0,u):t,l=o?i(t,u):"",e=r.indexOf(h),s=e>=0,a=s?i(r,0,e):r;this._oq=s?i(r,e):"";this.path=a;this.query=new w(this._oq);this.fragment=l}return n.prototype.getOriginalQuery=function(){return this._oq},n.prototype.toString=function(){var t=(this.query||"").toString(),n=f(this.fragment);return n&&(n=v(n,c)),f(this.path)+t+n},n.prototype.getScheme=function(){var n=s(this.path,0,2);return n&&(n+="/"),n},n.prototype.getAuthority=function(){return s(this.path,2,3)},n.prototype.getSchemeAndAuthority=function(){return s(this.path,0,3)},n.prototype.getRelativePath=function(){var n=this.path;return e(n)&&(n=v(o(n,r,4)[3],r)),n},n.prototype.setRelativePath=function(n){var t=this.path,u;e(t)?(n=f(n),n.startsWith(r)&&(n=i(n,1)),u=o(t,r,4),u[3]=n,t=u.join(r)):t=n;this.path=t},n})();t.UriBuilder=b})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";var t,i,r,u,f,e,o,s,h,c;n.Shell="fx",(function(n){n.Hubs="HubsExtension";n.Billing="Microsoft_Azure_Billing";n.AzureExpert="Microsoft_Azure_Expert";n.AzureInsights="Microsoft_Azure_Insights";n.AzureMonitoring="Microsoft_Azure_Monitoring";n.ActiveDirectory="Microsoft_Azure_AD";n.ClassicResources="Microsoft_Azure_ClassicResources";n.Marketplace="Microsoft_Azure_Marketplace";n.Resources="Microsoft_Azure_Resources";n.Support="Microsoft_Azure_Support";n.Websites="WebsitesExtension"})(t=n.ExtensionNames||(n.ExtensionNames={})),(function(n){n.Dashboard="Dashboard";n.ResourceGroups="ResourceGroups";n.BrowseAllBlade="BrowseAll";n.BrowseAllResources="BrowseAllResources";n.BrowseRecentResources="BrowseRecentResources";n.BrowseAllBladeWithType="BrowseAllWithType";n.BrowseServiceBlade="BrowseService";n.BrowseResourceGroupBlade="BrowseResourceGroup";n.BrowseResourceBlade="BrowseResource";n.Gallery="Gallery";n.StoreGallery="StoreGallery";n.Deployments="Deployments";n.ArmExplorer="ArmExplorer";n.WhatsNew="WhatsNew";n.BrowseDynamicResource="BrowseDynamicResource";n.BrowseDynamicAsset="BrowseDynamicAsset";n.SubscriptionDetail="Subscription";n.NonAssetResource="NonAssetResource"})(i=n.AssetNames||(n.AssetNames={})),(function(n){n.Subscriptions="Microsoft.Resources/subscriptions";n.ResourceGroups="Microsoft.Resources/subscriptions/resourcegroups";n.AllResources="Microsoft.Resources/resources";n.RecentResources="Microsoft.Resources/recent"})(r=n.ResourceTypes||(n.ResourceTypes={})),(function(n){var t;(function(n){n.BrowseServicePinnedPart="BrowseServicePart";n.BrowseResourcePinnedPart="BrowseResourcePinnedPart";n.BrowseResourceGroupPinnedPart="BrowseResourceGroupPinnedPart"})(t=n.Hubs||(n.Hubs={}))})(u=n.PartNames||(n.PartNames={})),(function(n){var t,i,r,u;(function(n){n.SubscriptionsBlade="SubscriptionsBlade"})(t=n.Billing||(n.Billing={})),(function(n){n.CreateHubBlade="PlusNewBlade";n.BrowseLinkBlade="BrowseLinkBlade";n.BrowseResourceBlade="BrowseResourceBlade";n.BrowseAllResourcesBlade="BrowseAllResourcesBlade";n.BrowseResourceGroupBlade="BrowseResourceGroupBlade";n.BrowseServiceBlade="BrowseServiceBlade";n.UnauthorizedAssetBlade="UnauthorizedAssetBlade";n.NotFoundAssetBlade="NotFoundAssetBlade";n.UnavailableAssetBlade="UnavailableAssetBlade";n.ResourceMenuBlade="ResourceMenuBlade";n.ResourceProperties="ResourceProperties";n.ResourceGroupMapBlade="ResourceGroupMapBlade"})(i=n.Hubs||(n.Hubs={})),(function(n){n.GalleryFeaturedMenuItemBlade="GalleryFeaturedMenuItemBlade";n.GalleryResultsListBlade="GalleryResultsListBlade";n.LegalTermsV2Blade="PCLegalTermsV2Blade"})(r=n.Marketplace||(n.Marketplace={})),(function(n){n.EventsBrowseBlade="EventsBrowseBlade"})(u=n.AzureMonitoring||(n.AzureMonitoring={}))})(f=n.BladeNames||(n.BladeNames={})),(function(n){n.ViewModel="viewModel";n.PartViewModel="partViewModel"})(e=n.ViewModelTypes||(n.ViewModelTypes={})),(function(n){n.FeatureAdoption="FeatureAdoption";n.FeatureObsolete="FeatureObsolete"})(o=n.Telemetry||(n.Telemetry={})),(function(n){n.RegisterExtension="TelemetrySharing.registerExtension";n.TraceTelemetry="TelemetrySharing.traceTelemetry"})(s=n.TelemetrySharing||(n.TelemetrySharing={})),(function(n){n.HomeMenuItem="home"})(h=n.GalleryMenuItems||(n.GalleryMenuItems={})),(function(n){n.EditScopeId="editScopeId";n.ReferrerInfo="referrerInfo"})(c=n.BladeParameterNames||(n.BladeParameterNames={}))})(t=n.Constants||(n.Constants={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";n.NativeError=Error})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";function p(t){var e=[],r=[],u=t.prototype,f,i;for(r.push(t);v(u)&&(t=(u=v(u)).constructor)!==a;)r.push(t);while(t=r.pop())i=t.TypeName,f&&f===i?i=t.TypeName=n.getFunctionName(t):f=i,e.unshift(i);return e}function w(n,t){var i,u,r,f,e;return n&&(i=n.baseTypes,u=i&&i.length,u&&(r=p(t),f=r&&r.length,f&&(e=u-f,e>=0)))?r.every((function(n){return n===i[e++]})):!1}function e(t,i){if(t){var r=typeof t;r==="string"&&(t={message:t})}else t={};return n.extend2(i,t)}var a=FxImpl.NativeError,k=window,i="MsPortalFx.Errors.",v=Object.getPrototypeOf,d=Object.setPrototypeOf,y="Disposed",r,u,o,s,h,f,b,c,l;t.isInstanceOfErrorType=w;t.getErrorOptions=e;r=(function(t){function i(i){var s=this.constructor,r=this,u=e(i,{errorLevel:2}),o,h,c,l,f;return r=t.call(this,u.message)||this,d(r,s.prototype),o=p(s),r.type=o[0],r.baseTypes=o,r.code=u.code,r.data=u.data,r._errorData=u.errorData,r.extension=n.getEnvironmentValue("extensionName"),r.errorLevel=u.errorLevel,r._sourceErrorLevel=u._sourceErrorLevel,r.handled=u.handled,r.timestamp=u.timestamp||k.fx.getTimestamp(),r.source=u.source,h=r.message,r.message=u.message||h,c=r.name,r.name=u.name||c,l=r.stack,r.stack=u.stack||l||n.getCurrentCallStack(!0),f=u.innerErrors,r.innerErrors=f?Array.isArray(f)?f.slice():[f]:[],r}return __extends(i,t),i.isBaseOf=function(n){return w(n,this)},Object.defineProperty(i.prototype,"errorData",{get:function(){return this._errorData},enumerable:!0,configurable:!0}),i})(a);r.TypeName=i+"Error";t.Error=r;u=(function(n){function t(t,i){var r=n.call(this,{source:t,errorData:i})||this;return r.dataSetName=t,r}return __extends(t,n),t})(r);u.TypeName=i+"DataError";t.DataError=u;o=(function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t})(u);o.TypeName=i+"FetchDataError";t.FetchDataError=o;s=(function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t})(u);s.TypeName=i+"UnauthorizedDataError";t.UnauthorizedDataError=s;h=(function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t})(u);h.TypeName=i+"NotFoundDataError";t.NotFoundDataError=h;f=(function(n){function t(t){var r=this,i=e(t,{errorLevel:0});return n.call(this,i)||this}return __extends(t,n),t})(r);f.TypeName=i+"CanceledError";t.CanceledError=f;b=(function(n){function t(){var t=this;return n.call(this,{message:y,stack:y})||this}return __extends(t,n),t})(f);t.DisposedCanceledError=b;c=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t})(r);c.TypeName=i+"DisposedError";t.DisposedError=c;l=(function(t){function i(i){var r=t.call(this,i)||this;return i&&n.isPlainObject(i)&&n.extend(r,i),r}return __extends(i,t),i})(r);l.TypeName=i+"AjaxError";t.AjaxError=l})(t=n.Errors||(n.Errors={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function e(n,t,i){i.enumerable=!1}var o=n.Base,i=Object,r=i.getOwnPropertyDescriptor,u=i.defineProperty,f=$.noop;t.NotProxied=e;t.ProxyCompatibilityMode=f;FxImpl.onEnvironmentSet((function(n){n("javascriptObjectPropertiesAreEnumerable")&&(t.ProxyCompatibilityMode=function(n){var i=n.prototype,t;for(var f in i)t=r(i,f),t&&t.enumerable&&t.get&&(t.enumerable=!1,u(i,f,t))})}))})(t=n.Composition||(n.Composition={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function u(t){return t&&n.isObject(t)&&typeof t.readyState=="number"&&typeof t.status=="number"&&typeof t.statusText=="string"}function r(n){n["finally"]=n.always;n["catch"]=n.fail}function f(n){return t.Deferred().resolve(n).promise()}function e(n){return t.Deferred().reject(n).promise()}var i=jQuery;t.isXMLHttpRequestLike=u;t.ajax=i.ajax;t.ajax=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return i.ajax.apply(i,t)};t.selector=i;t.Callbacks=i.Callbacks;t.data=i.data;t.removeData=i.removeData,(function(){var n=i.Deferred;i.Deferred=function(t){var i=n(t),u=i.promise;return r(i),i.promise=function(){var n=u.apply(this,arguments);return r(n),n},i}})();t.Deferred=i.Deferred;t.resolve=f;t.reject=e})(t=n.Helpers||(n.Helpers={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function r(n,t){return typeof t=="number"&&(t={palette:t}),i(n,t||null)}var i=n.getStringMapFunc("type","options");t.newImageData=r})(i=t.Image||(t.Image={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.None=0]="None";n[n.White=1]="White";n[n.Black=2]="Black";n[n.Blue=3]="Blue";n[n.Green=4]="Green";n[n.Gray=5]="Gray";n[n.Inherit=99]="Inherit";n[n.Disabled=100]="Disabled"})(t||(t={}));n.ImagePalette=t})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";function a(n,t,i){var r=3,u=!1;return(t.deleteCount>0||t.spliceArguments.length>r)&&(t.spliceArguments[1]=t.startIndex,t.spliceArguments[2]=t.deleteCount,s.apply(i,t.spliceArguments),u=!0),t.deleteCount=0,t.startIndex=t.currentIndex,t.spliceArguments.length=r,u}function v(n,t,i,f){var a,s,h,tt,w,v,d,l,g,p,nt;if(n[u])throw new Error("createArraySplices does not work against edits with indexes that have been adjusted by adjustArrayEdits.");if(a=n.length,i){for(w=0,v=new Array(a),h=0;h<a;h++)s=n[h],r(s.moved)&&s.status===o&&(v[w++]=s.value);v.length=w;tt=f(v)}var y=new Array(a),b=0,k=0,e,it=0;for(h=0;h<a;h++)s=n[h],d=s.status,l=!r(s.moved),d===o?(g=s.index,p=void 0,p=i?l?i[s.moved]:tt[it++]:s.value,e&&(!t||!!e.move===l)&&g===e.start+e.items.length?e.items.push(p):(e={start:g,deleteCount:0,items:[p]},t&&l&&(e.move=l),y[b++]=e),k++):d===c&&(nt=s.index+k,e&&(!t||!!e.move===l)&&nt===e.start+e.items.length?e.deleteCount++:(e={start:nt,deleteCount:1,items:[]},t&&l&&(e.move=l),y[b++]=e),k--);return y.length=b,y}function y(n,t,i,r){for(var u=t?t.split("."):[];n&&u.length;)n=i(n),n&&(n=n[u.shift()]);if(!u.length)return r&&(n=i(n)),n}function p(n,t,i,r){var u=t.subscribe(i,r,"arrayChange");return n&&n.registerForDispose(u),u}function w(n,t,i,r,u,f){var o=!0,e=n.subscribe(t,(function(n){var t=!r;if(r)if(u)try{t=r(n)}catch(s){f(s)}else t=r(n);t&&(o&&(o=!1,i&&i.call(e,n),u&&u(n)),e.dispose())})),s=e.disposeCallback;return e.disposeCallback=function(){f&&f(new MsPortalFx.Errors.CanceledError("fxawait promise disposed"));s.apply(this,arguments)},e}var rt=MsPortalFx.Base,t=ko.utils,b=ko.observable,i=ko.observableArray,e=ko.isObservable,k=MsPortalFx.uncurryThis,r=MsPortalFx.isUndefined,d=jQuery,u="###knockoutArrayEditFixupTokenPropertyName###",s=Function.call,g=Array.prototype,h=k(g.push),nt=undefined,o="added",c="deleted",tt="retained",f="",it={fixedUp:f,fixedUpIndexes:f,createArraySplices:f,mapIntoChanges:f},l=n.getErrorMap(it);t.adjustArrayEdits=function(n,t,i){n[u]&&l.fixedUpIndexes();var f=0,e=n.map((function(n){var u=MsPortalFx.clone(n);switch(n.status){case o:t&&(u.value=r(n.moved)?i(n.value):t[n.moved]);f++;break;case c:u.index+=f;f--;case tt:t&&(u.value=t[n.index])}return u}));return e[u]=u,e};n.quickApplyArrayEdits=function(n,t,i){for(var c=i&&i.spliceFunc||Array.prototype.splice,v=i&&i.inplaceFixup,r={startIndex:0,currentIndex:0,spliceArguments:[n,0,0],deleteCount:0},f=0,l=0,y={added:1,deleted:-1},e=0,p=t.length;e<p;e++){var o=t[e],u=y[o.status]||0,s=o.index;v&&(u<0&&(s+=l),l+=u);r.currentIndex!==s&&(a(n,r,c)&&f++,r.startIndex=r.currentIndex=s);u>0?(r.currentIndex++,h(r.spliceArguments,o.value)):u<0&&r.deleteCount++}return a(n,r,c)&&f++,f};n.createArraySplicesInternal=v;t.createArraySplices=function(n,t,i,r){return v(n,t,i,r?function(n){return n.map(r)}:nt)};t.applyArraySplices=function(n,t,i){var u=[],r;return t.length&&(r=void 0,t.length>1&&e(n)&&(r=n,n=r.peek(),r.valueWillMutate()),t.forEach((function(t){var r,f,e;r=i?t.items.map(i):t.items;f=[t.start,t.deleteCount];e=n.splice.apply(n,f.concat(r));t.move||u.push.apply(u,e)})),r&&r.valueHasMutated()),u};t.twoWayBinding=function(n,t,i,u){var f;n.registerForDispose||(u=i,i=t,t=n,n=null);f=n&&n.createChildLifetime();u=u||function(n){return!r(n)};var s=t(),h=i(),o=!1,e=function(n){if(!o)try{o=!0;this(n)}finally{o=!1}};return u(s)?i(s):u(h)&&t(h),f?(t.subscribe(f,e,i),i.subscribe(f,e,t),f):[t.subscribe(e,i),i.subscribe(e,t),]};t.cleanDescendantNodes=function(n){d(n).contents().toArray().forEach((function(n){ko.cleanNode(n)}))};t.wrap=function(n){return e(n)?n:b(n)};t.wrapArray=function(n){return e(n)?n:i(n)};t.unwrapObservablePath=function(n,t,i){return i===void 0&&(i=!0),y(n,t,ko.unwrap,i)};t.peekObservablePath=function(n,i,r){return r===void 0&&(r=!0),y(n,i,t.peekObservable,r)};n.subscribeArrayEdits=p;ko.subscribable.fn.fxOnce=function(n,t,i){return w(this,n,t,i)};ko.subscribable.fn.fxAwait=function(n,t){var u=this,i,r=Q.promise((function(r,f){i=w(u,n,null,t,r,f)}));return r.subscription=i,r};i.fn.subscribeArrayEdits=function(n,t,i){return p(n,this,t,i)};i.fn.subscribeArrayChanges=function(n,t,i,u){u=u||this;var f=[u,null],e={added:t,deleted:i};return this.subscribeArrayEdits(n,(function(n){for(var i,u,t=0,o=n.length;t<o;t++)i=n[t],r(i.moved)&&(u=e[i.status],u&&(f[1]=i.value,s.apply(u,f)))}))};i.fn.subscribeArrayBulkChanges=function(n,t,i){return i=i||this,this.subscribeArrayEdits(n,(function(n){for(var u,e=[],o=[],s={added:e,deleted:o},f=0,c=n.length;f<c;f++)u=n[f],r(u.moved)&&h(s[u.status],u.value);t.call(i,e,o)}))};i.fn.subscribeArrayAdds=function(n,t,i){return this.subscribeArrayChanges(n,t,null,i)};i.fn.subscribeArrayDeletes=function(n,t,i){return this.subscribeArrayChanges(n,null,t,i)};i.fn.mapInto=function(n,r,u){var o,f;u||(u=i());var s=this,c=n.createChildLifetime(),h=function(n){return ko.ignoreDependencies((function(){var t=c.createChildLifetime(),i=r(t,n);return{item:i,lifetime:t}}))},e=s.peek().map(h);return u(e.map((function(n){return n.item}))),o=n.createChildLifetime(),f=!1,u.subscribe(o,(function(){f||l.mapIntoChanges()})),s.subscribeArrayEdits(o,(function(n){var i=t.createArraySplices(n,!0,e,h),r=t.applyArraySplices(e,i);try{f=!0;t.applyArraySplices(u,i,(function(n){return n.item}))}finally{f=!1;r.forEach((function(n){n.lifetime.dispose()}))}})),u}})(FxImpl||(FxImpl={})),
(function(n){var t;(function(){"use strict";var n=MsPortalFx.Errors.isInstanceOfErrorType,t=(Q.makePromise||Q.QPromise).prototype;t.catchError=function(t,i){return this.catch((function(r){return n(r,t)?i(r):Q.reject(r)}))}})(t=n.QExtensions||(n.QExtensions={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function s(n,t){return new e(n,t)}function r(t,u){var e=Q.defer(),f=e.promise,c=u.cancelation,l=c(),s,o,h;if(l)e.reject(l);else{if(s=new FxImpl.TriggerableLifetimeManager,c.subscribe(s,(function(n){n&&f.isPending()&&e.reject(n)})),f.finally((function(){s.dispose()})).catch(n.noop),o=void 0,Q.isPromiseAlike(t))o=Q(t);else try{o=Q(t())}catch(a){o=Q.reject(a)}o.then((function(n){f.isPending()&&e.resolve(n)}),(function(n){f.isPending()&&e.reject(n)}),(function(n){u.canceled||e.notify(n)}))}return h=f.then,f.then=function(n,t,e){if(t)return h.apply(f,arguments);var o=i(n,u),s=i(e,u);return o||s?r(h.call(f,o,t,s),u):f},f}function h(n,t,i){var o=new u,s=function(){o.cancel(new f(i||"cancelOnDisposed"))},c=!n||n.isDisposed&&n.isDisposed(),e=!c&&n.createChildLifetime(),h;return e?e.registerForDispose(s):s(),h=r(t,o),h.finally((function(){e&&e.dispose()}))}function i(n,t){return n&&function(i){if(!t.canceled)return n(i)}}var f=n.Errors.CanceledError,o,u,e;(function(n){n.fulfilled="fulfilled";n.rejected="rejected"})(o=t.PromiseStates||(t.PromiseStates={}));t.wrapWithCancelablePromise=s;t.makeCancelable=r;t.cancelOnDispose=h;u=(function(){function n(){this.cancelation=ko.observable()}return Object.defineProperty(n.prototype,"canceled",{get:function(){return!!this.cancelation.peek()},enumerable:!0,configurable:!0}),n.prototype.cancel=function(n){var t=this.cancelation,i=t.peek()||n||new f;return t(i),i},n})();t.CancelationToken=u;e=(function(){function n(n,t){if(!n||!t)throw new Error("Argument '"+(n?"cancelationToken":"underlyingPromise")+"' cannot be null or undefined.");this._underlyingPromise=n;this._cancelationToken=t}return n.prototype.then=function(t,r){var u=this._cancelationToken,e=i(t,u),o=i(r,u),f=this._underlyingPromise;return(e||o)&&(f=f.then(e,o)),new n(f,u)},n.prototype.progress=function(t){if(this._underlyingPromise.progress){var u=this._cancelationToken,f=i(t,u),r=this._underlyingPromise;return f&&(r=r.progress(f)),new n(r,u)}return this},n.prototype.finally=function(n){return this.then(n,n)},n.prototype.catch=function(n){return this.then(null,n)},n})()})(i=t.Promises||(t.Promises={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";var h=n.keysLength,c=ko.observable,l=n.uncurryThis,a=Array.prototype,r=l(a.forEach),v=n.shallowCopyFromObject,f=n.disposeDisposable,u="",y={keyNotFound:u,reservedKey:u,noPut:u,noRemove:u,noClear:u},i=FxImpl.getErrorMap(y),e=(function(){function n(){this._modifyMap={};this._dependantMaps=[];this._observable=c({});this._isInModifyBlock=!1;this.latch=this._observable}return n.prototype.put=function(n,t){var i=this;this._validateKey(n);this.modify((function(){i._modifyMap[n]=t;r(i._dependantMaps,(function(i){return i._putNotification(n,t)}))}))},n.prototype.lookup=function(n){return this._modifyMap[n]},n.prototype.modify=function(n){var i=!1,t=[];this._isInModifyBlock||(i=!0,this._isInModifyBlock=!0,this._modifyMap={},v(this._modifyMap,this._observable()),r(this._dependantMaps,(function(n,i){t.push((function(){return n.modify(t[i+1])}))})));try{t.push(n);t[0]()}finally{i&&(this._isInModifyBlock=!1,this._observable(this._modifyMap))}},n.prototype.clear=function(){var n=this;this.modify((function(){n._modifyMap={};r(n._dependantMaps,(function(t){return t._clearNotification(n)}),n)}))},Object.defineProperty(n.prototype,"count",{get:function(){return h(this._observable())},enumerable:!0,configurable:!0}),n.prototype.remove=function(n){var t=this;this._validateKey(n);n in this._observable()||i.keyNotFound(n);this.modify((function(){delete t._modifyMap[n];r(t._dependantMaps,(function(t){return t._removeNotification(n)}))}))},n.prototype.forEach=function(n){this.some((function(){return n.apply(this,arguments),!1}))},n.prototype.some=function(n,t){var r=this._observable(),f=t||this,i,u;for(i in r)if(u=r[i],n.call(f,u,i))return!0;return!1},n.prototype.every=function(n,t){return!this.some((function(){return!n.apply(this,arguments)}),t)},n.prototype.toArray=function(){var n=[];return this.forEach((function(t){n.push(t)})),n},n.prototype.dispose=function(){},n.prototype.subscribe=function(n,t,i,r){return this._observable.subscribe(n,t,i,r)},n.prototype.map=function(n,t){return new o(n,this,t)},n.prototype._addDependantMap=function(n){this._dependantMaps.push(n)},n.prototype._removeDependantMap=function(n){var t=this._dependantMaps.filter((function(t){return t!==n}));t.length!==this._dependantMaps.length&&(this._dependantMaps=t)},n.prototype._putNotification=function(){},n.prototype._removeNotification=function(){},n.prototype._clearNotification=function(){},n.prototype._validateKey=function(n){for(var t in Object.prototype)t===n&&i.reservedKey(n)},n})(),o,s;t.ObservableMap=e;o=(function(n){function t(t,i,r){var u=n.call(this)||this;return u._map=i,u._transform=r,i._addDependantMap(u),t.registerForDispose(u),u.modify((function(){i.forEach((function(t,i){n.prototype.put.call(u,i,u._transform(t,undefined))}))})),u}return __extends(t,n),t.prototype.dispose=function(){this._map._removeDependantMap(this)},t.prototype.put=function(){i.noPut()},t.prototype.remove=function(){i.noRemove()},t.prototype.clear=function(){i.noClear()},t.prototype._putNotification=function(t,i){var r=this.latch()[t],u=this._transform(i,r);r&&r!==u&&f(r);n.prototype.put.call(this,t,u)},t.prototype._removeNotification=function(t){var i=this.latch()[t];f(i);n.prototype.remove.call(this,t)},t.prototype._clearNotification=function(){this.forEach((function(n){return f(n)}));n.prototype.clear.call(this)},t})(e);t.ObservableMapProjection=o;s=(function(n){function t(t){for(var i,u=[],r=1;r<arguments.length;r++)u[r-1]=arguments[r];return i=n.call(this)||this,i._maps=u,t.registerForDispose(i),u.forEach((function(t){t._addDependantMap(i);i.modify((function(){t.forEach((function(t,r){n.prototype.put.call(i,r,t)}))}))})),i}return __extends(t,n),t.prototype.dispose=function(){var n=this;r(this._maps,(function(t){return t._removeDependantMap(n)}))},t.prototype.put=function(){i.noPut()},t.prototype.remove=function(){i.noRemove()},t.prototype.clear=function(){i.noClear()},t.prototype._putNotification=function(t,i){n.prototype.put.call(this,t,i)},t.prototype._removeNotification=function(t){n.prototype.remove.call(this,t)},t.prototype._clearNotification=function(t){var i=this;this._modifyMap={};r(this._maps,(function(r){r!==t&&r.forEach((function(t,r){n.prototype.put.call(i,r,t)}))}));r(this._dependantMaps,(function(n){n._clearNotification(i)}))},t})(e);t.ObservableMapUnion=s})(i=t.Internal||(t.Internal={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";function e(n){for(var i=n.length-1,r=new Array(i),t=0;t<i;t++)r[t]=n[t+1];return r}function o(n){return n.map((function(n){return n&&n()}))}function v(){return u.apply(this,arguments)}function y(){u.apply(this,arguments)}function s(n){var t=n.subscribe;n.subscribe=function(n,i){var r,u;return n&&n.registerForDispose?(arguments.length===2?r=t.call(this,i):(u=e(arguments),r=t.apply(this,u)),n.registerForDispose(r)):r=t.apply(this,arguments),r}}function i(n){return n&&(n.map=p,n.filter=w),n}function p(n,t){if(n&&n.registerForDispose){var r=l.call(this,{mappingWithDisposeCallback:function(i){var r=n.createChildLifetime();return{mappedValue:t(r,i),dispose:function(){r.dispose()}}}});return n.registerForDispose(r),i(r)}return i(l.apply(this,arguments))}function w(n,t){if(n&&n.registerForDispose){var r=a.call(this,t);return n.registerForDispose(r),i(r)}return i(a.apply(this,arguments))}var r=n.computed,b=MsPortalFx.noop,u=n.computed=function(t,i){var u,s,l;if(t&&t.registerForDispose){if(arguments.length===2)u=r.call(this,i);else{var f=e(arguments),h=f[0],c=n.isSubscribable(h)&&[h]||Array.isArray(h)&&h;c&&(f.shift(),s=f[0],typeof s=="function"?f[0]=function(){return n.ignoreDependencies(s,this,o(c))}:(l=s.read,l&&(s.read=function(){return o(c),n.ignoreDependencies(l,this,null)})));u=r.apply(this,f)}t.registerForDispose(u)}else u=r.apply(this,arguments);return u},t,h,c;n.explicitComputed=v;n.reactor=y;t=n.subscribable.fn;s(t);t.subscribeAndRun=function(){var i=this,t=this.subscribe.apply(this,arguments);return n.ignoreDependencies((function(){t.callback(i())})),t};t.fxOnceAndRun=function(n,t,i){i=i||function(n){return!!n};var r=this.fxOnce(n,t,i);return r.callback(this()),r};t.fxAwaitAndRun=function(n,t){t=t||function(n){return!!n};var i=this.fxAwait(n,t);return i.subscription.callback(this()),i};h=n.extenders.trackArrayChanges;n.extenders.trackArrayChanges=function(n){var t=n.subscribe,i=h.apply(this,arguments),r=n.subscribe;return r!==t&&s(n),i};c=n.hasPrototype;n.hasPrototype=function(t,i){return i===u&&(i=r),c.call(n,t,i)};var f=n.observableArray,l=f.fn.map,a=f.fn.filter;i(f.fn)})(ko||(ko={})),
(function(n){"use strict";var i=n.Base.Diagnostics,t=Array.prototype;n.polyfill(Array,{concatUnique:function(t,i){return n.union(this,t,i)},first:function(t,i){var r=n.findIndex(this,t,i);return r<0?null:this[r]},firstIndex:function(t,i){return n.findIndex(this,t,i)},last:function(){if(this.length<1)throw new Error("Cannot get the last element because the array is empty.");return this[this.length-1]},mapMany:function(t){return n.mapMany(this,t)},remove:function(t){return n.remove(this,(function(n){return n===t}))},stableSort:function(t){return n.stableSort(this,t)},toNumberMap:function(n){var t=[];return this.forEach((function(i){t[n(i)]=i})),t},unique:function(t){return n.unique(this,t)},includes:function(n,i){return!!~t.indexOf.call(this,n,i)}})})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";function t(n,t,i){return{limit:n,format:t,factorSeconds:i||0}}function s(n,t){return n.map((function(n){return t[n]}))}function h(){return r}function c(n){r=n||r;r.ampmAbbr=[r.ampm[0][0]||"",r.ampm[1][0]||""];var t=r.standard;t.f=t.D+" "+t.t;t.g=t.d+" "+t.t;t.G=t.d+" "+t.T}function f(t,i){var r=t+"",u=i-r.length;return u>0&&(r=n.repeat("0",u)+r),r}function l(n,t){return(n+"").substr(-t)}function p(n,t){return l(f(n,t),t)}function e(n){for(var t="",i=0,r=n.length;i<r;i++)t+="\\",t+=n[i];return t}function ut(n,t){var i=t.length,u=i===2?p:l,r=h(),c,a,y,o,w,v,k;switch(t[0]){case"y":return c=n.getFullYear(),i===3?f(c,i):i===1?parseInt(l(c,2),10)+"":p(c,i);case"M":return a=n.getMonth(),i===4?e(r.months[a]):i===3?e(r.monthsAbbr[a]):u(a+1,2);case"d":return i===4?e(r.days[n.getDay()]):i===3?e(r.daysAbbr[n.getDay()]):u(n.getDate(),2);case"h":y=!0;case"H":return o=n.getHours(),o=y?(o-1)%12+1:o,u(o,2);case"m":return u(n.getMinutes(),2);case"s":return u(n.getSeconds(),2);case"t":return w=i===2?r.ampm:r.ampmAbbr,w[n.getHours()<12?0:1];case"z":var s=-n.getTimezoneOffset()/60,d=s<0,b="+";return d&&(s=-s,b="-"),v=parseInt(s+"",10),k=(s-v)*60,b+(i===3?f(v,2)+":"+f(k,2):f(v,i));case"/":return r.dateSeparator;case":":return r.timeSeparator}return""}function w(n,t){var o=t?t.getTime():Date.now(),f=o-n.getTime(),i,r,e,u;for(f/=1e3,r=0,e=y.length;r<e;r++)if(i=y[r],f<i.limit)break;return u=i.format,i.factorSeconds&&(u=u.format(Math.round(f/i.factorSeconds))),u}function b(n){n=n||0;var i=this.getDate(),r=this.getDay(),t=n-r;return t>0&&(t-=7),new Date(this.getFullYear(),this.getMonth(),i+t)}function ft(n){var t=b.call(n,r.firstDayOfWeek);return[{limit:86400,format:function(t){return w(t,n)}},{limit:(n.getTime()-t.getTime())/1e3,format:o.create({weekday:"long"}).format},{limit:Number.POSITIVE_INFINITY,format:o.create(o.shortDatePattern).format},]}function d(n,t){var i=k[n||"difference"];return i?i(this,t||new Date):undefined}function nt(){return function(){var f=this,t,i,u;return arguments.length?(t=arguments[0],typeof t=="string"?(t=r.standard[t]||t,t=t.replace(/'([^']*)'/g,g),i=function(t){return n.reverse(ut(f,t))},n.reverse(n.reverse(t).replace(/(y{1,5}|M{1,4}|d{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|t{1,2}|z{1,3}|\/|:)(?!\\)/g,i).replace(/\\(?!\\)/g,""))):(u=o.create(t),u.format(this))):it(this,arguments)}}function tt(t){return(typeof t!="string"&&(t=t+""),n.startsWith(t,"/Date("))?parseInt(t.substr(6),10):rt.call(null,t)}var o=FxImpl.Intl.DateTimeFormat,u=n.Resources.Strings.DatePolyfill,it=n.uncurryThis(Date.prototype.toString),rt=Date.parse,i=u.AgoStrings,a=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],v=["january","february","march","april","may","june","july","august","september","october","november","december"],r={days:s(a,u.Days),daysAbbr:s(a,u.DaysAbbr),months:s(v,u.Months),monthsAbbr:s(v,u.MonthsAbbr),ampm:["AM","PM"],ampmAbbr:[],dateSeparator:"/",timeSeparator:":",standard:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"",G:"",m:"MMMM dd",M:"MMMM dd",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},firstDayOfWeek:0},y=[t(60,i.lessThanAMinute),t(60*1.5,i.aMinute),t(3600,i.minutes,60),t(3600*1.5,i.anHour),t(86400,i.hours,3600),t(86400*1.5,i.aDay),t(604800,i.days,86400),t(604800*1.5,i.aWeek),t(2628e3,i.weeks,604800),t(2628e3*1.5,i.aMonth),t(31536e3,i.months,2628e3),t(31536e3*1.5,i.aYear),t(Number.POSITIVE_INFINITY,i.years,31536e3),],k,g;n.getLocaleValues=h;n.setLocaleValues=c;k={difference:w,timestamp:function(n,t){var u,i,f,r,e;for(t=t||new Date,u=ft(t),f=(t.getTime()-n.getTime())/1e3,r=0,e=u.length;r<e;r++)if(i=u[r],f<i.limit&&i.limit>0)break;return i.format(n)}};n.dateToRelativeString=d;g=n.uncurryThis(e);n.getDateToStringFunc=nt;n.dateParse=tt;n.polyfill(Date,{getFirstDayOfWeek:b,toRelativeString:d,toString:nt(/(y{1,5}|M{1,4}|d{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|t{1,2}|z{1,3}|\/|:)(?!\\)/g)},!0);n.forEachKey({getLocaleValues:h,parse:tt,setLocaleValues:c},(function(n,t){Object.defineProperty(Date,n,{value:t,configurable:!0,enumerable:!1,writable:!0})})),(function(){try{new Date(1e4,1,1).toLocaleString();return}catch(r){}var t=Date.prototype,i=function(n){return function(){try{return n.call(this)}catch(t){return this.toISOString()}}};n.polyfill(Date,{toLocaleDateString:i(t.toLocaleDateString),toLocaleString:i(t.toLocaleString),toLocaleTimeString:i(t.toLocaleTimeString)},!0)})();c(r)})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";function t(n){var t=n.name;if(!t)throw new Error("Extension name must not be empty");return t}function e(n){if(!n)throw new Error("Window id must not be empty");return{name:n}}function o(n,t){return n.name.toLowerCase()===t.name.toLowerCase()}function s(){return t({name:f})}var i=MsPortalFx,r=i.Base,u=r.Constants,f=u.ExtensionNames.Hubs;n.getWindowId=t;n.getDescriptor=e;n.isEqualDescriptor=o;n.getHubsWindowId=s})(t=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){"use strict";var t="MsPortalFx.Internal.Constants.RpcMethods.",i;(function(n){n.hubsGetResourceGroupsFromSubscription="Hubs."+t+"getResourceGroupsFromSubscription";n.getLockValidation="Hubs."+t+"isLocked";n.getSasUriForQueue=t+"AzureStorage.getSasUriForQueue";n.getClientIp=t+"UtilitiesController.getClientIp";n.getHmacSha256=t+"UtilitiesController.getHmacSha256";n.azureResourceManagerDeployTemplate=t+"AzureResourceManager.DeploymentManager.deployTemplate";n.azureResourceManagerPollForDeployment=t+"AzureResourceManager.DeploymentManager.pollForDeployment";n.validateArmTemplate=t+"AzureResourceManager.DeploymentManager.validateTemplate";n.getProvisioningRequest=t+"ParameterCollection.ShellProvisioner.fulfillProvisioningRequest";n.initiateProvisioningRequest=t+"ParameterCollection.ShellProvisioner.initiateProvisioningRequest";MsPortalFx.extendArrayIntoMap(n,["brokerExtensionService","forwardEvent","getUserInfo","getSharedSettings","entryPointDispose","entryPointGetDefinition","entryPointGetBladeDefinition","entryPointGetControlDefinition","entryPointGetPartDefinition","entryPointInitialize","hasPermission","mapAssetIdToResourceId","mapResourceIdToAssetId","mapAssetIdToDynamicSelectionAndIcon","mapResourceIdToDynamicSelectionAndIcon","navigateToDashboard","getAssetTypeInformation","getResourceTypeAssetTypeInformation","getResourceAssetInformation","getResourceGroup","getResource","notifyExtensionStatus","ping","provideExtensionService","updateSubscriptionInfo","updateTenantInfo","getRegisteredResourceProviderInfo","viewModels","getClientNotifications","signalResourcesChanged","getSubscriptionInfo","getAllSubscriptions","getSelectedSubscriptions","getLocationDisplayNames","submitObjectCacheTelemetry","networkTelemetry","addClientNotification","addClientNotifications","showNps","canShowNps","getArmEndpoint","getSettings","logFeatureAdoptionTelemetry","getExtensionGalleryServiceViewModel","getLocalGalleryPackagesEndpoints","getLocationsForCreate","getProvisioningOperation","registerLocalGalleryPackagesEndpoint","submitProvisionerTelemetry","pinParts","getDashboardDeepLink",],null,(function(n){return t+n}));MsPortalFx.extendStringMapIntoMap(n,{getAuthToken:"getAuthenticationToken",registration:"register",shellReadUserSettings:"Shell.readUserSettings",shellWriteUserSettings:"Shell.writeUserSettings"},(function(n){return t+n}))})(i=n.RpcMethods||(n.RpcMethods={}))})(t=n.Constants||(n.Constants={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){"use strict";function l(n,t){return{type:1,data:n,options:t?c:undefined}}var t=MsPortalFx.getStringMapFunc,u,f,i,e,o,s,h,r,c;n.createMenuBladeConfig=t();u=["htmlTemplate","parameterProvider","details","partSize","htmlTemplateInline","partState",];n.createTemplateBladeConfig4=t(u);n.createCommandExternalReference=t("commandType","extension");n.createDefaultBladeAction=t("partName","actionName");n.createHtmlTemplateDefinition=t("file","content");n.createAssetIdSource=t("sourceType","property","providerKey");n.createPermissionBase=t("permissionType");n.createPartSharedStateDefinition=t("property","key");n.createPartStateDefinition=t("inputIdentityProperties","sharedProperties");n.createInputDefinition=t("name","type","optional","isAssetId");n.createNotificationMessage=t("type","status","subStatus","title","message","assetType");n.createServerEvent=t("source","operation");f=["title","description","category","thumbnail","thumbnailStretch","pivotKind","autoConfigSelectablePath","feature",];n.createPartGalleryInfoDefinition2=t(f);n.createPermissionSet=t("requirement","permissions","permissionType");n.createPermission=t("extensionName","assetType","assetId","action","permissionType");n.createReference=t("referenceType","property","part","bladeCommand","partCommand","constantValue");n.createToolbarDefinition=t("source");n.createActionBarDefinition=t("name","actionBarKind","source","viewModel","bindings");i=["name","inputs","optionalInputs","templateKeyInputs","outputs","commandGroup","viewModelName","_internal_viewModelExtensionName","lenses","commandGroupReference","viewModelInputs","bindings","width","locked","editScopeType","assetType","assetIdInputProperty","pinnedPart","pinnable","initialDisplayState","style","actionBar","discardEditsOnSelectionChange","orientation","permissions","pairMasterInfo","toolbar","templateBlade","waitForInputsSet","menuBlade","attributes",];n.createBladeDefinition2=t(i);i.splice(25,1);n.createBladeDefinition3=t(i);i.splice(23,1);n.createBladeDefinition4=t(i);n.createCommandDefinition=t("name","text","viewModel","bindings","details","assetType","assetIdInputProperty","permissions","commandKind","reference");n.createCommandGroupDefinition=t("name","commands");n.createCommandGroupReference=t("name","commands");n.createCommandReference=t("name","bindings");n.createGalleryServiceDefinition=t("serviceViewModel");n.createDashboardProviderDefinition=t("viewModel");n.createLensDefinition=t("name","title","partInstances","isSummary");e=["viewModel","partKind","canUseOldInputVersions","inputs","bindings","htmlTemplate","details","initialSize","initialWidth","initialHeight","supportedSizes","resizeMode","commandGroup","commandGroupReference","editScopeType","viewStateProperties","partState","assetType","assetIdInputProperty","permissions","options","htmlTemplateInline",];n.createPartDefinition5=t(e);o=["partTypeName","extension","version","bindings","initialSize","initialWidth","initialHeight","assetType","extenderViewModel",];n.createPartReferenceDefinition3=t(o);n.createPartInstanceDefinition=t("name","reference","inline","parameterProvider","options","redirectMode");s=["name","inputDefinitions","reference","parameterProvider","viewModel","partKind","canUseOldInputVersions","inputs","bindings","htmlTemplate","details","initialSize","initialWidth","initialHeight","supportedSizes","resizeMode","commandGroup","commandGroupReference","editScopeType","viewStateProperties","partState","assetType","assetIdInputProperty","permissions","options","htmlTemplateInline",];n.createPartTypeDefinition6=t(s);h=["partsCatalog","commandsCatalog","startBoardParts","commandGroups","htmlTemplates","styleSheets","galleryService","dashboardProvider","name","version","hash","schemaVersion","sdkVersion","buildDescription","isPreview",];n.createDefinition3=t(h);r=["blade","bladeExtension","isMultiple","invocationInputArguments","selectablePath","selectableBindings","additionalInputArguments","outputArguments","parameterCollector","name","asSubJourney","pairInfo","openInContextPane","persistentContextPane",];n.createDetailsDefinition=t(r);r.splice(11,1);n.createDetailsDefinition2=t(r);n.createInputBinding=t("property","valuesFrom","optional","isIdentityInput");c={isLogo:!0};n.createSvgImage=l})(t=n.DefinitionBuilder||(n.DefinitionBuilder={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function g(n){var t,u,r;v++;v<200?i.error.apply(i,arguments):(t=((n&&n.message||n)+"").substr(0,50),u=(f[t]=f[t]||0)%1e3,u===0&&(r=[].slice.call(arguments),r[1]=4,r.push("NoisyCount:"+f[t]),i.error.apply(i,r)),f[t]++)}function tt(n){return new t.Log(n.normalize(undefined))}function it(t,i){var r,f=arguments.length>1&&arguments[arguments.length-1],e=typeof f=="object"&&f,o=y?1:0,u,s;return t&&typeof t!="string"?(r=new a,n.extend(r,t),r._sourceErrorLevel=o):(u={message:t,_sourceErrorLevel:o},typeof i=="string"&&(u.stack=i),r=new a(u)),e&&(s=n.extend({},r.data),r.data=n.extend(s,e)),r}function rt(n){var i=new Error(n.reason),t=n.callStack;return i.stack=t.substring(0,c.length)===c?t:c+t,i}function p(){var n=Q.getUnhandledRejections();o?n.forEach((function(n){var t=o.get(n);t===!1?(b(n.inspect().reason),o.set(n,!0)):t!==!0&&o.set(n,!1)})):(n.forEach((function(n){b(n.inspect().reason)})),Q.resetUnhandledRejections());e=r.setTimeout(p,l)}function w(n,t){var i=2,e=n&&n.errorLevel,r,f;return u(e)?t&&(r=t(n),u(r)||(i=r)):i=e,f=n&&n._sourceErrorLevel,u(f)||(i=f),i}function b(n){var t=w(n,(function(n){var t=n&&n.stack;if(!t)return 0})),r=t===2?h:t===1?i.warning:null;r&&r.call(i,n,1)}function k(n){n===void 0&&(n=nt);var t=l;return u(n)||(l=n),d(),p(),t}function d(){typeof e=="number"&&(r.clearTimeout(e),e=null)}var u=n.isNullOrUndefined,s=n.Errors,a=s.Error,r=window,i=new t.Log("MsPortalFx.Base.Diagnostics.ErrorReporter"),v=0,f={},h=g,y=n.isDiagnosticsEnabled,nt=n.isDevelopmentMode?1e3:5e3,c=n.generateNonSerializableProperty("_RPC_Exception_")+"\n",l,e,o=r.WeakMap&&new WeakMap,ut;y&&(Q.longStackSupport=!0,Error.stackTraceLimit=100);t.createLog=tt;t.createIgnoreUnhandledRejectionError=it;t.createRpcException=rt;t.setPromiseErrorCapturePeriod=k;t.clearPromiseErrorCaptureTimeout=d;k(),(function(t){function c(n){u=h;f=n}function e(n){var e={message:n.message,fileName:n.filename,lineNumber:n.lineno,columnNumber:n.colno},r=n.error,o,h;if(r?(o=void 0,s.isInstanceOfErrorType(r,s.Error)?(h=w(r),h===2?o=!0:h===1&&i.warning(r,2,e)):r.stack&&/http/.test(r.stack)&&(o=!0),o&&(u(r,2,e),!t.lastError||t.lastError===r||u(t.lastError,3,e))):!t.lastError||u(t.lastError,3,e),t.lastError=null,f)try{f()}catch(c){}}var o=FxImpl.internalEnv.isShell,u=function(t,i,u){if(o)h(t,i,u);else{var f={signature:FxImpl.internalEnv.bootMessageSignature,kind:2,data:{error:n.getLogFriendlyMessage(t),details:u}};r.parent.postMessage(f,n.portalUri)}},f;t.initialize=c;t.handleError=e;r.addEventListener("error",e)})(ut=t.ErrorReporter||(t.ErrorReporter={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";function o(n,u){r=null;var f=n===i.Part?[i.Blade,i.Part]:[n];f.forEach((function(r){for(var e,o,f=t.length-1;f>=0;f--)if(e=!t[f].hasValue(r),o=r===i.Blade&&n===i.Part?{id:u.bladeId,instanceId:u.bladeInstanceId}:u,t[f].setContextValue(r,o),!e)break}))}function s(n){var f,e;(r=null,f=u(t),f)&&(e=n===i.Part?[i.Blade,i.Part]:[n],e.forEach((function(n){for(var u,r=f.getValue(n),i=t.length-1;i>=0;i--){if(u=t[i].getValue(n),r&&u!==r||t[i].resetContextValue(n),t[i].hasValue(n))break;r=u}})))}function h(n,t){return function(){var i=arguments[0];try{return f.apply(n,arguments),i()}finally{f.apply(t,arguments)}}}function c(n){for(var r,i=t.length-1;i>=0;i--)if(r=t[i].getValue(n),r)return r}function l(){for(var i={},r=!1,n=0,u=t.length;n<u;n++)MsPortalFx.forEachKey(t[n].getValues(),(function(n,t){t&&(r=!0,i[n]=t)}));return r?i:undefined}function a(){return r||(r=new e(u(t)))}function v(n){r=null;t.push(new e(n))}function y(){r=null;t.length>1&&t.pop()}function u(n){if(n&&n.length)return n.last()}var i,f;(function(n){n[n.Part=0]="Part";n[n.Blade=1]="Blade";n[n.CompositionItem=2]="CompositionItem"})(i=n.ContextType||(n.ContextType={}));n.setContextValue=o;n.resetContextValue=s;f=Function.call;n.provideContext=h(o,s);n.getCurrentValue=c;n.getCurrentValues=l;n.getState=a;n.usingState=h(v,y);var e=(function(){function n(n){var u,i,t,f,r;if(this._providers=[],n&&n._providers)for(u=this._providers,i=n._providers,t=0,f=i.length;t<f;t++)r=i[t],u[t]=r?r.slice():[]}return n.prototype.setContextValue=function(n,t){(this._providers[n]||(this._providers[n]=[])).push(t)},n.prototype.resetContextValue=function(n){var t=this._providers[n];t&&t.length&&t.pop()},n.prototype.getValue=function(n){var t=this._providers[n];return t&&u(t)},n.prototype.getValues=function(){for(var t,r={},f=!1,e=this._providers,n=0,o=e.length;n<o;n++)t=u(e[n]),t&&(f=!0,r[i[n]]=t);return f?r:undefined},n.prototype.hasValue=function(n){var t=this._providers[n];return!!(t&&t.length)},n})(),r=null,t=[new e,]})(t=n.TelemetryContext||(n.TelemetryContext={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n){return function(){return f(n)}}var r=FxImpl.TelemetryContext,u=r.ContextType,f=r.getCurrentValue,i=u;n.getPartContext=t(i.Part);n.getBladeContext=t(i.Blade);n.getJourneyContext=function(){return{id:""}};n.getCompositionItemContext=t(i.CompositionItem)})(t=n.Context||(n.Context={}))})(t=n.Telemetry||(n.Telemetry={}))})(t=n.Diagnostics||(n.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function i(n){return function(t){var i,f,r,u;return t&&(f=t[e],f||(r=FxImpl.Po.getOrCreateMetadata(t),u=r,r&&(i=u[n],i||(i=u[n]={})))),i}}function r(n){return function(t,i,r){var u=n(t),f;if(u)return f=arguments.length>2,f?u[i]=r:u[i]}}function s(t){var i=FxImpl.Po.getOrCreateMetadata(t);i&&(i.isNonSerializableCallStack=o&&n.getCurrentCallStack()||"(Unknown callstack)")}var u=n.trace,f=n.generateNonSerializableProperty,e=f("poSpecialType"),o=n.isDevelopmentMode||u.diagnostics;t.dataContainer=i("client");t.disposableDataContainer=i("clientDisposables");t.data=r(t.dataContainer);t.disposableData=r(t.disposableDataContainer);t.markNonSerializable=s})(i=t.ProxiedObservables||(t.ProxiedObservables={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function pr(n){try{return o(n)?n:cf(n)}catch(t){return t}}function k(n,t){var i=st(n),r=i?i.id+":":"";try{return r+tf(n,t)}catch(u){return r+"Failed to get descriptor:"+u}}function yt(n){return typeof n=="string"&&n[0]!==i?"removed:"+n.length:n}function wr(n){var o,h,t,s,e,f,l;if(!n)return n;if(n.length===1)return[yt(n[0])];for(o=[],h=n.length>50?50:n.length,t=0;t<h;t+=2){var c=n[t],r=n[t+1],a=c.split(i),v=parseInt(a[1]),u=void 0;switch(v){case 11:for(s=r.length,u=new Array(s),e=0;e<s;e++)u[e]=yt(r[e]);break;case 3:for(u=[],f=0,l=r.length;f<l;f++)u.push(f%2==0?r[f]:yt(r[f]));break;default:u=yt(r)}o[t]=c;o[t+1]=u}return o}function te(n){return br.some((function(t){return t.test(n)}))}function kr(t,i,r){var f="Po-"+t+": ",u;if(i&&(f+=i),f+="\r\n"+(o(r)?r:pr(r)),r&&(u=typeof r=="string"?r:r.id||r.poId,u)){if(u=u.replace(pf,wf),!it&&t===301&&te(u))return;f+="\r\nThe error occured in below callstack:\r\n"+u}it&&n.Rpc.messageContext&&(f+="\r\n"+n.Rpc.messageContext.callStack);gu.error(f,t)}function ut(n,t,i,r){kr(n,t,i,r)}function f(n,t){kr(n,"Please open a bug to Framework.",t)}function ft(n,t){f(n,"Unsupported: "+t)}function dr(n,t,i){t.raiseRemoteException("Po-"+n+": "+pr(i))}function et(n,t,i){t[i]=n.slice(0)}function gr(n,t,i){var r={id:n};return u.set(t,r),w(t)&&et(t,r,i.aId),i.isPrimary&&i.nc++===gf&&ct((function(){wu(i,!0)})),r}function ie(n){for(var r,i={},t=0,u=n.length;t<u;t++)r=n[t],i[r]=!0;return i}function re(n,t){for(var r,u=ii(t),i=0,f=u.length;i<f;i++)r=u[i],n[r]=t[r];return n}function ue(n){for(var t in n)return t,!1;return!0}function si(n){return typeof n.reject=="function"&&n.promise||typeof n.then=="function"}function fe(n){return n.charCodeAt(0)===95&&!(n.charCodeAt(1)===109&&n.charCodeAt(2)===115&&n.charCodeAt(3)===80&&n.charCodeAt(4)===111&&n.charCodeAt(5)===114&&n.charCodeAt(6)===116&&n.charCodeAt(7)===97&&n.charCodeAt(8)===108&&n.charCodeAt(9)===70&&n.charCodeAt(10)===120)}function b(n,t){var c,f,e,i,l,r,s,h;if(!o(n)&&u.get(n)&&!t.get(n)){t.set(n,!0);c=typeof n;switch(c){case"object":if(w(n))for(i=0;i<n.length;i++)b(n[i],t);else if(si(n))f=g(n),f.getState()!==0&&b(f.getValue(),t);else if(!(n instanceof Date)&&!(n instanceof RegExp)){for(e=ii(n),i=0,l=e.length;i<l;i++)(r=e[i],fe(r))||lt&&(s=lr(n,r),s.get||s.set)||b(n[r],t);h=cr(n);h!==ri&&b(h,t)}break;case"function":er(n)&&b(n.peek(),t)}}}function ee(n,t){return n.map[t]||n.pending[t]}function nu(n,t){t.length>300&&(n.freedIds=t.slice(100,300))}function hi(n,t){return n.freedIds.indexOf(t)>=0}function h(n,t,i,r,u){var e=n.map[t]||n.pending[t];if(e)return e;if(hi(n,t)){oi(207,{id:t,code:i});return}f(i,{id:t,d:n.disposed,v:k(r),s:u&&rf(!0)})}function d(n,t){var i=u.get(n);return i||f(t,k(n)),i}function ci(n,t){var i=u.get(n);return i?i[t]:n}function oe(n,t,i){var r=h(n,t,i);return r?u.get(r).disallowRemoteMutations:!1}function li(n,t,i){for(var r,e,f=t.id,u=0,o=s.length;u<o;u++)r=s[u],e=r.map[f]||r.pending[f],e===n&&i(r)}function ai(n,t,i,r,f){var e=n.gFuncCallId(),k=[],l=h(n,t,222,r,!0),a,o,v,s,d,y,tt,w,b,c;if(l){for(a=u.get(l).disallowRemoteMutations,o=[l],i===nt?v=ar:(v=p(n,i,a,!0),o.push(i)),s=0,d=r.length;s<d;s++)y=r[s],k.push(p(n,y,a,!0)),o.push(y);tt={cid:e,fid:t,t:v,a:k};w=g(f);n.funcCalls[e]={promise:w,objs:o};n.onFunction(tt);b=w.promise;c=!1;b.hold=function(){return c=!0,{dispose:function(){delete n.roots[e];c=!1}}};b.then((function(t){ct((function(){c&&(n.roots[e]=t)}))}))}}function ru(){var i,n,r,t;for(pt=!0;v.length;)for(i=v,v=[],n=0,r=i.length;n<r;n++)t=i[n],t.length===3?li.apply(null,t):ai.apply(null,t);pt=!1}function bt(n){wt=se[n];uu=he[n]}function kt(n,t){var i=n[t];return i===undefined?0:i}function vi(n,t){var i=kt(n,t);return n[t]=++i,i}function fu(n,t,i,r){i.desiredValue=r;try{t(r)}finally{i.desiredValue=undefined}}function ce(n,t,i,r){var c=or(t),u=t.peek(),h=ci(u,n.aId),o,l,f,s,a;if(ur(h,u)||(u.length=0,h.length&&uf.apply(u,h)),c||t.valueWillMutate(),i)for(f=0,s=i.length;f<s;f++){o=i[f];switch(o.k){case 0:l=e(n,o.v);u.splice(o.i,0,l);break;case 1:u.splice(o.i,1)}}else for(u.splice(0,u.length),f=0,s=r.length;f<s;f++)u.push(e(n,r[f]));a=d(u,240);et(u,a,n.aId);c?t(u):t.valueHasMutated()}function le(n,t,i,r,u,f,o){var s=e(n,t.o),h=u+1;if(f===h||i.peek()===s)try{fu(n,i,r,s)}finally{kt(r,o)===u&&(r[o]=f)}else return n.isPrimary?vi(r,o):fu(n,i,r,s),k(s)}function ae(n,t,i){var o=[],f,s,r,u;if(t)for(r=0,u=t.length;r<u;r++)f=t[r],s=f.v,o.push({k:f.k,i:f.i,v:s?k(e(n,s)):null});else if(i)for(r=0,u=i.length;r<u;r++)o.push(k(e(n,i[r])));return o}function eu(n,t){var o=t.o,u=t.a,s=t.fa,f,i,r;if(o)e(n,o);else if(u)for(i=0,r=u.length;i<r;i++)f=u[i],f.k===0&&e(n,f.v);else for(i=0,r=s.length;i<r;i++)e(n,s[i])}function ve(n,t,i,r,u,f,e){var h=n.sId,o=r[h],s=t.sn,c=t.a,l=t.fa,a=s===o;if(f!==u+1&&a)return r[h]=o?o+1:1,r[e]=undefined,ae(n,c,l);if(!a){if(o&&(s===undefined||s<o))return;r[h]=s;r[e]=undefined}ce(n,i,c,l);kt(r,e)===u&&(r[e]=f)}function ou(n,t,i,r){var u=t.id;wt(n,t,(function(n){var c=n.cnId,l=vi(t,c),f,s,e,a,o,v,h;if(n.receivedChanges[u]!==l){if(f={id:u,cn:l},t[n.sId]&&t[c]===1){for(s=[],e=0,a=r.length;e<a;e++)s.push(p(n,r[e],!1));f.fa=s}else i=ci(i,n.aId),o=hf(i,r,{sparse:!0}),o=sf(o),v=o.map((function(i){switch(i.status){case"added":return{k:0,i:i.index,v:p(n,i.value,t.disallowRemoteMutations,!0)};case"deleted":return{k:1,i:i.index};default:ft(106,i.status)}})),f.a=v;h=t[n.sId];h&&(f.sn=h);n.onChange(f);et(r,d(r,235),n.aId)}}))}function su(n,t,i,r){var u=i===r,f=w(i);if(u&&f){ou(n,t,i,r);return}wt(n,t,(function(i){var u=vi(t,i.cnId),f;if(i.receivedChanges[t.id]===u)if(or(n)&&r!==t.desiredValue)u=++t[i.cnId];else return;f={id:t.id,o:p(i,r,t.disallowRemoteMutations,!0),cn:u};i.onChange(f)}))}function ot(n,t){var i=n._poBuffer;n._poBuffer=t;i&&i()}function ye(n){var t=n.deferred,i=n.promise;t&&!i[at]&&fi(i,at,{value:t,enumerable:!1})}function pi(n,t,i,r){wt(n,t,(function(n){var u=n.pId;if(!t[u]&&!n.disposed)n.onPromise({id:t.id,s:i,v:p(n,r,t.disallowRemoteMutations,!0)});t[u]&&t[u]--}))}function hu(n){var t=vt.get(n.promise),i;t||(t={},i=function(n){t.value=n},n.promise.then(i,i),vt.set(n.promise,t))}function cu(n,t){n.promise.progress((function(n){var i=d(t,236);pi(t,i,0,n)}));n.always((function(i){arguments.length===0&&(i=n.getValue());var r=n.getState(),u=d(t,237);switch(r){case 1:pi(t,u,1,i);break;case 2:pi(t,u,2,i);break;default:ft(100,r)}}))}function lu(n,t,i,r,u){switch(t){case 1:n.deferred.resolve(i);break;case 2:n.deferred.reject(i);break;case 0:u||cu(n,r);break;default:ft(101,t)}}function g(n){var t;return typeof n.then=="undefined"&&typeof n.reject=="function"?t=new wi(n,n.promise,7):vf(n)?t=new wi(n[at],n,6):af(n)&&(typeof n.reject=="function"?(t=new bi(n,n.promise(),7),hu(t)):(t=new bi(n[at],n,6),hu(t))),ye(t),t}function pe(n,t){var r=e(n,t.v),o=h(n,t.id,221,r),s,i,u,f;if(o){if(s=g(o),s.getState()!==0){oi(244,t.id);return}if(i=d(o,238),i.disallowRemoteMutations){dr(242,n,{id:i.id,msg:"Remote mutation is not allowed"});return}u=n.pId;i[u]?i[u]++:i[u]=1;f=s.deferred;switch(t.s){case 1:f.resolve(r);break;case 2:f.reject(r);break;case 0:f.notify(r);break;default:ft(101,t.s)}}}function dt(n,t,i,r){if(!n.disposed)n.onPromise({id:r.cid,s:i,v:p(n,t,oe(n,r.fid,220),!0)})}function we(n,t){return function(){var i=rr();return uu(n,t,this,arguments,i),i.promise()}}function be(n,t,i){var r=e(n,t.v),s=n.funcCalls,h=t.id,c=i.promise,u=c.deferred,f=t.s;o(r)||s[h].objs.push(r);switch(f){case 1:u.resolve(r);break;case 2:u.reject(r);break;case 0:u.notify(r);break;default:ft(103,f)}f!==0&&c.promise.finally((function(){ct((function(){delete s[h]}))}))}function y(n,t,i,r){var f=u.get(t),e=n.map,o;if(f){if(f.id?r=f.id:f.id=r,e[r])return r;if(o=n.pending,o[r])return e[r]=t,delete o[r],i.push([r,t]),n.revivedIds[r]=t,r;w(t)&&et(t,f,n.aId)}else gr(r,t,n);return e[r]=t,i.push([r,t]),r}function ke(n,t){var i=lr(t,n);return i.get||i.set}function au(n,t,r,u){for(var o=[],h=ii(t),f,e,s=0,c=h.length;s<c;s++)if(f=h[s],!t.hasOwnProperty||ui(t,f)){if(f.charCodeAt(0)===95&&!(f.charCodeAt(1)===109&&f.charCodeAt(2)===115&&f.charCodeAt(3)===80&&f.charCodeAt(4)===111&&f.charCodeAt(5)===114&&f.charCodeAt(6)===116&&f.charCodeAt(7)===97&&f.charCodeAt(8)===108&&f.charCodeAt(9)===70&&f.charCodeAt(10)===120))continue;if(lt&&ke(f,t))continue;e=t[f];switch(typeof e){case"function":if(f==="constructor")continue;break;case"object":if(!e){o.push(f,e);continue}if(e[rt])continue;break;default:o.push(f,e);continue}o.push(f,i+y(n,e,u,r+"."+f))}return o}function de(n,t,r,u){for(var o=[],f,e=0,s=t.length;e<s;e++){f=t[e];switch(typeof f){case"object":o[e]=f?f[rt]?undefined:i+y(n,f,u,r+"."+e):f;break;case"function":o[e]=i+y(n,f,u,r+"."+e);break;default:o[e]=f}}return o}function lo(n,t,r){var ht=[],vt=n.map,h,nt,b,ct,k,v,p,it,ft,d,ot,et;if(t[rt])return ar;if(h=[],nt=u.get(t),nt&&(b=nt.id,vt[b]))if(nt.disallowRemoteMutations=r,w(t)){if(ct=ci(t,n.aId),ur(t,ct))return[b,undefined];h.push([b,t])}else return[b,undefined];for(k=[],y(n,t,h,n.gId());h.length;){var lt=h.shift(),a=lt[0],e=lt[1],at=typeof e,s=void 0,l=void 0;switch(at){case"function":er(e)?(v=e.peek(),e.splice||e.map?v&&w(v)?(s=ki,l=y(n,v,h,a+"(a)")):v===undefined?s=ge:v===null?s=no:ut(303,"Attempting to serialize an observable array whose value is not an array, null, or undefined.",a):(ff(e)&&(e[n.kId]=e.subscribe(tt)),o(v)?(s=to,l=v):(s=vu,l=y(n,v,h,a+"(o)")))):(s=io,l=undefined);break;case"object":si(e)?(e._underlyingPromise&&ut(304,"Can't serialize CancellablePromise which is not returned from function",a),p=g(e),p.getState()===0&&cu(p,e),it=p.getValue(),ft=void 0,o(it)?(ft=ho,l=it):(ft=co,l=y(n,it,h,a+"()")),s=c[p.type]+ft+p.getState()):e instanceof Date?(s=ro,l=e.getTime()):e instanceof RegExp?(s=uo,d=e.source+i,e.global&&(d+="g"),e.ignoreCase&&(d+="i"),e.multiline&&(d+="m"),l=d):w(e)?(s=fo,l=de(n,e,a,h)):e instanceof Error?(s=gt,ot={message:e.message,name:e.name,stack:e.stack},re(ot,e),l=au(n,ot,a,h)):e instanceof ArrayBuffer?(s=oo,l=e):(et=cr(e),s=et===ri?gt:et===null?eo:gt+i+y(n,et,k,a+"(p)"),l=au(n,e,a,h));break;default:f(105,{pId:n.id,t:at})}r&&(st(e).disallowRemoteMutations=!0);ht.push(a+i+s,l);!h.length&&k.length&&(h=k,k=[])}return ht}function ao(n,t,r,u){for(var e,o,s,h,f=0,c=u.length;f<c;f+=2)e=u[f],o=u[f+1],o&&o[0]===i?(s=o.substring(1),h=n[s]||t[s],h?r[e]=h:(r[e]=s,l.push(e))):r[e]=o}function vo(n,t,r){for(var f,e,o,u=0,s=r.length;u<s;u++)f=r[u],f&&f[0]===i&&(e=f.substring(1),o=n[e]||t[e],o?r[u]=o:(r[u]=e,l.push(""+u)));return r}function yo(n,t){for(var l,r,s,a,c,e=0,v=n.length;e<v;e++){var o=n[e],y=o[0],i=o[1],u=o[2];switch(y){case 11:for(r=0,s=u.length;r<s;r++)l=u[r],i[l]=h(t,i[l],243);et(i,st(i),t.aId);break;case 3:for(r=0,s=u.length;r<s;r++)a=u[r],i[a]=h(t,i[a],232);break;case 0:case 1:c=h(t,u,233);i(c);break;case 7:case 6:c=h(t,u,234);lu(i,o[3],c,y===7?i.deferred:i.promise,!1);break;default:f(107,t.id)}}}function po(n,t){function ft(r){var e,h,u,s;for(d?d[r]&&f(213,r):d={},d[r]=!0,e=r+i,h=e.length,u=o-1;u>=2;u-=2)if(s=t[u],s.substring(0,h)===e){t[o+1]=s;t[o+2]=t[u+1];t[u]=so;t[u+1]=null;o+=4;return}f(214,{id:r,f:hi(n,r)})}for(var e=n.map,a=n.pending,h=[],y,d,o=t.length-1,p,c,r,v,tt,w,b,k;o>0;){var et=t[o-1],u=t[o],s=et.split(i);p=s[0];c=iu[s[1]];r=void 0;switch(c){case 3:v=s[2];v?v==="n"?r=hr(null):(tt=e[v]||a[v],tt?r=hr(tt):(ft(v),y=!0)):r={};y||(ao(e,a,r,u),l.length&&(h.push([3,r,l]),l=[]));break;case 11:r=vo(e,a,u);l.length&&(h.push([11,r,l]),l=[]);break;case 4:r=new Date(u);break;case 5:var it=u.lastIndexOf(i),ot=u.substring(0,it),st=u.substring(it+1);r=new RegExp(ot,st);break;case 10:r=we(n,p);break;case 0:if(r=ef(),w=void 0,s[2])w=u;else if(w=e[u]||a[u],!w){h.push([c,r,u]);break}r(w);break;case 1:if(r=of(),b=void 0,s[2])b=s[2]==="u"?undefined:null;else if(b=e[u]||a[u],!b){h.push([c,r,u]);break}r(b);break;case 7:case 6:var rt=c===6,nt=g(rr()),ut=iu[s[3]];if(r=rt?nt.promise:nt.deferred,k=void 0,s[2])k=u;else if(k=e[u]||a[u],!k){h.push([c,nt,u,ut]);break}lu(nt,ut,k,r,rt);break;case 13:r=u;break;case 14:y=!0;break;default:f(108,{pId:n.id,t:c,d:wr(t)})}y?y=!1:(gr(p,r,n),e[p]=r);o-=2}return h.length&&yo(h,n),e[p]}function p(n,t,i,r){if(o(t))return[t];try{return bt(1),lo(n,t,i,r)}catch(u){ut(241,null,{message:u.message,callstack:u.stack,pId:n.id,data:k(t)},!0);throw u;}finally{bt(0)}}function e(n,t){if(t.length===0)return undefined;if(t.length===1)return t[0];if(t.length===2&&t[1]===undefined&&t[0].indexOf(i)<0)return h(n,t[0],245);try{return bt(2),po(n,t)}finally{bt(0)}}function ni(n,t,i,r){var f=u.get(n),e;f[t]&&(f[t]=undefined);e=n[i];e&&(e.dispose(),n[i]=undefined);f[r]&&(f[r]=undefined)}function yu(n,t){var i=n.roots[t];i||f(206,t);delete n.roots[t];n.isPrimary&&n.dc++}function pu(n){var r=n.roots,u=n.funcCalls,t=nf(),f,e,o,i,s;for(f in r)e=r[f],b(e,t);for(o in u){i=u[o].objs;for(s in i)b(i[s],t)}return t}function wo(n){var f=pu(n),i=n.map,e=n.pending,r=[],t,u;for(t in i)u=i[t],f.get(u)||(r.push(t),e[t]=i[t],delete i[t]);return r}function go(n,t){var e=ie(t),o=n.map,u=n.pending,s=n.aId,h=n.kId,c=n.cnId,f=n.freedIds,i,r;for(i in u)r=u[i],e[i]?(ni(r,s,h,c),f.push(i)):o[i]=r;nu(n,f);ei&&ti.completeTrace(n.gcTk,{disposed:t.length,created:n.nc,immediate:n.gcI||!1});n.pending={};n.revivedIds={};n.nc=0;n.dc=0;n.gcTk=undefined;n.gcLt=fr()}function ns(n,t){for(var i,r,c=pu(n),u=[],s=n.map,e=[],l=n.aId,a=n.kId,v=n.cnId,h=n.freedIds,o=0,y=t.length;o<y;o++)i=t[o],r=s[i],r?c.get(r)||(u.push(i),delete s[i],ni(r,l,a,v),h.push(i)):(u.push(i),e.push(i));return e.length&&f(231,{pId:n.id,objs:e}),nu(n,h),u}function ts(n,t){n.gcIIds=t;n.gcIIdMap=undefined}function is(n,t){var u=n.gcIIds,i,r,f;if(u){if(i=n.gcIIdMap,!i){for(i={},r=0,f=u.length;r<f;r++)i[u[r]]=!0;n.gcIIdMap=i}return i[t]}}function wu(n,t){if(ue(n.pending)){var i=wo(n);if(i.length){n.gcI=t;ei&&(n.gcTk=ti.start({source:"PO",action:"GC",name:n.id}));n.onRelease({iIds:i})}}}function rs(){return yf((function(){var n=s.filter((function(n){return n.isPrimary&&(n.nc>df||n.dc)})),t,i;n.length&&(t=0,i=function(){wu(n[t++]);t<n.length&&ct(i)},i())}),kf)}function us(n,t){return n==="fx"?!0:t==="fx"?!1:n==="HubsExtension"?!0:t==="HubsExtension"?!1:n>t}function gi(n){return function(t){n(t);v.length&&!pt&&ru()}}function fs(n,t,i,r,u,e,o,h,c){var l=new di,a=n+s.length;return l.id=a,l.cnId="c-"+a,l.aId="a-"+a,l.kId="k-"+a,l.pId="p-"+a,l.sId="s-"+a,l.raiseRemoteException=t,l.onChange=gi(i),l.onPromise=gi(r),l.onFunction=gi(u),l.onRelease=e,l.gId=ir(a),l.gFuncCallId=ir(a+"f"),l.rWinId=h,l.gcLt=fr(),o===h&&f(210,o),l.isPrimary=us(o,h),!l.isPrimary||bu||c||(bu=rs()),s.push(l),l}function st(n){return u.get(n)}function es(n){var t=st(n);return t&&t.id}function ku(n){if(!o(n)){var t=u.get(n);return t||(t={id:null},u.set(n,t)),t}}function os(n){var t=ku(n);t&&(t.disallowRemoteMutations=!0)}function ss(){return{compatibilityMode:lt,diagnostics:it,metadataMap:u,jQPromise:vt,managers:s}}var r=MsPortalFx,du=r.Helpers,nr=r.Base,ti=nr.Diagnostics.Telemetry,nt=window,gu=new nr.Diagnostics.Log("Base.ProxiedObservablesV2"),tr=ko.subscribable.fn,ht=tr.notifySubscribers,tt=r.noop,nf=function(){return new r.Map},o=r.isPrimitive,ir=r.getIdGenerator,rr=du.Deferred,hs=r.getObjectConstructorName,tf=r.getObjectDescriptor,rf=r.getCurrentCallStack,cs=r.isNullOrUndefined,ls=r.isEmpty,ur=r.arrayEquals,fr=r.startTimer,i=String.fromCharCode(5),w=Array.isArray,uf=Array.prototype.push,er=ko.isObservable,ff=ko.isPureComputed,or=ko.isComputed,ef=ko.observable,of=ko.observableArray,sr=ko.utils,sf=sr.adjustArrayEdits,hf=sr.compareArrays,cf=JSON.stringify,lf=Math,a=Object,hr=a.create,cr=a.getPrototypeOf,ii=a.keys,ri=a.prototype,ui=r.uncurryThis(ri.hasOwnProperty),lr=a.getOwnPropertyDescriptor,fi=a.defineProperty,as=a.defineProperties,vs=a.preventExtensions,af=Q.isPromiseAlike,vf=Q.isPromise,yf=nt.setInterval,ct=Q.nextTick,ar=[undefined],pf=/^(\w+-\w+-)(\w+-\w+)+(.*)$/,wf="$1?$3",lt=!0,ei=!1,vr=!1,bf=!1,oi,br,v,pt,yi,wi,bi,l,bo,bu,di;n.onEnvironmentSet((function(n){lt=n("enableFastViewModelProxying")!==!1;ei=r.isFeatureEnabled("gctelemetry");vr=r.isFeatureEnabled("detailedgclog");bf=vr||r.isFeatureEnabled("gclog")}));var kf=3e4,df=100,gf=54e3,it=MsPortalFx.isDevelopmentMode||MsPortalFx.trace.diagnostics,ys=MsPortalFx.trace.potrackobservable,at="_deferred",rt="###isPoUndefined###";[$.prototype,$.Event&&$.Event.prototype||{},nt,].forEach((function(n){fi(n,rt,{configurable:!0,value:!0})}));var ne=(function(){function n(n){this._pKey=n}return n.prototype.get=function(n){if(n&&ui(n,this._pKey))return n[this._pKey]},n.prototype.set=function(n,t){fi(n,this._pKey,{configurable:!0,value:t})},n})(),yr=!nt.WeakMap||it?function(n){return new ne(n)}:function(){return new WeakMap},u=yr("###PO2_Metadata###"),vt=yr("###PO2_PromiseValue###"),s=[];oi=tt;br=[/\.activatedItems$/,/^Microsoft_Azure_Insights(.)*/,/\.notFoundMessage$/,];var tu=lf.max(15,3),iu=r.getStringToIntMap(tu),c=r.getIntToStringMap(tu);v=[];pt=!1;var se=[li,function(n,t,i){v.push([n,t,i])},tt,],he=[ai,function(n,t,i,r,u){v.push([n,t,i,r,u])},tt,],wt=li,uu=ai;tr.notifySubscribers=function(n,t){var r=this,i=u.get(this),f;if(i)if(t==="beforeChange")this._capturedOriginalValue===!0&&ut(302,"Detected a cycle subscription. Please avoid pattern:\r\n observable.subscribe(() => { observable(1); }, null, 'beforeChange')",i.id),ot(this),this._originalValue=this.peek(),this._capturedOriginalValue=!0,ht.apply(this,arguments);else if(t===undefined){f=this.peek();this._capturedOriginalValue?(this._capturedOriginalValue=!1,ot(this,(function(){su(r,i,r._originalValue,f)}))):typeof this.push=="function"||n&&typeof n.push=="function"?ot(this,(function(){ou(r,i,f,n)})):ot(this,(function(){su(r,i,f,n)}));try{ht.apply(this,arguments)}finally{ot(this);this._originalValue=undefined}}else ht.apply(this,arguments);else ht.apply(this,arguments)};yi={resolved:1,fulfilled:1,rejected:2,pending:0};wi=(function(){function n(n,t,i){this.deferred=n;this.promise=t;this.type=i}return n.prototype.getState=function(){var n=this.promise.inspect();return yi[n.state]},n.prototype.getValue=function(){var n=this.promise.inspect();switch(n.state){case"pending":return;case"fulfilled":return n.value;case"rejected":return n.reason;default:throw new Error("Unexpected Promise State");}},n.prototype.always=function(n){var t=this;this.promise.finally((function(){n(t.getValue())}))},n})();bi=(function(){function n(n,t,i){this.deferred=n;this.promise=t;this.type=i;this.getState=function(){var n=t.state();return yi[n]}}return n.prototype.getValue=function(){if(this.getState()!==0){var n=vt.get(this.promise);return n||f(203,{m:u.get(this.promise)}),n.value}},n.prototype.always=function(n){var t=this;this.promise.finally((function(){n(t.getValue())}))},n})();var ki=c[1],ge=ki+i+"u",no=ki+i+"n",vu=c[0],to=vu+i+"1",io=c[10],ro=c[4],uo=c[5],gt=c[3],fo=c[11],eo=gt+i+"n",oo=c[13],so=i+14,ho=i+"1"+i,co=i+i;l=[];bo=tt;di=(function(){function n(){this.nc=0;this.dc=0;this.ops=[];this.map={};this.pending={};this.roots={};this.receivedChanges={};this.funcCalls={};this.freedIds=[];this.revivedIds={}}return n.prototype.serialize=function(n,t){var r=p(this,n,t,!1),i;return o(n)||n[rt]||(i=u.get(n),this.roots[i.id]=n),r},n.prototype.proxyBuffer=function(){v.length&&ru()},n.prototype.deserialize=function(n){var t=e(this,n),i;return o(t)||(i=u.get(t),this.roots[i.id]=t),t},n.prototype.applyPromise=function(n){var i=this,t;this.disposed||(t=this.funcCalls[n.id],t?be(this,n,t):pe(this,n))},n.prototype.applyChange=function(n){var l=this,t=n.id,r,h;if(!this.disposed){if(r=ee(this,t),!r){eu(this,n);(this.isPrimary||!is(this,t))&&f(224,{id:t,freed:hi(this,t),data:wr(n.o)});return}if(this.revivedIds[n.id]){eu(this,n);return}var i=u.get(r),e=n.cn,o=this.cnId,s=kt(i,o),c=this.receivedChanges;if(i.disallowRemoteMutations){i[o]=e;dr(216,this,{id:i.id,msg:"Remote mutation is not allowed"});return}c[t]=s+1;try{h=n.o?le(this,n,r,i,s,e,o):ve(this,n,r,i,s,e,o);h&&ut(301,"Detected a simultaneous change.",{id:t,from:this.rWinId,remote:e,local:s,serial:i[this.sId],changes:h},!it)}finally{delete c[t]}}},n.prototype.applyRelease=function(n){var r=this,t,i;if(!this.disposed)if(n.rId)yu(this,n.rId);else if(n.iIds){t=n.iIds;ts(this,t);i=ns(this,t);this.onRelease({cIds:i})}else go(this,n.cIds)},n.prototype.invoke=function(n){var r=this,s=!1,t,u,o,c;if(!this.disposed&&(u=h(this,n.fid,225),u)){o=e(this,n.t);o===undefined&&n.t.length>1&&f(209);c=n.a.map((function(n){return e(r,n)}));try{t=u.apply(o,c);s=!0}finally{if(t&&si(t)){var a=ui(t,"_underlyingPromise")?t._underlyingPromise:t,i=g(a),l=i.getState();l===0?(i.promise.progress((function(t){dt(r,t,0,n)})),i.always((function(t){dt(r,t,i.getState(),n)}))):dt(this,i.getValue(),l,n)}else dt(this,t,s?1:2,n)}}},n.prototype.release=function(n){if(!o(n)){var t=d(n,239);yu(this,t.id);this.onRelease({rId:t.id})}},n.prototype.dispose=function(){var h=this,n,o,t;if(!this.disposed){this.disposed=!0;var i=this.map,r=this.pending,u=this.aId,f=this.kId,e=this.cnId;for(nt.clearInterval(this.gcH),n=0,o=s.length;n<o;n++)if(s[n]===this){s.splice(n,1);break}for(t in i)ni(i[t],u,f,e);for(t in r)ni(r[t],u,f,e);this.gcTk&&ti.completeTrace(this.gcTk,{disposed:-1,created:this.nc});this.map=null;this.pending=null;this.roots=null}},n})();t.ProxiedObjectManager=di;t.createPoMgr=fs;t.getMetadata=st;t.getMetadataId=es;t.getOrCreateMetadata=ku;t.disallowRemoteMutations=os;t.getDiagnostics=ss})(t=n.Po||(n.Po={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";function r(n){return i(n)||n>=0}function u(n,t){return n===t?0:i(n)?-1:i(t)?1:n>t?1:-1}function s(n){var t,i;if(!n)return t=new f,t.major=0,t.minor=0,t.build=0,t.revision=0,t;if(i=o(n),!i)throw new Error("value is not a valid version string.");return i}function o(n){var t;n=n||"";var i=n.split(e),u=null,o=i.length;return o>=2&&(t=new f,t.major=parseInt(i[0]),t.minor=parseInt(i[1]),t.build=o>=3?parseInt(i[2]):null,t.revision=!i[3]?null:parseInt(i[3].match(/\d+/)),r(t.major)&&r(t.minor)&&r(t.build)&&r(t.revision)&&(u=t)),u}var i=n.isNullOrUndefined,e=".",f;t.getVersionFromString=s;t.tryParseVersion=o;f=(function(){function n(){}return n.prototype.toString=function(){var n=[this.major,this.minor,],r=this.build,t;return i(r)||(n.push(r),t=this.revision,i(t)||n.push(t)),n.join(e)},n.prototype.compareTo=function(n){var t=u(this.major,n.major);return t||(t=u(this.minor,n.minor),t||(t=u(this.build,n.build),t||(t=u(this.revision,n.revision)))),t},n})()})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function w(n,i,r){i===void 0&&(i=t.messageContext);var u=i&&i.callStack,f=n||"";return u&&n.indexOf(ft)<0&&(f+="\r\n"+ft+" "+i.srcWindowId+" -> "+i.destWindowId+(r?" ("+r+")":"")+"\r\n"+u),f}function et(n){n&&typeof n.stack=="string"&&(n.stack=w(n.stack))}function ei(n){return w(MsPortalFx.getCurrentCallStack(n))}function yt(n,t){return(typeof n=="string"?n:n&&n.message&&n.message+"")||t+" No error message could be found. Check whether the error was signaled with an Error object."}function b(n,i){var u=t.messageContext;t.messageContext=n;try{return i()}catch(r){et(r);o.ErrorReporter.lastError=r;o.ErrorReporter.handleError({});throw r;}finally{t.messageContext=u}}function ai(n,t){var i=new l(n);t.registerForDispose(i);i.onDispose((function(){r(t)}));return i}function gi(){return g.trackedObjects.getValues().sort((function(n,t){return n.getMetadata().creationTime.getTime()-t.getMetadata().creationTime.getTime()}))}function gt(n){if(n){var t=u.makeArray(n.allowedOrigin);n.allowedOrigin=t}}function nr(n){t.client.start(n)}var u=MsPortalFx,ri=u.Base,o=ri.Diagnostics,k=n.TelemetryContext,tt=n.Po,l,v,ot,st,d,at,vt,pt,wt,dt,nt,y,ni,ti,ii;n.registerGlobalState({reset:function(){t.registrationTimeoutInMs=3e4}});var s=window,a=new o.Log("MsPortalFx/Base/Base.Rpc2"),i="fx",it=n.Constants.RpcMethods.entryPointDispose,r=u.disposeDisposable,p=u.noop,rt=u.uncurryThis,ut=Array.prototype,h=rt(ut.forEach),c=rt(ut.push),ui=ko.observable,f="",fi={noHandler:f,handlerExists:f,badRefCount:f,alreadyStarted:f,routeExists:f,callbackRegistered:f,endpointExists:f,sameWindow:f,badDuration:f,notStarted:f,keyExists:f},e=n.getErrorMap(fi),ft="From RPC:";t.createCallStack=w;t.addRpcStack=et;t.getCurrentCallStack=ei;l=(function(){function n(n){this._disposeCallbacks=[];this._value=n}return n.prototype.getValue=function(){return this._value},n.prototype.dispose=function(){if(this._disposeCallbacks){var n=this.getValue(),t=this._disposeCallbacks;this._disposeCallbacks=null;h(t,(function(t){try{t(n)}catch(i){setTimeout((function(){throw i;}),0)}}))}},n.prototype.onDispose=function(n){this._disposeCallbacks?c(this._disposeCallbacks,n):n(this.getValue())},n})();t.DisposableValue=l;v=(function(){function n(n){this._dic=new u.Map;this._countChangesCallback=n}return n.prototype.getValue=function(n){return this._dic.get(n)},n.prototype.setValue=function(n,t){var i=this._dic,r=this._countChangesCallback,u=i.has(n);i.set(n,t);!u&&r&&r(i.size,!0);t.onDispose((function(){i.delete(n)&&r&&r(i.size,!1)}))},n.prototype.getValues=function(){var n=[];return this._dic.forEach((function(t){n.push(t)})),n},n.prototype.dispose=function(){var n=this.getValues();r(n);this._dic.clear()},n})();ot=(function(n){function t(t){var i=n.call(this,t)||this;i._messageBuffer=[];i._firstReply=function(n){i._messageBuffer=null;i._port.onmessage=i._onmessage;i._onmessage(n)};i._port=t;i.onDispose((function(){i._port.onmessage=null;i._port.close()}));return i}return __extends(t,n),t.prototype.postMessage=function(n,t){this._messageBuffer&&this._messageBuffer.push(n);this._port.postMessage(n,t)},t.prototype.onMessage=function(n){this._onmessage=n;this._port.onmessage=this._firstReply},t.prototype.swapPort=function(n){if(this._port=n,this._messageBuffer?this._messageBuffer.forEach((function(t){return n.postMessage(t)})):this._messageBuffer=[],this._onmessage)this.onMessage(this._onmessage)},t})(l);t.RpcChannel=ot;st=function(n,t){return t.seq-n.seq};d=(function(){function n(n){this._outerList=[];this._innerListIndex=0;this._outerListIndex=0;this._handler=n}return n.prototype._processInnerList=function(n){var e=this,f;if(n&&this._innerList!==n&&(this._innerList=n,this._innerListIndex=0),this._innerList){var r=this._innerList,i=!0,u=void 0,t=void 0;try{for(f=r.length,t=this._innerListIndex;t<f;t++)u=r[t],i=!1,this._handler(u),i=!0}finally{i||(this._innerListIndex=t+1,Q.nextTick((function(){e.addItem()})))}this._innerList=undefined}},n.prototype.addItem=function(n){var t=this._outerList,i;for(n&&(c(t,n),t.sort(st)),this._processInnerList();t.length>0&&t[t.length-1].seq===this._outerListIndex;)i=t.pop(),this._outerListIndex++,this._processInnerList(i.data)},n.prototype.isEmpty=function(){return this._outerList.length===0&&this._innerList===undefined},n})();t.Sequencer=d;var oi=(function(){function n(n){this._isReadyToSend=!1;this._isCallbackScheduled=!1;this._frameBuffer=[];this._sender=n}return n.prototype._schedule=function(){var n=this;this._isReadyToSend&&!this._isCallbackScheduled&&(this._isCallbackScheduled=!0,Q.nextTick((function(){n.flush();n._isCallbackScheduled=!1})))},n.prototype.flush=function(){this._isReadyToSend&&this._frameBuffer.length>0&&(this._sender(this._frameBuffer),this._frameBuffer=[])},n.prototype.send=function(n){this._schedule();c(this._frameBuffer,n)},n.prototype.start=function(){this._isReadyToSend=!0;this._schedule()},n})(),ht=(function(){function n(n){this._handlerMap={};this._listener=n}return n.prototype.handleMessage=function(n,t){var i=this._handlerMap[n.kind+""];i||e.noHandler();i(n.data,t)},n.prototype.registerHandler=function(n,t){var r=this,i=n+"";return this._handlerMap[i]&&e.handlerExists(),this._handlerMap[i]=t,function(t,i){r._listener(t,{kind:n,data:i})}},n})(),si=(function(){function n(n,t,i){var r=this;this._handleMessage=function(n){r._wndMsgHandler&&r._wndMsgHandler.addItem(n.data)};this._isParentRoute=n;this.remoteId=t;this._routedMsgHandler=i}return n.prototype.setChannel=function(n){var i=this,t;if(n){t=function(t){var r={seq:i._senderSequenceIndex++,data:t};n.postMessage(r)};this._senderSequenceIndex=0;this._bufferedSender=new oi(t);this._rpcChannel=n;n.onMessage(this._handleMessage);this._wndMsgHandler=new d(this._routedMsgHandler);this._bufferedSender.start()}else this._bufferedSender.flush(),this._rpcChannel.dispose(),this._rpcChannel=null,this._bufferedSender=null,this._wndMsgHandler=null},n.prototype.send=function(n){this._bufferedSender&&this._bufferedSender.send(n)},n})(),hi=(function(){function n(){this._refCounts=[];this.totalCount=0}return n.prototype.setCount=function(n,t){var i=this.getCount(n);return this._refCounts[n]=t,this.totalCount+=t-i,this.totalCount},n.prototype.getCount=function(n){return this._refCounts[n]||0},n.prototype.clearRefCounts=function(){var n=this.totalCount;return this._refCounts=[],this.totalCount=0,n},n})(),ct=2,ci=(function(){function n(){this._refCounts={};this.totalRefCounts=ui(0)}return n.prototype._getRefCountSet=function(n,t){var i=this._refCounts[n];return!i&&t&&(this._refCounts[n]=i=new hi),i},n.prototype.setRefCount=function(n,t,i){var u=this._getRefCountSet(n,!0),f=u.totalCount,e=u.setCount(t,i),r=e-f;return r?(this.totalRefCounts(this.totalRefCounts.peek()+r),r>0?f?1:0:e?3:ct):4},n.prototype.clearRefCountsFrom=function(n){var t=this._getRefCountSet(n),i;t&&(i=t.clearRefCounts(),this.totalRefCounts(this.totalRefCounts.peek()-i))},n.prototype.getRefCountsFrom=function(n){var t=this._getRefCountSet(n);return t?t.totalCount:0},n})(),li=0,lt=(function(n){function t(){return n.call(this,""+li++)||this}return __extends(t,n),t})(l);t.AcquireWindowResult=lt;at=(function(){function n(n,t,i,r,u){this._windowUnloadTimeoutHandle=0;this.instanceIndex=0;this._windowId=n;this._routeWindowSetter=t;this._clearRefCountsFunction=i;this._sendShutdownMessage=r;this._loadChannelFunction=u}return n.prototype.isAlive=function(){return this._windowUnloadTimeoutHandle?!1:!!this._channel},n.prototype.setWindowLoaded=function(n){var t=this,i;if(n)if(this._channel)this._windowUnloadTimeoutHandle!==0&&(s.clearTimeout(this._windowUnloadTimeoutHandle),this._windowUnloadTimeoutHandle=0);else{i=void 0;try{this._channel=this._loadChannelFunction(this._windowId)}catch(r){i=r}if(this._channel){this._channel.onDispose((function(){t._channel=null;var n=t._windowId;t._sendShutdownMessage(n,void 0);t._routeWindowSetter.setRouteChannel(n,null);s.clearTimeout(t._windowUnloadTimeoutHandle);t._windowUnloadTimeoutHandle=0;t._clearRefCountsFunction({windowId:n,reason:"The window '"+n+"' was garbage collected or forcibly terminated.",callStack:undefined})}));this.instanceIndex++;this._routeWindowSetter.setRouteChannel(this._windowId,this._channel)}else this._clearRefCountsFunction({windowId:this._windowId,reason:yt(i,"Fail to load window '"+this._windowId+"'."),callStack:i&&i.stack})}else!n&&this._channel&&this._windowUnloadTimeoutHandle===0&&(this._windowUnloadTimeoutHandle=s.setTimeout((function(){t.terminate()}),24e4))},n.prototype.terminate=function(){r(this._channel)},n})();vt=(function(){function n(n,t,r,u){var f=this;this._refCounts={};this._knownWindows=[i];this._loadableWindows={};this._clearRefCountsFunction=function(n){h(f._knownWindows,(function(t){var u=n.windowId,i=f.getWindowRefCounts(t,!1),r=f.getWindowRefCounts(u,!1);(r&&r.getRefCountsFrom(t)>0||i&&i.getRefCountsFrom(u)>0)&&f._sendResetMessage(t,n);r&&r.clearRefCountsFrom(t);i&&i.clearRefCountsFrom(u)}))};this._routeWindowSetter=n;this._sendShutdownMessage=r;this._sendResetMessage=t;this._loadChannelFunction=u}return n.prototype._getLoadableWindow=function(n){var t=this._loadableWindows[n];return n===i||t||(t=new at(n,this._routeWindowSetter,this._clearRefCountsFunction,this._sendShutdownMessage,this._loadChannelFunction),this._loadableWindows[n]=t,c(this._knownWindows,n)),t},n.prototype.setRefCount=function(n,t){var r=t.target,u=this.getWindowRefCounts(r,!0).setRefCount(n,t.kind,t.value),i=this._getLoadableWindow(r);return i&&(t.isActivating&&!i.isAlive()||u===ct&&i.isAlive())&&this._refreshWinsLoadedState(),u},n.prototype.getWindowRefCounts=function(n,t){var i=this._refCounts[n];return!i&&t&&(this._refCounts[n]=i=new ci),i},n.prototype.gcWindow=function(n){return this.getWindowRefCounts(n,!0).totalRefCounts()===0?(this._getLoadableWindow(n).terminate(),!0):!1},n.prototype.getInstanceIndex=function(n){return this._loadableWindows[n].instanceIndex},n.prototype._refreshWinsLoadedState=function(){for(var r=this,n={},t=[i],u=Object.keys(this._loadableWindows),f=u,e=function(){var i=[],u=[];h(t,(function(t){n[t]=undefined;h(f,(function(f){var e;r.getWindowRefCounts(f,!0).getRefCountsFrom(t)>0?(n[t]=undefined,e=i):e=u;c(e,f)}))}));t=i;f=u};t.length>0;)e();h(u,(function(t){r._loadableWindows[t].setWindowLoaded(n.hasOwnProperty(t))}))},n})();t.invokeWithContext=b;pt=(function(){function n(n,t,r){var f=this,s,c;this._routedMessageClients=[];this._started=!1;this.routedMessageRelay=new ht(function(n,t){var r=f.localWindowId,e={callStack:u.getCurrentCallStack(),routeInstanceIndex:0,destWindowId:n,srcWindowId:r,data:t},o;r===n?f.routedMessageRelay.handleMessage(t,e):(o=r===i?n:i,f._baseDispatcher.sendMessage(o,e))});this.log=this.routedMessageRelay.registerHandler(3,(function(n){o.Log.writeEntry2(n.level,n.area,n.message,n.code)}));this.raiseRemoteException=this.routedMessageRelay.registerHandler(2,(function(n){var t=o.createRpcException(n);throw t;}));this._baseDispatcher=new wt(r);this.localWindowId=n;s=this.routedMessageRelay.registerHandler(0,(function(n,t){t.srcWindowId===i&&h(f._routedMessageClients,(function(i){i.reset(n,t)}))}));c=this.routedMessageRelay.registerHandler(1,(function(n,t){t.srcWindowId===i&&(h(f._routedMessageClients,(function(n){n.shutdown(t)})),o.Log.flush(),o.Log.disable())}));t&&(this._shellRefCounter=new vt(this._baseDispatcher,s,c,t));this._sendRefCount=this.routedMessageRelay.registerHandler(4,(function(n,t){f._shellRefCounter?f._shellRefCounter.setRefCount(t.srcWindowId,n):e.badRefCount()}))}return n.prototype.handleMessage=function(n,t){var e=this,r=t.remoteId,u=n.srcWindowId,f;if(r!==i&&r!==u){a.error("Message from route to '"+r+"' specifies an invalid window ID '"+u+"'.",1);return}f=n.destWindowId;this.localWindowId===i&&(n.routeInstanceIndex=this._shellRefCounter.getInstanceIndex(u));f===this.localWindowId?b(n,(function(){return e.routedMessageRelay.handleMessage(n.data,n)})):this._baseDispatcher.sendMessage(f,n)},n.prototype.getTotalRefCounts=function(n){return this._shellRefCounter.getWindowRefCounts(n,!0).totalRefCounts},n.prototype.gcWindow=function(n){return this._shellRefCounter.gcWindow(n)},n.prototype.createClient=function(n,t){var i=new n(this,t);return c(this._routedMessageClients,i),i},n.prototype.setRefCount=function(n,t,r,u){var f={target:n,kind:t,isActivating:r,value:u};this._shellRefCounter?this._shellRefCounter.setRefCount(i,f):this._sendRefCount(i,f)},n.prototype.start=function(){this._started&&e.alreadyStarted();this._started=!0;this._baseDispatcher.start(this)},n.prototype.dispose=function(){r(this._baseDispatcher)},n})();wt=(function(){function n(n){if(this._routes={},n.shellChannel){var t=this._registerRoute(!0,i);t.setChannel(n.shellChannel)}}return n.prototype.getRoute=function(n){return this._routes[n]},n.prototype.sendMessage=function(n,t){var i=this._routes[n];if(i)return i.send(t)},n.prototype.start=function(n){this._routedMsgMultiplexer=n},n.prototype.setRouteChannel=function(n,t){var i=this._routes[n];i||(i=this._registerRoute(!1,n));i.setChannel(t)},n.prototype._registerRoute=function(n,t){var r=this,i;return this._routes[t]&&e.routeExists(t),i=new si(n,t,function(n){r._routedMsgMultiplexer.handleMessage(n,i)}),this._routes[t]=i,i},n})();var vi=(function(){function t(n,t){this._name=n;this._options=t}return t.prototype.invoke=function(t,i,f,e){var y=this,a=i.srcWindowId,h=new n.TriggerableLifetimeManager,o=this._options,v=u.makeArray(o.allowedOrigin),p=o.handler||function(){},c=function(n,t){r(h);n=n||{};var u=y._name,s=yt(n,"The RPC call '"+u+"' returned an error."),f=typeof n.stack=="string",o=w(f?n.stack:"",i,u);if(e(s,o),!t){f&&(n.stack=o);throw n;}},s,l;if(v.length&&!v.includes(a))c("The origin window '"+a+"' is not allowed to access the endpoint name '"+this._name+"'.",!0);else try{s=p(t,i,h);l=function(n){(o.onSuccess||f)(ai(n,h),o,f)};Q.isPromiseAlike(s)?Q(s).then((function(n){b(i,(function(){l(n)}))}),c):l(s)}catch(k){c(k)}},t})(),bt=(function(){function n(){this._endPoints={};this._endPointDeferred={}}return n.prototype.registerEndPoint=function(n,t){if(this._endPoints[n])e.endpointExists(n);else{var i=new vi(n,t),r=this._endPointDeferred[n];this._endPoints[n]=i;r&&(r.resolve(i),delete this._endPointDeferred[n])}},n.prototype.invokeEndPoint=function(n,i,r,u,f){var h=this._endPoints[n],e,o;h?h.invoke(i,r,u,f):(a.verbose("Attempted to invoke endpoint '"+n+"' but it is not registered. RPC call has been blocked until endpoint becomes registered."),e=this._endPointDeferred[n],e||(e=Q.defer(),this._endPointDeferred[n]=e),o=s.setTimeout((function(){o=0;var i="Attempted to invoke endpoint '"+n+"' from '"+r.srcWindowId+"' but it is not registered after "+t.registrationTimeoutInMs+"ms. The call was made in:\r\n'"+r.callStack+"'";f(i,"");a.error(i)}),t.registrationTimeoutInMs),e.promise.then((function(n){o&&(clearTimeout(o),b(r,(function(){return n.invoke(i,r,u,f)})))})))},n})(),yi="RPC call to '{0}' in '{1}' took too long.",kt=(function(){function n(n,t,i){this._requestId=0;this._pendingRpcCall=new MsPortalFx.Map;this._destination=n;this._refCounter=t;this._kind=i}return n.prototype.getDestinationId=function(){return this._destination},n.prototype._setRefCount=function(n){this._refCounter.setRefCount(this._destination,this._kind,n,this._pendingRpcCall.size)},n.prototype.getMetadata=function(n){return this._pendingRpcCall.get(n)},n.prototype.create=function(n,t,i){var f=this,e=Q.defer(),o=u.getCurrentCallStack(),r=this._requestId+++"",h=new Date,c;return this._pendingRpcCall.set(r,{destinationId:this._destination,creationCallStack:o,creationTime:h,returnValue:e,returnCallback:i,telemetryContext:k.getState()}),this._setRefCount(!0),c=s.setTimeout((function(){var t=Date.now()-h.getTime();a.warning(yi.format(n,f._destination)+" RequestId: "+r,0,t,o)}),3e5),t(r),e.promise.finally((function(){s.clearTimeout(c);Q.nextTick((function(){f._pendingRpcCall.delete(r);f._setRefCount(!1)}))}))},n.prototype.resolve=function(n,t){var i=this._pendingRpcCall.get(n);i&&(i.returnCallback&&i.returnCallback(t),i.returnValue.resolve(t))},n.prototype.reject=function(n,t,i){var r=this._pendingRpcCall.get(t),u;r&&(u=o.createRpcException({reason:i.reason,callStack:i.callStack||r.creationCallStack}),r.returnCallback&&r.returnCallback(undefined),r.returnValue.reject(u))},n.prototype.handleResetMessage=function(n,t){var r=this,i=[];this._pendingRpcCall.forEach((function(n,t){i.push(t)}));h(i,(function(i){r.reject(t.destWindowId,i,n)}))},n})(),pi=(function(){function n(n,t){var i=this,u;this._targetWndCtx={};u=n.routedMessageRelay;this._clientCtx=n;this._endPoints=t;this._sendInvokeFunc=u.registerHandler(5,(function(n,t){var u=t.srcWindowId,f=n.requestId;i._endPoints.invokeEndPoint(n.name,n.arg,t,(function(n){i._sendRpcResolveFunc(u,{pendingRequestId:f,successValue:n.getValue()});r(n)}),(function(n,t){i._sendRpcRejectFunc(u,{pendingRequestId:f,reason:n,callStack:t})}))}));this._sendRpcResolveFunc=u.registerHandler(6,(function(n,t){i._getWndCtx(t.srcWindowId).resolve(n.pendingRequestId,n.successValue)}));this._sendRpcRejectFunc=u.registerHandler(7,(function(n,t){i._getWndCtx(t.srcWindowId).reject(t.destWindowId,n.pendingRequestId,n)}))}return n.prototype._getWndCtx=function(n){var t=this._targetWndCtx[n];return t||(this._targetWndCtx[n]=t=new kt(n,this._clientCtx,3)),t},n.prototype.invoke=function(n,t,i){var r=this;return this._getWndCtx(t).create(n,(function(u){r._sendInvokeFunc(t,{requestId:u,name:n,arg:i})}))},n.prototype.reset=function(n,t){this._getWndCtx(n.windowId).handleResetMessage(n,t)},n.prototype.shutdown=function(n){this._endPoints.invokeEndPoint(it,undefined,n,p,p)},n})(),wi=0,g=(function(n){function t(i,r){var u=n.call(this,i)||this;return u._metadata=r,u._id=""+wi++,t.trackedObjects.setValue(u._id,u),u}return __extends(t,n),t.prototype.getMetadata=function(){return this._metadata},t})(l);g.trackedObjects=new v;var bi=(function(){function n(t,i,u,f,e,o){var s=this,h;this._producedObjs=new v;this._acquiredObjs=new v(function(n){s._clientCtx&&s._clientCtx.setRefCount(s._remoteWinId,1,!1,n)});this._remoteWinId=u;this._pendingObjRequest=e;this._clientCtx=t;this._sender=o;h=[i,u,f].join("-");this._msgRelay=new ht(function(n,t){var i=s._sender;i&&i(t)});this._poMgr=n.createPoMgr(this,h,i,u);this._sendAcquireObjResp=this._registerSymmetricAct(4,(function(n){var t=n.requestId;if(!s._poMgr.disposed){var i=s._pendingObjRequest.getMetadata(t),u=k.usingState((function(){return s._poMgr.deserialize(n.object)}),i&&i.telemetryContext),r=new g(u,i);r.onDispose((function(){s._poMgr.release(u);s._sendReleaseRootObj(t)}));s._acquiredObjs.setValue(t,r);s._pendingObjRequest.resolve(t,r)}}));this._sendReleaseRootObj=this._registerSymmetricAct(5,(function(n){r(s._producedObjs.getValue(n))}))}return n.createPoMgr=function(n,t,i,r){var f=tt.createPoMgr(t,(function(t){n._clientCtx.raiseRemoteException(r,{reason:t,callStack:u.getCurrentCallStack()})}),n._registerSymmetricAct(0,(function(n){var t=tt.getMetadata(n);k.usingState((function(){f.applyChange(n)}),t)})),n._registerSymmetricAct(1,(function(n){f.applyPromise(n)})),n._registerSymmetricAct(2,(function(n){f.invoke(n)})),n._registerSymmetricAct(3,(function(n){f.applyRelease(n)})),i,r);return f},n.prototype._registerSymmetricAct=function(n,t){var i=this._msgRelay.registerHandler(n,t);return function(n){i(undefined,n)}},n.prototype.handleAcquireObjRequest=function(n,t,i){this._producedObjs.setValue(n,i);var r=this._poMgr;this._sendAcquireObjResp({requestId:n,object:r.serialize(i.getValue(),!t.allowRemoteChanges,!1)});r.proxyBuffer()},n.prototype.handle=function(n){this._msgRelay.handleMessage(n,undefined)},n.prototype.dispose=function(){r(this._acquiredObjs,this._producedObjs,this._poMgr);this._sender=null;this._clientCtx=null},n})(),ki=(function(){function n(n,t,i,r){var u=this;this._routeInstanceIndex=0;this._receiveSequenceIndex=0;this._transmitSequenceIndex=0;this._pendingObjRequests=new kt(n,t,2);this._clientCtx=t;this._sendAcquireObjRequest=i;this._sendConnMsg=function(t){r(n,{sequenceIndex:u._transmitSequenceIndex++,data:t})}}return n.prototype.getRemoteId=function(){return this._pendingObjRequests.getDestinationId()},n.prototype.getPoConnection=function(n,t){var r=t>=0,i;return this._connection&&t!==this._receiveSequenceIndex&&this._routeInstanceIndex!==n.routeInstanceIndex&&(this._resetConnection(),this._sendConnMsg(null)),t!==0&&r||this._connection||(this._routeInstanceIndex=n.routeInstanceIndex,this._connection=new bi(this._clientCtx,n.destWindowId,n.srcWindowId,n.routeInstanceIndex,this._pendingObjRequests,this._sendConnMsg)),t===this._receiveSequenceIndex?(this._receiveSequenceIndex++,i=this._connection):r||(i=this._connection),i},n.prototype.acquireObj=function(n,t,i){var r=this;return this._pendingObjRequests.create(n,(function(i){r._sendAcquireObjRequest(r.getRemoteId(),{requestId:i,name:n,arg:t})}),i)},n.prototype.handleAcquireObjResponseError=function(n,t){this._pendingObjRequests.reject(n,t.pendingRequestId,t)},n.prototype.reset=function(n,t){this._pendingObjRequests.handleResetMessage(n,t);this._resetConnection()},n.prototype._resetConnection=function(){r(this._connection);this._connection=null;this._transmitSequenceIndex=0;this._receiveSequenceIndex=0},n})(),di=(function(){function n(n,t){var i=this,r;this._targetWnds={};r=n.routedMessageRelay;this._endpoints=t;this._routedMsgClientCtx=n;this._sendAcquireObjRequest=r.registerHandler(8,(function(n,t){var r=i._getOrCreatePoConnection(t,-1);i._endpoints.invokeEndPoint(n.name,n.arg,t,(function(t,i){r.handleAcquireObjRequest(n.requestId,i,t)}),(function(r,u){i._sendAcquireObjResponseError(t.srcWindowId,{pendingRequestId:n.requestId,reason:r,callStack:u})}))}));this._sendAcquireObjResponseError=r.registerHandler(9,(function(n,t){i._getWndCtx(t.srcWindowId).handleAcquireObjResponseError(t.destWindowId,n)}));this._sendConnMsg=r.registerHandler(10,(function(n,t){var r=i._getOrCreatePoConnection(t,n.sequenceIndex),u=n.data;r&&u&&r.handle(u)}))}return n.prototype._getWndCtx=function(n){n===this._routedMsgClientCtx.localWindowId&&e.sameWindow();var t=this._targetWnds[n];return t||(this._targetWnds[n]=t=new ki(n,this._routedMsgClientCtx,this._sendAcquireObjRequest,this._sendConnMsg)),t},n.prototype._getOrCreatePoConnection=function(n,t){return this._getWndCtx(n.srcWindowId).getPoConnection(n,t)},n.prototype.acquireObject=function(n,t,i,r){return this._getWndCtx(t).acquireObj(n,i,r)},n.prototype.reset=function(n,t){this._getWndCtx(n.windowId).reset(n,t)},n.prototype.shutdown=function(n){this._endpoints.invokeEndPoint(it,undefined,n,p,p)},n})();t.dumpTrackedObjects=gi;dt=(function(){function n(n){this._targetWindows={};this._routedMsgClientCtx=n}return n.prototype._getWndCtx=function(n){var i=this,t=this._targetWindows[n];return t||(this._targetWindows[n]=t=new v(function(t,r){i._routedMsgClientCtx.setRefCount(n,0,r,t)})),t},n.prototype.acquireWindow=function(n,t){var f=this._getWndCtx(n),u=0,i=new lt;i.onDispose((function(){s.clearTimeout(u)}));return typeof t=="number"&&(t<0&&e.badDuration(),u=s.setTimeout((function(){r(i)}),t*1e3)),f.setValue(i.getValue(),i),i},n.prototype.reset=function(n){var t=n.windowId;r(this._targetWindows[t])},n.prototype.shutdown=function(){},n})();nt=(function(){function n(){this.reset()}return n.prototype.registerRpcEndPoint=function(n,t){gt(t);this._rpcEndPoints.registerEndPoint(n,t)},n.prototype.registerObjectFactory=function(n,t){gt(t);this._poEndPoints.registerEndPoint(n,t)},n.prototype._assertReady=function(){this._dispatcher||e.notStarted()},n.prototype.log=function(n,t){this._assertReady();this._dispatcher.log(n,t)},n.prototype.invokeRpc=function(n,t,i){return this._assertReady(),this._rpcClient.invoke(n,this._windowRedirectMap[t]||t,i)},n.prototype.acquireObject=function(n,t,i,r){return this._assertReady(),this._poClient.acquireObject(n,this._windowRedirectMap[t]||t,i,r)},n.prototype.getTotalRefCountTo=function(n){return this._assertReady(),this._dispatcher.getTotalRefCounts(n)},n.prototype.acquireWindow=function(n,t){return this._assertReady(),this._wndAcquirer.acquireWindow(this._windowRedirectMap[n]||n,t)},n.prototype.gcWindow=function(n){return this._assertReady(),this._dispatcher.gcWindow(n)},n.prototype.start=function(n){this._windowRedirectMap=n.windowRedirectMap||{};var t=new pt(n.originId,n.loadChannelFunction,{shellChannel:n.shellChannel});this._dispatcher=t;this._rpcClient=t.createClient(pi,this._rpcEndPoints);this._poClient=t.createClient(di,this._poEndPoints);this._wndAcquirer=t.createClient(dt,null);t.start()},n.prototype.reset=function(){r(this._dispatcher);this._dispatcher=null;this._rpcEndPoints=new bt;this._poEndPoints=new bt;this._rpcClient=null;this._poClient=null;this._wndAcquirer=null},n})();t.Client=nt;t.client=new nt;n.registerGlobalState(t.client);t.start=nr;y=(function(){function n(n){this.name=n}return n.prototype.getName=function(){return this.name},n})();t.EndPointDefinition=y;ni=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.register=function(n,t,i){n.registerRpcEndPoint(this.name,{allowedOrigin:t,handler:i})},t.prototype.invoke=function(n,t,i){return n.invokeRpc(this.name,t,i)},t})(y);t.ActionEndPointDefinition=ni;ti=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.register=function(n,t,i){n.registerRpcEndPoint(this.name,{allowedOrigin:t,handler:i})},t.prototype.invoke=function(n,t,i){return n.invokeRpc(this.name,t,i)},t})(y);t.FuncEndPointDefinition=ti;ii=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.registerObjectFactory=function(n,t){n.registerObjectFactory(this.name,t)},t.prototype.acquireObject=function(n,t,i,r){return n.acquireObject(this.name,t,i,r)},t})(y);t.ProxiedObjectTypeDefinition=ii;t.load&&a.error("script invoked multiple times. "+u.getCurrentCallStack(!0));t.load=1})(t=n.Rpc||(n.Rpc={}))})(FxImpl||(FxImpl={}));var placeHolder="",errorMessages={contextAmd:placeHolder,contextInit:placeHolder,protoEnum:placeHolder,unknownName:placeHolder,nonIframe:placeHolder,contentNull:placeHolder,entryMissMatch:placeHolder,runtimeAlreadySet:placeHolder},throwError=FxImpl.getErrorMap(errorMessages),FxImpl;(function(n){var t;(function(t){"use strict";function e(n,t){var r=i.getState();return MsPortalFx.require(n).then((function(n){return i.usingState((function(){return t(n)}),r)}))}function s(n,i,r,u,e){f?throwError.runtimeAlreadySet():f=new t.RuntimeImpl(n,i,r,u,e)}function h(){return f}var i=n.TelemetryContext,r=MsPortalFx.Base,u=n.Rpc,c=r.tryParseVersion,f,o;t.extensionStatusEndPoint=new u.ActionEndPointDefinition(n.Constants.RpcMethods.notifyExtensionStatus);o=(function(){function n(){}return n.prototype.setDataContext=function(n){this._factory&&throwError.contextAmd();r.ProxiedObservables.markNonSerializable(n);this._context=n},Object.defineProperty(n.prototype,"dataContext",{get:function(){return this._context},enumerable:!0,configurable:!0}),n.prototype.setDataContextFactory=function(n,t,i){!this._context||throwError.contextInit();i&&(n=i.normalize(n));this._factory=function(){return e(n,t)}},n.prototype.loadViewModelAsync=function(n,t,f){var o=this,s,h,c;return f&&(n=f.normalize(n)),s=function(){return e(n,t)},h=u.messageContext,!this._context&&this._factory?(this._promise||(this._promise=this._factory(),this._promise.then((function(n){r.ProxiedObservables.markNonSerializable(n);o._context=n;o._promise=undefined;o._factory=undefined}))),c=i.getState(),this._promise.then((function(){return i.usingState((function(){return u.invokeWithContext(h,(function(){return s()}))}),c)}))):s()},n})();t.ViewModelAreaFactoriesBase=o;t.setRuntime=s;t.getRuntime=h})(t=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";function a(t){var h=n.getEnvironmentValue("version"),c=n.Base.tryParseVersion(h),f,e,s;if(c||i.error("Incorrect version '"+h+"' was specified in the environment. Please ensure that ApplicationContext.Version in your assembly is correctly set up, and updates correctly for major and minor version changes. For more information see section 'Support stamping the extension version at compile time' in the documentation page https://auxdocs.azurewebsites.net/en-us/documentation/articles/portalfx-creating-extensions"),n.isNullOrUndefined(t)){f="The manifest is null or undefined for the extension at URL: "+r.location.href+".\r\nPossible reasons for the failure:\r\n - You passing an invalid manifest to the MsPortalFx.Extension.register/MsPortalFx.Extension.registerAmd call that is used to register your extension with the portal.\r\n - The manifest file is not included in your project.\r\n - If you are not using AMD, verify that your scipt ordering is correct so that the manifest object is being created before the call to the MsPortalFx.Extension.register/registerAmd."+u;i.error(f);throw new Error(f);}if(n.isNullOrWhiteSpace(t.name)){e="The extension manifest should specify a valid name. This name is obtained from the <Extension> tag in PDL. "+("\r\nExtension URL: "+r.location.href+".")+"\r\nThis name should be a string and cannot be empty or whitespace. It also cannot contain the ! character. \r\nThe recommended naming convention for an extension name is to follow the pattern {Company}_{BrandOrSuite}_{ProductOrComponent} (e.g. Microsoft_Azure_Insights)."+u;i.error(e);throw new Error(e);}if(n.isIFrame||n.isInWebWorker||throwError.nonIframe(t.name),o.getRuntime()){s="The extension with name "+t.name+" has already been registered. Ensure that you are not calling MsPortalFx.Extension.register/MsPortalFx.Extension.registerAmd multiple times within your extension.";i.error(s);throw new Error(s);}}function h(n){return n&&n.toLowerCase()}function v(t,i,r,s,c,l){var v,y;a(t);f.manifestScriptDownloadEnd=e();n.isNullOrWhiteSpace(i)&&throwError.entryMissMatch(t.name,u);r&&(i=r.normalize(i),s&&(s=r.normalize(s)),c&&(c=r.normalize(c)),l&&(l=r.normalize(l)));v=n.getFeatureValue("hideassettypes");v&&(y=h(v).split(","),(t.assetTypes||[]).forEach((function(n){y.indexOf(h(n.name))>=0&&(n.privateBrowse=!0)})));o.setRuntime(t,(function(){return f.initScriptDownloadBegin=e(),n.require(i).then((function(n){return f.initScriptDownloadEnd=e(),n.create()}))}),s,c,l)}function y(t,i,r,u,f){var h=u?n.ViewModels.Part.createSelectableViewModel():undefined,s=u?new n.ViewModels.Internal.SelectableContainerViewModel({selectable:h}):new n.ViewModels.Internal.ContainerViewModel,e,o;return(e=t(i,s,r),e||throwError.contentNull(i),o=function(n){var t=new FxImpl.ViewModels.CompositionViewModel(s,n,r);return f&&f(n),t},Q.isPromiseAlike(e))?e.then(o):o(e)}var o=FxImpl.Extension,r=window,i=new n.Base.Diagnostics.Log("MsPortalFx/Extension/Extension"),u="\r\nMore information at {0}".format("https://auxdocs.azurewebsites.net/en-us/documentation/articles/portalfx-creating-extensions"),s=r.fx,f=s.bootstrapTelemetry,e=s.getTimestamp,c=n.isDevelopmentMode||n.isDiagnosticsEnabled,l=(function(){function t(){["initialize","dispose","getDefinition","getViewModel","getPartViewModel","getObservable"].forEach((function(n){var t=this[n],i;t&&(i=this,this[n]=function(){return t.apply(i,arguments)})}),this)}return t.prototype.initialize=function(){},t.prototype.dispose=function(){c&&n.ViewModels.Internal.verifyAllContainerViewModelDisposed()},t.prototype.getViewModel=function(n,t,i){var r=this.viewModelFactories;if(n in r)return r[n](t,i);throwError.unknownName(n)},t.prototype.getPartViewModel=function(n,t,i){return this.getViewModel(n,t,i)},t})();t.EntryPointBase=l;t.registerAmd=v;t.composeViewModel=y})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function c(t,i){return{type:t.type,data:t.data,options:n.extend2(t.options,{badge:i})}}function l(t,i){return t&&{type:t.type,data:t.data,options:n.extend2(t.options,i)}}function i(n){return function(t){return t?e(n,t):o(n)}}function a(n){return{type:2,data:n}}function u(t,r){n.extendStringMapIntoMap(t,r,i)}function d(n){return e(n,{isLogo:!0})}function r(n){return function(){return s(n)}}var h=n.Services.Image,f=n.Base.Images,e=h.newImageData,o,v,y,p,w,b,k,s,g;t.CustomImageWithBadge=c;t.CustomImageWithOptions=l;o=n.memoize(e);t.ImageUri=a;u(f,{Add:4,AddBoxed:300,AddTeamMember:82,AddTile:318,AllServices:344,Attachment:83,AvatarDefault:84,AvatarUnknown:85,AzurePortal:334,AzureQuickstart:161,Backlog:86,Blank:0,Book:10,Canceled:74,Check:12,Clock:75,Clone:76,Code:94,Collapse:298,Commit:96,Commits:210,Connect:132,Console:333,Copy:338,Customize:296,Delete:17,Disable:98,Disabled:18,Discard:19,Disconnect:133,DoubleChevron:345,Download:174,Edit:99,Ellipsis:176,Error:0,Expand:299,Favorite:101,Feedback:228,File:102,Filter:22,FilterRemove:349,ForPlacementOnly:177,Gear:103,GetMoreLicense:104,GetStarted:105,Go:108,Guide:218,Hamburger:313,HeartPulse:211,History:109,Hyperlink:31,Inactive:110,Insert:339,LaunchCurrent:227,Line:348,Link:35,Lock:37,Log:112,Monitoring:193,Paused:79,Pending:43,Person:44,PersonWithFriend:45,Pin:46,Plus:297,Postpone:114,PowerUp:216,Properties:48,Publish:162,Question:49,Queued:80,Redo:157,Refresh:51,Release:115,Request:116,Retain:117,Save:52,Signout:226,SmileyHappy:319,SmileyNeutral:320,SmileySad:321,Start:61,Stop:62,Subtract:65,Support:219,Swap:66,Tasks:119,Tools:159,TrendDown:204,TrendUp:205,Triangle:120,Unlock:69,Unpin:70,Upload:121,Variables:206,Warning:317,Wrench:160,Info:225,AddAlternate:259,ArrowDown:260,ArrowLeft:261,ArrowRight:262,ArrowUp:263,CaretDown:286,CaretUp:287,Columns:264,Diagnostics:279,FolderAlternate:265,GearAlternate:249,Globe:285,Help:130,InstallVisualStudio:111,Key:266,Mail:267,Message:268,Notifications:342,Query:270,SaveAll:271,Search:248,Settings:341,Star:283,StatusUpsell:343,Tag:239,Tags:246,Tour:275,Undo:272,WebHostingPlan:236});t.GitLogo=i(106);t.GitLogoBox=i(107);t.VisualStudio=i(123);t.VisualStudioLogoBox=i(124),(function(){u(f.Logos,{Bitbucket:181,BitbucketBox:182,Channel9:277,CodePlex:183,CodePlexBox:184,Dropbox:185,DropboxBox:186,ExternalRepositoryBox:212,Git:187,GitBox:188,GitHub:189,GitHubBox:190,Redis:229,StackOverflow:278,VisualStudio:191,VisualStudioBox:192,Microsoft:220,MicrosoftSquares:258})})(v=t.Logos||(t.Logos={})),(function(t){function u(n){return{type:n,options:{customClass:"msportalfx-svg-rotate360"}}}function r(n){return function(){return f(n)}}t.EllipsisSquare=i(295);var f=n.memoize(u);t.Spinner=r(328);t.Loader=r(329)})(y=t.Loading||(t.Loading={})),(function(n){n.Happy=i(242)})(p=t.Emoticon||(t.Emoticon={})),(function(n){u(n,{ActiveDirectory:3,Advisor:336,ApiManagement:301,AppInsights:135,Automation:164,AvailabilitySet:136,Backlog:87,Backup:137,BillingHub:92,BizTalk:302,BlobBlock:231,BlobPage:232,Branch:240,Browser:138,Bug:11,Builds:93,Cache:230,Cdn:303,Certificate:194,Chart:241,ClearDBDatabase:178,Clock:195,CloudService:13,Code:95,Commit:97,Controls:14,ControlsHorizontal:196,Counter:250,Cubes:15,CustomDomain:139,Dashboard:350,Database:16,Discs:244,ErrorIcon:274,EventHub:304,EventGrid:340,Extensions:237,DevConsole:213,Download:20,File:254,Files:255,FolderBlank:23,FolderCube:24,FolderWebsite:25,Ftp:26,Functions:337,Gear:27,Globe:140,GlobeError:222,GlobeSuccess:223,GlobeWarning:224,Grid:28,Guide:29,Heart:30,Image:256,Info:32,InputOutput:197,IpAddress:141,JourneyHub:33,Key:34,LaunchPortal:142,LoadBalancer:143,LoadTest:144,Location:36,Log:145,LogAnalytics:353,LogDiagnostics:146,LogStreaming:147,ManagementPortal:276,Media:38,MediaFile:39,Mobile:40,MobileEngagement:305,Module:198,Monitoring:41,NetworkInterfaceCard:148,Notification:42,OperationalInsights:306,Owl:332,Power:291,Powershell:47,PowerUp:199,ProcessExplorer:251,Preview:294,ProductionReadyDb:214,RemoteApp:307,ResourceDefault:149,ResourceGroup:179,ResourceGroupList:208,ResourceLinked:150,ResourceList:207,ResourceRole:288,Scale:118,Scheduler:308,Search:53,SearchGrid:54,ServerFarm:151,ServiceBus:309,SiteRecovery:310,SqlDatabase:165,SqlDataBaseServer:152,SSD:280,SslCustomDomains:60,Storage:63,StorageAzureFiles:290,StorageContainer:233,StorageQueue:234,Store:64,StorSimple:311,StreamAnalytics:312,Support:200,Table:235,TeamProject:67,TfsVcRepository:153,Toolbox:68,TrafficManager:166,Versions:203,VirtualMachine:71,VirtualNetwork:245,WebEnvironment:167,WebHosting:154,WebJobs:168,Website:72,WebsitePower:73,WebsiteStaging:155,WebSlots:215,WebTest:156,Workflow:180,Workbooks:352});n.PolyTrafficManagerDisabled=i(201);n.PolyTrafficManagerEnabled=i(202);n.TrafficManagerDisabled=i(201);n.TrafficManagerEnabled=i(202);n.QuickStart=i(161)})(w=t.Polychromatic||(t.Polychromatic={})),(function(n){u(f.Shell,{Add:325,ArrowWideUp:282,ArrowWideDown:281,Chevron:158,Close:55,Collapse:56,CornerCheck:221,Customize:314,DefaultBlade:57,Dots:169,ExitPeekMode:347,Filter:326,Fullscreen:323,Gear:247,HeaderDots:273,Maximize:58,Mini:322,Minimize:289,PeekMode:346,Pin:331,Restore:59,Save:330,Share:324,Trash:284,TrashOutline:327,TripleArrow:257});var t;(function(n){n.Home=i(127);n.Alerts=i(129);n.Journey=i(128);n.Browse=i(126);n.Billing=i(92);n.Create=i(125)})(t=n.JumpBar||(n.JumpBar={}))})(b=t.Shell||(t.Shell={})),(function(n){var t,r;n.Canceled=i(89);n.Critical=i(292);n.Disabled=i(90);n.Error=i(6);n.Failed=i(252);n.Info=i(78);n.None=i(7);n.Pending=i(88);n.Stopped=i(131);n.Success=i(8);n.Unknown=i(91);n.Warning=i(9),(function(n){n.Critical=i(293);n.Error=i(170);n.Failed=i(253);n.Info=i(171);n.Stopped=i(175);n.Success=i(172);n.Unknown=i(209);n.Update=i(238);n.Warning=i(173)})(t=n.Outline||(n.Outline={})),(function(n){n.Error=i(315);n.Info=i(316);n.Warning=i(317)})(r=n.Solid||(n.Solid={}))})(k=t.StatusBadge||(t.StatusBadge={}));s=n.memoize(d),(function(n){n.CollectionPartWithRollup=r(1e3);n.CollectionSummary=r(1001);n.DonutChart=r(1002);n.DonutChartPartial=r(1003);n.Extensions=r(1004);n.GridWithMoreData=r(1005);n.Map=r(1006);n.MultiLineChartMultiTrendLine=r(1007);n.MultiScatterChart=r(1008);n.MultiStackedBarChart=r(1009);n.MutliLineChart=r(1010);n.PricingTier=r(1011);n.QuotaGauge=r(1012);n.ResourceMap=r(1013);n.SingleAreaChart=r(1014);n.SingleAreaChartSingleThreshold=r(1015);n.SingleAreaChartSingleTrendline=r(1016);n.SingleBarChartLarge=r(1017);n.SingleBarChartSmall=r(1018);n.SingleLineChart=r(1019);n.SingleScatterChart=r(1020);n.SingleScatterSingleThreshold=r(1021);n.SingleValueGauge=r(1022);n.SplitBarChart=r(1023);n.StackedAreaChart=r(1024)})(g=t.PartGallery||(t.PartGallery={}))})(i=t.Images||(t.Images={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function w(n){if(!n.skipTelemetry&&p){var t=i.startTimer();return function(i,u){var f={timestamp:Date.now(),source:o,action:"XHRPerformance",actionModifier:u?r.ActionModifier.Cancel:r.ActionModifier.Complete,duration:t(),data:{requestId:(n.headers||{})[e.headerNames_requestId],status:i.status,dataSent:a(n.data),dataReceived:a(i.responseText)},optional:!0};s(f)}}return i.noop}function b(){c.registerRpcEndPoint(h,{allowedOrigin:null,handler:function(n,t){r.trace({extension:t.srcWindowId,timestamp:n.timestamp,source:n.source,action:n.action,actionModifier:n.actionModifier,name:n.name,duration:n.duration,data:n.data,optional:n.optional})}})}function l(){var r=u.performance,f=u.navigator,n=f.connection,t,i;if(!r||!f.hardwareConcurrency||!n)return{};if(t=r.getEntries&&r.getEntries(),i=t&&t[0],!i||typeof i.transferSize!="number")return{};var e={},o={},s={},h={},c=0,l=0;return t.forEach((function(n){if(n.entryType==="resource"){var t=n.initiatorType;s[t]=(s[t]||0)+n.transferSize;h[t]=(h[t]||0)+n.duration;c+=n.transferSize||0;l+=n.duration;n.transferSize?o[t]=(o[t]||0)+1:e[t]=(e[t]||0)+1}})),{connection:{rtt:n.rtt,downlink:n.downlink,effectiveType:n.effectiveType,saveData:n.saveData},uncachedCountByGroup:o,homepageTransferBytes:i.transferSize,cachedCountByGroup:e,totalBytesTransferred:c,totalTransferMsByGroup:h,totalBytesTransferredByGroup:s,hardwareConcurrency:f.hardwareConcurrency,totalTransferMs:l}}function k(){var t=u.fx.bootstrapTelemetry,n=u.performance.timing;return n?(t.timing=n.toJSON&&n.toJSON(),t.appCacheLoad=n.domainLookupStart-n.fetchStart,t.requestTime=n.responseStart-n.requestStart,t.pageLoad=n.loadEventEnd-n.responseEnd,t.navigationTime=f("DocumentNavigationTime",n.fetchStart,n.responseEnd),t.ttfb=f("DocumentFirstByte",n.fetchStart,n.responseStart),t.domainLookup=f("DocumentDnsTime",n.domainLookupStart,n.domainLookupEnd),t.unloadTime=f("DocumentUnloadTime",n.navigationStart,n.fetchStart),t.performanceTelemetry=l(),t):t}function f(n,t,i,u){u=u||{};var f=i-t;return s({timestamp:Math.round(i+(u.epochAdjustment||0)),source:o,action:n,name:u.name,actionModifier:r.ActionModifier.Complete,duration:f,data:d(u.data)}),f}function s(t){n.internalEnv.isShell?r.trace(t):c.invokeRpc(h,v,t)}function a(n){return n?typeof n=="string"?n.length:-1:0}function d(n){for(var t={},r=n;r&&r!==Object;)Object.keys(r).forEach((function(n){t[n]=undefined})),r=Object.getPrototypeOf(r);return i.forEachKey(t,(function(i){var r=n[i];typeof r!="function"?t[i]=r:delete t[i]})),t}function g(){s({source:o,action:"CdnIndex",name:MsPortalFx.getEnvironmentValue("cdn").index+""})}var i=MsPortalFx,e=i.Base,v=e.Constants.Shell,y=e.Diagnostics,r=y.Telemetry,h=n.Constants.RpcMethods.networkTelemetry,c=n.Rpc.client,o="Framework",u=window,p=i.isFeatureEnabled("networktelemetry");t.createTelemetry=w;t.registerTelemetrySubmissionHandler=b;t.getPerformanceTelemetry=l;t.getBootstrapTelemetry=k;t.traceCdnIndex=g})(t=n.NetDiagnostics||(n.NetDiagnostics={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";var i=n,y=i.Helpers,s=FxImpl.Extension,r=i.Base,g=FxImpl.Rpc,nt=FxImpl.NetDiagnostics,f=y.Deferred,h=i.isUndefined,tt=i.isEmpty,it=window,rt="Accept-Language",ut="Authorization",c="Cache-Control",l="x-ms-cache-tag",ft="x-ms-effective-locale",et="x-ms-extension-flags",p="x-ms-failure-cause",ot="x-ms-force-login",w="x-ms-path-query",st="Pragma",ht="x-ms-client-session-id",ct="x-ms-version",lt="x-ms-version-mismatch",at="x-ms-command-name",vt=256,e=12,yt=n.isInWebWorker,wt;t.headerNames_requestId="x-ms-client-request-id";var a=ko,pt=i.getUniqueIdGenerator(),b="Failed to get authorization token.",o=new r.Diagnostics.Log("MsPortalFx/Base/Base.Net"),k=y.ajax,d=k,v=n.memoize((function(n){return n<=1?1:v(n-1)+v(n-2)})),u;(function(u){function fi(n){var i=n.getResponseHeader(st),t;return i===dt?!0:(t=n.getResponseHeader(c)||"",t.includes(dt))?!0:!1}function ni(n){return!n||kt[n.status]||gt[n.status]&&!n.getResponseHeader("x-ms-request-id")}function bt(n,t,i){h(n[t])&&(n[t]=i)}function ei(){s.getRuntime().disableAjaxServerVersionCheck()}function oi(n,t){wt.log=n||wt.log;wt.sanitize=t||wt.sanitize}function si(n){d=n||k}function ti(n,t){n.contentType="application/json";n.data=JSON.stringify(t);n.type="POST"}function ii(i){return function(){var r=i.headers||{};return{uri:wt.sanitize(i.uri),type:i.type||"GET",pathAndQuery:wt.sanitize(r[w]),requestId:r[t.headerNames_requestId],failureCause:wt.sanitize(r[p]),sessionId:n.sessionId,commandName:i.setTelemetryHeader}}}function ri(t,i,r){var u=t();return n.isObject(i)&&n.extend(u,{status:i.status,statusText:i.statusText}),r&&n.extend(u,r),u}function ci(n,t){return y.postJSON(n,t)}function li(n){return y.ajax(n)}function ai(n){return y.ajaxExtended(n)}function vi(){return y}function yi(n){return y.cachedAjax(n)}function pi(n){n&&delete n[l]}function wi(t,i){return n.extend(t,{"x-ms-cache-tag":i})}function bi(t){y.initialize(n.getEnvironmentValue("version"),t,n.getEnvironmentValue("featuresFromConfig"),n.getEnvironmentValue("effectiveLocale"),FxImpl.internalEnv.traceAjaxErrors)}function ki(){y.skipVersionCheck=!0}var wt={log:function(){return o.error.apply(o,arguments)},sanitize:n.noop},ui=3,dt="no-cache",kt={},gt,hi,y;kt[0]=kt[500]=kt[502]=kt[503]=kt[504]=!0;gt={};gt[401]=gt[403]=!0;u.isRetryable=ni;u.disableAjaxServerVersionCheck=ei;u.setAjaxLogFunc=oi;u.setAjaxFunc=si,(function(u){function ei(n){return r.Net2.ajaxExtended(n)}function k(n,t,i,r){var s=!i||n.duration()<=i,f,o;if(n.retryCount&&s&&(!r||r()))return n.retryCount--,f=n.retryDuration&&n.retryDuration()||0,o=v(e-n.retryCount)*u.environment.betweenRetry,Q.delay(Math.max(o-f,0)).then(t)}function oi(){y=new u.AjaxCaller}var st,kt,gt;FxImpl.registerGlobalState({reset:function(){u.environment={betweenRetry:400}}});u.ajaxExtended=ei;st=(function(){function u(){this.ajaxStatus=a.observable({code:0});this.unknownErrorStatusCode=0;this._initialized=f();this._unknownErrors=0;this._backgroundTask=f()}return u.prototype.initialize=function(t,u,f,e,o){var a=this,h,c,l;this._version=t;h=this._backgroundTask;h.resolve(),(function(){var n=h;it.setInterval((function(){n===h&&h.resolve()}),6e4)})();c=e&&e.split(".");this._acceptLanguage=c&&c[0];this._effectiveLocale=e;this._getAuthTokenFunc=u;tt(f)||(this._extensionFlags=JSON.stringify(f));this._traceErrors=o;l=n.getEnvironmentValue("extensionName");l!==r.Constants.ExtensionNames.Hubs&&l!==r.Constants.Shell||n.getEnvironmentValue("useFxArmEndpoint")?s.getArmEndpointEndPoint.invoke(g.client,s.getHubsWindowId(),undefined).then((function(n){a._armEndpoint=i.ensureSuffix(n,"/");a._initialized.resolve()})):this._initialized.resolve()},u.prototype.postJSON=function(n,t){return ti(n,t),this.ajax(n)},u.prototype.oldPostJSON=function(n,t){return ti(n,t),this.oldAjax(n)},u.prototype.ajaxExtended=function(n){return this._executeAjaxCall(n,new kt(ii(n)))},u.prototype.oldAjax=function(n){return this._executeAjaxCall(n,new gt)},u.prototype.ajax=function(n){var t=this.ajaxExtended(n),i=t.inspect();return i.state==="fulfilled"?Q(i.value.content):t.then((function(n){return n.content}))},u.prototype._executeAjaxCall=function(u,o){var s=this,y=u.url=u.originalUri=u.uri||u.url,l={retryCount:u.performRetry?e:0,duration:i.startTimer()},v=!n.isUriAbsolute(y),a,d,p;return(yt&&!u.useFxArmEndpoint&&(y=u.uri=u.url=u.originalUri=FxImpl.ensureAbsoluteUri(y)),u.useRawAjax)?(this._worker(u,l,o),o.getPromise()):(h(u.setAuthorizationHeader)&&(u.setAuthorizationHeader=v),h(u.checkVersion)&&(u.checkVersion=v,this.skipVersionCheck&&(u.checkVersion=!1)),a=this._initialized.promise(),u.isBackgroundTask&&(a=a.then(this._backgroundTask.promise),d=this._backgroundTask=f(),o.finally((function(){d.resolve()}))),p=function(){var a=function(f){var h=u.headers||{},b,a,p,y,e,k,d;if(u.setAuthorizationHeader&&(h[ut]=f),u.setTelemetryHeader&&(h[at]=u.setTelemetryHeader.substring(0,vt)),b=s._acceptLanguage,b&&bt(h,rt,b),a=v&&s._armEndpoint,u.useFxArmEndpoint&&!a){p="There was no ARM endpoint to use with the useFxArmEndpoint setting or the URL was not a relative URL";o.reject(p,{error:p,responseText:p},null);return}u.invokeApi?(e=void 0,y=void 0,u.useFxArmEndpoint&&a?(y=encodeURI(u.url),e=new r.UriBuilder(a+i.trimStart(u.invokeApi,"/"))):n.getEnvironmentValue("useFxArmEndpoint")&&a?(e=new r.UriBuilder(a),y=encodeURI(u.url),e.setRelativePath(u.invokeApi)):(e=new r.UriBuilder(u.url),e.query.clear(),y=encodeURI(e.getRelativePath()+e.getOriginalQuery()),e.setRelativePath(u.invokeApi)),bt(h,c,dt),u.uri=u.url=e.toString(),bt(h,w,y)):u.useFxArmEndpoint&&a&&(e=new r.UriBuilder(a+i.trimStart(u.url,"/")),u.uri=u.url=e.toString());bt(h,ft,s._effectiveLocale);bt(h,t.headerNames_requestId,pt());bt(h,ht,n.sessionId);k=s._version;u.checkVersion&&k&&bt(h,ct,k);d=s._extensionFlags;v&&d&&(h[et]=d);u.headers=h;s._worker(u,l,o)},f,h;u.setAuthorizationHeader?(f={},u.setAuthorizationHeader!==!0&&(f={resourceName:u.setAuthorizationHeader.resourceName}),h=function(){s._getAuthTokenFunc(f).then((function(n){a(n)})).catch((function(t){if(!k(l,h,u.maxRetryDuration)){var i=e-l.retryCount+1,r=!u.maxRetryDuration||l.duration()<=u.maxRetryDuration,f=u.performRetry?"Retryable ajax call failed after several "+i+" attempts. "+(r?"":"Exceed maximum retry duration("+u.maxRetryDuration+").")+" Actual duration: "+l.duration()+".":b;o.reject(f,{error:n.getLogFriendlyMessage(t),responseText:b},null)}}))},h()):a(null)},a.state()==="resolved"?p():a.then(p),o.getPromise())},u.prototype.cachedAjax=function(t){return t.headers=n.extend({"x-ms-cache-tag":'"0"'},t.headers),this.ajaxExtended(t).then((function(n){var r=n.content,i=n.textStatus,t=n.jqXHR;return{cachedAjax:!0,data:r,modified:i==="success",textStatus:i,cacheTagValue:t.status===200?t.getResponseHeader(l):null,jqXHR:t}}))},u.prototype.oldCachedAjax=function(t){var i=f();return t.headers=n.extend({"x-ms-cache-tag":'"0"'},t.headers),this.oldAjax(t).then((function(n,t,r){i.resolve({cachedAjax:!0,data:n,modified:t==="success",textStatus:t,cacheTagValue:r.status===200?r.getResponseHeader(l):null,jqXHR:r},t,r)}),(function(n,t,r){i.reject(n,t,r)})),i.promise()},u.prototype._worker=function(t,r,u){var s=this,h,f;this._stall||(r.retryDuration=i.startTimer(),h=nt.createTelemetry(t),f=d(t),f.always((function(){if(t.checkVersion&&fi(f)){var l=f.getResponseHeader(lt);l&&(o.warning("'{0}' with version '{1}' is not accepting requests from clients with version '{2}'".format(t.uri,l,s._version)),s._stall=!0,s.ajaxStatus({code:1,data:{version:l}}))}if(f.getResponseHeader(ot)&&s.ajaxStatus({code:2,message:"Received logged out header from server."}),!s._stall)switch(f.state()){case"resolved":h(f);s._unknownErrors&&(s._unknownErrors=0,s.ajaxStatus({code:0}));f.then((function(n,t,i){u.resolve(n,t,i)}));break;case"rejected":h(f,!0);f.status===s.unknownErrorStatusCode?(s._unknownErrors++,s._unknownErrors>=ui&&(s._unknownErrors=0,s.ajaxStatus({code:4,data:{uri:t.uri,type:t.type,correlationId:f.getResponseHeader("x-ms-correlation-request-id"),clientRequestId:(t.headers||{})["x-ms-client-request-id"]}}))):f.status!==429||t.type&&t.type!=="GET"||s.ajaxStatus({code:6,data:{uri:t.originalUri,type:t.type,correlationId:f.getResponseHeader("x-ms-correlation-request-id"),clientRequestId:(t.headers||{})["x-ms-client-request-id"],retryAfter:f.getResponseHeader("Retry-After")}});f.then(null,(function(h,l,a){var w=ri(ii(t),h,{duration:r.duration()}),d,v,b,g,y;s._traceErrors&&f.status>=500&&wt.log(h,1,w);d=!t.maxRetryDuration||r.duration()<=t.maxRetryDuration;k(r,(function(){s._worker(t,r,u)}),t.maxRetryDuration,(function(){return ni(h)}))||(f.status===403&&t.skipRetryOnForbidden!==!0&&(f.getResponseHeader(p)||"").toLowerCase()==="gateway"?(v=i.clone(t,!0),v.skipRetryOnForbidden=!0,v.headers=v.headers||{},v.headers[c]=dt,s._worker(v,r,u)):(t.performRetry&&r.retryCount<e&&(b=e-r.retryCount+1,b>1&&(g=h.status||h.readyState?2:1,y="Retryable ajax call failed after several "+b+" attempts. "+(d?"":"Exceed maximum retry duration("+t.maxRetryDuration+").")+" Actual duration: "+r.duration()+".",g===2?(a=new n.Errors.Error({message:y,innerErrors:a}),wt.log(y,0,w)):o.warning(y,0,w))),t.detailedError?u.reject(l,{error:a,responseText:f.responseText},h):u.reject(l,a,h)))}))}})))},u})();u.AjaxCaller=st;kt=(function(){function t(t){var r=Q.defer(),u=i.startTimer();this.resolve=function(n,t,i){r.resolve({content:n,jqXHR:i,textStatus:t})};this.reject=function(i,f,e){var o=new n.Errors.AjaxError({message:"ajaxExtended call failed",data:ri(t,e,{duration:u()}),jqXHR:e,textStatus:i,errorThrown:f,stack:null,create:r.promise.stack});r.reject(o)};this.getPromise=function(){return r.promise};this.finally=function(t){r.promise.finally(t).catch(n.noop)}}return t})();gt=(function(){function n(){var n=f();this.resolve=function(t,i,r){n.resolve(t,i,r)};this.reject=function(t,i,r){n.reject(r,t,i)};this.getPromise=function(){return n.promise()};this.finally=function(t){n.promise().finally(t)}}return n})();u.reset=oi})(hi=u.Internal||(u.Internal={}));y=new u.Internal.AjaxCaller;u.postJSON=ci;u.ajax=li;u.ajaxExtended=ai;u.getSingleton=vi;u.cachedAjax=yi;u.invalidateCacheHeader=pi;u.setCacheHeader=wi;u.initialize=bi;u.status=a.pureComputed((function(){return y.ajaxStatus()}));u.disableVersionCheck=ki;$.support.cors=!0;$.ajaxTransport("+binary",(function(n,t,i){if(n.dataType&&n.dataType==="binary")return{send:function(t,i){var r=new XMLHttpRequest,f=n.url,e=n.type,o=n.data||null,u;r.addEventListener("load",(function(){var t={};t[n.dataType]=r.response;i(r.status,r.statusText,t,r.getAllResponseHeaders())}));r.open(e,f,!0);r.responseType="blob";for(u in t)r.setRequestHeader(u,t[u]);r.send(o)},abort:function(){i.abort()}}}))})(u=t.Net2||(t.Net2={})),(function(n){function i(n,i){return t.oldPostJSON(n,i)}function f(n){return t.oldAjax(n)}function e(n){return t.oldCachedAjax(n)}n.HttpStatusCode=u.HttpStatusCode;n.disableAjaxServerVersionCheck=r.Net2.disableAjaxServerVersionCheck;var t=r.Net2.getSingleton();n.postJSON=i;n.ajax=f;n.cachedAjax=e;n.invalidateCacheHeader=u.invalidateCacheHeader;n.setCacheHeader=u.setCacheHeader;n.initialize=u.initialize;n.status=a.pureComputed((function(){return t.ajaxStatus()}));n.disableVersionCheck=u.disableVersionCheck})(wt=t.Net||(t.Net={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var r=n.Base,f=r.Net2,i=window,u=new r.Diagnostics.Log("MsPortalFx/Base/Base.Debouncer"),e=(function(){function t(t,r,f,e,o){function nt(){c||s&&!k()||b(tt,!0)}function v(n,i){if((h.length||i&&l.length)&&!c){var f=t(l,h);h=[];l=[];c=!0;y=Q(r(f)).then(null,(function(r){if(n)return h=t(f,h),c=!1,v(!1,i);if(r&&r.jqXHR&&r.jqXHR.status===0)u.warning("AjaxError with jqXHR status 0 (no network)");else{u.error(r);throw r;}})).finally((function(){c=!1;b()}))}else l.length&&!c&&nt();return y}function k(){return h.length+l.length>=it}o=o||{};var w=f||0,tt=o.optionalDataInterval||w*10+1,it=o.maxBatchSize||1e3,s;e=!!e;var c=!1,h=[],l=[],y=Q(),a=0,p=0,d=n.noop,g=function(n){s=i.setTimeout(d,n);p=a},b=e?function(n,t){if(k())v(!0,!!t),a=p=0;else{var r=n||w;a=Date.now()+r;d=function(){if(s=0,a){var n=a-Date.now();n<=0?(v(!0,!!t),a=p=0):g(n)}};p>a&&(i.clearTimeout(s),s=0);s||g(r)}}:function(n,t){k()?v(!0,!!t):s||(s=i.setTimeout((function(){s=null;v(!0,!!t)}),n||w))};this.execute=function(n,i){i?(l=t(l,n),nt()):(h=t(h,n),c||b())};this.flush=function(){return h.length?y.then((function(){return v(!1,!1)})):y}}return t.getMergeIntoArrayDataMerger=function(){return n.merge},t.getPostArrayExecutor=function(n){return function(t){if(Array.isArray(t)&&t.length)return f.postJSON({uri:n.uri,headers:n.headers,isBackgroundTask:!!n.isBackgroundTask,performRetry:n.performRetry,setAuthorizationHeader:!!n.setAuthHeader,skipTelemetry:!!n.skipTelemetry},t)}},t})();t.Debouncer=e})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";function f(r,u,f,e,o,s){function a(n){return function(i){return t.getPostArrayExecutor({uri:n,headers:l,isBackgroundTask:!c,performRetry:s,setAuthHeader:!0,skipTelemetry:u})(i)}}var c=0,l,h;return e=e||1e4,o=o||2e3,u=!!u,l={"x-ms-client-version":MsPortalFx.getEnvironmentValue("version"),"x-ms-client-query":i,"x-ms-extension-name":f,"x-ms-time-zone-offset":(new Date).getTimezoneOffset()+""},n.isDevelopmentMode&&(l["x-ms-client-settings"]="devmode"),h=new t(t.getMergeIntoArrayDataMerger(),a(r),e,!0,{maxBatchSize:o}),{execute:function(n,t){h.execute(n,t)},flush:function(){var n=h.flush();return Q.isPending(n)?(c++,h.flush().finally((function(){c--}))):n}}}var r=MsPortalFx.Base,t=MsPortalFx.Base.Debouncer,u=window,i;n.onEnvironmentSet((function(t){var f=t("query")||__assign({},t("featuresFromConfig"),new r.QueryStringBuilder(u.location.search).getParameters());[["flight",n.internalEnv.activeFlights],["shell",n.featuresFromShellConfig],["query",n.featuresFromShellQuery],].forEach((function(n){MsPortalFx.forEachKey(n[1],(function(t,i){f[n[0]+"."+t]=i+""}))}));n.internalEnv.userTypeHint&&(f["feature.userType"]=n.internalEnv.userTypeHint);i=JSON.stringify(f)}));n.getStandardDebouncer=f})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function f(n){return function(){return n}}function pt(n){return rt.initialize(n)}function wt(n){l.invokeRpc(h.RegisterExtension,a,undefined);l.registerRpcEndPoint(h.TraceTelemetry,{allowedOrigin:[a],handler:function(t){n?n.trace(t):ut(t)}})}function ut(n){i.trace(n)}function bt(n){return i.start(n)}function kt(n){return i.startTrace(n)}function dt(n,t){return i.endTrace(n,!1,t)}function gt(n,t){return i.endTrace(n,!0,t)}function ni(n,t,r){return i.endTrace(n,t,r)}function ti(n){i.resetTrace(n)}function ii(){return i.flush()}function ri(n){i.telemetryEventProcessors.push(n)}function e(t){var i={timestamp:lt(),data:v(t.data)};return n.shallowCopyFromObject(i,t,["source","action","actionModifier","assetType","duration","extension","name","journeyId","optional",]),i}var o=n.Base,s=o.Constants,h=s.TelemetrySharing,c=n.isNullOrUndefined,ft=o.Diagnostics,et=FxImpl.TelemetryContext,ot=n.Helpers.resolve(),u=n.noop,st=window,ht=n.startTimer,l=FxImpl.Rpc.client,ct=new ft.Log("MsPortalFx.Base.Diagnostics.Telemetry"),a=s.Shell,lt=Date.now,v=JSON.stringify,at=n.isFeatureEnabled("canmodifyextensions"),y=n.isFeatureEnabled("nativeperf"),p="start",w="complete",b="reset",k="cancel",d="mark",vt,it,i,rt;(function(n){n.Start=p;n.Complete=w;n.Reset=b;n.Cancel=k;n.Mark=d})(vt=t.ActionModifier||(t.ActionModifier={}));var r=st.performance,g=function(n){return"start: "+n},yt=function(n){return"end: "+n},nt=u,tt=u;r&&r.mark&&r.measure&&(nt=function(n){r.mark(g(n))},tt=function(n){var t=yt(n),i=g(n);r.mark(t);r.measure(n,i,t)});it=(function(){function n(n){function f(n){var t=et.getCurrentValues();c(t)||(n.context=v(t))}function o(t){n.forEach((function(n){try{t(n)}catch(i){ct.error(i)}}))}function s(n,i,r){var u=e(n._evt);return u.actionModifier=i,u.duration=n._timer(),r=r||t,r(u),u.duration}function h(n){n._evt.duration=0;n._timer=ht()}function g(n){s(n,b);h(n)}function l(n){return function(t){t=e(t);var f=a++,r="telemetry_"+f,u={_evt:t,_timer:null};return t.actionModifier=p,h(u),i[r]=u,y&&nt(t.action+"_"+r),n(t),r}}var i={},a=1,t;this._perf=r;t=at?u:function(n){o((function(t){t.trace(n)}))};this.telemetryEventProcessors=n;this.trace=function(n){var i=n.timestamp;n=e(n);n.actionModifier=n.actionModifier||d;n.timestamp=i||n.timestamp;f(n);t(n)};this.start=l(u);this.startTrace=l(t);this.endTrace=function(n,r,u){var e=i[n],o;if(e)return typeof r=="boolean"&&(r=r?w:k),o=s(e,r,(function(n){c(u)||(n.data=u);f(n);t(n)})),y&&tt(e._evt.action+"_"+n),delete i[n],o};this.resetTrace=function(n){var t=i[n];t&&g(t)};this.flush=function(){var n=[],t;return o((function(t){n.push(t.flush())})),t=n.every((function(n){return!Q.isPending(n)})),t?Q():Q.all(n)}}return n})();i={telemetryEventProcessors:[],trace:u,start:f(""),startTrace:f(""),endTrace:f(0),resetTrace:u,flush:f(ot)},(function(t){function r(t,r){var e=i.telemetryEventProcessors,u=FxImpl.internalEnv.extensionTelemetryUri,f;return n.getEnvironmentValue("enablePortalLogging")&&u||(u=FxImpl.ensureAbsoluteUri(n.getEnvironmentValue("telemetryUri"))),f=r&&r.length?r:[n.Services.getTelemetryEventProcessor(u,t)],i=new it(f),e}t.initialize=r})(rt=t.Internal||(t.Internal={}));t.initialize=pt;t.registerForShellTelemetry=wt;t.trace=ut;t.start=bt;t.startTrace=kt;t.cancelTrace=dt;t.completeTrace=gt;t.endTrace=ni;t.resetTrace=ti;t.flush=ii;t.addProcessor=ri})(i=t.Telemetry||(t.Telemetry={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n,t,i,r){t.activatedItems.subscribeArrayChanges(n,i,r)}function r(n,t,i){return $.extend({source:n,action:t},i)}function i(t,i,u){return function(f){n.trace(r(t,i,u(f)))}}function u(n,r,u,f,e,o){t(n,r,i(u,f,o),i(u,e,o))}n.addActivatedItemsWatcher=t;n.addActivatedItemsTelemetryWatcher=u})(t=n.Telemetry||(n.Telemetry={}))})(t=n.Diagnostics||(n.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function u(t){if(t){t=FxImpl.ensureAbsoluteUri(t);var u=e.location.search;u&&!t.includes("?")&&(t+=u);i=FxImpl.getStandardDebouncer(t,!0,n.getEnvironmentValue("extensionName"));r._setBufferFullCallback((function(n){return i.execute(n),[]}))}else r._setBufferFullCallback((function(){return[]}))}function o(){}function s(){return r.flush(),i?i.flush():Q()}var f=n.Base,e=window,r=f.Diagnostics.Log,i;t.initialize=u;t.upload=o;t.flush=s;FxImpl.onEnvironmentSet((function(n){var t=FxImpl.internalEnv.extensionTraceUri;n("enablePortalLogging")&&t||(t=n("clientTraceUri"));u(t)}))})(i=t.Upload||(t.Upload={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";function t(t){var i=typeof t=="string"?n.createError(t):t;if(f)throw i;Q.reject(i)}function o(n,t){var i=typeof n.dispose=="function"?n.dispose:typeof n=="function"?n:null;return t&&i&&i.call(n),!!i}var i=MsPortalFx.isDevelopmentMode,r=MsPortalFx.trace,u=r?r.lifetime:!1,f=i||u,e=i&&u,s=(function(){function i(){var n=this;this._disposables=[];this._isDisposed=!1;this._isDisposing=!1;this._container=null;this._children=[];this._failToDispose=[];this.registerForDispose=function(t){var i=Array.isArray(t)?t:[t];return i.forEach(n._registerForDispose,n),n};e&&(this._createStack=MsPortalFx.getCurrentCallStack(!0))}return i.prototype.isDisposed=function(){return this._isDisposed},i.prototype.createChildLifetime=function(){var n=new i;return this.isDisposed()?n.dispose():(n._container=this,this._children.push(n)),n},i.prototype.dispose=function(){var u=this,i=[],r;this._isDisposed||(this._isDisposed=this._isDisposing=!0,e&&(this._disposeStack=MsPortalFx.getCurrentCallStack(!0)),[this._disposables,this._children].forEach((function(n){while(n.length){var t=n.pop();try{o(t,!0)}catch(r){i.push(r);f&&u._failToDispose.push(t)}}})),i.length&&t(n.createError("error to disposing this lifetimeManager. Exceptions: ",{innerErrors:i})),r=this._container,r&&(this._container=null,r._unregisterChildForDispose(this)),this._isDisposing=!1)},i.prototype._unregisterChildForDispose=function(n){var i=this._children,r;this._isDisposing||(r=i.lastIndexOf(n),r<0?t("lifetime Manager internal error. this._unregisterChildForDispose is called but the disposeable is not one of the child it created."):r===i.length-1?i.pop():i.splice(r,1))},i.prototype._isRegistered=function(n){return this._disposables.lastIndexOf(n)>=0||this._children.lastIndexOf(n)>=0},i.prototype._registerForDispose=function(n){var r=this,i=!this._isDisposed;n?o(n,!i)||(t("disposable must have a dispose method or be a function."),i=!1):i=!1;i&&this._disposables.push(n)},i})();n.TriggerableLifetimeManager=s})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";function s(t){var i=c[t];return n.isNullOrUndefined(i)?null:"#"+i.substr(f.length)}function h(n){return i[n]}function w(n){var t=n.length,i=f.length;if(t===e)return n;if(t===e+1){if(n[0]==="#")return n.substr(1)}else if(t===e+i&&n.substr(0,i)===f)return n.substr(i);return null}function b(t){var r=w(t),i;return!n.isNullOrUndefined(r)&&(i=c[f+r],!n.isNullOrUndefined(i))?i:null}function k(t){return n.isNullOrUndefined(t)?0:t.length>=e?b(t):i[t]}function rt(t,i){var u=k(t),r;return n.isNullOrUndefined(u)?null:(r=d(u),i?r.map(s):r.map(h))}function d(n){return n=n%g,it[n]}function ut(){if(n.isNullOrUndefined(u)){var t=0;for(u=new Array(33),t=0;t<u.length;t++)u[t]=t}return u}function r(t,i){var u=new Array(t&&t.length),f=t.length,r,e=n.isNullOrUndefined(i)?0:i;if(i){for(r=0;r<f;r++)u[r]=t[(r+e)%f];return u}return t}function v(n){return r(nt,n)}function y(n){return r(tt,n)}function ft(t){return n.isNullOrUndefined(l)&&(l=v().map(h)),r(l,t)}function et(t){return n.isNullOrUndefined(a)&&(a=v().map(s)),r(a,t)}function ot(t){return n.isNullOrUndefined(o)&&(o=y().map(h)),r(o,t)}function st(t){return n.isNullOrUndefined(p)&&(p=y().map(s)),r(o,t)}var f="Hex_",e=6,c,i;(function(n){n[n.Hex_fcd116=0]="Hex_fcd116";n[n.Hex_eb3c00=1]="Hex_eb3c00";n[n.Hex_ba141a=2]="Hex_ba141a";n[n.Hex_b4009e=3]="Hex_b4009e";n[n.Hex_442359=4]="Hex_442359";n[n.Hex_002050=5]="Hex_002050";n[n.Hex_0072c6=6]="Hex_0072c6";n[n.Hex_008272=7]="Hex_008272";n[n.Hex_007233=8]="Hex_007233";n[n.Hex_7fba00=9]="Hex_7fba00";n[n.Hex_a0a5a8=10]="Hex_a0a5a8";n[n.Hex_fff100=11]="Hex_fff100";n[n.Hex_ff8c00=12]="Hex_ff8c00";n[n.Hex_e81123=13]="Hex_e81123";n[n.Hex_ec008c=14]="Hex_ec008c";n[n.Hex_68217a=15]="Hex_68217a";n[n.Hex_00188f=16]="Hex_00188f";n[n.Hex_00bcf2=17]="Hex_00bcf2";n[n.Hex_00b294=18]="Hex_00b294";n[n.Hex_009e49=19]="Hex_009e49";n[n.Hex_bad80a=20]="Hex_bad80a";n[n.Hex_bbc2ca=21]="Hex_bbc2ca";n[n.Hex_fffc9e=22]="Hex_fffc9e";n[n.Hex_ffb900=23]="Hex_ffb900";n[n.Hex_dd5900=24]="Hex_dd5900";n[n.Hex_f472d0=25]="Hex_f472d0";n[n.Hex_9b4f96=26]="Hex_9b4f96";n[n.Hex_4668c5=27]="Hex_4668c5";n[n.Hex_6dc2e9=28]="Hex_6dc2e9";n[n.Hex_00d8cc=29]="Hex_00d8cc";n[n.Hex_55d455=30]="Hex_55d455";n[n.Hex_e2e584=31]="Hex_e2e584";n[n.Hex_d6d7d8=32]="Hex_d6d7d8";n[n.Hex_807900=33]="Hex_807900";n[n.Hex_804600=34]="Hex_804600";n[n.Hex_740912=35]="Hex_740912";n[n.Hex_760046=36]="Hex_760046";n[n.Hex_34113d=37]="Hex_34113d";n[n.Hex_000c48=38]="Hex_000c48";n[n.Hex_005e79=39]="Hex_005e79";n[n.Hex_084c41=40]="Hex_084c41";n[n.Hex_063d20=41]="Hex_063d20";n[n.Hex_3d460a=42]="Hex_3d460a";n[n.Hex_32383f=43]="Hex_32383f";n[n.Hex_bfb500=44]="Hex_bfb500";n[n.Hex_bf6900=45]="Hex_bf6900";n[n.Hex_ae0d1a=46]="Hex_ae0d1a";n[n.Hex_b10069=47]="Hex_b10069";n[n.Hex_4e195c=48]="Hex_4e195c";n[n.Hex_00126b=49]="Hex_00126b";n[n.Hex_008db5=50]="Hex_008db5";n[n.Hex_00856f=51]="Hex_00856f";n[n.Hex_0f5b2f=52]="Hex_0f5b2f";n[n.Hex_8ba208=53]="Hex_8ba208";n[n.Hex_464f59=54]="Hex_464f59";n[n.Hex_fcf37e=55]="Hex_fcf37e";n[n.Hex_ffba66=56]="Hex_ffba66";n[n.Hex_f1707b=57]="Hex_f1707b";n[n.Hex_f466ba=58]="Hex_f466ba";n[n.Hex_a47aaf=59]="Hex_a47aaf";n[n.Hex_6674bc=60]="Hex_6674bc";n[n.Hex_66d7f7=61]="Hex_66d7f7";n[n.Hex_66d1bf=62]="Hex_66d1bf";n[n.Hex_66c592=63]="Hex_66c592";n[n.Hex_d6e86c=64]="Hex_d6e86c";n[n.Hex_8f9ca8=65]="Hex_8f9ca8";n[n.Hex_fffccc=66]="Hex_fffccc";n[n.Hex_ffe8cc=67]="Hex_ffe8cc";n[n.Hex_facfd3=68]="Hex_facfd3";n[n.Hex_fbcce8=69]="Hex_fbcce8";n[n.Hex_e1d3e4=70]="Hex_e1d3e4";n[n.Hex_ccd1e9=71]="Hex_ccd1e9";n[n.Hex_ccf2fc=72]="Hex_ccf2fc";n[n.Hex_ccf0ea=73]="Hex_ccf0ea";n[n.Hex_ccecdb=74]="Hex_ccecdb";n[n.Hex_f0f7b2=75]="Hex_f0f7b2";n[n.Hex_63707e=76]="Hex_63707e";n[n.max=77]="max"})(c=t.AllRawColorCode||(t.AllRawColorCode={})),(function(n){n[n.a1=0]="a1";n[n.b1=1]="b1";n[n.c1=2]="c1";n[n.d1=3]="d1";n[n.e1=4]="e1";n[n.f1=5]="f1";n[n.g1=6]="g1";n[n.h1=7]="h1";n[n.i1=8]="i1";n[n.j1=9]="j1";n[n.k1=10]="k1";n[n.a0=11]="a0";n[n.b0=12]="b0";n[n.c0=13]="c0";n[n.d0=14]="d0";n[n.e0=15]="e0";n[n.f0=16]="f0";n[n.g0=17]="g0";n[n.h0=18]="h0";n[n.i0=19]="i0";n[n.j0=20]="j0";n[n.k0=21]="k0";n[n.a2=22]="a2";n[n.b2=23]="b2";n[n.c2=24]="c2";n[n.d2=25]="d2";n[n.e2=26]="e2";n[n.f2=27]="f2";n[n.g2=28]="g2";n[n.h2=29]="h2";n[n.i2=30]="i2";n[n.j2=31]="j2";n[n.k2=32]="k2";n[n.a0s2=33]="a0s2";n[n.b0s2=34]="b0s2";n[n.c0s2=35]="c0s2";n[n.d0s2=36]="d0s2";n[n.e0s2=37]="e0s2";n[n.f0s2=38]="f0s2";n[n.g0s2=39]="g0s2";n[n.h0s2=40]="h0s2";n[n.i0s2=41]="i0s2";n[n.j0s2=42]="j0s2";n[n.k0s2=43]="k0s2";n[n.a0s1=44]="a0s1";n[n.b0s1=45]="b0s1";n[n.c0s1=46]="c0s1";n[n.d0s1=47]="d0s1";n[n.e0s1=48]="e0s1";n[n.f0s1=49]="f0s1";n[n.g0s1=50]="g0s1";n[n.h0s1=51]="h0s1";n[n.i0s1=52]="i0s1";n[n.j0s1=53]="j0s1";n[n.k0s1=54]="k0s1";n[n.a0t1=55]="a0t1";n[n.b0t1=56]="b0t1";n[n.c0t1=57]="c0t1";n[n.d0t1=58]="d0t1";n[n.e0t1=59]="e0t1";n[n.f0t1=60]="f0t1";n[n.g0t1=61]="g0t1";n[n.h0t1=62]="h0t1";n[n.i0t1=63]="i0t1";n[n.j0t1=64]="j0t1";n[n.k0t1=65]="k0t1";n[n.a0t2=66]="a0t2";n[n.b0t2=67]="b0t2";n[n.c0t2=68]="c0t2";n[n.d0t2=69]="d0t2";n[n.e0t2=70]="e0t2";n[n.f0t2=71]="f0t2";n[n.g0t2=72]="g0t2";n[n.h0t2=73]="h0t2";n[n.i0t2=74]="i0t2";n[n.j0t2=75]="j0t2";n[n.k0t2=76]="k0t2";n[n.max=77]="max"})(i=t.ColorCode||(t.ColorCode={}));var g=11,l,a,o,p,u,nt=[i.a0,i.a1,i.b2,i.b0,i.c2,i.b1,i.c0,i.c1,i.d0,i.d1,i.e2,i.e0,i.e1,i.f1,i.f0,i.g1,i.g0,i.g2,i.h2,i.h0,i.h1,i.i1,i.i0,i.i2,i.j1,i.j0,i.j2,],tt=[i.g0,i.f0,i.e0,i.h0,i.i0,i.j0,i.a1,i.b1,i.c1,i.d1,i.e1,i.f1,i.g1,i.h1,i.i1,i.j1,i.b2,i.c2,i.e2,i.g2,i.h2,i.i2,i.j2,i.a0,i.b0,i.c0,i.d0,],it={0:[i.a0s2,i.a0s1,i.a0,i.a0t1,i.a0t2,],1:[i.b0s2,i.b0s1,i.b0,i.b0t1,i.b0t2,],2:[i.c0s2,i.c0s1,i.c0,i.c0t1,i.c0t2,],3:[i.d0s2,i.d0s1,i.d0,i.d0t1,i.d0t2,],4:[i.e0s2,i.e0s1,i.e0,i.e0t1,i.e0t2,],5:[i.f0s2,i.f0s1,i.f0,i.f0t1,i.f0t2,],6:[i.g0s2,i.g0s1,i.g0,i.g0t1,i.g0t2,],7:[i.h0s2,i.h0s1,i.h0,i.h0t1,i.h0t2,],8:[i.i0s2,i.i0s1,i.i0,i.i0t1,i.i0t2,],9:[i.j0s2,i.j0s1,i.j0,i.j0t1,i.j0t2,],10:[i.k0s2,i.k0s1,i.k0,i.k0t1,i.k0t2,]};t.getRawColorString=s;t.getColorCodeString=h;t.getRawColorCode=w;t.getRawColorIndex=b;t.getColorIndex=k;t.getColorCodeTintSet=rt;t.getColorCodeTintSetIndex=d;t.getAllColorCodeIndexes=ut;t.getRotatedArray=r;t.getGradientColorCodeIndexes=v;t.getRainbowColorCodeIndexes=y;t.getGradientColorCode=ft;t.getRawGradientColorCode=et;t.getRainbowColorCode=ot;t.getRawRainbowColorCode=st})(t=n.ColorUtil||(n.ColorUtil={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=n.initObservable,r=(function(){function n(n,t){var r,u;this.startDateTime=i(n,null);this.endDateTime=i(t,null);arguments.length===3&&(r=arguments[2]);u=n||new Date;this.timezoneOffset=i(r,-u.getTimezoneOffset())}return n})();t.DateTimeRange=r})(t=n.DateUtil||(n.DateUtil={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function o(n){return{original:n,unitType:n>>f,index:n&127,perTime:!!(n&e)}}function vt(n,t,i){return ut.isNumeric(n)?yt(Math.abs(n),t,i):t}function yt(t,i,r){var c=o(i),e,h=i,s=t,u,f,l,a=n.isNullOrUndefined(r)?i:r;if(c.unitType>0&&(e=at[c.unitType],u=e.indexOf(i),f=t>1?1:-1,l=f>0?e.length-1:0,t!==1)){while(u!==l){if(s=t/tt(i,e[u+f])+et,f>0){if(s<1)break}else if(s>=1){u+=f;break}u+=f}h=e[u];f<0&&u===0&&s<ft&&(h=a)}return h}function a(n,t,i){var r=ht[n],u=r[t],f=r[i];return{dividend:f.dividend*u.divisor,divisor:f.divisor*u.dividend}}function pt(n,t,i){var r=t.index-k,u=i.index-k,o=Math.max(0,r),s=Math.max(0,u),h=-Math.min(0,r),c=-Math.min(0,u),f=a(n,o,s),e=a(2,c+b,h+b);return{dividend:f.dividend*e.dividend,divisor:f.divisor*e.divisor}}function tt(n,t){var i=bt(n,t);return i.dividend/i.divisor}function wt(n,t){var i=l[n];return i?i[t]:null}function it(n,t,i){var r=l[n];r||(r=l[n]={});r[t]=i}function bt(n,t){var e,f,r=null,h=!1,i;if(n===t)return s;if(i=wt(n,t),i)return i;if(e=o(n),f=o(t),e.unitType===f.unitType){switch(f.unitType){case u.DecimalPerTime:h=!0;case u.Decimal:r=0;break;case u.BytesPerTime:h=!0;case u.Bytes:r=1;break;case u.BytesPerTime_SI:h=!0;case u.Bytes_SI:r=0;break;case u.Time:r=2}if(r!==null)return i=h?pt(r,e,f):a(r,e.index,f.index),it(n,t,i),it(t,n,{dividend:i.divisor,divisor:i.dividend}),i}throw"Not supported: conversion from unit "+n+"("+v(n)+") to unit "+t+"("+v(t)+") is not supported.";}function v(n,t){var i;return t===!0?(i=g[n],i===y&&(i=g[n]=rt(n,!0))):(i=d[n],i===y&&(i=d[n]=rt(n,!1))),i}function rt(n,t){switch(n){case r.Count:return"";case r.Thousand:return i.thousand;case r.Million:return i.million;case r.Billion:return i.billion;case r.Trillion:return i.trillion;case r.Bytes:case r.Bytes_SI:return i.bytes;case r.Kilobytes:return t?i.kilobytesSI:i.kilobytes;case r.Kilobytes_SI:return i.kilobytesSI;case r.Megabytes:return t?i.megabytesSI:i.megabytes;case r.Megabytes_SI:return i.megabytesSI;case r.Gigabytes:return t?i.gigabytesSI:i.gigabytes;case r.Gigabytes_SI:return i.gigabytesSI;case r.Terabytes:return t?i.terabytesSI:i.terabytes;case r.Terabytes_SI:return i.terabytesSI;case r.Petabytes:return t?i.petabytesSI:i.petabytes;case r.Petabytes_SI:return i.petabytesSI;case r.BytesPerDay:case r.BytesPerDay_SI:return i.bytesPerDay;case r.BytesPerHour:case r.BytesPerHour_SI:return i.bytesPerHour;case r.BytesPerMinute:case r.BytesPerMinute_SI:return i.bytesPerMinute;case r.BytesPerSecond:case r.BytesPerSecond_SI:return i.bytesPerSecond;case r.KilobytesPerSecond:return t?i.kilobytesPerSecondSI:i.kilobytesPerSecond;case r.KilobytesPerSecond_SI:return i.kilobytesPerSecondSI;case r.MegabytesPerSecond:return t?i.megabytesPerSecondSI:i.megabytesPerSecond;case r.MegabytesPerSecond_SI:return i.megabytesPerSecondSI;case r.GigabytesPerSecond:return t?i.gigabytesPerSecondSI:i.gigabytesPerSecond;case r.GigabytesPerSecond_SI:return i.gigabytesPerSecondSI;case r.TerabytesPerSecond:return t?i.terabytesPerSecondSI:i.terabytesPerSecond;case r.TerabytesPerSecond_SI:return i.terabytesPerSecondSI;case r.PetabytesPerSecond:return t?i.petabytesPerSecondSI:i.petabytesPerSecond;case r.PetabytesPerSecond_SI:return i.petabytesPerSecondSI;case r.CountPerDay:return i.countPerDay;case r.CountPerHour:return i.countPerHour;case r.CountPerMinute:return i.countPerMinute;case r.CountPerSecond:return i.countPerSecond;case r.ThousandPerSecond:return i.thousandPerSecond;case r.MillionPerSecond:return i.millionPerSecond;case r.BillionPerSecond:return i.billionPerSecond;case r.TrillionPerSecond:return i.trillionPerSecond;case r.MicroSeconds:return i.microSeconds;case r.MilliSeconds:return i.milliSeconds;case r.Seconds:return i.seconds;case r.Minutes:return i.minutes;case r.Hours:return i.hours;case r.Days:return i.days;case r.Percentage:return i.percentage;default:return""}}var y=undefined,ut=jQuery,i=n.Resources.Strings.UnitConversion,ft=.0001,et=1e-5,s={dividend:1,divisor:1},p=60,w=60*p,h=24*w,ot=7*h,st=30*h,c=[{dividend:1,divisor:Math.pow(10,6)},{dividend:1,divisor:Math.pow(10,3)},s,{dividend:p,divisor:1},{dividend:w,divisor:1},{dividend:h,divisor:1},{dividend:ot,divisor:1},{dividend:st,divisor:1},],b=c.indexOf(s),f=8,k=3,e=1<<f-1,ht=[function(n){return{dividend:Math.pow(10,3*n),divisor:1}},function(n){return{dividend:Math.pow(2,10*n),divisor:1}},function(n){return c[n]}].map((function(n){return c.map((function(t,i){return n(i)}))})),l={},d={},g={},u,r;(function(n){n[n.None=0]="None";n[n.Bytes=1]="Bytes";n[n.Decimal=2]="Decimal";n[n.Time=3]="Time";n[n.BytesPerTime=4]="BytesPerTime";n[n.DecimalPerTime=5]="DecimalPerTime";n[n.Bytes_SI=6]="Bytes_SI";n[n.BytesPerTime_SI=7]="BytesPerTime_SI"})(u||(u={})),(function(n){n[n.None=u.None<<f]="None";n[n.Percentage=n.None+1]="Percentage";n[n.Bytes=u.Bytes<<f]="Bytes";n[n.Kilobytes=n.Bytes+1]="Kilobytes";n[n.Megabytes=n.Bytes+2]="Megabytes";n[n.Gigabytes=n.Bytes+3]="Gigabytes";n[n.Terabytes=n.Bytes+4]="Terabytes";n[n.Petabytes=n.Bytes+5]="Petabytes";n[n.BytesPerDay=u.BytesPerTime<<f|e]="BytesPerDay";n[n.BytesPerHour=n.BytesPerDay+1]="BytesPerHour";n[n.BytesPerMinute=n.BytesPerDay+2]="BytesPerMinute";n[n.BytesPerSecond=n.BytesPerDay+3]="BytesPerSecond";n[n.KilobytesPerSecond=n.BytesPerDay+4]="KilobytesPerSecond";n[n.MegabytesPerSecond=n.BytesPerDay+5]="MegabytesPerSecond";n[n.GigabytesPerSecond=n.BytesPerDay+6]="GigabytesPerSecond";n[n.TerabytesPerSecond=n.BytesPerDay+7]="TerabytesPerSecond";n[n.PetabytesPerSecond=n.BytesPerDay+8]="PetabytesPerSecond";n[n.Count=u.Decimal<<f]="Count";n[n.Thousand=n.Count+1]="Thousand";n[n.Million=n.Count+2]="Million";n[n.Billion=n.Count+3]="Billion";n[n.Trillion=n.Count+4]="Trillion";n[n.MicroSeconds=u.Time<<f]="MicroSeconds";n[n.MilliSeconds=n.MicroSeconds+1]="MilliSeconds";n[n.Seconds=n.MicroSeconds+2]="Seconds";n[n.Minutes=n.MicroSeconds+3]="Minutes";n[n.Hours=n.MicroSeconds+4]="Hours";n[n.Days=n.MicroSeconds+5]="Days";n[n.CountPerDay=u.DecimalPerTime<<f|e]="CountPerDay";n[n.CountPerHour=n.CountPerDay+1]="CountPerHour";n[n.CountPerMinute=n.CountPerDay+2]="CountPerMinute";n[n.CountPerSecond=n.CountPerDay+3]="CountPerSecond";n[n.ThousandPerSecond=n.CountPerDay+4]="ThousandPerSecond";n[n.MillionPerSecond=n.CountPerDay+5]="MillionPerSecond";n[n.BillionPerSecond=n.CountPerDay+6]="BillionPerSecond";n[n.TrillionPerSecond=n.CountPerDay+7]="TrillionPerSecond";n[n.Bytes_SI=u.Bytes_SI<<f]="Bytes_SI";n[n.Kilobytes_SI=n.Bytes_SI+1]="Kilobytes_SI";n[n.Megabytes_SI=n.Bytes_SI+2]="Megabytes_SI";n[n.Gigabytes_SI=n.Bytes_SI+3]="Gigabytes_SI";n[n.Terabytes_SI=n.Bytes_SI+4]="Terabytes_SI";n[n.Petabytes_SI=n.Bytes_SI+5]="Petabytes_SI";n[n.BytesPerDay_SI=u.BytesPerTime_SI<<f|e]="BytesPerDay_SI";n[n.BytesPerHour_SI=n.BytesPerDay_SI+1]="BytesPerHour_SI";n[n.BytesPerMinute_SI=n.BytesPerDay_SI+2]="BytesPerMinute_SI";n[n.BytesPerSecond_SI=n.BytesPerDay_SI+3]="BytesPerSecond_SI";n[n.KilobytesPerSecond_SI=n.BytesPerDay_SI+4]="KilobytesPerSecond_SI";n[n.MegabytesPerSecond_SI=n.BytesPerDay_SI+5]="MegabytesPerSecond_SI";n[n.GigabytesPerSecond_SI=n.BytesPerDay_SI+6]="GigabytesPerSecond_SI";n[n.TerabytesPerSecond_SI=n.BytesPerDay_SI+7]="TerabytesPerSecond_SI";n[n.PetabytesPerSecond_SI=n.BytesPerDay_SI+8]="PetabytesPerSecond_SI"})(r=t.Unit||(t.Unit={}));var nt=n.getEnumArray,ct=nt(u,!0),lt=nt(r).map((function(n){return o(n.value)})),at=ct.map((function(n){return n.value===0?[]:lt.filter((function(t){return t.unitType===n.value})).map((function(n){return n.original})).sort((function(n,t){return n-t}))}));t.getAppropriateUnit=vt;t.getConversionFactor=tt;t.toString=v})(t=n.UnitConversionUtil||(n.UnitConversionUtil={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function s(n,t,u){var f=e(u)?null:i(u),o=r.getAppropriateUnit(n,i(t),f);return a(o)}function h(n,t){return r.getConversionFactor(i(n),i(t))}function c(n,t){return r.toString(i(n),t)}function y(n,t,i,r,u,f){return l(n,t,s(n,t,u),i,r,u,f)}function l(n,t,i,r,u,f,s){var w=u?u:v,a=r?r:{minimumFractionDigits:0,maximumFractionDigits:2},y=h(t,i),p=i,l="";return n===0?(l=o(a).format(n),p=e(f)?i:f):y&&(l=o(a).format(n/y)),w.format(l,c(p,s))}function i(n){var t=r.Unit,i=u[n];return t[i]}function a(n){var t=u,i=r.Unit[n];return t[i]}var f=n,r=f.UnitConversionUtil,e=f.isNullOrUndefined,o=FxImpl.Intl.NumberFormat.create,v="{0} {1}",u;(function(n){n[n.None=0]="None";n[n.Percentage=1]="Percentage";n[n.Bytes=2]="Bytes";n[n.Kilobytes=3]="Kilobytes";n[n.Megabytes=4]="Megabytes";n[n.Gigabytes=5]="Gigabytes";n[n.Terabytes=6]="Terabytes";n[n.Petabytes=7]="Petabytes";n[n.BytesPerDay=8]="BytesPerDay";n[n.BytesPerHour=9]="BytesPerHour";n[n.BytesPerMinute=10]="BytesPerMinute";n[n.BytesPerSecond=11]="BytesPerSecond";n[n.KilobytesPerSecond=12]="KilobytesPerSecond";n[n.MegabytesPerSecond=13]="MegabytesPerSecond";n[n.GigabytesPerSecond=14]="GigabytesPerSecond";n[n.TerabytesPerSecond=15]="TerabytesPerSecond";n[n.PetabytesPerSecond=16]="PetabytesPerSecond";n[n.Count=17]="Count";n[n.Thousand=18]="Thousand";n[n.Million=19]="Million";n[n.Billion=20]="Billion";n[n.Trillion=21]="Trillion";n[n.MicroSeconds=22]="MicroSeconds";n[n.MilliSeconds=23]="MilliSeconds";n[n.Seconds=24]="Seconds";n[n.Minutes=25]="Minutes";n[n.Hours=26]="Hours";n[n.Days=27]="Days";n[n.CountPerDay=28]="CountPerDay";n[n.CountPerHour=29]="CountPerHour";n[n.CountPerMinute=30]="CountPerMinute";n[n.CountPerSecond=31]="CountPerSecond";n[n.ThousandPerSecond=32]="ThousandPerSecond";n[n.MillionPerSecond=33]="MillionPerSecond";n[n.BillionPerSecond=34]="BillionPerSecond";n[n.TrillionPerSecond=35]="TrillionPerSecond";n[n.Bytes_SI=36]="Bytes_SI";n[n.Kilobytes_SI=37]="Kilobytes_SI";n[n.Megabytes_SI=38]="Megabytes_SI";n[n.Gigabytes_SI=39]="Gigabytes_SI";n[n.Terabytes_SI=40]="Terabytes_SI";n[n.Petabytes_SI=41]="Petabytes_SI";n[n.BytesPerDay_SI=42]="BytesPerDay_SI";n[n.BytesPerHour_SI=43]="BytesPerHour_SI";n[n.BytesPerMinute_SI=44]="BytesPerMinute_SI";n[n.BytesPerSecond_SI=45]="BytesPerSecond_SI";n[n.KilobytesPerSecond_SI=46]="KilobytesPerSecond_SI";n[n.MegabytesPerSecond_SI=47]="MegabytesPerSecond_SI";n[n.GigabytesPerSecond_SI=48]="GigabytesPerSecond_SI";n[n.TerabytesPerSecond_SI=49]="TerabytesPerSecond_SI";n[n.PetabytesPerSecond_SI=50]="PetabytesPerSecond_SI"})(u=t.Unit||(t.Unit={}));t.getAppropriateUnit=s;t.getConversionFactor=h;t.toString=c;t.getConvertedValue=y;t.getConvertedValueForTargetUnit=l;t._convertUnitToInternalConversionUnit=i;t._convertInternalConversionUnitToUnit=a})(t=n.UnitConversion||(n.UnitConversion={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function f(n){return typeof n=="string"}function h(n,t){var i=n.name;return n&&t[i.namespaceIndex]+"."+i.name}function c(n){return n?u[n]:null}function l(n,t){var i=a(n,t);return i&&i.itemType||null}function w(n,t){return c(l(n,t))}function a(n,t){var i=f(n)?c(n):n,r=i&&i.properties;return r&&r[t]}function b(n,t){var i=a(n,t);return!!(i&&i.isArray)}function k(n){var r=[],t=n&&n.properties,i;if(t)for(i in t)t.hasOwnProperty(i)&&r.push(i);return r}function d(n){var i=f(n)?t.getTypeMetadata(n):n,r=i&&i.idProperties;return r||null}function ft(n){var t=d(n);return t&&t.length>0}function et(n,i){for(var l=f(i)?t.getTypeMetadata(i):i,e=g(l),h,r,c=[],u=0,a=e.length;u<a;u++){if(h=e[u],r=s(n[h]),o(r))return;r===null&&(r=ut);c.push(r)}return c.join(",")}function g(n){return d(n)}function ot(n,t){e(n,t,{visitArray:function(n,t){v.data(n,p,t)}})}function e(n,t,i){if(t)if(Array.isArray(s(n)))i.visitArray&&i.visitArray(n,t),s(n).forEach((function(n){e(n,t,i)}));else if(it(n))for(var r in n)n.hasOwnProperty(r)&&e(n[r],l(t,r),i)}function st(n){return v.data(n,p)}function nt(n){var t=f(n)?u[n]:n,i={},r;return t&&(r=k(t),r.forEach((function(n){var r=w(t,n),u=b(t,n);if(u)i[n]=rt();else if(!r||r.entityType)i[n]=y();else if(r.name)i[n]=y(nt(r.name));else throw new Error("Cannot create entity.");}))),i}function ht(n){return n&&n.entityType}function tt(n,t){t&&!t.name&&(t=r.clone(t),t.name=n);u[n]=t}function ct(n){for(var i,t,f=(n+"Type").split("."),r=window,e=f.length,s=e-1,u=0;u<e;u++){if(i=f[u],t=r[i],u===s){if(t!==n){if(!o(t))throw new Error("Cannot create namespace for '"+n+"' because it already exists.");r[i]=n}}else if(typeof t!="object"){if(!o(t))throw new Error("Cannot create namespace for '"+n+"' at the segment '"+i+"' because it already exists.");t={};r[i]=t}r=t}}function i(n,t){return n===undefined?t:n}function lt(n){var t=n.namespaces,u=n.metadata,f=u.map((function(n){var s={},f,e,r,o;ct(h(n,t));f=n.properties;for(e in f)r=f[e],o=i(r.typeIndex,-1),s[e]={isArray:!!i(r.isArray,!1),isDate:!!i(r.isDate,!1),itemType:o===-1?null:h(u[o],t),trackEdits:!!i(r.trackEdits,!0),persistEdits:!!i(r.persistEdits,!0)};return{name:h(n,t),properties:s,idProperties:n.idProperties,entityType:n.entityType,hasGloballyUniqueId:n.hasGloballyUniqueId}})),r=n.rootTypeIndex;return f.forEach((function(n){tt(n.name,n)})),typeof r=="number"&&r>=0&&f[r]||null}var r=n,v=r.Helpers,it=r.isObject,o=r.isUndefined,s=ko.unwrap,y=ko.observable,rt=ko.observableArray,p="aux-type",ut="NULL-VALUED-ID-PROPERTY",u={},at;t.getTypeMetadata=c;t.getPropertyType=l;t.getPropertyTypeMetadata=w;t.getPropertyMetadata=a;t.getPropertyCardinality=b;t.getProperties=k;t.typeHasId=ft;t.getItemId=et;t.getIdPropertyNames=g;t.decorateWithType=ot;t.visitTypedData=e;t.getArrayItemType=st;t.createEmptyObject=nt;t.typeIsEntityType=ht;t.setTypeMetadata=tt;t.setTypesMetadata=lt,(function(n){function t(){u={}}n.clearAllTypesMetadata=t})(at=t.Internal||(t.Internal={}))})(i=t.Metadata||(t.Metadata={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Unsorted=0]="Unsorted";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"})(t=n.SortOrder||(n.SortOrder={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var u=ko.observableArray,r="This callback is already registered.",i=(function(){function n(n){this._resetListeners=[];this._partialErrors=n||u()}return Object.defineProperty(n.prototype,"partialErrors",{get:function(){return this._partialErrors},enumerable:!0,configurable:!0}),n.prototype.resetNavigation=function(){var n=this._resetListeners.map((function(n){return n()}));return Q.all(n)},n.prototype.addResetNavigationListener=function(n){if(this._resetListeners.includes(n))throw new Error(r);this._resetListeners.push(n)},n.prototype.removeResetNavigationListener=function(n){var t=this._resetListeners.indexOf(n);if(t<0)throw new Error(r);this._resetListeners.splice(t,1)},n})();i=__decorate([n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Function])],i);t.DataNavigatorBase=i})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Default=0]="Default";n[n.Tenant=1]="Tenant";n[n.Extension=2]="Extension";n[n.ProviderProxy=3]="ProviderProxy"})(t=n.ResourceRoutingType||(n.ResourceRoutingType={}))})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Observable=0]="Observable"})(t=n.ServiceType||(n.ServiceType={}))})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.All=0]="All";n[n.Any=1]="Any"})(t=n.SetRequirement||(n.SetRequirement={}))})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";function i(n,i,r){var u=r&&r.allowedOrigins;return t.registerRpcEndPoint(n,{allowedOrigin:u,handler:function(n){return i.apply(null,n)}})}function r(n,i){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];return t.invokeRpc(i,n,u)}var t=FxImpl.Rpc.client;n.registerCallback=i;n.invokeCallback=r})(t=n.Rpc||(n.Rpc={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=new n.Base.Diagnostics.Log("MsPortalFx/Services/ServiceProvider"),r="Deprecated API: Will return empty results. Requested {0} from {1}.",u=(function(){function n(n,t){this._extension=n;this._scope=t}return n.prototype.getObservable=function(){var n=this;return i.error(""+r.format(this._scope,this._extension)),Q([])},n.prototype.releaseObservable=function(){},n.prototype.dispose=function(){},n})();t.ObservableServiceClientImpl=u})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=n.initObservable,r=(function(){function n(n,t){this.uri=n;this.target=i(t,"_blank")}return n})();t.ClickableLink=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(n,t,i){this.partName=n;this.parameters=t;this.options=i||{}}return n})();n.PartReference=t})(t=n.Composition||(n.Composition={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";function t(n,t){var i="_msPortalFxShell";return t?n[i]=t:t=n[i],t}function v(n,t){var i=n;i._msPortalFxIsSelectableViewModel=!0;t&&(i._msPortalFxSelectable=t);n.configureSelectable=l.configureSelectable.bind(n)}function y(n,t){var i=n;i._msPortalFxSelectable=t}function p(n){return h(n)?n:null}function h(n,t){var i=n,r;return i&&i._msPortalFxIsSelectableViewModel===!0?(r=!!i._msPortalFxSelectable2,!t)?!!i._msPortalFxSelectable||r:r:!1}function w(n){var i=n&&t(n);return i&&i.type===21298}function b(n,t,i){var r=n._msPortalFxCallbacks;r&&r[t]&&typeof r[t]=="function"&&r[t].apply(r,i)}var e=window,f=ko.observable,i="",a={supplyConflict:i,recieveConflict:i,syncConflict:i,supplyBladeConflict:i},r=n.getErrorMap(a),o,u,s,c,l;n.shellInterface=t,(function(n){n.ClickableLink=MsPortalFx.ViewModels.ClickableLink})(o=n.CompositionCore||(n.CompositionCore={})),(function(i){var u;(function(i){var o=(function(){function n(n,t){this.parameters=n;this._msPortalFxCallbacks=t}return n.prototype.clone=function(t){return new n(t,this._msPortalFxCallbacks)},n})(),u,s,h,e,c;i.BladeReference=o;u=(function(n){function t(t,i,r,u){var f=this,e=r&&r.parameters,o=r&&r.callbacks;return f=n.call(this,e,o)||this,f.bladeName=t,f.extensionName=i,f.options=r,f.metadata=u,f}return __extends(t,n),t})(o);i.PdlBladeReference=u;s=(function(n){function i(i,r,u,f,e){var o=n.call(this,i,r,f,e)||this;return t(o,{type:19792,marketplaceId:u}),o}return __extends(i,n),i})(u);i.ProvisioningBladeReference=s;h=(function(i){function u(u,e,o,s){function l(t){var i=new n.TriggerableLifetimeManager,r=o.editScopeAccessor.getEditableObservable(i);t(r);i.dispose()}var c=i.call(this,u,e,o,s)||this,h;return o.editScopeAccessor?(o.receiveResult||o.supplyInitialData)&&r.supplyConflict():o.receiveResult||r.recieveConflict(),h=f(),t(c,{type:20560,bladeConfig:h,getBladeConfig:function(){var n=null,t;return o.supplyInitialData?n=o.supplyInitialData():o.editScopeAccessor&&l((function(t){n=t()})),t={config:o.supplyProviderConfig?o.supplyProviderConfig():undefined,initialState:n},h(t),t},receiveResult:function(n){o.receiveResult?o.receiveResult(n):l((function(t){t(n)}))}}),c}return __extends(u,i),u})(u);i.ParameterProviderBladeReference=h;e=(function(){function n(){}return n.prototype.renavigateActivatedBlade=function(){},n})();i.SelectableBase=e;c=(function(n){function i(i){function h(n,t,i){return{reason:n,bladeReference:t,operationId:i||MsPortalFx.getUniqueId()}}function c(n,t){var i=h(1,n,t);return o(i),i}function l(n){var t=u();return c(t,n)}function a(n){return s().then((function(t){return c(t,n)}))}var e=n.call(this)||this,o=f(),u=i.supplyBladeReference,s=i.supplyBladeReferenceAsync;return u||s||r.syncConflict(),u&&s&&r.supplyBladeConflict(),t(e,{type:21298,flags:1,request:o,fetchRequest:u?l:a,result:f()}),e.renavigateActivatedBlade=function(n){o(h(2,n))},e}return __extends(i,n),i})(e);i.Selectable2=c})(u=i.Selectable||(i.Selectable={}))})(u=n.Composition||(n.Composition={}));s=u.Selectable;n.BladeReference=s.BladeReference;n.initializeSelectableViewModel=v;n.assignSelectable=y;n.tryGetSelectableViewModelContract=p;n.isSelectableViewModel=h;n.isSelectable2=w;n.invokeCallback=b;c=(function(){function n(){}return n.prototype.configureSelectable=function(n){var t=new u.Selectable.Selectable2(n),i=this._msPortalFxSelectable;return i&&(i.dispose(),delete this._msPortalFxSelectable),this._msPortalFxSelectable2=t,t},n})();l=new c;e.define("Fx/Composition",[],(function(){return o}));e.define("Fx/Composition/Selectable",[],(function(){return u.Selectable}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Minute=0]="Minute";n[n.Hour=1]="Hour";n[n.Day=2]="Day";n[n.Week=3]="Week";n[n.Month=4]="Month";n[n.Year=5]="Year"})(t||(t={}));n.TimeUnit=t;n.TimeRangeValueType="MsPortalFx.Composition.Configuration.ValueTypes.TimeRange"})(t=n.Configuration||(n.Configuration={}))})(t=n.Composition||(n.Composition={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";function t(n){return typeof n=="object"?u(n,!0):n}var i=MsPortalFx.deepEquals,r=MsPortalFx.union,u=MsPortalFx.clone,f=new MsPortalFx.Base.Diagnostics.Log("MsPortalFx/ViewModels/ViewModels.Part"),e=(function(){function n(n,t){this._configChangedHandler=t}return n.prototype.setValues=function(n){this._persistedValues=t(n)},n.prototype.getValues=function(){var n=this._persistedValues;return n.parameters,t(n)},n.prototype.updateValues=function(n,u){var w;if(u===void 0&&(u=!0),!this._persistedValues)throw new Error("This 'updateValues' method cannot be called until the associated Part/Blade has been initialized.  Typically, 'updateValues' is called in the 'receiveResult' callback for a ParameterCollector opening a configuration Blade.");var o,s=n.parameters,c=n.settings,l=this._persistedValues,a=l.parameters,h=l.settings,v=a.values,y=s&&s.values||{},e=a.metadata,p=s&&s.metadata||{},b=r(Object.keys(y),Object.keys(p));return b.forEach((function(n){var h,c,u,r,l,s,a;if(!e.hasOwnProperty(n)){f.error("Parameter named '"+n+"' is not a recognized parameter for this Part.");return}if(c=e&&e[n]&&Array.isArray(e[n].bindingSources)&&e[n].bindingSources.length>0,c){if(u=p[n],r=u&&u.activeBindingSourceName,r!==e[n].activeBindingSourceName){if(l=!r||e[n].bindingSources.firstIndex((function(n){return n.name===r}))>=0,!l)throw new Error("The name '"+r+"' supplied as 'activeBindingSourceName' does not match a binding source in 'bindingSources'.");e[n].activeBindingSourceName=r;o=!0}h=!!r}s=y[n];a=h||i(s,v[n]);a||(v[n]=t(s),o=!0)})),w=Object.keys(c),w.forEach((function(n){var u=!0,r=c[n];r===undefined&&(u=!1);u?i(r,h[n])||(h[n]=t(r),o=!0):h[n]!==undefined&&(h[n]=undefined,o=!0)})),o?this._configChangedHandler(t(this._persistedValues),u):Q()},n})();n.Configuration=e})(t=n.Composition||(n.Composition={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Ready=0]="Ready";n[n.Failed=1]="Failed";n[n.Preparing=2]="Preparing"})(t=n.CompositionState||(n.CompositionState={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";function u(n){return typeof n=="function"}function h(){return{allowUiBlocking:i(!0),selectable:i()}}function c(){return{allowUiBlocking:i(!0),selectable:i(),registeredSelectables:i(),registeredSelectableOptions:i(),_revealContentCallCount:i(0),activeOpenBladeCommand:i(),updateConfigFn:i(),_onInputValuesUpdated:null,dialog:i(),elements:ko.observableArray()}}var o=MsPortalFx.Base,s=n,r=n.TelemetryContext,l=new o.Diagnostics.Log("MsPortalFx/ViewModels/Composition/ViewModels.Composition"),i=ko.observable,a=ko.toJSON,f,e;t.createFrameworkPartViewModel=c;f=(function(){function n(n,t,i){this.internal=n;this.container=t;this.content=i||{}}return n.prototype.updatePartInputValues=function(n,t,i,f,e,o,s){var h=[],c=this.content,v=this.container,l,a;if(this.content&&u(c.onInputsSet)){f&&r.setContextValue(r.ContextType.CompositionItem,{id:f});try{l=c._msPortalFx_viewModelApiV2?c.onInputsSet(n,t,o,s):!o&&c.onInputsSet(n,t);l&&u(l.then)&&h.push(l)}catch(y){h.push(Q.reject(y))}finally{f&&r.resetContextValue(r.ContextType.CompositionItem)}}return this.container&&(a=v.onInputsSetCallbacks.triggerCallbacks(n,t),a&&u(a.then)&&h.push(a)),h.length>0?Q.all(h):null},n})();t.CompositionViewModelBase=f;e=(function(n){function r(r,u,f){var o=n.call(this,h(),r,u,f)||this,e,c,l;return o.state=i(t.CompositionState.Preparing),e=null,c=r,c.selectable&&s.assignSelectable(c,c.selectable),l=function(n){var i=Q(n).then((function(){var n=!e||e===i;n&&o.state(t.CompositionState.Ready)}),(function(){var n=!e||e===i;n&&o.state(t.CompositionState.Failed)}));return i},o.updatePartInputValues=function(i,r,u,f,s,h){e=null;var c=n.prototype.updatePartInputValues.call(o,i,r||{},u,f,s,h),a=t.CompositionState.Ready;return c!==null&&(a=t.CompositionState.Preparing,e=l(c)),o.state(a),e},o}return __extends(r,n),r.prototype.updatePartInputValues=function(){return},r})(f);t.CompositionViewModel=e})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(t){"use strict";function r(t,r){var f=n.createFrameworkPartViewModel(),e,u;return r=r||{},r.logArea=r.logArea||"MsPortalFx/ViewModels/Composition/ViewModels.Composition.Part",e={selectable:r.createSelectable?i.Part.createSelectableViewModel(r.initialState):undefined,location:r.location},u=new i.PartContainer(f,e),new i.Part(f,u,t(u),r.initialState,r.logArea)}var i=MsPortalFx.ViewModels;t.composePartViewModel=r})(t=n.Part||(n.Part={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";var u=FxImpl.Composition.Selectable,i=ko,r=FxImpl.getErrorMap({badBladeReferenceType:"",observableInBladeParameters:"",openBladeFromContextPaneNotAllowed:""}),f;(function(t){function v(){var n=[],t=!1,i={add:function(i,r){n.includes(i)||n.push(i);r&&t&&i(null)},remove:function(t){var i=n.indexOf(t);i>=0&&n.splice(i,1)},triggerCallbacks:function(i,r){t=!0;var f=n.slice(),u=f.map((function(n){try{return n(i,r)}catch(t){return Q.reject(t)}})).filter((function(n){return!!n}));return u.length>0?Q.all(u):null},dispose:function(){n.splice(0,n.length)}};return i._callbacks=n,i}function d(){var t=n.forEachKey(f,(function(n,t,i){i.push("ContainerViewModel ("+i.length+") callstack:\n"+t)}),[]);t.length&&o.error("The following "+t.length+" ContainerViewModel are created but not disposed:\nThis indicates a Framework bug. Please open a Framework bug with following call stacks.\n"+t.join("\n"))}function p(t,i,u,f,e,s){function l(n){var i=Q.defer(),r=t.createChildLifetime();return u.result.subscribe(r,(function(t){t&&t.operationId===n&&(i.resolve(!!t.success),r.dispose())})),i.promise}function h(t,i,u,o,h){var y,a,v;return f&&r.openBladeFromContextPaneNotAllowed(),k.every((function(n){return!(t instanceof n)}))&&!FxImpl.Po.getMetadata(t)&&r.badBladeReferenceType(),y=t.options,a=y&&y.parameters,b(a,50)&&r.observableInBladeParameters(),a=n.clone(a,!0,!0),o=o||n.getUniqueId(),h=h||l(o),v=i?1:0,v|=u&&u.asSubJourney?2:0,v|=u&&u.inPlace?4:0,c({bladeReference:t,reason:3,selectedItem:e,controlMetadata:s,flags:v,operationId:o}),h}function a(t,i,u,e){var s,v,y,a;return f&&r.openBladeFromContextPaneNotAllowed(),s=n.getUniqueId(),v=u?1:0,v|=e&&e.asSubJourney?2:0,y=l(s),c({bladeReference:undefined,reason:4,flags:v,operationId:s,initialWidth:e&&e.initialWidth}),i.catch((function(i){return a=new n.Errors.Error({message:"The extension provided promise to container."+t+" has failed.",innerErrors:i}),o.error(a),Q.reject(a)})).then((function(n){return h(n,u,e,s,y)})).catch((function(n){return n===a?!1:Q.reject(n)}))}var c=u.request;return{openBlade:function(n,t){return h(n,!1,t)},openBladeAsync:function(n,t){return a("openBladeAsync",n,!1,t)},openContextPane:function(n){return h(n,!0)},openContextPaneAsync:function(n){return a("openContextPaneAsync",n,!0)}}}function e(t,i){var r=t[h],f=t[c],e;return f?f:(r()||r(new u.Selectable2({supplyBladeReference:n.noop})),e=FxImpl.shellInterface(r()),p(t,1,e,i))}function g(n,t){n[c]=t}function nt(n,t){t===void 0&&(t=!0);var i=n;i.preview(!!t)}function b(t,r){return r&&n.isObject(t)&&Object.keys(t).some((function(n){return i.isSubscribable(t[n])||b(t[n],r-1)}))}var l=n.Resources.Strings.ViewModels.Container,a=n.isDevelopmentMode||n.isDiagnosticsEnabled,o=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/ViewModels.Container"),k=[u.PdlBladeReference,u.ProvisioningBladeReference],y,f,s,h,c,w;t.createOnInputsSetCallbacks=v;y=0;f={};t.verifyAllContainerViewModelDisposed=d;s=(function(){function n(){var n=this,t;this._lifetime=new FxImpl.TriggerableLifetimeManager;this._id=y++;this._msPortalFxNotice=i.observable();this.onInputsSetCallbacks=v();this.helpContentUri=i.observable();this.notFoundMessage=i.observable();this.unauthorizedMessage=i.observable();this.registerForDispose=function(t){return n._lifetime.registerForDispose(t),n._lifetime};t=this;t.preview=i.observable(!1);a&&(f[this._id]=FxImpl.Rpc.getCurrentCallStack())}return n.prototype.isDisposed=function(){return this._lifetime.isDisposed()},n.prototype.createChildLifetime=function(){return this._lifetime.createChildLifetime()},n.prototype.dispose=function(){var t=this._lifetime,n;t&&t.dispose();n=this.onInputsSetCallbacks;n&&n.dispose();a&&delete f[this._id]},n.prototype.unauthorized=function(n){n||(n=l.unauthorizedText);this.unauthorizedMessage(n)},n.prototype.notFound=function(n){n||(n=l.notFound);this.notFoundMessage(n)},n.prototype.enableNotice=function(n){this._msPortalFxNotice.peek()?o.error("Notice has been enabled. It cannot be enabled again."):this._msPortalFxNotice(n)},n})();t.ContainerViewModel=s;t.createClickContext=p;h="_msPortalFxOpenBladeSelectable";c="_clickContext";t.setClickContext=g;w=(function(n){function t(t){var r=n.call(this)||this,u;return r.configureSelectable=undefined,r[h]=i.observable(),u=t.selectable||null,FxImpl.initializeSelectableViewModel(r,u),r.selectable=u,r.flags=t.flags||0,r}return __extends(t,n),t.prototype.openBlade=function(n,t){return e(this,!!(this.flags&1)).openBlade(n,t)},t.prototype.openBladeAsync=function(n,t){return e(this,!!(this.flags&1)).openBladeAsync(n,t)},t.prototype.openContextPane=function(n){return e(this,!!(this.flags&1)).openContextPane(n)},t.prototype.openContextPaneAsync=function(n){return e(this,!!(this.flags&1)).openContextPaneAsync(n)},t})(s);t.SelectableContainerViewModel=w;t.markAsPreview=nt;t.Dlg2=99})(f=t.Internal||(t.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){var t;(function(n){n[n.None=0]="None";n[n.Success=1]="Success";n[n.Warning=2]="Warning";n[n.Error=3]="Error";n[n.Dirty=4]="Dirty";n[n.Info=5]="Info";n[n.Upsell=6]="Upsell";n[n.Complete=7]="Complete"})(t=n.InternalContentState||(n.InternalContentState={}))})(t=n.Internal||(n.Internal={}));n.ContentState=t.InternalContentState})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function a(n,t,i){var r=o(n).closeBlade;return r.fxAwaitAndRun(n).then((function(n){return n(t,i)}))}function k(n){return Math.min(Math.max(n,1),25)}var v=n.Base,d=v.Diagnostics,g=n.ViewModels,nt=FxImpl.Composition,f=g.Internal,tt=FxImpl.ViewModels,it=tt.CompositionViewModelBase,h=FxImpl.Rpc,s=n.clone,rt=v.Constants.BladeParameterNames,e=n.Errors,o=FxImpl.shellInterface,ut=h.ActionEndPointDefinition,ft=h.FuncEndPointDefinition,y=FxImpl.Constants.RpcMethods,r="",i=ko.observable,c=e.isInstanceOfErrorType,et={containerViewModelMissing:r,messageMissing:r,dashboardIdMissing:r,enableNoticeInvoked:r,identitySelectableMissing:r,selectableRegistered:r,selectableInstanceRegistered:r},u=FxImpl.getErrorMap(et),l,p,w,b;(function(n){n[n._Internal_None=0]="_Internal_None";n[n.Dashboard=1]="Dashboard";n[n.Blade=2]="Blade"})(l||(l={}));t.PartLocation=l;p=(function(i){function r(t,r,f,e,o){var s=this,c,h;return r||u.containerViewModelMissing(),s=i.call(this,t,r,f,e)||this,s._logArea=o,r.selectable&&FxImpl.assignSelectable(r,r.selectable),s._hadRevealedContentAtConstruction=t._revealContentCallCount()>0,c=s.container,h=s._initLoadingDefer=Q.defer(),c.registerForDispose((function(){Q.isPending(h.promise)&&h.reject(new n.Errors.DisposedCanceledError)})),s._onInputsSetQ=h.promise,c.operations.add(s._onInputsSetQ,{blockUi:!s._hadRevealedContentAtConstruction}),t._revealContentCallCount.subscribe(r,s._onRevealContent,s),s}return __extends(r,i),r.createSelectableViewModel=function(n,i){return new t.Selectable({selectedValue:arguments.length===2?i:!0,isSelected:!!(n&&n.container&&n.container.selectable.isSelected),isCommandSelected:!!(n&&n.container&&n.container.selectable.isCommandSelected)})},r.createClickableLinkViewModel=function(n,i){return new t.ClickableLink(n,i)},r.prototype.updatePartInputValues=function(t,r,u,f,o,s,l){var a=this,y,p;this.internal._onInputValuesUpdated&&this.internal._onInputValuesUpdated(t,r,o);var w=this._onInputsSetQ,v=this._onInputsSetQ=null,b=this.internal._revealContentCallCount();return this._onInputsSetContext=h.messageContext,y=i.prototype.updatePartInputValues.call(this,t,r||{},u,f,o,s,l),y!==null&&(v=this._onInputsSetQ=y.then((function(){if(n.isNullOrUndefined(a.container.unauthorizedMessage())){var t=!a._onInputsSetQ||a._onInputsSetQ===v;t&&a.container.recover()}}),(function(t){var i=a.container,o;if(!i.isDisposed()){var s=n.getLogFriendlyMessage(t),u="Part's onInputsSet promise failed.(id: "+FxImpl.Po.getMetadataId(a)+")",h=u+"\nError: "+s,r=c(t,e.Error),f=r&&c(t,e.UnauthorizedDataError),l=r&&c(t,e.CanceledError);if(f||l||d.Log.writeEntry(2,a._logArea,new e.Error({message:u,data:n.sanitizeMessage(n.getObjectDescriptor(a)),innerErrors:t})),o=!a._onInputsSetQ||a._onInputsSetQ===v,o){if(r&&t.handled)return;f?i.unauthorized():i.fail(h)}}})),p=this._hadRevealedContentAtConstruction||this.internal._revealContentCallCount()>b,this.container.operations.add(v,{blockUi:!p})),this._removePromiseFromOps(w),v},r.prototype._removePromiseFromOps=function(n){if(n){this.container.operations.remove(n);var t=this._initLoadingDefer;t&&n===t.promise&&(t.resolve(),this._initLoadingDefer=null)}},r.prototype.updatePartForUnauthorized=function(){var n=this._onInputsSetQ;this._onInputsSetQ=null;this._removePromiseFromOps(n)},r.prototype.invokeClickHandler=function(n,t,i,r,u,e,o){if(i){var s=this.container,h=f.createClickContext(this.container,n,r,!!(s.flags&1),e,o),c=n===3?[e]:[{target:u}];f.setClickContext(this.container,h);try{i.apply(t,c)}finally{f.setClickContext(this.container,undefined)}}},r.prototype._onRevealContent=function(){var n=this._onInputsSetQ,t=n&&this.container.operations.getOptionsForOperation(n);t&&t.blockUi&&this.container.operations.update(n,{blockUi:!1})},r})(it);t.Part=p;t.navigateToDashboardEndPoint=new ut(y.navigateToDashboard);t.getDashboardDeepLinkEndPoint=new ft(y.getDashboardDeepLink);w=(function(){function n(){}return n.prototype.navigateToDashboard=function(n){return n||u.dashboardIdMissing(),Q(t.navigateToDashboardEndPoint.invoke(FxImpl.Rpc.client,"fx",["Viewmodels.Part.DashboardManagementImpl",n]))},n.prototype.getDashboardDeepLink=function(n){return Q(t.getDashboardDeepLinkEndPoint.invoke(FxImpl.Rpc.client,"fx",n))},n})();b=(function(r){function e(u,e){var s=r.call(this,e||{})||this,h,v,c,l,a;return s.isSelectable=i(!0),s.clickableLink=null,s.failureMessage=i(),s.noDataMessage=i(),s.height=i(0),s.width=i(0),s.size=i(),s.mutate=i(),s.menu=null,s._partState=null,e=e||{},s.dashboard=new w,s.partState=s._partState=i(n.Parts.PartState.Ready),e.clickableLink&&(s.clickableLink=e.clickableLink),s.partTitle=i(e.partTitle||null),s.ariaLabel=i(e.partTitle||null),s.assetName=i(e.assetName||null),s.contentState=i(0),s.registerForDispose(s.operations=new t.PartOperationList(s)),s._registeredSelectables=u.registeredSelectables,s._registeredSelectableOptions=u.registeredSelectableOptions,u._onInputValuesUpdated=function(t,i,r){var u=n.forEachKey(t,(function(n,t,i){f.isBladeCallerInput(n)||n===rt.EditScopeId||(i[n]=t)}),{}),e={parameters:{values:u,metadata:r||{}},settings:i&&i.content||{}};s._config.setValues(e)},s._internalViewModel=u,s.location=e.location||0,h=o(s,{autoSize:i(!1),resize:i(null),selectables:i({}),closeBlade:i(null),menu:i(null),triggerValidation:i(),suppressAlert:i(!1),configureAlert:i(),openDialog:i()}),v=function(n,t){var i=n.parameters,r={inputs:i&&i.values,settings:n.settings,inputsMetadata:i&&i.metadata};return u.updateConfigFn()(r,t)},s._config=new nt.Configuration(e||{},v),e.flags&2&&(s.onLockedBlade={closeCurrentBlade:function(n){return s.closeCurrentBlade(n)}}),l=i(0),s.form={valid:l,validationState:l,dirty:i(!1),triggerValidation:function(n,t){return n===void 0&&(n=!1),t===void 0&&(t=!1),h.triggerValidation.fxAwaitAndRun(s).then((function(i){return Q(i(n,t))}))},configureAlertOnClose:function(n){ko.isObservable(n)?(c&&c.dispose(),c=s.createChildLifetime(),n.subscribeAndRun(c,h.configureAlert)):h.suppressAlert(n===1)}},e.flags&4&&(a=function(n){return n=n||{},n.inPlace=!0,n},s.menu={switchItem:function(n){h.menu.fxOnceAndRun(s,(function(t){t.switchItem(n)}))},openBlade:function(n,t){return s.openBlade(n,a(t))},openBladeAsync:function(n,t){return s.openBladeAsync(n,a(t))}}),s}return __extends(e,r),e.prototype.autoSize=function(){o(this).autoSize(!0)},e.prototype.resizeTo=function(n,t){o(this).resize({width:k(n),height:k(t)})},e.prototype.fail=function(t){t||u.messageMissing();this.failureMessage(t);this._partState(n.Parts.PartState.Failed)},e.prototype.recover=function(){this._partState()===n.Parts.PartState.Failed&&(this.failureMessage(null),this._partState(n.Parts.PartState.Ready));this.unauthorizedMessage(null)},e.prototype.revealContent=function(){var n=this._internalViewModel._revealContentCallCount();this._internalViewModel._revealContentCallCount(n+1)},e.prototype.enableNotice=function(){u.enableNoticeInvoked()},e.prototype.registerSelectable=function(n,t,i,r){var h=this,f=this._registeredSelectables()||{},e=this._registeredSelectableOptions,o=e()||{},c=function(){return Object.keys(f).map((function(n){return f[n]})).some((function(n){return i===n}))};t&&i||u.identitySelectableMissing();f.hasOwnProperty(t)&&u.selectableRegistered(t);c()&&u.selectableInstanceRegistered();r&&(o=s(o,!1),o[t]=r,e(o));f=s(f,!1);f[t]=i;this._registeredSelectables(f);n.registerForDispose((function(){var n=s(h._registeredSelectables(),!1),i=s(e(),!1);delete n[t];delete i[t];h._registeredSelectables(n);e(i)}))},e.prototype.activateConfiguration=function(){return this._config},e.prototype.closeCurrentBlade=function(n){return n&&this.form.configureAlertOnClose(1),a(this,0,n)},e.prototype.closeChildBlade=function(){return a(this,1)},e.prototype.closeContextBlade=function(){return a(this,2)},e.prototype.openDialog=function(i){return o(this).openDialog.fxAwaitAndRun(this).then((function(r){return r(n.extend({type:t.Internal.Dlg2,title:undefined},i,!0),i.target)}))},e})(f.SelectableContainerViewModel);t.PartContainer=b})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";function o(i){n.internalEnv.isShell||[i.bundles,i.paths].forEach((function(n){r(n,(function(i){t.startsWith(i,"***")&&delete n[i]}))}))}function h(t){r(t.paths,(function(n,i){t.paths[n]=u(i)}));r(t.shim,(function(n,i){Array.isArray(i)&&(t.shim[n]=u(i))}));MsPortalFx.extend(t,{baseUrl:f(t.baseUrl||n.origin),dependencyTree:s(t.dependencyTree),initUrls:u(t.initUrls),fallbacks:s(t.fallbacks,!0)})}function f(t){return t[0]==="/"&&(t=t[1]==="/"?n.protocol+t:n.origin+t),t}function u(n){return n&&n.map(f)}function s(n,t){if(n){var i=Object.create(null);return r(n,(function(n,r){i[f(n)]=t?u(r):r})),i}}function c(i,r){o(i);e.requirejs.config(i);r&&t.extend(n.internalEnv.fxRequireConfig,r)}var t=MsPortalFx,e=window,i=e.performance,r=t.forEachKey,l;n.cleanUpRequire=o;n.toAbsoluteUrisRequire=h;n.setupRequire=c,(function(r){function vt(t,i,r){if("message"in r){var u="status"in r?"Failed to load AMD dependency for "+i+" '"+t+"'.\r\nurl: "+r.srcUrl+"\r\nstatus: "+r.status+"\r\nstatusText: "+r.statusText:"Failed to retrieve the "+i+" defintion for '"+t+"' from the server.\r\nmessage:"+r.message;return n.QReject(u,{innerErrors:r})}return Q.reject(r)}function d(n,i,r){return t.require(t.ensureSuffix(n,"/")+r).then((function(n){return n[i]})).catch((function(n){return vt(r,i,n)}))}function ot(n,i,r){n.getViewModelOptions=i;var u=n.content;if((u&&u._msPortalFx_viewModelApiV2))return st(n,i)?(delete i.partSize,s.invokeWithContext(r,(function(){function o(){g.forEach((function(n){var t,i;n in u&&(t=u[n],n in r?t!==r[n]&&p.error("Property changed non-observably, use an observable instead and update its value: '"+n+"' in '"+a+"' in '"+MsPortalFx.getEnvironmentValue("extensionName")+"'"):(i=e[n],h.isObservable(t)?(i(t()),t.subscribe(l,i)):i(t),r[n]=t))}))}var c=ht(n,i),f,s;ct(n,c);var e=g.reduce((function(n,t){return n[t]=h.observable(),n}),{}),r={},l=n.container,a=i.name;return f=t.cloneAndRebindFunctions(n),s=f.content={_msPortalFx_viewModelApiV2_wrapper:!0,chrome:e,viewModel:h.observable()},o(),pt(n,(function(){o();s.viewModel(u)})),f}))):void 0}function yt(n,t,i){var u,r=n.getValue(),e=r.getViewModelOptions,f,o;delete r.getViewModelOptions;st(r,e)&&(u=Q.defer(),ct(r,u.promise));i(n,t);f=r.content;o=e.partSize;typeof o=="number"&&f&&h.isObservable(f.size)&&f.size(o);u&&u.resolve(ht(r,e))}function st(n,t){return!!(t.onInputsSetParameters&&n.updatePartInputValues)}function ht(n,t){var i=t.onInputsSetParameters,r;return delete t.onInputsSetParameters,r=MsPortalFx.extend2(i.dashboardFilters||{},i.partFilters),n.updatePartInputValues(i.inputs,i.settings,i.traceOptions,i.viewModelName,i.inputsMetadata,i.dontCallViewModelOnInputsSet,r)}function ct(n,t){n.onInputsSetPromise=t}function pt(t,i){var u=t.container,r;t instanceof a.Part?r=u.operations.blockingUi:t instanceof n.ViewModels.CompositionViewModel?r=h.pureComputed((function(){return t.state()===n.ViewModels.CompositionState.Preparing})):v.unexpectedVM();r.fxOnceAndRun(u,(function(){i()}),(function(n){return!n}))}function lt(n,t){function u(t){return function(){var i=n[t.method],r=typeof i;if(r==="function")return i.apply(n,t.args);v.earlyExecNotAFunc(t.method,r)}}var r=[],i,f;t&&(i=t&&t.tasks,i&&i.length>0&&(t.taskExecType!==1?(f=i.reduce((function(n,t){return n.then(u(t))}),Q()),r=[f]):r=i.map((function(n){return Q.fcall(u(n))}))),typeof t.keepReturnsIn=="string"&&(n["_msPortalFx_earlyExec"+t.keepReturnsIn]=r))}var l=t.Base,s=n.Rpc,w=l.Net2,nt=t.Extension,a=t.ViewModels,at=s.ActionEndPointDefinition,b=l.Constants,e=s.FuncEndPointDefinition,tt=n.TelemetryContext,k=s.ProxiedObjectTypeDefinition,u=n.Constants.RpcMethods,it=b.ViewModelTypes,rt=l.Diagnostics,ut=n.NetDiagnostics,ft=b.ExtensionNames,h=ko,o=b.Shell,c=[o],v=n.getErrorMap({unallowedGallery:"",alreadyRegistered:"",alreadyInit:"",notArmId:"",noObservable:"",unexpectedVM:"",earlyExecNotAFunc:""}),y,p,f,et,g;r.getViewModelsDefinition=new k(u.viewModels);r.getExtensionGalleryService=new k(u.getExtensionGalleryServiceViewModel);r.disposeEndPoint=new at(u.entryPointDispose);r.getBladeDefinitionEndPoint=new e(u.entryPointGetBladeDefinition);r.getPartDefinitionEndPoint=new e(u.entryPointGetPartDefinition);r.getControlDefinitionEndPoint=new e(u.entryPointGetControlDefinition);r.pingEndPoint=new e(u.ping);r.getAuthorizationTokenEndPoint=new e(u.getAuthToken);r.getUserInfoEndPoint=new e(u.getUserInfo);r.getSharedSettingsEndPoint=new e(u.getSharedSettings);r.getLocalGalleryPackagesEndpointsDefinition=new e(u.getLocalGalleryPackagesEndpoints);r.registerLocalGalleryPackagesEndpointDefinition=new e(u.registerLocalGalleryPackagesEndpoint);r.submitObjectCacheTelemetryEndpoint=new e(u.submitObjectCacheTelemetry);r.sharedObservablesEndPoint=new k(u.provideExtensionService);r.hasPermissionsToShell=new e(u.hasPermission);r.mapAssetIdToResourceIdEndPoint=new e(u.mapAssetIdToResourceId);r.mapResourceIdToAssetIdEndPoint=new e(u.mapResourceIdToAssetId);r.mapAssetIdToDynamicSelectionAndIconEndPoint=new e(u.mapAssetIdToDynamicSelectionAndIcon);r.mapResourceIdToDynamicSelectionAndIconEndPoint=new e(u.mapResourceIdToDynamicSelectionAndIcon);r.getAssetTypeInformationEndPoint=new e(u.getAssetTypeInformation);r.getResourceTypeAssetTypeInformationEndPoint=new e(u.getResourceTypeAssetTypeInformation);r.getResourceAssetInformationEndPoint=new e(u.getResourceAssetInformation);r.getResourceGroupEndPoint=new e(u.getResourceGroup);r.getResourceEndPoint=new e(u.getResource);r.signalResourcesChangedEndPoint=new e(u.signalResourcesChanged);r.getArmEndpointEndPoint=new e(u.getArmEndpoint);y="MsPortalFx/Extension/Runtime";p=new rt.Log(y);et=(function(){function u(u,e,h,a,p){var w=this,b,k;this._hubsWindowsId=r.getHubsWindowId();this._ltm=new n.TriggerableLifetimeManager;f=s.client;this._extensionId=u.name;this._manifest=u;this._tokenCache=l.Security.createAuthTokenCache((function(n){return r.getAuthorizationTokenEndPoint.invoke(f,o,n)}));this._entryPointDeferred=Q.defer();rt.ErrorReporter.initialize();b=function(){var t=w._entryPoint.getDefinition(),n=require.s.contexts._.config;return t.requireConfig=JSON.parse(JSON.stringify({bundles:n.bundles,paths:n.paths,shim:n.shim})),t};k=t.isFeatureEnabled("prefetch");k?e():(r.disposeEndPoint.register(f,c,(function(){w._entryPointDeferred.promise.isPending||(w._entryPointDeferred=Q.defer());w._entryPoint&&(w._entryPoint.dispose(),w._entryPoint=null)})),h&&r.getBladeDefinitionEndPoint.register(f,c,(function(n){return d(h,"blade",n)})),a&&r.getPartDefinitionEndPoint.register(f,c,(function(n){return d(a,"part",n)})),p&&r.getControlDefinitionEndPoint.register(f,c,(function(n){return d(p,"control",n)})),r.getViewModelsDefinition.registerObjectFactory(f,{allowedOrigin:[o,this._hubsWindowsId],allowRemoteChanges:!0,handler:function(n){return w.getObservable(n)},onSuccess:yt}),r.getExtensionGalleryService.registerObjectFactory(f,{allowedOrigin:null,allowRemoteChanges:!0,handler:function(n,t){var i=r.getDescriptor(t.srcWindowId).name;if([o,ft.Hubs,ft.Marketplace].includes(i))return w.getGalleryServiceViewModel();v.unallowedGallery(t.srcWindowId)}}));s.start({originId:r.getWindowId({name:this._manifest.name}),shellChannel:new s.RpcChannel(n.localRpcPort),windowRedirectMap:n.internalEnv.extensionRedirectMap});i.mark("ManifestEnd");i.mark("InitializationStart");this.initializeEntryPoint(e).finally((function(){i.mark("InitializationEnd");n.postMessageParent({bootstrapTelemetry:ut.getBootstrapTelemetry(),manifest:w._manifest,definition:n.internalEnv.inManifestCache?{}:b()},3);MsPortalFx.isFeatureEnabled("nativeperf")&&["EntryPoint","PortalScripts","Oss","MsPortalFx","Manifest","Initialization"].forEach((function(n){i.measure(MsPortalFx.getEnvironmentValue("extensionName")+": "+n,n+"Start",n+"End")}))}));ut.traceCdnIndex();(n.isDevelopmentMode||MsPortalFx.isFeatureEnabled("internalonly"))&&Q.nextTick((function(){var r=["ai_session","ai_user","ARRAffinity","VstsSession"],u=["ai_authUser","mp_"],n=[],f=(document.cookie||"").split(";").map((function(n){return n.split("=")[0].trim()})),t,i;f.forEach((function(t){u.forEach((function(i){t.startsWith(i)&&(n.push(t),document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:00 UTC")}))}));n.length&&s.client.log("fx",{level:2,area:y,code:0,message:"Deleted cookie(s) for "+MsPortalFx.getEnvironmentValue("extensionName")+": "+n.join()});document.__lookupGetter__&&document.__lookupSetter__&&(t=document.__lookupGetter__("cookie"),i=document.__lookupSetter__("cookie"),t&&i&&(document.__defineGetter__("cookie",t.bind(document)),document.__defineSetter__("cookie",(function(n){var t=n.split("=")[0].trim();return r.includes(t)?i.call(document,n):(s.client.log("fx",{level:2,area:y,code:0,message:"Blocking cookie for "+MsPortalFx.getEnvironmentValue("extensionName")+": "+t}),"")}))))}))}return u.prototype.initializeEntryPoint=function(n){var t=this;return Q(n()).then((function(n){t._entryPoint=n;t._initialize();t._entryPoint.initialize();t._entryPointDeferred.resolve(!0)}))},u.prototype._initialize=function(){var i=this,t;if(this._initialized){p.warning("alreadyInit");return}r.pingEndPoint.register(f,c,(function(){return Q(!0)}));this._entryPoint.getObservable&&r.sharedObservablesEndPoint.registerObjectFactory(f,{allowedOrigin:null,allowRemoteChanges:!1,handler:function(n){return i._entryPoint.getObservable(n,[])}});w.status.subscribe(this._ltm,(function(n){r.extensionStatusEndPoint.invoke(f,o,n)}));w.initialize((function(n){return i.getAuthorizationToken(n).then((function(n){return n&&n.header}))}));t=MsPortalFx.getEnvironmentValue("localGalleryPackageEndpoint");t&&r.registerLocalGalleryPackagesEndpointDefinition.invoke(f,o,n.ensureAbsoluteUri(t));n.Data.beginTelemetrySubmission();this._initialized=!0},u.prototype.getAuthorizationToken=function(n){return this._tokenCache.getToken(n)},u.prototype.getSharedSettings=function(){return r.getSharedSettingsEndPoint.invoke(f,o,undefined)},u.prototype.getUserInfo=function(){return r.getUserInfoEndPoint.invoke(f,o,undefined)},u.prototype.getLocalGalleryPackagesEndpoints=function(){return r.getLocalGalleryPackagesEndpointsDefinition.invoke(f,o,undefined)},u.prototype.hasPermission=function(n,t){return r.hasPermissionsToShell.invoke(f,o,{entityId:n,requestedActions:t}).then((function(n){return typeof n=="string"?(p.error(n),!0):n}))},u.prototype.assetHasPermission=function(n,t){var i=this;return this.mapAssetIdToResourceId(n).then((function(n){return i.hasPermission(n,t)}))},u.prototype.mapAssetIdToResourceId=function(n){return r.mapAssetIdToResourceIdEndPoint.invoke(f,o,n)},u.prototype.mapResourceIdToAssetId=function(n){return r.mapResourceIdToAssetIdEndPoint.invoke(f,o,n)},u.prototype.mapAssetIdToDynamicSelectionAndIcon=function(n,t){return r.mapAssetIdToDynamicSelectionAndIconEndPoint.invoke(f,o,{assetId:n,forceBladeSelection:t})},u.prototype.mapResourceIdToDynamicSelectionAndIcon=function(n,t){return r.mapResourceIdToDynamicSelectionAndIconEndPoint.invoke(f,o,{resourceId:n,forceBladeSelection:t})},u.prototype.getAssetTypeInformation=function(n,t){return r.getAssetTypeInformationEndPoint.invoke(f,o,{extensionName:n,assetType:t})},u.prototype.getResourceTypeAssetTypeInformation=function(n){return r.getResourceTypeAssetTypeInformationEndPoint.invoke(f,o,n)},u.prototype.getResourceAssetInformation=function(n){return r.getResourceAssetInformationEndPoint.invoke(f,o,n)},u.prototype.getResource=function(n,t,i){return r.getResourceEndPoint.invoke(f,o,{resourceId:n,skipCache:i,invoker:t})},u.prototype.getResourceGroup=function(n,t,i){return r.getResourceGroupEndPoint.invoke(f,o,{resourceGroupId:n,skipCache:i,invoker:t})},u.prototype.signalResourcesChanged=function(n){return r.signalResourcesChangedEndPoint.invoke(f,o,n)},u.prototype.disableAjaxServerVersionCheck=function(){w.disableVersionCheck()},u.prototype.getObservable=function(n){var t=this,i=n.telemetryContext,r=s.messageContext;return this._entryPointDeferred.promise.then((function(){return s.invokeWithContext(r,(function(){var u;switch(n.type){case it.PartViewModel:u=tt.usingState((function(){return t.getPartViewModel(n)}),i);break;case it.ViewModel:t._entryPoint.getViewModel&&(u=tt.usingState((function(){return t.getViewModel(n)}),i))}if(u)return u.then((function(t){return ot(t,n,r)||t}));v.noObservable()}))}))},u.prototype.getGalleryServiceViewModel=function(){var t=this,n=this._manifest&&this._manifest.galleryService&&this._manifest.galleryService.serviceViewModel;return n?this._entryPointDeferred.promise.then((function(){return nt.composeViewModel(t._entryPoint.getViewModel,n,null,!1)})):Q(undefined)},u.prototype.dispose=function(){this._ltm&&(this._ltm.dispose(),this._ltm=null)},u.prototype.getViewModel=function(n){var t=n.earlyExecTasks&&function(t){lt(t,n.earlyExecTasks)};return Q(nt.composeViewModel(this._entryPoint.getViewModel,n.name,n.initialState,n.createSelectable,t))},u.prototype.getPartViewModel=function(i){var e=n.Composition.BladeContainer,l=e.BladeContainer,v=e.bindActionBar,r=i.initialState,o=n.ViewModels.createFrameworkPartViewModel(),s=i.collapsed,y={selectable:i.createSelectable?a.Part.createSelectableViewModel(r):undefined,location:i.partLocation,flags:i.flags},h=i.containerType===1,p=h?l:a.PartContainer,w=function(n,t){h&&v(n,t)},u=new p(o,y),f=this._entryPoint.getPartViewModel(i.name,u,r),b="Extension/"+this._extensionId+"/PartType/"+i.name,c=function(n){t.isNullOrUndefined(s)||n.collapsed(s);w(u,n);var f=new a.Part(o,u,n,r,b);return i.earlyExecTasks&&lt(n,i.earlyExecTasks),f};return Q.isPromiseAlike(f)?f.then(c):Q(c(f))},u})();r.RuntimeImpl=et;g=["title","subtitle","icon","statusBar","menuContent","_msPortalFxV2ShellApi"];r.createViewModelWrapper=ot})(l=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){n.ManagementGroupId="management_group";n.SupportGroupId="support_group";n.QuickAccessGroupId="quickaccess_group";n.MonitoringGroupId="monitoring_group";n.EventLogsItemId="eventlogs";n.ExportTemplateItemId="exporttemplate";n.MyAccessItemId="access";n.ResourceProvidersItemId="resourceproviders";n.ResourceHealthItemId="resourcehealth";n.ResourceGroupsItemId="resourceGroups";n.ResourcesItemId="resources";n.SubscriptionCertsItemId="subcerts";n.SubscriptionQuotasItemId="quotas";n.SupportHelpRequestItemId="supportrequest";n.TagsItemId="tags";n.LocksItemId="locks";n.TroubleshootItemId="troubleshoot";n.UsersItemId="users";n.PropertiesItemId="properties";n.AlertsItemId="alerts";n.DiagnosticsItemId="diagnostics";n.MetricsItemId="metrics";n.AppInsightsItemId="appinsights";n.LogAnalyticsItemId="loganalytics";n.LogSearchItemId="logsearch";n.ResourceAdvisorItemId="resourceadvisor"})(t=n.Assets||(n.Assets={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function c(n,t,r){var e,s=!1;return n.registerForDispose((function(){s=!0})),i.has(r)?e=i.get(r):(e=Q(u.acquireObject(f,h.getWindowId(t),{})).then((function(t){return n.registerForDispose(t),t.getValue()})),i.set(r,e),n.registerForDispose((function(){i.delete(r)}))),e.then((function(n){return s?Q.reject(new o.DisposedError({message:"supplyMenuDetailBladeReferenceAsync's input lifetime is already disposed",errorLevel:0})):Q(n.supplyBladeReferenceAsync(r))}))}var o=MsPortalFx.Errors,s=MsPortalFx.Base,r=s.Constants,h=n.Extension,u=n.Rpc.client,f="MenuDetailBladeReferenceLifeExtenderObject",i=new MsPortalFx.Map,e;t.supplyMenuDetailBladeReferenceAsync=c;e=(function(){function n(){this.value=ko.observable()}return n.prototype.supplyBladeReferenceAsync=function(n){var r=this,t=function(n){return r.value(n),n},i;return n.supplyBladeReference?(i=n.supplyBladeReference(),t(i)):n.supplyBladeReferenceAsync().then((function(n){return t(n)}))},n})();u.registerObjectFactory(f,{allowedOrigin:[r.ExtensionNames.Hubs,r.Shell],allowRemoteChanges:!0,handler:function(){return new e}})})(t=n.Assets||(n.Assets={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){function t(n,t,i,r,u){var f=function(n){if(n.length){var r=n.map((function(n){return n.resourceId.toLowerCase()})),t=i().filter((function(n){return!r.includes(n.resourceId.toLowerCase())}));t.push.apply(t,n);i(t)}},e=t.items.filter(n,r).map(n,(function(n,t){return ko.ignoreDependencies((function(){return u(t)}))}));e.subscribeAndRun(n,f)}n.ConnectView=t})(t=n.SupplementalDataStreamHelper||(n.SupplementalDataStreamHelper={}))})(t=n.Assets||(n.Assets={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){function f(n,t){return(n&t)===t}function o(n,t){return n&&n.viewModel&&f(n.contracts,t)}function i(n,t){return Q(new e.PdlBladeReference(n.detailBlade,n.extension,{parameters:n.detailBladeInputs,onClosed:t}))}function s(n){return t().mapAssetIdToResourceId(n)}function h(n){return t().mapResourceIdToAssetId(n)}function r(n,i){return t().mapAssetIdToDynamicSelectionAndIcon(n,i)}function c(n,t){return r(n,t).then((function(n){return n.selection}))}function l(n){return Q(r(n,!0).then((function(n){return i(n.selection)})))}function u(n,i){return t().mapResourceIdToDynamicSelectionAndIcon(n,i)}function a(n,t){return u(n,t).then((function(n){return n.selection}))}function v(n,t){return Q(u(n,!0).then((function(n){return i(n.selection,t)})))}function y(n,i){return t().getAssetTypeInformation(n,i)}function p(n){return t().getResourceTypeAssetTypeInformation(n)}function w(n){return t().getResourceAssetInformation(n)}function b(n){return t().signalResourcesChanged(n)}var e=FxImpl.Composition.Selectable,t=FxImpl.Extension.getRuntime;n.supportsContract=f;n.assetTypeInformationSupportsContract=o;n.mapDynamicBladeSelectionToBladeReference=i;n.mapAssetIdToResourceId=s;n.mapResourceIdToAssetId=h;n.mapAssetIdToDynamicSelectionAndIcon=r;n.mapAssetIdToDynamicSelection=c;n.mapAssetIdToBladeReference=l;n.mapResourceIdToDynamicSelectionAndIcon=u;n.mapResourceIdToDynamicSelection=a;n.mapResourceIdToBladeReference=v;n.getAssetTypeInformation=y;n.getResourceTypeAssetTypeInformation=p;n.getResourceAssetInformation=w;n.signalResourcesChanged=b})(t=n.Assets||(n.Assets={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function u(n,t){return i(r.getWindowId({name:n}),t)}function i(n,t){return n+"_"+t}var r=n.Extension;t.getAssetTypeOrResourceTypeId=u;t.getAssetTypeOrResourceTypeIdByWindowId=i})(t=n.Assets||(n.Assets={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(){this._init()}return n.prototype.add=function(n,t){var i,r,u;return n&&(i=void 0,r=this._entries,t?(u=this._names,i=u[t],i===undefined&&(i=r.length,u[t]=i)):i=r.length,r[i]=n),this},n.prototype.remove=function(n){var t=this._entries,i,r;return typeof n=="string"?(i=this._names,r=i[n],isNaN(r)||(delete i[n],t[r]=null)):t.forEach((function(i,r){i===n&&(t[r]=null)})),this},n.prototype.clear=function(){return this._init(),this},n.prototype.fire=function(n){return this._entries.forEach((function(t){t&&t(n)})),this},n.prototype._init=function(){this._entries=[];this._names={}},n})();n.Callbacks=t})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";var t,i,r,u,f,e,o,s,h,c;n.Shell="fx",(function(n){n.Hubs="HubsExtension";n.Billing="Microsoft_Azure_Billing";n.AzureExpert="Microsoft_Azure_Expert";n.AzureInsights="Microsoft_Azure_Insights";n.AzureMonitoring="Microsoft_Azure_Monitoring";n.ActiveDirectory="Microsoft_Azure_AD";n.ClassicResources="Microsoft_Azure_ClassicResources";n.Marketplace="Microsoft_Azure_Marketplace";n.Resources="Microsoft_Azure_Resources";n.Support="Microsoft_Azure_Support";n.Websites="WebsitesExtension"})(t=n.ExtensionNames||(n.ExtensionNames={})),(function(n){n.Dashboard="Dashboard";n.ResourceGroups="ResourceGroups";n.BrowseAllBlade="BrowseAll";n.BrowseAllResources="BrowseAllResources";n.BrowseRecentResources="BrowseRecentResources";n.BrowseAllBladeWithType="BrowseAllWithType";n.BrowseServiceBlade="BrowseService";n.BrowseResourceGroupBlade="BrowseResourceGroup";n.BrowseResourceBlade="BrowseResource";n.Gallery="Gallery";n.StoreGallery="StoreGallery";n.Deployments="Deployments";n.ArmExplorer="ArmExplorer";n.WhatsNew="WhatsNew";n.BrowseDynamicResource="BrowseDynamicResource";n.BrowseDynamicAsset="BrowseDynamicAsset";n.SubscriptionDetail="Subscription";n.NonAssetResource="NonAssetResource"})(i=n.AssetNames||(n.AssetNames={})),(function(n){n.Subscriptions="Microsoft.Resources/subscriptions";n.ResourceGroups="Microsoft.Resources/subscriptions/resourcegroups";n.AllResources="Microsoft.Resources/resources";n.RecentResources="Microsoft.Resources/recent"})(r=n.ResourceTypes||(n.ResourceTypes={})),(function(n){var t;(function(n){n.BrowseServicePinnedPart="BrowseServicePart";n.BrowseResourcePinnedPart="BrowseResourcePinnedPart";n.BrowseResourceGroupPinnedPart="BrowseResourceGroupPinnedPart"})(t=n.Hubs||(n.Hubs={}))})(u=n.PartNames||(n.PartNames={})),(function(n){var t,i,r,u;(function(n){n.SubscriptionsBlade="SubscriptionsBlade"})(t=n.Billing||(n.Billing={})),(function(n){n.CreateHubBlade="PlusNewBlade";n.BrowseLinkBlade="BrowseLinkBlade";n.BrowseResourceBlade="BrowseResourceBlade";n.BrowseAllResourcesBlade="BrowseAllResourcesBlade";n.BrowseResourceGroupBlade="BrowseResourceGroupBlade";n.BrowseServiceBlade="BrowseServiceBlade";n.UnauthorizedAssetBlade="UnauthorizedAssetBlade";n.NotFoundAssetBlade="NotFoundAssetBlade";n.UnavailableAssetBlade="UnavailableAssetBlade";n.ResourceMenuBlade="ResourceMenuBlade";n.ResourceProperties="ResourceProperties";n.ResourceGroupMapBlade="ResourceGroupMapBlade"})(i=n.Hubs||(n.Hubs={})),(function(n){n.GalleryFeaturedMenuItemBlade="GalleryFeaturedMenuItemBlade";n.GalleryResultsListBlade="GalleryResultsListBlade";n.LegalTermsV2Blade="PCLegalTermsV2Blade"})(r=n.Marketplace||(n.Marketplace={})),(function(n){n.EventsBrowseBlade="EventsBrowseBlade"})(u=n.AzureMonitoring||(n.AzureMonitoring={}))})(f=n.BladeNames||(n.BladeNames={})),(function(n){n.ViewModel="viewModel";n.PartViewModel="partViewModel"})(e=n.ViewModelTypes||(n.ViewModelTypes={})),(function(n){n.FeatureAdoption="FeatureAdoption";n.FeatureObsolete="FeatureObsolete"})(o=n.Telemetry||(n.Telemetry={})),(function(n){n.RegisterExtension="TelemetrySharing.registerExtension";n.TraceTelemetry="TelemetrySharing.traceTelemetry"})(s=n.TelemetrySharing||(n.TelemetrySharing={})),(function(n){n.HomeMenuItem="home"})(h=n.GalleryMenuItems||(n.GalleryMenuItems={})),(function(n){n.EditScopeId="editScopeId";n.ReferrerInfo="referrerInfo"})(c=n.BladeParameterNames||(n.BladeParameterNames={}))})(t=n.Constants||(n.Constants={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function d(n){var t="task:";try{t+=JSON.stringify(n,(function(n,t){var i=t;return n==="args"&&(i=undefined),typeof t=="function"&&(i=t+""),i}))}catch(i){t+="{\nname: "+n.name+" \nFunc: "+(n.scheduledTask+"")+" }"}return t}function v(){}function h(){var n,v,u,f;if(!r&&(n=i.first(),n)){var e=l(),s=[n],h=!1,c=1,t=1;for(v=i.length;t<v;t++)if(u=i[t],u.scheduledExecutionTime<=e)c++,u!==n?s.push(u):h=!0;else break;h&&(i=s.concat(i.slice(t)));f=0;a&&(f=(c>>>2)*1e3);r=setTimeout(k,Math.max(f,n.scheduledExecutionTime-e));o=n}}function g(n){return n===o&&r}function c(){r&&(clearTimeout(r),r=null,o=null)}function y(n,t){var i,u="Error executing \n'"+d(n)+"'"+t?"\nerror:"+t.message:"",r;return e.isInstanceOfErrorType(t,e.Error)?(t.message=u,i=t):(r=new e.Error(u),r.innerErrors.push(t),i=r),i}var e=n.Errors,p=new t.Diagnostics.Log("MsPortalFx/Base/Base.Scheduler"),l=Date.now,a=!n.isFeatureEnabled("nodataperf"),u="",w={recurring:u,autoRecurring:u,concurrent:u,positiveInt:u},f=FxImpl.getErrorMap(w),r,o,i=[],b=function(){var t,u,n,f,r;try{if(u=i[0],c(u),n=i.shift(),n)if(v(n,!0),a)t=Q.fcall((function(){return n.scheduledTask.apply(n,n.args||[])})).catch((function(t){return Q.reject(y(n,t))})).finally((function(){n.recurring&&s.scheduleTask(n)}));else try{f=n.scheduledTask.apply(n,n.args||[]);t=Q(f)}catch(e){r=y(n,e);p.error(r);t=Q.reject(r)}finally{n.recurring&&s.scheduleTask(n)}}finally{h()}return t},k=b,s=(function(){function t(){}return t.scheduleTask=function(t,r){var s,u,a;t.recurring&&(t.absoluteTime&&f.recurring(),t.isAsync&&f.autoRecurring());!r&&i.includes(t)&&f.concurrent();t.name||(t.name="Anonymous "+n.getUniqueId());var y=l(),e=t,o=e.absoluteTime;for(o||(s=e.delayInMs,(isNaN(s)||s<=0)&&f.positiveInt(),o=y+s),e.scheduledExecutionTime=o,u=0,a=i.length;u<a;u++)if(i[u].scheduledExecutionTime>o)break;i.splice(u,0,e);v(e);u===0&&c();h()},t.deleteTask=function(n){var t=i.filter((function(t){return t!==n}));t.length!==i.length&&(i=t,g(n)&&c(),h())},t})();t.Scheduler=s})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";function i(n,t){return new FxImpl.Security.AuthTokenCacheImpl(n,t)}function r(n){return t.getRuntime().getAuthorizationToken(n)}function u(){return t.getRuntime().getUserInfo()}function f(n,i){return t.getRuntime().hasPermission(n,i)}function e(n,i){return t.getRuntime().assetHasPermission(n,i)}var t=FxImpl.Extension;n.createAuthTokenCache=i;n.getAuthorizationToken=r;n.getUserInfo=u;n.hasPermission=f;n.assetHasPermission=e})(t=n.Security||(n.Security={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function u(t,i){var r=n.createError(t&&t.errorMessage||"Token Error",{data:i});return MsPortalFx.extend(r,t),Q.reject(r)}function f(n,i){if(i?i.token=n:i={token:n},n&&n.expiresAt>0){var u=Date.now(),r=n.expiresAt-t.tokenRefreshBeforeExpiryTimespan;i.expiresAt=n.expiresAt;i.refreshAfter=r<u?-1:r}else i.expiresAt=-1,i.refreshAfter=-1;return i}function l(n,t){return s.getRuntime().hasPermission(n,t)}var o=MsPortalFx.Base,s=n.Extension,h=new o.Diagnostics.Log("MsPortalFx/Base/Internal/Base.Security"),r=1e3,i=6e4,c=4,e;t.tokenRefreshBeforeExpiryTimespan=6e5;t.tokenErrors={unknown:"Unknown",accessDenied:"AccessDenied",sessionEnded:"SessionEnded",credentialsExpired:"CredentialsExpired",networkError:"NetworkError",requiresMFA:"RequiresMfa",accountDisabled:"AccountDisabled",nullToken:"NullToken"};e=(function(){function n(n,t){var i=this;this._getTokenWorker=n;MsPortalFx.forEachKey(t,(function(n,t){i._cachedTokenMap=i._cachedTokenMap||{};i._cachedTokenMap[n]=f(t)}))}return n.prototype.getToken=function(n){var s=this._stalledPromise,u,f,o;if(s)return s;n=n||{};u={resourceName:n.resourceName||""};f=u.resourceName;this._cachedTokenMap=this._cachedTokenMap||{};var h=this._cachedTokenMap,t=h[f],e=Date.now(),i;if(t){if(i=t.refreshAfter,t.token&&i>0&&i>e)return Q(t.token)}else t={token:null,expiresAt:-1,refreshAfter:-1},h[f]=t;return(o=t.expiresAt,!t.token||o>0&&o<e)?(t.token=null,t.expiresAt=-1,t.refreshAfter=-1,this._refreshTokenWorker(u,!1,r,t)):(i>0&&i<e&&this._refreshTokenWorker(u,!0,r,t),Q(t.token))},n.prototype.getTokenExpiresAt=function(n){this._cachedTokenMap=this._cachedTokenMap||{};var t=this._cachedTokenMap[n||""];return t&&t.expiresAt},n.prototype._refreshTokenWorker=function(n,t,i,r){if(r.tokenPromise)return r.tokenPromise;var u=MsPortalFx.extend(n,{isBackground:t,ignoreRejection:!1}),f=this._refreshTokenWorkerInternal(u,i,r);return r.tokenPromise=f.catch((function(n){var t=n,i;return u.ignoreRejection?(i=new MsPortalFx.Errors.CanceledError("GetAuthorizationTokenOptionsExtended2.ignoreRejection === true"),i.innerErrors.push(n),t=i):t&&t.message&&(t.message="Base.Security: Unexpected failure getting token. Error:"+t.message+"."),Q.reject(t)})).finally((function(){r.tokenPromise=null}))},n.prototype._refreshTokenWorkerInternal=function(n,r,e){var o=this;return Q(this._getTokenWorker(n)).then((function(s){var l=s||{},y=l.token,p,w,a,v;if(y)return f(y,e),y;if(p={options:n,retryDelay:r},n.isBackground)return n.ignoreRejection=!0,u(s,p);w=l.error;switch(w){case t.tokenErrors.sessionEnded:v=o._stalledPromise;v||(o._stalledPromise=v=Q.defer().promise);a=v;break;case t.tokenErrors.accessDenied:n.ignoreRejection=!0;a=u(s,p);break;default:w===t.tokenErrors.unknown&&h.warning("FX failed to get token. Blocking extension token requests until issue resolves. ServerMessage:"+l.errorMessage+". ServerErrorCode:"+l.error+".");a=Q.delay(r).then((function(){var t=r>=i?i:Math.min(r*c,i);return e.tokenPromise=null,o._refreshTokenWorkerInternal(n,t,e)}))}return a}))},n})();t.AuthTokenCacheImpl=e;t.hasPermission=l})(t=n.Security||(n.Security={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){var t,i,r;(function(n){n[n.Minimized=0]="Minimized";n[n.Normal=1]="Normal";n[n.Maximized=2]="Maximized"})(t=n.DisplayState||(n.DisplayState={})),(function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large";n[n.XLarge=3]="XLarge";n[n.Menu=51]="Menu"})(i=n.BladeWidth||(n.BladeWidth={})),(function(n){n[n.Action=1]="Action";n[n.Info=2]="Info";n[n.Create=3]="Create";n[n.Context=4]="Context";n[n.Help=5]="Help";n[n.Basic=6]="Basic";n[n.ContextAction=7]="ContextAction";n[n.BasicWithCommands=8]="BasicWithCommands";n[n.Hub=9]="Hub";n[n.HubSubMenu=10]="HubSubMenu";n[n.ResourceSetting=11]="ResourceSetting";n[n.App=12]="App"})(r=n.BladeStyle||(n.BladeStyle={}))})(t=n.Internal||(n.Internal={}))})(t=n.Blades||(n.Blades={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=MsPortalFx,r=i.Base,s=i.Errors,u=i.Helpers.resolve(),o=ko,f=(function(){function t(n,t,i){var u=this,f;this._loadedCacheEntry=o.observable(null);this._isDisposed=!1;this._requestInProgress=o.observable();this._dataSource=n;this._errorNotificationTarget=t;this._interceptNotFound=i&&i.interceptNotFound!==undefined?i.interceptNotFound:!0;r.ProxiedObservables.markNonSerializable(this);f=this._lifetime=t;this._isLoading=ko.computed(f,(function(){return!!u._requestInProgress()}));f.registerForDispose((function(){u._isDisposed=!0;u._cancelInProgressRequest();u._releaseCurrentContents()}))}return Object.defineProperty(t.prototype,"loading",{get:function(){return this._isLoading},enumerable:!0,configurable:!0}),t.prototype.fetch=function(t){var e=this,o=this._requestInProgress,s,h,c,f;return this._isDisposed?u:(s=this._currentCacheEntryDisposer,h=function(){s&&s.dispose()},this._currentParams=t,this._cancelInProgressRequest(),this._currentParams===null||this._currentParams===undefined)?(this._loadedCacheEntry(null),h(),u):(this._currentCacheEntryDisposer=new n.TriggerableLifetimeManager,c=new r.Promises.CancelationToken,f={cancelationToken:c,cancelablePromise:r.Promises.wrapWithCancelablePromise(this._dataSource.fetch(t,this._currentCacheEntryDisposer),c),externalPromise:null},h(),o(f),f.cancelablePromise.then((function(n){e._loadedCacheEntry(n);o(null)}),(function(){o(null);e._loadedCacheEntry(null)})),f.externalPromise=f.cancelablePromise.then(i.noop),f.externalPromise.then(null,(function(n){e._handleFetchRejections(n)})),f.externalPromise)},t.prototype._cancelInProgressRequest=function(){var n=this._requestInProgress;n()&&(n().cancelationToken.cancel(),n(null))},t.prototype._releaseCurrentContents=function(){this._currentCacheEntryDisposer&&(this._currentCacheEntryDisposer.dispose(),this._currentCacheEntryDisposer=null)},t.prototype._handleFetchRejections=function(n){if(n instanceof s.NotFoundDataError&&this._interceptNotFound!==!1){var t=n;t.handled=!0;typeof this._interceptNotFound=="function"?this._interceptNotFound(this._currentParams):this._errorNotificationTarget.notFound&&this._errorNotificationTarget.notFound()}},t})(),e;f=__decorate([i.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Object])],f);t.ObjectView=f;e=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u._partialErrors=o.observableArray(),ko.reactor(i,(function(){var n=u._loadedCacheEntry();u._partialErrors(n&&n.partialErrors()||[])})),u}return __extends(t,n),Object.defineProperty(t.prototype,"_refreshableDataSource",{get:function(){return this._dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"partialErrors",{get:function(){return this._partialErrors},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){var n=this._requestInProgress,t,f,e;if(this._isDisposed||(t=this._currentCacheEntryDisposer,!t))return u;if(!n()){if(!this._loadedCacheEntry())return this.fetch(this._currentParams);f=new r.Promises.CancelationToken;n({cancelationToken:f,cancelablePromise:r.Promises.wrapWithCancelablePromise(this._refreshableDataSource.refresh(this._currentParams,t),f),externalPromise:null});e=function(){n(null)};n().cancelablePromise.then(e,e);n().externalPromise=n().cancelablePromise.then(i.noop)}return n().externalPromise},t})(f);e=__decorate([i.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Object])],e);t.DataView=e})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";var r=MsPortalFx.Base,i=MsPortalFx.Data,u=(function(){function n(){r.ProxiedObservables.markNonSerializable(this);this._atomizationCache=new i.ObjectCache({serializeKey:function(n){return JSON.stringify([n.type,n.id])},supplyValue:function(){return null}})}return n.prototype.getEntity=function(n,t,i){var r={type:n,id:t},u;return this._atomizationCache.hasEntry(r)&&(u=this._atomizationCache.getValue(r,i)),u},n.prototype.addEntity=function(n,t,i,r){this._atomizationCache.insertValueIfNotPresent({type:n,id:t},i,r)},n.prototype.releaseEntities=function(){},n})(),f;t.RefCountingAtomizationContext=u,(function(t){function u(i){i=i||r;var u=t.atomizationContextCollection[i];return u||(u=n.Data.AtomizationContext.createInstance(),t.atomizationContextCollection[i]=u),u}function f(n){if(!n)return!1;var t=i.Metadata.getTypeMetadata(n);return!!(t&&t.hasGloballyUniqueId&&i.Metadata.typeHasId(n))}function e(){return new n.Data.RefCountingAtomizationContext}t.atomizationContextCollection={};var r="__default__";t.get=u;t.canAtomizeType=f;t.createInstance=e})(f=t.AtomizationContext||(t.AtomizationContext={}))})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";var u=MsPortalFx.Base,f=MsPortalFx.Data,e=0,o=0,c=new u.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.DataCache"),i="",s={loaderConflict:i,getSerialize:i,dataCacheProps:i,establishDataSet:i},r=n.getErrorMap(s),h=(function(){function n(n){var t=this,i,o;u.ProxiedObservables.markNonSerializable(this);this._cacheName=[n.cacheName,n.entityTypeName,"DataCache",++e].filter((function(n){return!!n})).join(":");n.loader?(this._loader=n.loader,(n.sourceUri||n.httpMethod)&&r.loaderConflict()):n.sourceUri||n.supplyData&&n.serializeParams?(this._loader=new f.DataCacheLoader2(n),i=n.httpMethod&&n.httpMethod.toLowerCase()!=="get",i&&!n.serializeParams&&r.getSerialize()):r.dataCacheProps();o={collectEfficiencyTelemetry:!0,supplyValue:function(n,i){var r=t._createUniqueDataSetName();return t._supplyValue(r,n,i)},tryFindValueInRelatedCache:function(n,i){var u=t._tryFindDataInRelatedCache(n,i);if(u){var e=ko.toJS(u),r=t._createUniqueDataSetName(),o=t._establishDataSet(r,n,e,i),f=Q(o);return f.dataSetName=r,t._doesPoll()&&t._supplyValue(r,n,i),{value:f}}return null},serializeKey:function(n){return t._loader.serializeParams(n)},evictionDelay:n.evictionDelay,extendEntryLifetimes:n.extendEntryLifetimes,onEntryDisposed:function(n){var i=function(){t._loader.disposeDataSet(n)};n.state&&n.state()!=="pending"||n.isFulfilled&&n.isFulfilled()||n.isRejected&&n.isRejected()?i():n.then(i,i)}};this._cacheByParams=new f.ObjectCache(o)}return n.prototype.fetch=function(n,t){var i=this._cacheByParams,r=i.getValue(n,t);return r.then(null,(function(){i.immediatelyEvictEntry(n)})),r},n.prototype.refresh=function(n,t){var r=this._cacheByParams.hasEntry(n),i=this.fetch(n,t);return r?this._loader.refreshDataSet(i):i},n.prototype.refreshAll=function(n){var t=this;this._forEachEntry((function(n,i){t._loader.refreshDataSet(i)}),n)},n.prototype.forceRemove=function(n){this._cacheByParams.immediatelyEvictEntry(n)},n.prototype.applyChanges=function(n,t){var i=this;this._forEachEntry((function(t,r,u){u&&n(t,u);var e=r.dataSetName,f=i._loader;f.isLoadingDataSet(e)&&f.refreshDataSet(r)}),t)},n.prototype.dispose=function(){this._cacheByParams.dispose()},n.prototype._doesPoll=function(){return this._loader._doesPoll()},n.prototype._findEntity=function(n,t){var r=this,i;return this._forEachEntry((function(u,f,e){if(e){var o=r._getDataFromDataSet(e);i=n(u,o,t)}}),(function(){return!i})),i},n.prototype.dump=function(n){var t=[];if(this._forEachEntry((function(n,i,r){t.push(ko.toJS({key:n,data:!r?"<null dataSet>":r.data}))})),n)return t;console.log(JSON.stringify(t,null,4))},n.prototype._tryFindDataInRelatedCache=function(){return null},n.prototype._forEachEntry=function(n,t){var i=this,r=MsPortalFx.memoize((function(n){return i._loader.getLoadedDataSet(n)}));this._cacheByParams.forEachEntry((function(i,u){(!t||t(i))&&n(i,u,r(u.dataSetName))}))},n.prototype._supplyValue=function(n,t,i){return this._loader.loadDataSetForParams(n,t,i)},n.prototype._establishDataSet=function(n,t,i,u){return this._loader.establishDataSet||r.establishDataSet(),this._loader.establishDataSet(n,t,i,u)},n.prototype._createUniqueDataSetName=function(){return this._cacheName+":"+ ++o},n})();t.DataCache=h})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";var s=MsPortalFx,l=s.Base,h=s.Data,r=n.Rpc,a=n.Data,c,e,i;t.saveSerializedEditScopeEndPoint=new r.ActionEndPointDefinition("FxImpl.Data.saveSerializedEditScope");t.loadSerializedEditScopeEndPoint=new r.FuncEndPointDefinition("FxImpl.Data.loadSerializedEditScope");t.onEditScopeDiscardedEndPoint=new r.ActionEndPointDefinition("FxImpl.Data.onEditScopeDiscarded");t.updateEditScopeIsSavingStateEndPoint=new r.ActionEndPointDefinition("FxImpl.Data.updateEditScopeIsSavingState");var u="",v={dataCachePolling:u,viewUnloaded:u,serializeParams:u,fetchPrereq:u,existingPrereq:u,newPrereq:u},f=n.getErrorMap(v),o;(function(n){n[n.LoadOriginalDataFailed=0]="LoadOriginalDataFailed";n[n.LoadEditsFailed=1]="LoadEditsFailed";n[n.ApplyEditsFailed=2]="ApplyEditsFailed"})(o=t.FetchEditScopeError||(t.FetchEditScopeError={}));c=(function(){function n(n){n===void 0&&(n=r.client);var i=this;this._caches=[];t.onEditScopeDiscardedEndPoint.register(n,["fx"],(function(n){i._caches.forEach((function(t){t.onEditScopeDiscarded(n)}))}))}return n.prototype.register=function(n){this._caches.push(n)},n.prototype.deregister=function(n){this._caches.remove(n)},n})();t.EditScopeDiscardedReceiver=c;t.editScopeDiscardedReceiver=new c;e=i=(function(){function r(n,r){var u=this,o,e;this._ltm=i.allLifetimes.createChildLifetime();this._editScopeEditsChangedSubs={};this._loadEdits=r&&r.loadEdits||i._remoteLoadEdits;this._saveEdits=r&&r.saveEdits||i._remoteSaveEditScope;this._updateEditScopeIsSavingState=r&&r.updateEditScopeIsSavingState||i._remoteUpdateEditScopeIsSavingState;this._entityTypeName=n.entityTypeName;o=this._options=s.clone(n);e=o.dataCache;e&&e._doesPoll()&&f.dataCachePolling();l.ProxiedObservables.markNonSerializable(this);this._cacheByParams=new h.ObjectCache({supplyValue:function(n,t){return u._getEditScopeForKey(n,t)},serializeKey:function(n){return u._serializeKey(n)},onEntryDisposed:function(n,t){var i=u._serializeKey(t),r=u._editScopeEditsChangedSubs[i];r&&(u._editScopeEditsChangedSubs[i]=null,r.dispose());n.then((function(n){n.dispose()}))}});t.editScopeDiscardedReceiver.register(this)}return r.prototype.createView=function(n,t){return new h.EditScopeView(this,n,t||{})},r.prototype.fetch=function(n,t){return this._cacheByParams.getValue(n,t)},r.prototype.forEachEditScope=function(n){var t=[];return this._cacheByParams.forEachEntry((function(i,r){t.push(r.then((function(t){n(i.editScopeId,t)})))})),Q.all(t)},r.prototype.dispose=function(){var i=this._cacheByParams,n;i&&(i.dispose(),this._cacheByParams=null);n=this._ltm;n&&(n.dispose(),this._ltm=null);t.editScopeDiscardedReceiver.deregister(this)},r.prototype.disposeAndDiscardEdits=function(n,t){var r=t.editScope();r||f.viewUnloaded();r.dispose();i._remoteSaveEdits(n,{edits:[]})},r.prototype.onEditScopeDiscarded=function(n){return this.forEachEditScope((function(t,i){t!==n||i.saving()||i.revertAll()}))},r._remoteSaveEditScope=function(n,t){i._remoteSaveEdits(n,t.getEdits())},r._remoteSaveEdits=function(n,r){t.saveSerializedEditScopeEndPoint.invoke(i._rpcClient,"fx",{editScopeId:n,edits:r})},r._remoteLoadEdits=function(r){return Q(t.loadSerializedEditScopeEndPoint.invoke(i._rpcClient,"fx",r)).catch((function(t){return n.QReject("Loading of EditScope edits from user settings service failed.",{innerErrors:t})}))},r._remoteUpdateEditScopeIsSavingState=function(n,r){t.updateEditScopeIsSavingStateEndPoint.invoke(i._rpcClient,"fx",{editScopeId:n,isSaving:r})},Object.defineProperty(r.prototype,"_isDisposed",{get:function(){return this._cacheByParams===null},enumerable:!0,configurable:!0}),r.prototype._serializeKey=function(n){var e=n.editScopeId,i=n.params,r,t,u;return i&&(r=this._options,t=r.serializeParams,t||(t=r.serializeKeyOrQuery,t||(u=typeof i,u==="number"||u==="string"?t=JSON.stringify:f.serializeParams())),e+=":"+t(i)),e},r.prototype._getEditScopeForKey=function(n,t){var r,i,u;if(!n.editScopeId)return Q.fcall((function(){return f.fetchPrereq()}));if(i=this._options,u=n.params,u!==undefined)if(i.supplyExistingData)r=function(){return Q(i.supplyExistingData(u,t))};else if(i.dataCache)r=function(){return MsPortalFx.Base.Promises.cancelOnDispose(t,(function(){return i.dataCache.createView(t)})).then((function(n){return n.fetch(u).then((function(){return n.data}))}))};else return Q.fcall((function(){return f.existingPrereq()}));else if(i.supplyNewData)r=function(){return Q(i.supplyNewData())};else if(i.entityTypeName)r=function(){return Q(h.Metadata.createEmptyObject(i.entityTypeName))};else return Q.fcall((function(){return f.newPrereq()}));return this._acquireEditScope(n,r,t,i.entityTypeName)},r.prototype._acquireEditScope=function(n,t,i,r){var u=this,s=this._ltm.createChildLifetime(),e,f,o;return i.registerForDispose(s),MsPortalFx.Base.Promises.cancelOnDispose(s,(function(){return t()})).then((function(t){var h,s=u._options;if(s.refreshEditScope?h=function(t){var r=i.createChildLifetime();return MsPortalFx.Base.Promises.cancelOnDispose(r,(function(){return s.refreshEditScope(n.params,r,t)})).finally((function(){r.dispose()}))}:s.dataCache&&(h=function(){var t=i.createChildLifetime();return MsPortalFx.Base.Promises.cancelOnDispose(t,(function(){return s.dataCache.createView(t)})).then((function(t){return t.fetch(n.params).then((function(){return t.data}))})).finally((function(){t.dispose()}))}),o=i.createChildLifetime(),e=n.editScopeId,f=a.createEditScope(o,t,{kind:s.kind,typeName:r,refresh:h,save:s.saveEditScopeChanges&&function(t,i,r){u._updateEditScopeIsSavingState(e,!0);var f=o.createChildLifetime();return u._cacheByParams.getValue(n,f),t.saving.subscribe(f,(function(n){n||(f.dispose(),u._updateEditScopeIsSavingState(e,!1))})),s.saveEditScopeChanges(n.params,t,i,f,r)}}),s.onEditScopeCreated)s.onEditScopeCreated(i,f);return u._loadAndApplyEdits(f,e)})).then((function(){var i=u._serializeKey(n),t=u._editScopeEditsChangedSubs[i];return t&&t.dispose(),t=u._editScopeEditsChangedSubs[i]=s.createChildLifetime(),f.editsChanged.subscribe(t,(function(){u._saveEdits(e,f)})),f})).catch((function(n){return o&&o.dispose(),Q.reject(n)}))},r.prototype._loadAndApplyEdits=function(t,i){var r=this;return Q(this._loadEdits(i)).then((function(i){if(!r._isDisposed)return i&&!t.applyEdits(i)?n.QReject(o[o.ApplyEditsFailed]+": Application of EditScope edits from user settings service failed.",{data:i}):void 0})).catch((function(t){return n.QReject(""+o[o.LoadEditsFailed],{innerErrors:t})}))},r})();e._rpcClient=r.client;e.allLifetimes=new n.TriggerableLifetimeManager;e=i=__decorate([MsPortalFx.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object])],e);t.EditScopeCache=e})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";var f=MsPortalFx,s=f.Base,y=n.Rpc,h=f.Helpers,c=h.resolve,l=h.Deferred,o=f.Data,a=new s.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.EditScopeCache"),v=n.Data.editScopeDiscardedReceiver,r="",p={noEditScope:r,missingSerializeParams:r,missingSupplyExistingData:r,fetchNewPrereq:r,fetchExistingPrereq:r},u=n.getErrorMap(p),e=i=(function(){function r(t,r){var u=this;this._ltm=new n.TriggerableLifetimeManager;this._editScopeEditsChangedSubs={};this._loadEdits=r&&r.loadEdits||i._remoteLoadEdits;this._saveEdits=r&&r.saveEdits||i._remoteSaveEditScope;this._entityTypeName=t.entityTypeName;this._options=f.clone(t);s.ProxiedObservables.markNonSerializable(this);this._cacheByParams=new o.ObjectCache({supplyValue:function(n,t){return u._getEditScopeForKey(n,t)},serializeKey:function(n){return u._serializeKey(n)},onEntryDisposed:function(n,t){var i=u._serializeKey(t),r=u._editScopeEditsChangedSubs[i];r&&(u._editScopeEditsChangedSubs[i]=null,r.dispose());n.then((function(n){n.dispose()}))}});v.register(this)}return r.prototype.createView=function(n,t){return new o.EditScopeView(this,n,t||{})},r.prototype.fetch=function(n,t){return this._cacheByParams.getValue(n,t)},r.prototype.forEachEditScope=function(n){var t=[];return this._cacheByParams.forEachEntry((function(i,r){t.push(r.then((function(t){n(i.editScopeId,t)})))})),Q.all(t)},r.prototype.dispose=function(){var n=this._cacheByParams;n&&(n.dispose(),this._cacheByParams=null);this._ltm&&(this._ltm.dispose(),this._ltm=null);v.deregister(this)},r.prototype.disposeAndDiscardEdits=function(n,t){var r=t.editScope();r||u.noEditScope();r.dispose();i._remoteSaveEdits(n,{edits:[]})},r.prototype.onEditScopeDiscarded=function(n){return this._revertEditScope(n)},r._remoteSaveEditScope=function(n,t){i._remoteSaveEdits(n,t.getEdits())},r._remoteSaveEdits=function(n,r){t.saveSerializedEditScopeEndPoint.invoke(i._rpcClient,"fx",{editScopeId:n,edits:r})},r._remoteLoadEdits=function(n){return t.loadSerializedEditScopeEndPoint.invoke(i._rpcClient,"fx",n).then(null,(function(n){a.error("Loading of EditScope edits from user settings service failed.");throw n;}))},Object.defineProperty(r.prototype,"_isDisposed",{get:function(){return this._cacheByParams===null},enumerable:!0,configurable:!0}),r.prototype._revertEditScope=function(n){return this.forEachEditScope((function(t,i){t===n&&i.revertAll()}))},r.prototype._serializeKey=function(n){var e=n.editScopeId,i=n.params,r,t,f;return i&&(r=this._options,t=r.serializeParams,t||(t=r.serializeKeyOrQuery,t||(f=typeof i,f==="number"||f==="string"?t=JSON.stringify:u.missingSerializeParams())),e+=":"+t(i)),e},r.prototype._getEditScopeForKey=function(n,t){var f,i=this._options,r=n.params;return n.editScopeId&&(r||r===null)?(i.supplyExistingData||u.missingSupplyExistingData(),f=function(){return i.supplyExistingData(r,t)}):n.editScopeId&&r===undefined&&i.supplyNewData?f=function(){return c(i.supplyNewData())}:n.editScopeId&&!r&&i.entityTypeName?f=function(){return c(o.Metadata.createEmptyObject(i.entityTypeName))}:i.supplyNewData||i.entityTypeName?u.fetchExistingPrereq():u.fetchNewPrereq(),this._acquireEditScope(n,f,t,i.entityTypeName)},r.prototype._acquireEditScope=function(i,r,u,f){var e=this,o,s=l(),h=s.promise(),c=i.editScopeId;return r().then((function(t){var r,h;if(!e._isDisposed){if(r=e._options,o=new n.TriggerableLifetimeManager,h=n.Data.createEditScope(o,t,{kind:r.kind,typeName:f,refresh:r.refreshEditScope&&function(n){var t=u.createChildLifetime();return r.refreshEditScope(i.params,t,n).finally((function(){t.dispose()}))},save:r.saveEditScopeChanges&&function(n,t,u){var f=o.createChildLifetime();return r.saveEditScopeChanges(i.params,n,t,f,u).finally((function(){f.dispose()}))}}),r.onEditScopeCreated)r.onEditScopeCreated(u,h);e._loadAndApplyEdits(h,c).then((function(){if(!e._isDisposed){var t=e._serializeKey(i),n=e._editScopeEditsChangedSubs[t];n&&n.dispose();n=e._editScopeEditsChangedSubs[t]=e._ltm.createChildLifetime();h.editsChanged.subscribe(n,(function(){e._saveEdits(c,h)}));s.resolve(h)}}),(function(n){s.reject(n)}))}}),(function(){s.reject(t.FetchEditScopeError.LoadOriginalDataFailed)})),h.catch((function(){o&&o.dispose()})),h},r.prototype._loadAndApplyEdits=function(n,i){var r=this;return this._loadEdits(i).then((function(i){if(!r._isDisposed){var u=l();return i?n.applyEdits(i)?u.resolve():(a.warning("Application of EditScope edits from user settings service failed."),u.reject(t.FetchEditScopeError.ApplyEditsFailed)):u.resolve(),u.promise()}}),(function(){return t.FetchEditScopeError.LoadEditsFailed}))},r})(),i;e._rpcClient=y.client;e=i=__decorate([MsPortalFx.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object])],e);t.EditScopeCacheOld=e})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";function c(n){f.client.invokeRpc(e.RpcMethods.submitObjectCacheTelemetry,MsPortalFx.Base.Constants.Shell,n)}function l(n,t){if(u){i=[];var r=n||h,f=t||c,e=window.setInterval((function(){i.length>0&&(f(i),i=[])}),r);return{dispose:function(){window.clearInterval(e)}}}}function a(){f.client.registerRpcEndPoint(e.RpcMethods.submitObjectCacheTelemetry,{allowedOrigin:null,handler:function(n,t){n.forEach((function(n){o.trace({extension:t.srcWindowId,timestamp:n.timestamp,source:n.source,action:"ObjectCacheRead",data:n})}))}})}var f=n.Rpc,e=n.Constants,o=MsPortalFx.Base.Diagnostics.Telemetry,i=[],h=5e3,u=MsPortalFx.isFeatureEnabled("dataobjectcachetelemetry"),r=Date.now,s;t.beginTelemetrySubmission=l;t.registerTelemetrySubmissionHandler=a;s=(function(){function n(){this._evictedEntryDateValues={};this._evictedEntryCircularBuffer=[]}return Object.defineProperty(n,"maxTrackedEvictedEntries",{get:function(){return 1e3},enumerable:!0,configurable:!0}),n.prototype.recordCacheRead=function(n,t){u&&(t?this._recordCacheHit(n):this._recordCacheMiss(n))},n.prototype.recordEviction=function(n){u&&(this._ensureEntryNotTrackedAsEvicted(n),this._evictedEntryDateValues[n]=r(),this._evictedEntryCircularBuffer.push(n),this._pruneExcessiveEvictedEntries())},n._getCurrentTelemetrySource=function(){var n=o.Context.getCompositionItemContext();return n?n.id:null},n.prototype._recordCacheHit=function(t){this._ensureEntryNotTrackedAsEvicted(t);i.push({timestamp:r(),key:t,source:n._getCurrentTelemetrySource(),wasHit:!0,secondsSinceEviction:null})},n.prototype._recordCacheMiss=function(t){var u=null;this._evictedEntryDateValues.hasOwnProperty(t)&&(u=(r()-this._evictedEntryDateValues[t])/1e3);i.push({timestamp:r(),key:t,source:n._getCurrentTelemetrySource(),wasHit:!1,secondsSinceEviction:u})},n.prototype._ensureEntryNotTrackedAsEvicted=function(n){if(this._evictedEntryDateValues.hasOwnProperty(n)){delete this._evictedEntryDateValues[n];var t=this._evictedEntryCircularBuffer.indexOf(n);t>=0&&this._evictedEntryCircularBuffer.splice(t,1)}},n.prototype._pruneExcessiveEvictedEntries=function(){while(this._evictedEntryCircularBuffer.length>n.maxTrackedEvictedEntries){var t=this._evictedEntryCircularBuffer.shift();delete this._evictedEntryDateValues[t]}},n})();t.ObjectCacheTelemetryCollector=s})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";function h(n){return(n.evictionDelay&&n.extendEntryLifetimes&&r.delayAndLifetime(),n.extendEntryLifetimes)?o:(n.evictionDelay>6e4&&r.maxEvictionDelay(6e4),n.evictionDelay)}var u=MsPortalFx.forEachKey,f=window,o=105e3,i="",s={delayAndLifetime:i,maxEvictionDelay:i,nullKey:i,nullCreateCallback:i,cacheDisposed:i},r=n.getErrorMap(s),c=(function(){function n(n){this._isDisposed=!1;this._evictionDelayMilliseconds=null;this._evictionTimeoutHandlesByKey={};this._entriesByKey={};this._entriesByReferrerThenKey={};MsPortalFx.Base.ProxiedObservables.markNonSerializable(this);n&&(n.onEntryDisposed&&(this._onDisposeEntryCallback=function(t,i){n.onEntryDisposed(i,t)}),this._evictionDelayMilliseconds=h(n))}return n.prototype.getEntry=function(n,t,i){n||r.nullKey();i||r.nullCreateCallback();this._isDisposed&&r.cacheDisposed();var u=this._entriesByKey[n];return u||(u=new e(n,i()),t&&(this._entriesByKey[n]=u)),t?(this._ensureReferenceExists(u,t),this._cancelAnyDelayedEviction(u.key)):this._evictionTimeoutHandlesByKey[u.key]||this._immediateEvictEntryIfNoReferences(u),u.value},n.prototype.hasEntry=function(n){return n in this._entriesByKey},n.prototype.dissociateEntry=function(n,t){var r=this._entriesByKey[n],i;r&&(r.dissociate(t),i=this._entriesByReferrerThenKey[t],i&&(delete i[n],MsPortalFx.isEmptyObject(i)&&delete this._entriesByReferrerThenKey[t]),this._delayedEvictEntryIfNoReferences(r))},n.prototype.immediatelyEvictEntry=function(n){var r=this,t=this._entriesByKey[n],i;t&&(i=t.dissociateFromAllReferrers(),i.forEach((function(t){var i=r._entriesByReferrerThenKey[t];i&&delete i[n]})),this._immediateEvictEntryIfNoReferences(t))},n.prototype.disposeReferrer=function(n){var t=this;u(this._entriesByReferrerThenKey[n],(function(i){t.dissociateEntry(i,n)}))},n.prototype.forEachEntry=function(n){u(this._entriesByKey,(function(t,i){n(t,i.value)}))},n.prototype.dispose=function(){var t=this,n;this._isDisposed=!0;n=this._onDisposeEntryCallback;n&&this.forEachEntry(n);this._entriesByKey={};this._entriesByReferrerThenKey={};u(this._evictionTimeoutHandlesByKey,(function(n){t._cancelAnyDelayedEviction(n)}))},n.prototype._ensureReferenceExists=function(n,t){var i=this._entriesByReferrerThenKey[t],r;i||(i={},this._entriesByReferrerThenKey[t]=i);r=n.key;r in i||(i[r]=n,n.associate(t))},n.prototype._cancelAnyDelayedEviction=function(n){var t=this._evictionTimeoutHandlesByKey[n];t&&(delete this._evictionTimeoutHandlesByKey[n],f.clearTimeout(t))},n.prototype._delayedEvictEntryIfNoReferences=function(n){var i=this,t;n.hasNoReferences()&&(t=n.key,this._cancelAnyDelayedEviction(t),this._evictionDelayMilliseconds===null||this._evictionDelayMilliseconds===undefined?this._immediateEvictEntryIfNoReferences(n):this._evictionTimeoutHandlesByKey[t]=f.setTimeout((function(){i._immediateEvictEntryIfNoReferences(n)}),this._evictionDelayMilliseconds))},n.prototype._immediateEvictEntryIfNoReferences=function(n){var t,r,i;n.hasNoReferences()&&(t=n.key,r=n.value,delete this._entriesByKey[t],i=this._onDisposeEntryCallback,i&&i(t,r),this._cancelAnyDelayedEviction(t))},n})(),e;t.RefCountCache=c;e=(function(){function n(n,t){this._referrerIds=new MsPortalFx.Map;this.key=n;this.value=t}return n.prototype.hasNoReferences=function(){return!this._referrerIds.size},n.prototype.associate=function(n){this._referrerIds.set(n,n)},n.prototype.dissociate=function(n){this._referrerIds.delete(n)},n.prototype.dissociateFromAllReferrers=function(){var n=[],t=this._referrerIds;return t.forEach((function(t,i){return n.push(i)})),t.clear(),n},n})()})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";function i(n,i){var r=n[i];return t(n,i)?r():r}function t(n,t){var i=n[t];return ko.isObservable(i)&&!MsPortalFx.isObservableArray(i)}function r(n){if(!MsPortalFx.isArrayOrObservableArray(n))throw new Error("Only an array or an observable array is expected here.");return ko.unwrap(n)}n.unwrapObjectPropertyValue=i;n.isObservableObjectPropertyValue=t;n.unwrapArrayOrObservableArray=r})(t=n.Shared||(n.Shared={}))})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){"use strict";var i=MsPortalFx,t=i.Data.Metadata,r=i.isArrayOrObservableArray,u=i.isObject,f=(function(){function i(n,t){var i=this,r=t,u=this._callbacks={};["visitEntityArray","visitNonEntityArray","visitArray","visitArrayItem","visitEntity","visitNonEntityObject","visitObject","shouldVisitObjectProperty","visitEntityTypedObjectPropertyValue","visitNonEntityTypedObjectPropertyValue","visitObjectPropertyValue","visitDate","visitScalar","visitFunction",].forEach((function(n){u[n]=r[n]||function(){return i[n].apply(i,arguments)}}))}return i.prototype.visit=function(n,t,i){return this._visit(n,t,i)},i.prototype.visitEntityArray=function(n,t,i){return this._callbacks.visitArray(n,t,i)},i.prototype.visitNonEntityArray=function(n,t,i){return this._callbacks.visitArray(n,t,i)},i.prototype.visitArray=function(t,i,r){for(var e=this._callbacks.visitArrayItem,f=n.Shared.unwrapArrayOrObservableArray(t),u=0,o=f.length;u<o;u++)e(f[u],u,i,r);return},i.prototype.visitArrayItem=function(n,t,i,r){if(ko.isObservable(n))throw new Error("Data can't include arrays whose items are observables.  Only scalar- and object-typed array items are supported.");return this._visit(n,i,r)},i.prototype.visitEntity=function(n,t,i){return this._callbacks.visitObject(n,t,i)},i.prototype.visitNonEntityObject=function(n,t,i){return this._callbacks.visitObject(n,t,i)},i.prototype.visitObject=function(n,t,i){for(var u=this.getObjectPropertiesToVisit(n,t),r=0,f=u.length;r<f;r++)this.visitObjectPropertyValueDispatch(u[r],n,t,i);return},i.prototype.shouldVisitObjectProperty=function(n,t){return typeof ko.unwrap(t[n])!="function"},i.prototype.visitEntityTypedObjectPropertyValue=function(t,i,u,f){var e=n.Shared.unwrapObjectPropertyValue(i,t),o=r(e)?this._callbacks.visitEntityArray:e?this._callbacks.visitEntity:undefined;return o&&o(e,u,f)},i.prototype.visitNonEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},i.prototype.visitObjectPropertyValue=function(t,i,r,u){return this._visit(n.Shared.unwrapObjectPropertyValue(i,t),r,u)},i.prototype.visitDate=function(){return},i.prototype.visitScalar=function(){return},i.prototype.visitFunction=function(){return},i.prototype.getObjectPropertiesToVisit=function(n,t){var i=this._callbacks.shouldVisitObjectProperty;return Object.keys(n).filter((function(r){return i(r,n,t)}))},i.prototype.visitObjectPropertyValueDispatch=function(n,i,r,u){var f=t.getPropertyTypeMetadata(r,n),o=t.typeIsEntityType(f),e=this._callbacks,s=o?e.visitEntityTypedObjectPropertyValue:e.visitNonEntityTypedObjectPropertyValue;return s.call(null,n,i,f,u)},i.prototype._visit=function(n,t,i){var f,e,o;return(r(n)?f=this._visitArrayDispatch:u(n)&&(f=this._visitObjectDispatch),f)?f.call(this,n,t,i):(e=this._callbacks,o=e.visitScalar,n instanceof Date?o=e.visitDate:typeof n=="function"&&(o=e.visitFunction),o.call(null,n,i))},i.prototype._visitArrayDispatch=function(n,i,r){var u=this._callbacks,f=u.visitNonEntityArray;return t.typeIsEntityType(i)&&(f=u.visitEntityArray),f.call(null,n,i,r)},i.prototype._visitObjectDispatch=function(n,i,r){var u=this._callbacks,f=u.visitNonEntityObject;return t.typeIsEntityType(i)&&(f=u.visitEntity),f.call(null,n,i,r)},i})();n.Visitor=f})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){"use strict";var i=MsPortalFx,r=i.isObservableArray,t=ko.observable,u=ko.observableArray,f=(function(i){function f(n,t){return i.call(this,n,t)||this}return __extends(f,i),f.prototype.clone=function(n,t){return this._visit(n,t)},f.prototype.visitArray=function(i,f){var o=this,e=n.Shared.unwrapArrayOrObservableArray(i).map((function(n,t){return o._callbacks.visitArrayItem(n,t,f)}));return r(i)&&(e=i.splice?u(e):t(e)),e},f.prototype.visitObject=function(n,t){var r=this,i={};return this.getObjectPropertiesToVisit(n,t).forEach((function(u){i[u]=r.visitObjectPropertyValueDispatch(u,n,t)})),i},f.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i){return this._callbacks.visitObjectPropertyValue(n,t,i)},f.prototype.visitObjectPropertyValue=function(i,r,u){var f=r[i],e=n.Shared.isObservableObjectPropertyValue(r,i),o=this._visit(e?f():f,u);return e?t(o):o},f.prototype.visitDate=function(n){return new Date(n.getTime())},f.prototype.visitScalar=function(n){return n},f.prototype.visitFunction=function(){throw new Error("Cloning functions is not supported.");},f})(n.Visitor);n.CloneVisitor=f})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";var u=MsPortalFx.Data.Metadata,f=ko.isObservable,l=MsPortalFx.areEqual,e=MsPortalFx.isArrayOrObservableArray,o=MsPortalFx.isObject,s=MsPortalFx.isObservableArray,h=ko.utils,c=h.compareArrays,i="",a={cannotMerge:i,handleAddAndDeleteRequired:i,dataNotTypeCompatible:i,missingId:i},r=n.getErrorMap(a),v=(function(n){function i(t,i){var r=n.call(this,t,i)||this;return r._clone=t.clone,r._onDetach=t.onDetach,r}return __extends(i,n),i.prototype.merge=function(t,i,u){var f=n.prototype._visit.call(this,t,u,i);f||r.cannotMerge()},i.prototype.visitObject=function(n,t,i){var r=this;return this.getObjectPropertiesToVisit(n,t).every((function(u){return r.visitObjectPropertyValueDispatch(u,n,t,i)}))},i.prototype.visitObjectPropertyValueDispatch=function(i,e,o,h){var c=n.prototype.visitObjectPropertyValueDispatch.call(this,i,e,o,h),v;if(!c){var l=h[i],y=t.Shared.unwrapObjectPropertyValue(e,i),a=t.Shared.unwrapObjectPropertyValue(h,i);f(l)&&s(y)!==s(a)&&r.dataNotTypeCompatible();f(l)?(c=!0,v=u.getPropertyTypeMetadata(o,i),a&&this._onDetach(a,v),l(this._clone(y,v))):c=!1}return c},i.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},i.prototype.visitNonEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},i.prototype.visitObjectPropertyValue=function(n,i,r,u){var s,f=t.Shared.unwrapObjectPropertyValue(i,n),h=t.Shared.unwrapObjectPropertyValue(u,n);return e(f)?e(h)&&(s=this._visitArrayDispatch(f,r,h)):o(f)?o(h)&&(s=this._visitObjectDispatch(f,r,h)):typeof f=="function"?s=!0:l(f,h)&&(s=!0),s},i.prototype.visitArray=function(n,t,i){return this._mergeArray(n,t,i)},i.prototype._mergeArray=function(n,i,e,o){var l=this,a,v,s,b,tt;o=o||{};!!o.handleAdd!=!!o.handleDelete&&r.handleAddAndDeleteRequired();o.getEdits||(a=void 0,v=void 0,u.typeHasId(i)?(s=function(n){var t=u.getItemId(n,i);return t===undefined&&r.missingId(),t},a=function(n,t){var r=n.map(s),u=t.map(s),i=c(u,r);return i.forEach((function(i){i.value=(i.status==="added"?n:t).first((function(n){return s(n)===i.value}))})),i},v=function(n,t){var i=s(n);return t.first((function(n){return s(n)===i}))}):(a=function(n,t){return c(t,n)},v=null),MsPortalFx.extend(o,{getEdits:a,getSourceItem:v}));var d=t.Shared.unwrapArrayOrObservableArray(n),it=t.Shared.unwrapArrayOrObservableArray(e),y=f(e),k=y&&e,p=k&&k(),w,rt=function(n){var t,r,u;switch(n.status){case"added":if(t=l._clone(n.value,i),o.handleAdd)o.handleAdd(t,n.index);else if(y)w=!0,p.splice(n.index,0,t);else return!1;break;case"deleted":if(r=n.value,u=n.index,o.handleDelete)o.handleDelete(r,u);else if(y)l._onDetach(r,i),w=!0,p.splice(u,1);else return!1;break;case"retained":if(o.getSourceItem){var f=n.value,e=o.getSourceItem(f,d),s=l._callbacks.visitObject(e,i,f);if(!s)if(y)l._onDetach(f,i),w=!0,p.splice(n.index,1,l._clone(e,i));else return!1}}return!0},g=h.adjustArrayEdits(o.getEdits(d,it)),nt=!0;for(b=0;b<g.length;b++)if(tt=g[b],!rt(tt)){nt=!1;break}return w&&k(p),nt},i})(t.Visitor);t.MergeVisitor=v})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){"use strict";var i=ko.observable,t=ko.computed,r=(function(n){function r(r,u,f){var e=n.call(this,f)||this;return e._currentSkipTakeParams=i(null),e._allItems=u,e.items=t(r,(function(){var n,t=e._allItems;return(n=e._currentSkipTakeParams())&&t()?t().slice(n.skip,n.take?n.skip+n.take:undefined):[]})),e.metadata=t(r,(function(){return{totalItemCount:e._allItems().length}})),e}return __extends(r,n),r.prototype.loadBySkipTake=function(n,t){return this._currentSkipTakeParams({skip:n||0,take:t}),Q(!0)},r})(n.DataNavigatorBase);n.LocalDataNavigator=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=(function(t){function i(n,i,r,u,f){var e=t.call(this,f)||this;if(e._continuationTokenFilter=null,e._continuationTokenSort=[],e._continuationTokenResetRequested=!0,e._queryParams=null,!n)throw new Error("Argument cannot be null: lifetime");return e.items=i,e.metadata=r,e._options=u,e._options.loadBySkipTake||(e.loadBySkipTake=null),e._options.loadByContinuationToken||(e.loadByContinuationToken=null),e}return __extends(i,t),i.prototype.loadBySkipTake=function(n,t,i,r){if(!this._options.loadBySkipTake)throw new Error("This data navigator does not support skip/take.");return this._options.loadBySkipTake(this.metadata(),this._getClonedQuery(),n,t,i,r)},i.prototype.loadByContinuationToken=function(){if(!this._options.loadByContinuationToken)throw new Error("This data navigator does not support continuation tokens.");var n=this._continuationTokenResetRequested;return this._continuationTokenResetRequested=!1,this._options.loadByContinuationToken(this.metadata(),this._getClonedQuery(),n,this._continuationTokenFilter,this._continuationTokenSort)},i.prototype.resetLoadByContinuationToken=function(n,t){this._continuationTokenResetRequested=!0;this._continuationTokenFilter=n;this._continuationTokenSort=t},i.prototype.setQuery=function(n){return this._queryParams=n,this.resetNavigation()},i.prototype._getClonedQuery=function(){return n.clone(this._queryParams,!0)},i})(t.DataNavigatorBase);t.RemoteDataNavigator=i})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){"use strict";function r(i,u,f){Array.isArray(i)?i.forEach((function(n){r(n,u,f)})):n.isObject(i)&&Object.getOwnPropertyNames(i).forEach((function(n){var e=t.Metadata.getPropertyMetadata(u,n),o=e&&e.itemType;f(i,n,e)&&o&&r(i[n],o,f)}))}function u(n){return n.substr(0,6)==="/Date("?new Date(parseInt(n.substr(6),10)):new Date(n)}i.DataContractJsonSerializer={processResult:function(n,t,i,f,e){return e&&r(t.data,e,(function(n,t,i){var f=!0,r;return i&&(i.isDate||i.itemType==="System.DateTime")&&(r=n[t],typeof r=="string"&&(n[t]=u(r)),f=!1),f})),!0}}})(i=t.DataProvider||(t.DataProvider={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n){var r=n.property,u=n.operator,t=n.value,i;typeof t=="string"?t="'"+t+"'":t&&t instanceof Date&&(t="datetime'"+t.toISOString()+"'");switch(u){case"<":i=r+" lt "+t;break;case"<=":i=r+" le "+t;break;case"==":i=r+" eq "+t;break;case"!=":i=r+" ne "+t;break;case">=":i=r+" ge "+t;break;case">":i=r+" gt "+t;break;case"StartsWith":i="startswith("+r+","+t+") eq true";break;case"EndsWith":i="endswith("+r+","+t+") eq true";break;case"Contains":i="substringof("+t+","+r+") eq true";break;default:throw new Error("The operator '"+u+"' is not supported.");}return i}function i(n){return!n.descending?n.property:n.property+" desc"}n.OData={shapeQuery:function(n){var u={},e=n.filter,f,r;return e&&e.length&&(u.$filter=e.map(t).join(" and ")),f=n.sort,f&&f.length&&(u.$orderby=f.map(i).join()),r=n.paging,r&&r.skip&&(u.$skip=r.skip),r&&r.take&&(u.$top=r.take),n.includeTotalCount&&(u.$inlinecount="allpages"),u}}})(t=n.DataProvider||(n.DataProvider={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function lt(n,t){d.data(n,nt,t)}function y(n){return u(n)||c(n)?d.data(n,nt):null}function at(n){d.data(n,nt,undefined)}function a(n){var t=i(n);return u(t)?n:t}function tt(n,t){var r=i(n[t]);return u(r)?n[t]:r}function dt(){return Date.now()}function gt(n,t){return n===t}function it(n,i,r){var u=y(n);return u?r===1&&u.editKind===t.EditKind.Add?!1:!i||u.unlockedAt&&i>=u.unlockedAt:!0}function rt(n,t){return t&&t.indexOf?t.indexOf(n):-1}function vt(n,t,r,u){l(t)&&p(n,u,(function(){t.valueWillMutate()}));var f=i(t);f.splice.apply(f,[0,f.length].concat(r));l(t)&&p(n,u,(function(){t.valueHasMutated()}))}function ni(n,t,i){for(var u,c=n.length,s,f,h,e,r=i-1;r>=0;r--)if(u=rt(n[r],t),u>=0){s=u+1;f=i-r;break}for(r=i+1;r<c;r++)if(u=rt(n[r],t),u>=0){h=u;e=r-i;break}return o(f)&&o(e)?t.length:(f||1e5)<(e||1e5)?s:h}function ti(n,t,i,u){for(var s,f,h={},c=[],e=0,l=t.length;e<l;e++)s=t[e],f=r.getItemId(s,i),o(f)?b(n,u):(h[f]=s,c.push(f));return{index:h,ids:c}}function ut(n,t,r){var f=i(n),e,o,h,s;if(!st(f)){if(e=!1,r++,u(f)){for(o=0,h=f.length;o<h;o++)if(e=t(tt(f,o)),e||ut(tt(f,o),t,r),e)break}else if(c(f)&&(r===1&&(e=t(f)),!e))for(s in f)if(!s.match(/^jQuery\d+$/)&&(e=ut(tt(f,s),t,r),e))break;return e}}function et(n,t,r,f,e,o){var s=!0,h=i(r);return u(h)?yt(n,t,r,f,e,o):c(h)?v(n,t,r,f,e,o):s=!1,s}function yt(n,t,i,u,f,e){var o=r.getArrayItemType(i)||u,s=r.typeHasId(o);f.preserveNewItemsOrdering?ii(n,t,i,o,s,f,e):ri(n,t,i,o,s,f,e)}function ii(n,t,u,f,e,s,h){for(var d=i(u),st=d.length,p,g,l=i(t),c,tt=l.length,k,ft,ht=e&&l.map((function(t){var u=r.getItemId(i(t),f);return o(u)&&b(n,s),u})),ct=s.preventItemRemoval,lt=s.fetchStart,rt,et,ut=[],nt,ot=l.slice(0),y=0;y<st;y++){if(p=d[y],g=undefined,rt=!1,e&&tt>0)for(g=r.getItemId(i(p),f),o(g)&&b(n,s),c=0;c<tt;c++)k=l[c],ft=ht[c],gt(g,ft)&&(v(n,k,p,f,s,h),l.splice(c,1,p),ot[c]=null,rt=!0);rt||!ct&&it(a(p),lt,1)||ut.push(y)}for(c=0;c<tt;c++)k=ot[c],k&&(l[c]=w(n,k,f,s,h));for(et=ut.length,nt=0;nt<et;nt++)y=ut[nt],p=d[y],c=ni(d,l,y),l.splice(c,0,p);vt(n,u,l,s)}function ri(n,t,u,f,e,s,h){for(var nt=i(u),p=nt.slice(0),k,d,g=i(t),y,c,ut=e&&ti(n,g,f,s),ft,st=s.preventItemRemoval,ht=s.fetchStart,tt=[],et={},ot=0,rt=!1,l=nt.length-1;l>=0;l--)k=nt[l],c=null,e&&(d=r.getItemId(i(k),f),o(d)&&b(n,s),c=ut.index[d]),c?(v(n,c,k,f,s,h),et[d]=!0,ot++):!st&&it(a(k),ht,1)&&(p.splice(l,1),rt=!0);if(ot!==g.length){for(y=0,ft=g.length;y<ft;y++)c=g[y],e&&et.hasOwnProperty(ut.ids[y])||tt.push(w(n,c,f,s,h));tt.length>0&&(p.push.apply(p,tt),rt=!0)}rt&&vt(n,u,p,s)}function v(n,t,f,e,o,h){var l,y,w;if(it(a(f),o.fetchStart,0)){at(a(f));l=i(f);y=function(f){if(t.hasOwnProperty(f)){var y=i(l[f]),a=i(t[f]),b=r.getPropertyType(e,f),w=pt(n,f);if(a===null)y!==null&&p(w,o,(function(){l[f](null)}));else if(u(a))u(y)?yt(w,a,l[f],b||null,o,h):s(w,l,f,a,b,o,h);else if(c(a))st(y)?s(w,l,f,a,b,o,h):y instanceof Date?(y>a||y<a)&&s(w,l,f,a,b,o,h):v(w,a,y,b||null,o,h);else{if(typeof a=="function")return"continue";s(w,l,f,a,b,o,h)}}};for(w in t)y(w)}}function s(n,t,r,u,f,e,o){var s=w(n,u,f,e,o),h;t[r]&&l(t[r])?p(n,e,(function(){t[r](i(s))})):(h=l(s)?s:g(s),t[r]=h)}function p(t,i,r){try{r()}catch(u){e.mergeSubscriberRaisedException(i.dataSetName,t,n.getLogFriendlyMessage(u))}}function w(n,t,i,u,f){var e=ot(n,t,i,u,f);return r.decorateWithType(e,i),e}function ot(n,t,r,f,e){return u(i(t))?ht(i(t).map((function(t){return ot(n,t,r,f,e)}))):c(t)?ui(n,t,r,f,e):t}function ui(n,t,i,u,f){var e,a=f&&f.lifetime&&f._atomizationContext&&FxImpl.Data.AtomizationContext.canAtomizeType(i),c,s,o,h;if(a&&(c=r.getItemId(t,i),s=f._atomizationContext.getEntity(i,c,f.lifetime),s&&(v(n,t,s,i,u,f),e=s)),!e){e={};for(o in t)t.hasOwnProperty(o)&&(h=ot(pt(n,o),t[o],r.getPropertyType(i,o),u,f),e[o]=l(h)?h:g(h));a&&f._atomizationContext.addEntity(i,c,e,f.lifetime)}return e}function pt(n,t){return n&&n+"/"+t}function b(n,t){e.missingId(t.dataSetName,n)}var wt=FxImpl.Data,bt=wt.AtomizationContext,h=n,r=h.Data.Metadata,d=h.Base.ProxiedObservables,o=h.isUndefined,c=h.isObject,st=h.isNullOrUndefined,g=ko.observable,ht=ko.observableArray,i=ko.unwrap,l=ko.isObservable,fi=new n.Base.Diagnostics.Log("MsPortalFx/Data/Data.DataSet"),u=Array.isArray,nt="aux-lockState",ct=".",f="",kt={missingId:f,incorrectOptions:f,invalidEditKind:f,multipleIds:f,invalidMergeTarget:f,addToNonArray:f,removeFromNonArray:f,noObservableToReceiveMergeChange:f,mergeSubscriberRaisedException:f},e=FxImpl.getErrorMap(kt),ft=k=(function(){function f(t,i,r){this._data=null;this._navigationMetadata=g(null);this._partialErrors=ht();n.Base.ProxiedObservables.markNonSerializable(this);this._type=t||null;r&&!i&&e.incorrectOptions();this._lifetime=i;this._atomizationContext=r&&bt.get(r.atomizationContextId)}return Object.defineProperty(f.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"lifetime",{get:function(){return this._lifetime},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"navigationMetadata",{get:function(){return this._navigationMetadata},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"partialErrors",{get:function(){return this._partialErrors},enumerable:!0,configurable:!0}),f.lockItem=function(n,i){t.EditKind[i]||e.invalidEditKind();lt(n,{editKind:i})},f.hasUnmergedClientChanges=function(n){return ut(n,(function(n){var t=y(n);return!!(t&&!!t.unlockedAt)}),0)},f.unlockItem=function(n,t){if(t=arguments.length===1?!0:t,t){var i=y(n);i&&(i.unlockedAt=dt())}else at(n)},f.isLockedItem=function(n){var t=y(n);return!!(t&&!t.unlockedAt)},f.getIdPropertyNames=function(n){var t;return n instanceof k&&(n=n.data),t=r.getArrayItemType(n),t&&r.getIdPropertyNames(t&&r.getTypeMetadata(t))},f.getIdPropertyName=function(n){var t=this.getIdPropertyNames(n),i=null;return t&&(t.length>1&&e.multipleIds(),i=t[0]||null),i},f.mergeWithoutAtomization=function(n,t,i){i=i||{};var u=i.type||r.getArrayItemType(t);et(null,n,t,u,i,null)||e.invalidMergeTarget()},f.prototype.addItems=function(n,f,s,h,c){var y=this,l,v;s=s||{};c?l=s.type||r.getArrayItemType(c):(c=this.data,l=this.type);u(i(c))||e.addToNonArray();h=o(h)?!0:h;v=f.map((function(n){var i=w(null,n,l,s,y);return h&&lt(a(i),{editKind:t.EditKind.Add}),i}));c.splice.apply(c,[n,0].concat(v))},f.prototype.removeItems=function(n,t,f,o){o?f=f||r.getArrayItemType(o):(o=this.data,f=this.type);u(i(o))||e.removeFromNonArray();var s=o.splice(n,t);this._atomizationContext&&this._atomizationContext.releaseEntities(f,s,this.lifetime)},f.prototype.removeItem=function(n,t,r){r||(r=this.data);var u=rt(n,i(r));u>=0&&this.removeItems(u,1,t,r)},f.prototype.setProperty=function(n,t,i,r){i=i||{};var u;r?u=i.type:(r=this.data,u=this.type);et(null,t,r[n],u,i,this)||s(null,r,n,t,u,i,this)},f.prototype.merge=function(n,t){t=t||{};et(ct,n,this.data,this.type,t,this)||s(ct,this,"_data",n,this.type,t,this)},f.prototype.hasUnmergedClientChanges=function(){return k.hasUnmergedClientChanges(this.data)},f})(),k;ft=k=__decorate([n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[String,Object,Object])],ft);t.DataSet=ft})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t,i,r;(function(n){n[n.Copy=0]="Copy";n[n.InPlace=1]="InPlace"})(t=n.EditScopeKind||(n.EditScopeKind={})),(function(n){n[n.None=0]="None";n[n.Created=1]="Created";n[n.Deleted=2]="Deleted";n[n.Updated=3]="Updated"})(i=n.EditState||(n.EditState={})),(function(n){n[n.AcceptClientChanges=0]="AcceptClientChanges";n[n.DiscardClientChanges=1]="DiscardClientChanges";n[n.RefreshFromServerImplicitly=2]="RefreshFromServerImplicitly";n[n.ServerChangesAppliedManually=3]="ServerChangesAppliedManually";n[n.ServerDataReturned=4]="ServerDataReturned"})(r=n.AcceptEditScopeChangesAction||(n.AcceptEditScopeChangesAction={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function wi(t,i,r){var u=r&&r.kind;return t.createChildLifetime||(r=i,i=t,t=new n.TriggerableLifetimeManager),u===hi.InPlace?new di(t,i,r):new ki(t,i,r)}function bi(n){var t=oi(n),r,u;t.length?(r=t.map((function(n){var t={state:i[n.state]},r=n.entityReference;return r&&r.type&&(t.entityType=r.type,t.entityId=r.id),n.entityPath&&(t.pathFromRoot=n.entityPath),n.encodedCreatedEntities&&(t.createdEntities=n.encodedCreatedEntities),n.entityUpdates&&(t.updates=n.entityUpdates),t})),u=JSON.stringify(ko.toJS(r),(function(n,t){return n&&kt(t)?"<undefined>":t}),4),console.debug(u)):console.debug("No edits")}function ii(){r.accessorLifetime()}function at(n){var t="";n&&n.stack&&(t+=" Inner exception:"+n.message+" at "+n.stack);r.resetObs(t)}function f(n,t,i){return t===void 0&&(t={}),i===void 0&&(i=!1),e.extend({shouldVisitObjectProperty:function(t,r,u){return ei(t,u)&&n().shouldVisitObjectProperty(t,r,u)&&(!i||!rt(k(u,t)))}},t)}function pt(n){typeof n!="object"&&r.makeObs();vi(n,(function(t,i){if(it(i))pt(i),n[t]=ht(i);else{var r=typeof i;r==="object"?pt(i):r!=="function"&&(n[t]=o(i))}}))}function ui(t){var i=n.toSerializableObject(t);return JSON.stringify(i)}function fi(t,i,r){if(r===0)return tr(t,i);var u=JSON.parse(t);return n.fromSerializableObject(u)}function tr(n,t){var i=JSON.parse(n);return t||pt(i),i}function wt(n,t){var i=nt(n.type)&&nt(t.type)&&nt(n.id)&&nt(t.id),r=n.type===t.type&&n.id===t.id;return i||r}function et(n){var t=0,r,i;if(n.length===0)return t+"";for(i=0;i<n.length;i++)r=n.charCodeAt(i),t=(t<<5)-t+r|0;return t+""}function ei(n,t){return!(t&&t.properties&&t.properties[n]&&t.properties[n].trackEdits===!1)}function oi(n,t){t===void 0&&(t=!0);var r=n.version||0;return n.edits.map((function(n){var u={state:n.state,entityReference:n.entityReference};switch(n.state){case i.Created:u.entityPath=n.entityPath;u.encodedCreatedEntities=n.createdEntities.map((function(n){return fi(n,t,r)}));break;case i.Updated:u.entityUpdates=fi(n.entityUpdates,t,r)}return u}))}function si(n){return rt(n)?!0:n?c.getProperties(n).some((function(t){return si(k(n,t))})):!1}var e=MsPortalFx,c=e.Data.Metadata,i=e.Data.EditState,ot=n.Data.Shared,w=e.Data.AcceptEditScopeChangesAction,l=n.Data.Visitor,d=n.Data.CloneVisitor,st=n.Data.MergeVisitor,hi=e.Data.EditScopeKind,h=e.isArrayOrObservableArray,bt=e.areEqual,kt=e.isUndefined,nt=e.isNullOrUndefined,s=e.isObject,o=ko.observable,ht=ko.observableArray,v=ko.isObservable,tt=ko.unwrap,ct=ko.computed,dt=ko.pureComputed,gt=MsPortalFx.getUniqueId,ni=e.Data.DataSet,y=e.Base.ProxiedObservables,p=ot.unwrapArrayOrObservableArray,b=ot.unwrapObjectPropertyValue,ci=ot.isObservableObjectPropertyValue,it=Array.isArray,rt=c.typeIsEntityType,k=c.getPropertyTypeMetadata,lt=new e.Base.Diagnostics.Log("MsPortalFx/Data/Data.EditScope"),a=undefined,li="aux-entityState",ai="aux-entityArrayState",ut=MsPortalFx.isDevelopmentMode,ti="Turn on development mode to generate diagnostic information for this error.",vi=e.forEachKey,yi=e.isEmpty,u="",pi={accessorLifetime:u,scopeInputType:u,scopeOptsTypes:u,missingMeta:u,noRefresh:u,noSave:u,entityDupe:u,saveInProg:u,nullMerge:u,resetInProg:u,noEntityRoot:u,resetType:u,newInputObs:u,newEditObs:u,diffEditInput:u,missingIdProp:u,targetArrObs:u,editsUnavail:u,mergeUnavail:u,noImpl:u,serialize:u,namedMeta:u,disposed:u,nestedEntities:u,makeObs:u,entityEdit:u,resetObs:u,moveEditState:u},r=n.getErrorMap(pi),ft,vt,g;t.allowNonPersistentEdits=!1;t.createEditScope=wi;t.logEditsToConsole=bi;t.nonPersistedPropertySentinel="EDITSCOPENOTPERSISTED";ft={entityType:!0};vt={registerForDispose:ii,createChildLifetime:ii};g=(function(){function u(){this._isDisposed=!1;this._initializing=o(!0);this._saving=o(!1);this._refreshing=o(!1);this._refreshInProgressCount=0;this._resettingValue=o(!1);this._dirty=o(!1);this._edits=o([]);this.editsChanged=o()}return u.prototype.init=function(t,i,u,f){var o=this,v,a,p,l;y.markNonSerializable(this);t.createChildLifetime||(f=u,u=i,i=t,t=new n.TriggerableLifetimeManager);v=this._ltm=t.createChildLifetime();this._createEditableAndOriginalData=f;a=h(i)&&tt(i);p=a&&(a.length===0||s(a[0]));p||s(i)||r.scopeInputType();u=u||{};l=u.typeMetadata;l?u.typeName&&r.scopeOptsTypes():u.typeName&&(l=c.getTypeMetadata(u.typeName),l||r.missingMeta(u.typeName));this._hasMetadata=!!l;l?l.entityType||(l=e.extend2(l,{entityType:!0})):l=ft;this._inconsistent=dt((function(){return o._initializing()||o._refreshing()||o._saving()||o._resettingValue()}));this._getEditsVisitor=this._createGetEditsVisitor(!1);this._getPersistableEditsVisitor=this._createGetEditsVisitor(!0);this._applyEditsVisitor=this._createApplyPersistedEditsVisitor();this._revertAllVisitor=this._createRevertAllVisitor();this._generateValueBasedEntityIdVisitor=this._createGenerateValueBasedEntityIdVisitor();this._mergeToEditableVisitor=this._createMergeToEditableVisitor();ct(v,(function(){o._inconsistent()?o._edits(null):(o._edits(o._getEdits(!1)),o.editsChanged.valueHasMutated())}));this._entityStateKey=li+gt();this._entityArrayStateKey=ai+gt();this._rootTypeMetadata=l;this._root=this._createEditableAndOriginalData(i,this._rootTypeMetadata).editable;this._refreshCallback=u.refresh||function(){return r.noRefresh(),null};this._saveCallback=u.save||function(){return r.noSave(),null};ct(v,(function(){o._inconsistent()||o._dirty(o._edits().length>0)}));this._initializing(!1)},u.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._deregisterNestedEntities(this._root,this._rootTypeMetadata,!1),this._ltm.dispose(),this._ltm=null)},Object.defineProperty(u.prototype,"root",{get:function(){return this._assertNotDisposed(),this._root},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"refreshing",{get:function(){return this._refreshing},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"saving",{get:function(){return this._saving},enumerable:!0,configurable:!0}),u.prototype.markForDelete=function(n){this._assertNotDisposed();var r=this._getEntityState(n,!1),t=r.readOnlyEditState();t!==i.None&&this._revertEntity(n,r,t);t!==i.Created&&this._markAsDeletedOrUpdated(n,i.Deleted)},u.prototype.create=function(n){this._assertNotDisposed();var t=this._getEntityArrayType(n,!1);return c.createEmptyObject(t)},u.prototype.addCreated=function(n,t){var i,u;this._assertNotDisposed();i=this._getEntityState(n,!1,!1);i&&r.entityDupe();u=this._getCreatedEntities(t,!1);this._addEntityStateToCreatedEntity(n,t);u.push(n)},u.prototype.revert=function(n){this._assertNotDisposed();var t=this._getEntityState(n,!1),r=t.readOnlyEditState();this._revertEntity(n,t,r);t.writableEditState(i.None)},u.prototype.revertAll=function(){this._assertNotDisposed();this._revertAll()},u.prototype.getEditState=function(n){return this._assertNotDisposed(),this._getEditState(n,!1)},u.prototype.getOriginal=function(n){return this._assertNotDisposed(),h(n)?this._getEntityArrayState(n,!1).original:this._getEntityState(n,!1).original},u.prototype.getCreated=function(n){return this._assertNotDisposed(),this._getCreatedEntities(n,!1)},u.prototype.mergeFromOriginal=function(){this._assertNotDisposed();this._mergeFromOriginal()},u.prototype.refresh=function(){var n=this;this._assertNotDisposed();this._refreshInProgressCount++;this._refreshing(!0);var r=this._refreshCallback(this._getRefreshableData())||Q(a),t=Q.defer(),i=function(){--n._refreshInProgressCount<=0&&(n._refreshInProgressCount=0,n._refreshing(!1))};return r.then((function(r){n._onRefreshComplete(r);n._isDisposed||(i(),t.resolve())})).catch((function(n){i();t.reject(n)})),t.promise},u.prototype.save=function(){this.mergeFromOriginal();this.revertAll()},u.prototype.saveChanges=function(){var n=this,t;if(this._assertNotDisposed(),this._inconsistent()&&r.saveInProg(),t=this._edits(),t.length===0)return Q();this._saving(!0);var e=MsPortalFx.mapMany(t,(function(n){switch(n.state){case i.Created:return n.createdEntities.map((function(t){return{editState:i.Created,entityTypeName:n.typeMetadata.name,entity:t}}));case i.Updated:case i.Deleted:return[{editState:n.state,entityTypeName:n.typeMetadata.name,entity:n.updatedOrDeletedEntity}]}return[]})),o=this._saveCallback(this,e,this._getRefreshableData())||Q(a),u=Q.defer(),f=function(){n._revertAll();n._isDisposed||(n._saving(!1),u.resolve())};return o.then((function(t){var u=t&&t.action||w.AcceptClientChanges,i;switch(u){case w.AcceptClientChanges:n._acceptChanges();break;case w.RefreshFromServerImplicitly:return n.refresh().then((function(){f()}));case w.ServerChangesAppliedManually:n._onRefreshComplete(null);break;case w.ServerDataReturned:i=t.dataToMerge;i||r.nullMerge();n._onRefreshComplete(i)}f()})).catch((function(t){n._isDisposed||(n._saving(!1),u.reject(t))})),u.promise},u.prototype.resetValue=function(n,t){var a=this,y,e,i,p,h,c,o,u;this._assertNotDisposed();this._inconsistent.peek()&&r.resetInProg();y=n;y.returnsObservablesFromEditScope||at();try{e=n.getOriginalObservable(vt);i=n.getEditableObservable(vt)}catch(w){at(w)}(!e||!i||ko.isComputed(e)||ko.isComputed(i))&&at();p=function(n){var e=n,i,u,t=new l(null,f((function(){return t}),{visitObject:function(n,r){t.getObjectPropertiesToVisit(n,r).forEach((function(f){n[f]===e?(u=!0,i=k(r,f)):t.visitObjectPropertyValueDispatch(f,n,r)}))}}));return t.visit(a._root,a._rootTypeMetadata),u||r.noEntityRoot(),i};this._resettingValue(!0);try{h=p(i);si(h)&&r.resetType();c=t.newInputValue;v(c)&&r.newInputObs();o=this._createEditableAndOriginalData(c,h);i(o.editable);e(o.original);t.hasOwnProperty("newEditableValue")&&(u=t.newEditableValue,v(u)&&r.newEditObs(),(it(u)||s(u))&&u===o.original&&r.diffEditInput(),i(t.newEditableValue))}finally{this._resettingValue(!1)}},u.prototype.getEntityArrayWithEdits=function(n){var t=this,u=this._getCreatedEntities(n,!1)(),r=tt(n),f=r.filter((function(n){return t.getEditState(n)()!==i.Deleted})).concat(u),e=r.filter((function(n){return t.getEditState(n)()===i.Updated})),o=r.filter((function(n){return t.getEditState(n)()===i.Deleted}));return{arrayWithEdits:f,createdEntities:u,updatedEntities:e,deletedEntities:o}},u.prototype.applyArrayAsEdits=function(n,t){var u=this,s=this._getEntityArrayState(t,!1,!1),i,o,l;if(s){i=t;o=s.typeMetadata;(!it(o.idProperties)||o.idProperties.length<1)&&r.missingIdProp();var a=[],h=[],w=this._getCreatedEntities(t,!0)().slice(0);n.forEach((function(n){var t=c.getItemId(n,o);kt(t)?h.push(n):a.push(n)}));var y=function(n){v(i)?u.addCreated(n,i):u.addCreated(n,i)},b=e.extend({handleAdd:function(n){y(n)},handleDelete:function(n){u.markForDelete(n)}},this._createMergeEntityOnlyVisitorOptions()),p=new nr(b,f((function(){return p})));p.applyEntityArrayAsEdits(a,i,s.typeMetadata);h.length&&h.forEach((function(n){y(n)}));w.forEach((function(n){u.revert(n)}))}else v(t)||r.targetArrObs(),l=new d(null,f((function(){return l}))),t(l.clone(n,null))},u.prototype.getEdits=function(){this._inconsistent()&&r.editsUnavail();var n=this._getEdits(!0).map((function(n){var t={state:n.state,entityReference:n.entityReference};switch(t.state){case i.Created:t.entityPath=n.entityPath;t.createdEntities=n.encodedCreatedEntities.map((function(n){return ui(n)}));break;case i.Updated:t.entityUpdates=ui(n.entityUpdates)}return t}));return{edits:n,version:1}},u.prototype.applyEdits=function(n){this._assertNotDisposed();var t=oi(n,this._hasMetadata);return this._applyEdits(t,this._applyEditsVisitor,!1),!0},Object.defineProperty(u.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),u.prototype._mergeFromOriginal=function(){r.mergeUnavail()},u.prototype._getRefreshableData=function(){return r.noImpl(),null},u.prototype._onRefreshComplete=function(){r.noImpl()},u.prototype._addEntityStateToEditableEntity=function(t,u,f){var e=this,o=this._addEntityState(t);o.original=u;o.typeMetadata=f;ct(o.lifetimeManager=new n.TriggerableLifetimeManager,(function(){if(!e._inconsistent()){var u=e._getEntityState(t,!0),n=u.readOnlyEditState.peek(),f=e._edits().some((function(n){return n.state===i.Updated&&n.updatedOrDeletedEntity===t}));f?n===i.None?e._markAsDeletedOrUpdated(t,i.Updated):n!==i.Updated&&r.moveEditState(i[n],i[i.Updated]):n===i.Updated&&u.writableEditState(i.None)}}))},u.prototype._addEntityStateToCreatedEntity=function(n,t){var r=this._addEntityState(n);r.containingArray=t;r.writableEditState(i.Created)},u.prototype._addEntityState=function(n){var t=o(i.None),r={writableEditState:t,readOnlyEditState:dt((function(){return t()}))};return y.data(n,this._entityStateKey,r),r},u.prototype._getEntityState=function(n,t,i){var e=this,u,f,r;if(i===void 0&&(i=!0),u=n&&y.data(n,this._entityStateKey),!u&&i){f=!h(n)&&s(n);r="";r=t?"Entity-typed object is not known to this edit scope.  Such entity-typed objects can only be added via 'editScope.addCreated', 'editScope.refresh' and any refresh concluding an async 'editScope.saveChanges' call.  Such objects cannot be added due to the addition of some object/array that nests this object.":f?this._rootTypeMetadata===ft?"No type metadata was supplied to this EditScope.  Depending on scenario, be sure to supply either: (1) the 'editScopeMetadataType' option to your MsPortalFx.ViewModels.ParameterProvider or (2) the 'entityTypeName' option to your MsPortalFx.Data.EditScopeCache.":ut?"":"Object passed as the 'entity' parameter either isn't reachable from 'editScope.root' or isn't entity-typed according to type metadata.":"Value passed as the 'entity' parameter must be an object.";ut||(r=r+"  "+ti);throw new Error(r);}return u},u.prototype._deregisterNestedEntities=function(n,t,r){var e=this,u;r===void 0&&(r=!0);u=new yt({getCreatedEntities:function(n){return e._getCreatedEntities(n,!0)}},f((function(){return u}),{visitEntityArray:function(n,t,i){u.visitEntityArray(n,t,i);e._disposeEntityArrayState(n)},visitEntity:function(n,t,r){if(u.visitEntity(n,t,r),r){var f=e._getEditState(n,!0)();f!==i.None&&lt.error("Edited entities are being disconnected from the EditScope, losing user-authored edits.")}e._disposeEntityState(n)}}));u.visit(n,t,r)},u.prototype._addEntityArrayState=function(n,t,i){var r={typeMetadata:i,original:t};y.data(n,this._entityArrayStateKey,r)},u.prototype._createVisitorCallbacks=function(n,t,i){return t===void 0&&(t={}),i===void 0&&(i=!1),f(n,t,i)},u.prototype._rootIsEntity=function(){return s(this._root)},u.prototype._rootAsEntity=function(n){return n===void 0&&(n=!0),s(this._root)?n?this._root:this._getOriginalEntity(this._root):null},u.prototype._rootAsArray=function(n){return n===void 0&&(n=!0),h(this._root)?n?this._root:this._getOriginalArray(this._root):null},u.prototype._getOriginalEntity=function(n){return this._getEntityState(n,!0).original},u.prototype._getOriginalArray=function(n){return this._getEntityArrayState(n,!0).original},u.prototype._revertEntity=function(n,t,r){switch(r){case i.Updated:this._mergeToEditableVisitor.mergeEntity(t.original,n,t.typeMetadata);break;case i.Created:var u=this._getCreatedEntities(t.containingArray,!0);u.splice(u().indexOf(n),1)}},u.prototype._getEntityArrayState=function(n,t,i){var e=this,u,f,r;if(i===void 0&&(i=!0),u=y.data(n,this._entityArrayStateKey),!u&&i){f=h(n);r="";r=t?"Entity-typed array is not known to this EditScope.  Such entity-typed arrays can only be added via 'editScope.refresh' and any refresh concluding an async 'editScope.saveChanges' call.  Such arrays cannot be added due to the addition of some object/array that nests this array.":f?this._rootTypeMetadata===ft?"No type metadata was supplied to this EditScope.  Depending on scenario, be sure to supply either: (1) the 'editScopeMetadataType' option to your MsPortalFx.ViewModels.ParameterProvider or (2) the 'entityTypeName' option to your MsPortalFx.Data.EditScopeCache.":ut?"":"Array passed as the 'entityArray' parameter either isn't reachable from 'editScope.root' or isn't entity-typed according to type metadata.":"Value passed as the 'entityArray' parameter must be an array or an observable array.";ut||(r=r+"  "+ti);throw new Error(r);}return u},u.prototype._disposeEntityArrayState=function(n){y.data(n,this._entityArrayStateKey,a)},u.prototype._disposeEntityState=function(n){var t=this._getEntityState(n,!0);t.lifetimeManager&&t.lifetimeManager.dispose();y.data(n,this._entityStateKey,a)},u.prototype._markAsDeletedOrUpdated=function(n,t){var f=this._getEntityState(n,!0),u=f.readOnlyEditState.peek();u!==i.None&&u!==t&&r.entityEdit(i[u]);f.writableEditState(t)},u.prototype._getEntityArrayType=function(n,t){return this._getEntityArrayState(n,t).typeMetadata},u.prototype._getCreatedEntities=function(n,t){var r=this._getEntityArrayState(n,t),i=r.createdEntities;return i||(i=r.createdEntities=ht()),i},u.prototype._revertAll=function(){this._revertAllVisitor.visit(this._root,this._rootTypeMetadata)},u.prototype._createRevertAllVisitor=function(){var n=this,t=new yt({getCreatedEntities:function(t){return n._getCreatedEntities(t,!0)}},f((function(){return t}),{visitEntityArray:function(i,r){t.visitArray(i,r);for(var u=n._getCreatedEntities(i,!0);u().length>0;)n.revert(u()[0])},visitEntity:function(i,r){t.visitEntity(i,r);n.revert(i)}}));return t},u.prototype._getEdits=function(n){var t=[],i=this._rootIsEntity()?this._createEntityReference(this._rootAsEntity(),this._rootTypeMetadata,!1):null,r=n?this._getPersistableEditsVisitor:this._getEditsVisitor;return r.visit(this._root,this._rootTypeMetadata,{edits:t,entityReference:i,entityPath:""}),t},u.prototype._createGetEditsVisitor=function(n){var t=this,u=new yt({getCreatedEntities:function(n){return t._getCreatedEntities(n,!0)}},f((function(){return u}),{visitEntityArray:function(n,i){t._getEntityArrayState(n,!0);u.visitEntityArray(n,i)},visitEntity:function(n,i){t._getEntityState(n,!0);u.visitEntity(n,i)}})),o=this._createComputeEntityUpdatesVisitor(n),e=function(n,t,i){return o.visit(n,t,i)},r=new l(null,f((function(){return r}),{shouldVisitObjectProperty:function(n,i,u){return ei(n,u)&&r.shouldVisitObjectProperty(n,i,u)&&t._objectPropertyNestsEntities(i,n,u)},visitArrayItem:function(n,t,i,u){r.visitArrayItem(n,t,i,{edits:u.edits,entityReference:u.entityReference,entityPath:u.entityPath+"."+t})},visitEntityArray:function(n,f,o){var s;if(r.visitArray(n,f,o),s=t._getCreatedEntities(n,!0),s().length){var h=o.edits,c=o.entityReference,l=o.entityPath;h.push({state:i.Created,entityReference:c,entityPath:l,encodedCreatedEntities:s().map((function(n){return e(n,f)})),typeMetadata:f,createdEntities:s()});s().forEach((function(n){u.visit(n,f)}))}},visitObject:function(n,i,u){var f=rt(i),e=u.edits,o=u.entityReference,s=u.entityPath;r.getObjectPropertiesToVisit(n,i).forEach((function(u){r.visitObjectPropertyValueDispatch(u,n,i,{edits:e,entityReference:f?t._createEntityReference(n,i,!1):o,entityPath:f?u:s+"."+u})}))},visitEntity:function(n,u,f){var o=f.edits,h=t._getEditState(n,!0)(),s=e(n,u,t._getOriginalEntity(n));yi(s)?h===i.Deleted&&o.push({state:i.Deleted,entityReference:t._createEntityReference(n,u,!1),typeMetadata:u,updatedOrDeletedEntity:n}):o.push({state:i.Updated,entityReference:t._createEntityReference(n,u,!1),entityUpdates:s,typeMetadata:u,updatedOrDeletedEntity:n});r.visitEntity(n,u,f)}}));return r},u.prototype._createApplyPersistedEditsVisitor=function(){var n=this;return this._createApplyEditsVisitor(!1,{applyCreate:function(t,i,r){n._removeNonPersistedPropertySentinels(i,r,!0);n.addCreated(i,t)},applyUpdate:function(t,i,r){n._removeNonPersistedPropertySentinels(i,r,!1);n._applyEntityUpdates(t,i,r)},applyDelete:function(t,r){n._markAsDeletedOrUpdated(r,i.Deleted)}})},u.prototype._createApplyEditsVisitor=function(n,t){var u=this,r=new l(null,f((function(){return r}),{visitArrayItem:function(n,t,i,u){r.visitArrayItem(n,t,i,{edits:u.edits,entityReference:u.entityReference,entityPath:u.entityPath+"."+t})},visitEntityArray:function(f,e,o){var h,v;r.visitArray(f,e,o);var s=o.edits,l=tt(f),y=function(r){var o=l[r],c=u._createEntityReference(o,e,n),h=s.firstIndex((function(n){return n.state===i.Deleted&&wt(c,n.entityReference)}));h>=0&&(s.splice(h,1),t.applyDelete(f,o))};for(h=l.length-1;h>=0;h--)y(h);var a=o.entityReference,p=o.entityPath,c=s.firstIndex((function(n){if(n.state===i.Created)if(a){if(n.entityReference&&wt(a,n.entityReference)&&p===n.entityPath)return!0}else if(!n.entityReference)return!0}));c>=0&&(v=s[c],s.splice(c,1),v.encodedCreatedEntities.forEach((function(n){t.applyCreate(f,n,e)})))},visitObject:function(f,e,o){var s=o.edits,c=o.entityReference,v=o.entityPath,l=rt(e),h,a;l&&(c=u._createEntityReference(f,e,n));r.getObjectPropertiesToVisit(f,e).forEach((function(n){r.visitObjectPropertyValueDispatch(n,f,e,{edits:s,entityReference:c,entityPath:l?n:v+"."+n})}));l&&(h=s.firstIndex((function(n){return n.state===i.Updated&&wt(c,n.entityReference)})),h>=0&&(a=s[h],s.splice(h,1),t.applyUpdate(f,a.entityUpdates,e)))}}));return r},u.prototype._acceptChanges=function(){var n=this._getEdits(!1);this._applyEdits(n.slice(0),this._createAcceptChangesVisitor(!0),!0);this._applyEdits(n,this._createAcceptChangesVisitor(!1),!1)},u.prototype._createAcceptChangesVisitor=function(n){var t=this;return this._createApplyEditsVisitor(n,{applyCreate:function(i,r,u){if(!n){var f=i,e=t._createEditableAndOriginalData(r,u).editable,o=function(n,t){if(n.push)n.push(t);else{var i=n,r=i().slice(0);r.push(t);i(r)}};o(f,e);o(t._getOriginalArray(f),t._getOriginalEntity(e))}},applyUpdate:function(i,r,u){n&&t._applyEntityUpdates(i,r,u)},applyDelete:function(n,t){var u=tt(n).indexOf(t),i,r;n.splice?n.splice(u,1):(i=n,r=i().slice(0),r.splice(u,1),i(r))}})},u.prototype._applyEntityUpdates=function(n,t,i){this._mergeToEditableVisitor.mergeEntity(t,n,i)},u.prototype._removeNonPersistedPropertySentinels=function(n,i,r){var u=new l(null,{visitObjectPropertyValue:function(n,i,f){var e=b(i,n);e===t.nonPersistedPropertySentinel?v(i[n])?i[n](a):r?i[n]=a:delete i[n]:u.visitObjectPropertyValue(n,i,f)},visitArray:function(n,i){var r=p(n);r.length===1&&r[0]===t.nonPersistedPropertySentinel?r.splice(0,1):u.visitArray(n,i)}});u.visit(n,i)},u.prototype._generateValueBasedEntityId=function(n,t){return this._generateValueBasedEntityIdVisitor.visit(n,t)},u.prototype._createGenerateValueBasedEntityIdVisitor=function(){var n=new l(null,f((function(){return n}),{visitArray:function(t,i){var r="";return p(t).forEach((function(t,u){r+=n.visitArrayItem(t,u,i)})),et(r)},visitObject:function(t,i){var u=n.getObjectPropertiesToVisit(t,i).sort(),r="";return u.forEach((function(u){r+=n.visitObjectPropertyValueDispatch(u,t,i)})),et(r)},visitScalar:function(n){return et(""+n)},visitDate:function(n){return et(""+n)}},!0));return n},u.prototype._createEntityReference=function(n,t,i){var u,s,f,e,o;return i===void 0&&(i=!1),s=this._rootAsEntity(!i)===n,s?u={type:a,id:a}:(f=i?n:this._getOriginalEntity(n),e=void 0,t&&(t.name||t===this._rootTypeMetadata)||r.serialize(),e=c.typeHasId(t)?c.getItemId(f,t):this._generateValueBasedEntityId(f,t),o=t.name||null,o||t===this._rootTypeMetadata||r.namedMeta(),u={type:o,id:e}),u},u.prototype._createComputeEntityUpdatesVisitor=function(n){var e=this,r=new d(null,f((function(){return r}),{visitObject:function(i,u){var f={};return r.getObjectPropertiesToVisit(i,u).forEach((function(s){var c=r.visit(b(i,s),k(u,s)),l,a,y;n&&(e._shouldPersistObjectPropertyEdits(s,u)||(c=t.nonPersistedPropertySentinel));l=i[s];ci(i,s)?a=o(c):h(l)&&c===t.nonPersistedPropertySentinel?(y=[t.nonPersistedPropertySentinel],a=v(l)?!l.splice?o(y):ht(y):y):a=c;f[s]=a})),f}},!0)),i={},u=new l(null,f((function(){return u}),{visitObject:function(f,o,h){if(s(h)){var c;return e._enumeratePropertiesForUpdates(f,h,u,o,(function(r){var s=u.visit(b(f,r),k(o,r),b(h,r));s!==i&&(c||(c={}),n&&(e._shouldPersistObjectPropertyEdits(r,o)||(s=t.nonPersistedPropertySentinel)),c[r]=s)})),c||i}return r.visit(f,o)},visitArray:function(n,t,f){var e=!1,o;return h(f)?p(n).length!==p(f).length?e=!0:(o=p(f),e=p(n).some((function(n,r){return u.visitArrayItem(n,r,t,o[r])!==i}))):e=!0,e?r.visit(p(n),t):i},visitScalar:function(n,t){return bt(n,t)?i:n},visitDate:function(n,t){return bt(n,t)?i:n}},!0));return u},u.prototype._shouldPersistObjectPropertyEdits=function(t,i){if(!n.Data.allowNonPersistentEdits)return!0;var r=i&&i.properties&&i.properties[t];return!r||r.persistEdits!==!1},u.prototype._enumeratePropertiesForUpdates=function(n,t,i,r,u){i.getObjectPropertiesToVisit(n,r).forEach((function(n){t.hasOwnProperty(n)?u(n):lt.warning("Encountered a property '"+n+"' on an editable object that is not present on the original object.  Updates to the property value are not being persisted along with other edits.")}));i.getObjectPropertiesToVisit(t,r).forEach((function(t){n.hasOwnProperty(t)||lt.warning("Encountered a property '"+t+"' on an original object that is not present on the editable object.  Updates to the property value are not being persisted along with other edits.")}))},u.prototype._assertNotDisposed=function(){this._isDisposed&&r.disposed()},u.prototype._objectPropertyNestsEntities=function(n,t,i){var r=n[t],u;return(v(r)&&(r=r.peek()),!(it(r)||s(r)))?!1:(u=k(i,t),!u)?!1:!0},u.prototype._getEditState=function(n,t){return this._getEntityState(n,t).readOnlyEditState},u.prototype._createMergeToEditableVisitor=function(){var n=new gi(this._createMergeEntityOnlyVisitorOptions(),f((function(){return n})));return n},u.prototype._createMergeEntityOnlyVisitorOptions=function(){var n=new l(null,f((function(){return n}),{visitEntityTypedObjectPropertyValue:function(){r.nestedEntities()}})),t=new d(null,f((function(){return t})));return{onDetach:function(t,i){n.visit(t,i)},clone:function(n,i){return t.clone(n,i)}}},u.prototype._applyEdits=function(n,t,i){var r=this._rootIsEntity()?this._createEntityReference(this._rootAsEntity(),this._rootTypeMetadata,i):null,u=i?this.getOriginal(this._root):this._root;t.visit(u,this._rootTypeMetadata,{edits:n,entityReference:r,entityPath:""})},u.prototype._addMetadataHelperMessage=function(n){var t=this;return n},u})();g=__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],g);var ki=(function(n){function t(t,i,r){var u=n.call(this)||this;return u.init(t,i,r,(function(n,t){return{editable:u._getVisitor().clone(n,t),original:n}})),u}return __extends(t,n),t.prototype._mergeFromOriginal=function(n){n===void 0&&(n=!0);var t=this._rootTypeMetadata,i=this._createMergeEntitiesVisitor(n);this._rootIsEntity()?i.mergeEntity(this._rootAsEntity(!1),this._rootAsEntity(),t):i.mergeEntityArray(this._rootAsArray(!1),this._rootAsArray(),t)},t.prototype._getRefreshableData=function(){return this.getOriginal(this._root)},t.prototype._onRefreshComplete=function(n){n&&ni.mergeWithoutAtomization(n,this.getOriginal(this._root),{type:this._rootTypeMetadata.name});this._mergeFromOriginal(!1)},t.prototype._getVisitor=function(){var t=this,n=this._visitor;return n||(this._visitor=n=new d(null,f((function(){return n}),{visitEntityArray:function(i,r){var u=n.visitEntityArray(i,r);return t._addEntityArrayState(u,i,r),u},visitEntity:function(i,r){var u=n.visitEntity(i,r);return t._addEntityStateToEditableEntity(u,i,r),u}}))),n},t.prototype._createMergeEntitiesVisitor=function(n){var t=this,i=new ri({onDetach:function(i,r){t._deregisterNestedEntities(i,r,n)},clone:function(n,i){return t._getVisitor().clone(n,i)},getSourceEntity:function(n){return t._getOriginalEntity(n)},isSourceForTargetEntity:function(n,i){return t._getOriginalEntity(i)===n}},f((function(){return i})));return i},t})(g),di=(function(n){function t(t,i,r){var u=n.call(this)||this;return u.init(t,i,r,(function(n,t){return{editable:n,original:u._getVisitors().clone.clone(n,t)}})),u}return __extends(t,n),t.prototype._getRefreshableData=function(){return this._root},t.prototype._onRefreshComplete=function(n){n&&ni.mergeWithoutAtomization(n,this._root,{type:this._rootTypeMetadata.name});this._mergeToOriginal()},t.prototype._getVisitors=function(){var t=this,i=this._visitors,n,r;return i||(n=new d(null,f((function(){return n}),{visitEntityArray:function(i,r,u){var f=n.visitEntityArray(i,r,u);return t._addEntityArrayState(i,f,r),f},visitEntity:function(i,r,u){var f=n.visitEntity(i,r,u);return t._addEntityStateToEditableEntity(i,f,r),f}})),r=new ri({onDetach:function(){},clone:function(t,i){return n.clone(t,i)},getSourceEntity:function(n,i){return i.first((function(i){var r=t._getEntityState(i,!0,!1);return r&&r.original===n}))},isSourceForTargetEntity:function(n,i){var r=t._getEntityState(n,!0,!1);return r&&r.original===i}},f((function(){return r}))),this._visitors=i={clone:n,merge:r}),i},t.prototype._mergeToOriginal=function(){var n=this._rootTypeMetadata,t=this._getVisitors().merge;this._rootIsEntity()?t.mergeEntity(this._rootAsEntity(),this._rootAsEntity(!1),n):t.mergeEntityArray(this._rootAsArray(),this._rootAsArray(!1),n)},t})(g),yt=(function(n){function t(t,i){var r=n.call(this,t,i)||this;return r._getCreatedEntities=t&&t.getCreatedEntities,r}return __extends(t,n),t.prototype.visitEntityArray=function(t,i,r){var u=this._getCreatedEntities(t);return n.prototype.visitEntityArray.call(this,u,i,r),n.prototype.visitEntityArray.call(this,t,i,r)},t})(l),gi=(function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.mergeEntity=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.visitEntityTypedObjectPropertyValue=function(){return!0},t})(st),nr=(function(n){function t(t,i){var r=n.call(this,t,i)||this;return r._handleAdd=t.handleAdd,r._handleDelete=t.handleDelete,r}return __extends(t,n),t.prototype.applyEntityArrayAsEdits=function(n,t,i){var r=this;this._mergeArray(n,i,t,{handleAdd:function(n){r._handleAdd(n)},handleDelete:function(n){r._handleDelete(n)}})},t})(st),ri=(function(n){function t(t,i){var r=n.call(this,t,i)||this;return r._getSourceEntity=t.getSourceEntity,r._isSourceForTargetEntity=t.isSourceForTargetEntity,r}return __extends(t,n),t.prototype.mergeEntity=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.mergeEntityArray=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i,r){var o=this._callbacks,u=b(t,n),f=b(r,n),e=!1;return h(u)?h(f)&&(e=o.visitEntityArray(u,i,f)):s(u)&&s(f)&&this._isSourceForTargetEntity(u,f)&&(e=o.visitEntity(u,i,f)),e},t.prototype.visitEntityArray=function(n,t,i){var r=this;return this._mergeArray(n,t,i,{getEdits:function(n,t){var i=function(t){return r._getSourceEntity(t,n)},f=t.map((function(n){return i(n)})),u=ko.utils.compareArrays(f,n);return u.forEach((function(n){if(n.status==="deleted"||n.status==="retained"){var r=n.value;n.value=t.first((function(n){return i(n)===r}))}})),u},getSourceItem:function(n,t){return r._getSourceEntity(n,t)}})},t})(st)})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";function i(n){return new t.EditScopeCache(n)}function r(n){return new t.EditScopeCacheOld(n)}var t=FxImpl.Data;n.createNew=i;n.create=r})(t=n.EditScopeCache||(n.EditScopeCache={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=(function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),Object.defineProperty(i.prototype,"editScope",{get:function(){return this._loadedCacheEntry},enumerable:!0,configurable:!0}),i.prototype.fetchForNewData=function(n){return this.fetch({editScopeId:n,params:undefined})},i.prototype.fetchForExistingData=function(t,i){return this.fetch({editScopeId:t,params:n.isNullOrUndefined(i)?null:i})},i})(FxImpl.Data.ObjectView);i=__decorate([n.Composition.ProxyCompatibilityMode],i);t.EditScopeView=i})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i="",u={entityCacheWithLoader:i,missingObservableData:i},r=FxImpl.getErrorMap(u),f=(function(i){function u(t){var f=i.call(this,n.clone(t))||this,u=t;return u.findCachedEntity&&u.loader&&!u.loader.establishDataSet&&r.entityCacheWithLoader(),f._findCachedEntity=u.findCachedEntity,f}return __extends(u,i),u.prototype.createView=function(n,i){return new t.EntityView(this,n,i)},u.prototype._tryFindDataInRelatedCache=function(n){var i,t=this._findCachedEntity,r,f,u,e;return t&&(t.hasOwnProperty("queryCache")?(r=t,f=r.queryCache,i=f._findMatchingEntity(r.entityMatchesId,n)):(u=t,e=u.dataCache,i=e._findEntity(u.findMatchingEntityInCacheEntry,n))),i},u.prototype._getDataFromDataSet=function(n){var t=n.data;return ko.isObservable(t)||r.missingObservableData(),n.data()},u})(FxImpl.Data.DataCache);t.EntityCache=f})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var r=ko.observable,i=(function(n){function t(t,i,u){var f=n.call(this,t,i,u||{})||this;return f._item=r(null),ko.computed(i,(function(){var t=f._loadedCacheEntry(),n,i;if(t)if(n=t.data,ko.isObservable(n))i=n(),f._item(i);else throw new Error("DataSets used with EntityView must contain observable data.");else f._item(null)})),f}return __extends(t,n),Object.defineProperty(t.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._item()},enumerable:!0,configurable:!0}),t})(FxImpl.Data.DataView);i=__decorate([n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Object])],i);t.EntityView=i})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function ft(n,t){return r[n]=new ot(n,t)}function v(n,t){var i=n in u&&u[n]||k||d;return i[t]}function y(n){return Math.max(n||0,yt||d.fastPollingInterval)}function pt(t){var i;return t=n.clone(t),i=t.fastPollingInterval=y(t.fastPollingInterval),i=t.pollingInterval=Math.max(y(t.pollingInterval),i),t.slowPollingInterval=Math.max(y(t.slowPollingInterval),i),t}function et(n,t,i){n.fetchingSameData&&(n.fetchingSameData=i);t&&(n.isForcedCacheRefresh=!0)}function wt(t,i,r){if(i){var u=i.status;if(u===401||u===403)return new n.Errors.UnauthorizedDataError(t,i);if(u===404&&(!r||vt(i)))return new n.Errors.NotFoundDataError(t,i)}return new n.Errors.FetchDataError(t,i)}var g=n.Base,st=n.Data,ht=g.Promises,p=g.Net2,s=n.Helpers.Deferred,nt=n.isObject,tt=n.deepEquals,w=Date.now,i=null,h="",ct={earlyRefresh:h,unknownDataSet:h,modifyLifetime:h,unaccessedDataSet:h},c=FxImpl.getErrorMap(ct),it=window,l=new n.Base.Diagnostics.Log(""),r={},rt={getFetchParameters:function(n,t,r){return r?{headers:t&&t.ajaxHeaders,data:t&&t.ajaxData}:i},fetchData:function(n,t,r,u,f,e){var h=i,o,s;return r&&(h=typeof r=="string"?r:JSON.stringify(r)),o="json",s=p.ajax({uri:t,type:f||"POST",dataType:o,cache:!1,headers:u,traditional:!0,contentType:"application/json",data:h,setAuthorizationHeader:e}),s.requestedDataType=o,s},processResult:[t.DataProvider.DataContractJsonSerializer.processResult]},b,k,u={},d={fastPollingInterval:1e4,pollingInterval:6e4,slowPollingInterval:3e5},f={slow:"slowPollingInterval",normal:"pollingInterval",fast:"fastPollingInterval"},e=0,lt=/^application\/json\b/,at=function(n){try{return JSON.parse(n),!0}catch(t){return!1}},vt=function(n){return lt.test(n.getResponseHeader("Content-Type"))&&at(n.responseText)},ut=n.isFeatureEnabled("tracefetch"),yt,a,ot,o;(function(n){n[n.Never=1]="Never";n[n.Normal=2]="Normal"})(a=t.PollFrequency||(t.PollFrequency={}));ot=(function(){function t(n,t){var u=this,r;this._pollFrequency=a.Normal;this._fastPollingRefCount=0;this._pollCount=0;this._merged=!1;this._hasSnapshottedFetchOptions=!1;this._name=n;this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;t&&(this._snapshotFetchOptions(t),r=t.type);this.dataSet=new st.DataSet(r||i,t.dataSetLifetime,t.atomizationOptions)}return t.prototype._hasRequestInFlight=function(){return!!this._currentFetchDeferred},t.prototype._getLastFetchState=function(){return this._lastFetchState},t.prototype.getCachedOrInFlightData=function(n){var u=n.uri,f=n.ajaxData,e=n.ajaxHeaders,t,r,o=n.httpMethod||i;return this._lastCompletedFetchStart&&u===this._uri&&o===this._httpMethod&&tt(f,this._ajaxData)&&tt(e,this._ajaxHeaders)?!this._expiry||this._expiry>w()?(n.forceCacheRefresh&&this.debounceServerFetch(!0,!0),t=s().resolve({name:this._name,value:this.dataSet})):this._currentFetchDeferred&&!n.forceCacheRefresh?t=this._currentFetchDeferred:(l.verbose("Cached data expired: '"+this._name+"'"),r=!0):(this._tryExecuteDebouncedServerFetch(),this._snapshotFetchOptions(n)),{promise:t?t.promise():i,fetchingSameData:r}},t.prototype.forceRefresh=function(){return this._hasSnapshottedFetchOptions||c.earlyRefresh(),p.invalidateCacheHeader(this._ajaxHeaders),this._tryExecuteDebouncedServerFetch(!0)?this._currentFetchDeferred.promise():this.debounceServerFetch(!0,!0)},t.prototype.debounceServerFetch=function(t,r){var u=this,f;return this._debouncedFetch?et(this._debouncedFetch,r,t):(this._currentFetchDeferred=s(),this._pollingTask&&n.Base.Scheduler.deleteTask(this._pollingTask),f=function(){var n=u._debouncedFetch,t=n.isForcedCacheRefresh,r=n.fetchingSameData;u._debouncedFetch=i;u._fetchData(r,!0,t)},this._debouncedFetch={callback:f,timeoutId:it.setTimeout(f,0),isForcedCacheRefresh:r,fetchingSameData:t}),this._currentFetchDeferred.promise()},t.prototype.setFastPolling=function(n){n?this._fastPollingRefCount++:this._fastPollingRefCount>0&&this._fastPollingRefCount--},t.prototype.dispose=function(){this._lifetimeManager.dispose();delete u[this._name];this._pollingTask&&n.Base.Scheduler.deleteTask(this._pollingTask)},t.prototype._tryExecuteDebouncedServerFetch=function(n){var t=this._debouncedFetch;return t?(et(t,n,n),it.clearTimeout(t.timeoutId),t.callback(),!0):!1},t.prototype._snapshotFetchOptions=function(t){this._hasSnapshottedFetchOptions=!0;this._uri=t.uri;this._httpMethod=t.httpMethod||i;this._ajaxData=t.ajaxData;this._ajaxHeaders=t.ajaxHeaders;this._loaderOptions=t.loaderOptions;this._preserveNewItemsOrdering=t.preserveNewItemsOrdering;this._pollFrequency=t.pollFrequency||a.Normal;this._setAuthorizationHeader=t.setAuthorizationHeader;var r=t.fetchStartListener;this._fetchStartListener=r?function(n){r.fire(n)}:n.noop},t.prototype._fetchData=function(t,r,u){var f=this,o=this._name,nt=this._getLoaderOptionFunction("getFetchParameters"),y=this._getLoaderOptionFunction("fetchData"),s=this._getLoaderOptionFunction("processResult"),c,v=w(),h=this._currentFetchDeferred,b=this._lastFetchState,k=n.Base.Diagnostics.Telemetry,d,tt=this.dataSet,a,g;ut&&(d=k.startTrace({source:"Data",action:"Fetch",name:this._name,data:this._uri}));u&&(this._lastForcedFetchStart=v);this._fetchStartListener({dataSetName:o,promise:h.promise(),isClientInitiated:r});c=nt(o,b,t)||{};a=n.clone(this._ajaxData,!1,!0)||i;c.data&&(a=n.extend(a,c.data));this._uri||y!==rt.fetchData||l.error("Missing uri parameter in fetchData for '"+o+"' created by: "+(this._constructorCallStack||""));ht.cancelOnDispose(this._lifetimeManager,(function(){var t=y(o,f._uri,a,n.extend2(f._ajaxHeaders,c.headers),f._httpMethod,f._setAuthorizationHeader);return g=t.requestedDataType==="json",t})).then((function(u){var w=!0,c=u&&u.cachedAjax?u:{cachedAjax:!1,modified:!0,data:u,cacheTagValue:i},g={data:c.data},a,nt,it,ft,y,et;c.cacheTagValue&&(f._ajaxHeaders=p.setCacheHeader(f._ajaxHeaders,c.cacheTagValue));try{if(f._lifetimeManager.isDisposed())return;if(Array.isArray(s)||(s=[s]),c.modified)for(nt=s.length,a=0;a<nt;++a)if(!s[a](o,g,b,t,tt.type)){w=!1;break}it=!r&&e>0;f._onFetchCompleted(r,!0,h);c.modified&&w&&!it&&f._shouldAcceptFetchResult(v)&&f._acceptFetchResult(g,v)}catch(rt){y=n.getLogFriendlyMessage(rt);ft="Data merge failed for data set '"+o+"'. The error message was: "+y;l.error(ft)}finally{ut&&k.completeTrace(d);try{h.resolve({name:o,value:f.dataSet})}catch(rt){y=n.getLogFriendlyMessage(rt);et="Data-load completed callback threw an exception for data set '"+o+"'. The error message was: "+y;l.error(et)}}})).catch((function(n){if(!f._lifetimeManager.isDisposed()){f._onFetchCompleted(r,!1,h);var t=wt(o,n&&n.jqXHR||n,g);h.reject(t)}}))},t.prototype._onFetchCompleted=function(n,t,r){var u=this,e=this._pollFrequency!==a.Never;n&&t&&e&&!this._pollingTask&&(this._pollingTask={name:"poll data set: "+this._name,scheduledTask:function(){u._pollData()},recurring:!1,isAsync:!0,delayInMs:v(this._name,f.fast),silent:!0});r===this._currentFetchDeferred&&(this._currentFetchDeferred=i,this._reschedulePolling(!0))},t.prototype._reschedulePolling=function(t){this._pollingTask&&(t&&(this._pollCount=0),n.Base.Scheduler.scheduleTask(this._pollingTask))},t.prototype._shouldAcceptFetchResult=function(n){if(this._lastCompletedFetchStart){var t=n>this._lastCompletedFetchStart,i=this._lastForcedFetchStart&&n<this._lastForcedFetchStart;return t&&!i}return!0},t.prototype._acceptFetchResult=function(t,r){this.dataSet.merge(t.data,{type:t.type,fetchStart:r,preserveNewItemsOrdering:this._preserveNewItemsOrdering});var u=this.dataSet;u.navigationMetadata(t.navigationMetadata||i);u.partialErrors(t.partialErrors||[]);this._lastCompletedFetchStart=r;this._lastFetchState=t.fetchState;this._merged=!0;this._expiry=w()+v(this._name,f.slow)*3;n.isInWebWorker||$(u).trigger("mergeComplete")},t.prototype._determinePollingInterval=function(){return f.normal},t.prototype._pollData=function(){var n,t,i,r,u;if(!this._lifetimeManager.isDisposed())return this._currentFetchDeferred||e||(this._pollCount++,this._isFastPollNeeded()?(n=!0,u="Client side locking or mutation flags detected",t=f.fast):(n=!0,u="Poll is needed",t=this._determinePollingInterval()),t&&(i=v(this._name,t)),n&&(r=Math.ceil(i/v(this._name,f.fast)),n=this._pollCount%r==0)),n?(this._currentFetchDeferred=s(),this._fetchData(!0),this._currentFetchDeferred.promise()):(this._reschedulePolling(),s().resolve(null))},t.prototype._isFastPollNeeded=function(){return this._fastPollingRefCount>0||this.dataSet.hasUnmergedClientChanges()},t.prototype._getLoaderOptionFunction=function(n){var t;return this._loaderOptions&&(t=this._loaderOptions[n]),!t&&b&&(t=b[n]),t||rt[n]},t})();o=(function(){function n(){}return n.getData=function(n,t){var i,u,e,f;return nt(n)&&(t=n,n=t.dataSetName||t.uri),i=r[n],i?(f=i.getCachedOrInFlightData(t),u=f.promise,e=f.fetchingSameData):i=ft(n,t),u||(u=i.debounceServerFetch(e,t.forceCacheRefresh)),u},n.forceRefresh=function(n){var t=r[n];if(t)return t.forceRefresh();c.unknownDataSet()},n.getDataSet=function(t,i,r,u,f){var e=!1,o={dataSetLifetime:u,atomizationOptions:f,uri:undefined};return typeof i=="boolean"?e=i:typeof i=="string"&&(e=!0,o.type=i),n.getDataSet2(t,e,o,r)},n.getDataSet2=function(n,t,u,f){var e=r[n],s=u.dataSetLifetime,o;return e&&s&&s!==e.dataSet.lifetime&&c.modifyLifetime(),!e&&t&&(e=ft(n,u)),o=e?e.dataSet:i,o&&f&&o.merge(f),o},n.hasRequestInFlight=function(n){var t=r[n];return t&&t._hasRequestInFlight()},n.disposeDataSet=function(n){var t=r[n];t&&(t.dispose(),delete r[n])},n.setFastPolling=function(n,t){var i=r[n];i?i.setFastPolling(t):c.unaccessedDataSet()},n.pausePolling=function(){e++},n.resumePolling=function(){e>0&&e--},n.setDefaultLoaderOptions=function(n){b=n},n.setPollingIntervals=function(n,t){var r=n;nt(n)&&(t=n,r=i);t=pt(t);r?u[r]=t:k=t},n.resetPollingIntervals=function(n){typeof n=="string"?u[n]=null:k=null},n})();o._internal={setDefaultPollingIntervals:function(n){d=n}};o.getMinPollingInterval=y;t.Loader=o,(function(n){var t;(function(n){function t(){Object.getOwnPropertyNames(r).forEach((function(n){var t=r[n];t&&(t.dispose(),delete r[n])}))}n.disposeAllCachedDataSetsForTests=t})(t=n.Internal||(n.Internal={}))})(o=t.Loader||(t.Loader={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=t.Loader,f=n.Data.PollFrequency,s="GET",r="",h={needBothOptions:r,minimumPoll:r,incompatibleOptions:r},u=FxImpl.getErrorMap(h),e=(function(){function r(i){i.atomizationOptions&&!i.entityTypeName?u.needBothOptions():!i.atomizationOptions&&i.entityTypeName&&(i.atomizationOptions={});this._dataType=i.entityTypeName;this._uriForParams=i.sourceUri;this._httpMethod=i.httpMethod;this._polls=!!i.poll;this._pollInterval=i.pollInterval||null;this._serializeParams=i.serializeParams;this._supplyData=i.supplyData;this._atomizationOptions=i.atomizationOptions;this._processServerResponse=i.processServerResponse;this._preservesClientOrder=!!i.pollPreservesClientOrdering;this._setAuthHeader=i.setAuthorizationHeader;n.Base.ProxiedObservables.markNonSerializable(this);var r=t.Loader.getMinPollingInterval();this._polls&&this._pollInterval!==null&&this._pollInterval<r&&u.minimumPoll(r);this._setAuthHeader!==undefined&&this._supplyData&&u.incompatibleOptions()}return r.prototype._doesPoll=function(){return this._polls},r.prototype.serializeParams=function(n){return this._serializeParams?this._serializeParams(n):this._uriForParams(n)},r.prototype.loadDataSetForParams=function(n,t,i){var r=this._getDataSetLoaderOptions(n,t,i);return this.loadDataSet(n,r)},r.prototype.loadDataSet=function(n,t){var u=i.getData(n,t),r=u.then((function(n){return n.value}));return r.dataSetName=n,r},r.prototype.refreshDataSet=function(n){return i.forceRefresh(n.dataSetName)},r.prototype.disposeDataSet=function(n){i.disposeDataSet(n.dataSetName)},r.prototype.getLoadedDataSet=function(n){var t=i.getDataSet(n);return t&&t.data?t:null},r.prototype.isLoadingDataSet=function(n){return i.hasRequestInFlight(n)},r.prototype._getDataSetLoaderOptions=function(n,r,u){var h=this,o={uri:this._uriForParams?this._uriForParams(r):null,type:this._dataType,httpMethod:this._httpMethod||s,pollFrequency:this._polls?f.Normal:f.Never,atomizationOptions:this._atomizationOptions,dataSetLifetime:u,preserveNewItemsOrdering:!this._preservesClientOrder,setAuthorizationHeader:this._setAuthHeader,loaderOptions:{processResult:[t.DataProvider.DataContractJsonSerializer.processResult]}},e=this._pollInterval,c;return this._polls&&e!==null&&i.setPollingIntervals(n,{slowPollingInterval:e,pollingInterval:e,fastPollingInterval:e}),this._supplyData&&(o.loaderOptions.fetchData=function(n,t,i,f,e){return h._supplyData(e,t,f,i,r,u)}),this._processServerResponse&&(c=function(n,t){var i=h._processServerResponse(t.data);return i&&(t.data=i.data,t.navigationMetadata=i.navigationMetadata,t.partialErrors=i.partialErrors),!0},o.loaderOptions.processResult.unshift(c)),o},r})(),o;t.DataCacheLoader=e;o=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.establishDataSet=function(n,t,r,u){var f=this._getDataSetLoaderOptions(n,t,u);return i.getDataSet2(n,!0,f,r)},t})(e);t.DataCacheLoader2=o})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Add=0]="Add";n[n.Update=1]="Update"})(t=n.EditKind||(n.EditKind={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=FxImpl.Data,i=0,r=(function(){function n(n){var u=this,r,f;this._referrerUniqueId=0;r=n.onEntryDisposed;this._referrerPropertyName="_objectCache_"+ ++i;this._serializeKey=n.serializeKey;this._supplyValue=n.supplyValue;this._tryFindValueInRelatedCache=n.tryFindValueInRelatedCache;this._entries=new t.RefCountCache({evictionDelay:n.evictionDelay,extendEntryLifetimes:n.extendEntryLifetimes,onEntryDisposed:function(n,t){u._telemetryCollector&&u._telemetryCollector.recordEviction(t);n.lifetime&&n.lifetime.dispose();r&&r(n.value,n.key)}});f=n;f.collectEfficiencyTelemetry&&(this._telemetryCollector=new t.ObjectCacheTelemetryCollector)}return n.prototype.getValue=function(n,t){var i=this,r=this._serializeKey(n),s=t?this._getOrCreateReferrerId(t):null,f,u,e,o;return this._telemetryCollector&&(f=this._entries.hasEntry(r)),e=function(){var t=new FxImpl.TriggerableLifetimeManager,r,f;return i._tryFindValueInRelatedCache&&(f=i._tryFindValueInRelatedCache(n,t),f&&(r=f.value,u=!0)),u||(r=i._supplyValue(n,t)),{key:n,value:r,lifetime:t}},o=this._entries.getEntry(r,s,e).value,this._telemetryCollector&&this._telemetryCollector.recordCacheRead(r,f||u),o},n.prototype.insertValueIfNotPresent=function(n,t,i){var r=this._serializeKey(n),u=this._getOrCreateReferrerId(i);this._entries.getEntry(r,u,(function(){return{key:n,value:t,lifetime:null}}))},n.prototype.hasEntry=function(n){var t=this._serializeKey(n);return this._entries.hasEntry(t)},n.prototype.dissociateEntry=function(n,t){var r=this._serializeKey(n),i=this._getOrCreateReferrerId(t);i&&this._entries.dissociateEntry(r,i)},n.prototype.immediatelyEvictEntry=function(n){var t=this._serializeKey(n);this._entries.immediatelyEvictEntry(t)},n.prototype.forEachEntry=function(n){this._entries.forEachEntry((function(t,i){n(i.key,i.value)}))},n.prototype.dispose=function(){this._entries.dispose()},n.prototype._getOrCreateReferrerId=function(n){var r=this,t=n,i=t[this._referrerPropertyName];return this._referrerPropertyName in t||(t[this._referrerPropertyName]=i="referrer"+ ++this._referrerUniqueId,n.registerForDispose((function(){delete t[r._referrerPropertyName];r._entries.disposeReferrer(i);i=null}))),i},n})();n.ObjectCache=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=n.clone,r=(function(r){function u(n){var t=r.call(this,n)||this;return t.navigationOptions=t._navigationOptions=n.navigation?i(n.navigation):null,t}return __extends(u,r),u.prototype.createView=function(n,i){return new t.QueryView(this,n,i)},u.prototype.createNavigator=function(n){return this.createNavigatorWithOptions(n,null)},u.prototype.createNavigatorWithOptions=function(n,i){var u=this._navigationOptions;if(u){var f={},r=this.createView(n),e=i&&i.createMapping?i.createMapping(n,r.items):r.items;return u.loadBySkipTake&&(f.loadBySkipTake=function(n,t,i,f,e,o){return u.loadBySkipTake(r,t,i,f,e,o)}),u.loadByContinuationToken&&(f.loadByContinuationToken=function(n,t,i,f,e){return u.loadByContinuationToken(r,t,i,f,e)}),new t.RemoteDataNavigator(n,e,r.metadata,f,r.partialErrors)}throw new Error("Cannot create a DataNavigator, because the QueryCache has no navigation options configured.");},u.prototype._findMatchingEntity=function(t,i){var r=function(n){return t(n,i)};return this._findEntity((function(t,i){var u=i&&ko.unwrap(i);return u&&n.find(u,r)}),i)},u.prototype._getDataFromDataSet=function(n){var t=n.data;if(!ko.isObservable(t)||!Array.isArray(t()))throw new Error("DataSets used with QueryCache must contain an observable-wrapped array.");return n.data},u})(FxImpl.Data.DataCache);t.QueryCache=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var r=n.noop,i=(function(n){function t(t,i,u){var f=n.call(this,t,i,u||{})||this;f._items=ko.observableArray();f._metadata=ko.observable(null);var e=f._loadedCacheEntry,o=f._items,s=f._metadata;return ko.reactor(i,(function(){var n=[],i=e(),t;i&&(t=i.data,r(t),n=t(),n=n.slice());o(n)})),ko.reactor(i,(function(){var n=e(),t=n&&n.navigationMetadata();s(t||null)})),f}return __extends(t,n),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._metadata},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._items},enumerable:!0,configurable:!0}),t})(FxImpl.Data.DataView);i=__decorate([n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Object])],i);t.QueryView=i})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";function t(n,t){var i=t?encodeURIComponent:null;return function(t){var r=typeof t,u=r==="string"||r==="number"?{id:t}:t;return n.format(u,i)}}n.uriFormatter=t})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";var t=FxImpl.Constants.RpcMethods,i=FxImpl.Rpc.ActionEndPointDefinition;n.updateTenantInfoEndPoint=new i(t.updateTenantInfo);n.updateSubscriptionInfoEndPoint=new i(t.updateSubscriptionInfo);n.getRegisteredResourceProviderInfoEndPoint=new i(t.getRegisteredResourceProviderInfo)})(t=n.Azure||(n.Azure={}))})(t=n.Internal||(n.Internal={}))})(HubsExtension||(HubsExtension={})),
(function(n){var t;(function(n){"use strict";var t=ko,c=MsPortalFx.Base,l=(function(){function n(){}return n})(),i,r,u,f,e,o,s,h,a;n.Subscription=l;i=(function(){function n(){}return n})();n.SubscriptionPolicies=i;r=(function(){function n(){}return n})();n.SubscriptionList=r;u=(function(){function n(){}return n})();n.TenantInfo=u;f=(function(){function n(){}return n})();n.Tenant=f;e=(function(){function n(){this.regionPicker={regionId:t.observable()}}return n})();n.RegionPickerDataModel=e;o=(function(){function n(){this.subscriptionPicker={subscriptionId:t.observable(),subscriptionName:t.observable()}}return n})();n.SubscriptionPickerDataModel=o;s=(function(){function n(){this.resourceGroup={resourceGroupName:t.observable(),subscriptionId:t.observable()}}return n})();n.ResourceGroupDataModel=s;h=(function(){function n(){this.resourceGroupPicker={resourceGroupName:t.observable(),resourceGroupLocation:t.observable(),subscriptionId:t.observable(),isNewResourceGroup:t.observable()}}return n})();n.ResourceGroupPickerDataModel=h,(function(n){var t=c.Constants.ExtensionNames,i;(function(n){n.PricingSummaryBlade={displayText:MsPortalFx.Resources.Strings.Services.Gallery.viewPricingSummaryLabel,bladeName:"PricingSummaryBlade",bladeExtension:t.Marketplace};n.LegalTermsBlade={bladeName:"LegalTermsBlade",bladeExtension:t.Marketplace};n.ChannelType={directEA:"DirectEA",indirectEA:"IndirectEA",unknownEA:"UnknownEA",direct:"Direct",csp:"CSP"}})(i=n.Constants||(n.Constants={}))})(a=n.Pricing||(n.Pricing={}))})(t=n.Azure||(n.Azure={}))})(HubsExtension||(HubsExtension={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";n.CellWidth=85;n.CellHeight=85;n.CellSpacingWidth=5;n.CellSpacingHeight=5;n.GridSpacingWidth=n.CellWidth+n.CellSpacingWidth;n.GridSpacingHeight=n.CellHeight+n.CellSpacingHeight})(t=n.AzureGrid||(n.AzureGrid={}))})(t=n.Widgets||(n.Widgets={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Theme=0]="Theme";n[n.Blue=1]="Blue";n[n.Green=2]="Green";n[n.Orange=3]="Orange";n[n.Pink=4]="Pink";n[n.Purple=5]="Purple";n[n.Azure=6]="Azure";n[n.Dark=7]="Dark";n[n.Red=8]="Red"})(t=n.PartColor||(n.PartColor={}))})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Custom=0]="Custom";n[n.CollectionSummary=1]="CollectionSummary";n[n.Error=3]="Error";n[n.ItemSummary=4]="ItemSummary";n[n.Settings=7]="Settings";n[n.SingleSetting=8]="SingleSetting";n[n.LogStream=11]="LogStream";n[n.Grid=14]="Grid";n[n.Editor=15]="Editor";n[n.DiffEditor=16]="DiffEditor";n[n.Provisioning=17]="Provisioning";n[n.Unavailable=18]="Unavailable";n[n.Create=19]="Create";n[n.Button=20]="Button";n[n.QuickStart=21]="QuickStart";n[n.Asset=22]="Asset";n[n.InfoList=23]="InfoList";n[n.Properties=24]="Properties";n[n.Collection=25]="Collection";n[n.Chart=26]="Chart";n[n.SingleValueGauge=27]="SingleValueGauge";n[n.Donut=28]="Donut";n[n.QuotaGauge=29]="QuotaGauge";n[n.ResourceSummary=30]="ResourceSummary";n[n.Frame=31]="Frame"})(t=n.PartKind||(n.PartKind={}))})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Mini=0]="Mini";n[n.Small=1]="Small";n[n.Normal=2]="Normal";n[n.Wide=3]="Wide";n[n.Tall=4]="Tall";n[n.HeroWide=5]="HeroWide";n[n.HeroTall=6]="HeroTall";n[n.HeroWideFitHeight=7]="HeroWideFitHeight";n[n.FullWidthFitHeight=8]="FullWidthFitHeight";n[n.FitToContainer=9]="FitToContainer";n[n.Large=10]="Large";n[n.Hero=11]="Hero";n[n.Custom=99]="Custom"})(t=n.InternalPartSize||(n.InternalPartSize={}));n.PartSize=t})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Ready=0]="Ready";n[n.Failed=1]="Failed"})(t=n.PartState||(n.PartState={}))})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function i(t,i,u){var f=n.clone(t);return r.addAssetExpansion(f,i(f,u)),f}function u(n,t,r,u){var f=i(n,r,u);return t.push(f),f}var r,f;(function(n){function r(t){return t.hasOwnProperty(n.assetDetailsPropertyName)&&t[n.assetDetailsPropertyName]!==undefined}function u(t){return t.hasOwnProperty(n.assetDetailsPropertyName)&&t[n.assetDetailsPropertyName]}function f(n,r){var u=r.icon,f=[r,r.title,r.description,u,r.assetId,r.assetType||"",];t.forEach((function(t,r){i(n,t,f[r])}))}function e(n){r(n)&&t.forEach((function(t){i(n,t,undefined)}))}n.assetDetailsPropertyPrefix="$$MSPORTALFX";n.assetDetailsPropertyName=n.assetDetailsPropertyPrefix+"$assetDetails";n.titlePropertyName=n.assetDetailsPropertyName+"$title";n.descriptionPropertyName=n.assetDetailsPropertyName+"$description";n.iconPropertyName=n.assetDetailsPropertyName+"$icon";n.assetTypeStringPropertyName=n.assetDetailsPropertyName+"$assetTypeString";n.assetIdPropertyName=n.assetDetailsPropertyName+"$assetId";var t=[n.assetDetailsPropertyName,n.titlePropertyName,n.descriptionPropertyName,n.iconPropertyName,n.assetIdPropertyName,n.assetTypeStringPropertyName,],i=function(n,t,i){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,writable:!1,value:i})};n.isAssetExpanded=r;n.getAssetExpansion=u;n.addAssetExpansion=f;n.removeAssetExpansion=e})(r=t.AssetExpansion||(t.AssetExpansion={}));t.assetExpandItem=i;t.assetExpandItemAndAddToResultSet=u,(function(n){function t(n,t,r,u,f){var e,o;return n.registerForDispose||(f=u,u=r,r=t,t=n,n=null),e=n&&n.createChildLifetime(),e?(t.mapInto(e,(function(n,t){return i(t,u,f)}),r),e):(o=t.map((function(n){return i(n,u,f)})),o.subscribeAndRun(r))}n.connectDataSet=t})(f=t.DataSetAssetExpansionMapper||(t.DataSetAssetExpansionMapper={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.subscribeDataSet=function(n,t,i,r,u){var f,e,o;return n&&n.createChildLifetime?f=n.createChildLifetime():(u=r,r=i,i=t,t=n,n=null),t().forEach((function(n,t){i(n,t,u)})),e="Subscription does not handle ",o=t.subscribeArrayEdits(f,(function(n){n=ko.utils.adjustArrayEdits(n);n.forEach((function(n){switch(n.status){case"added":if(i)i(n.value,n.index,u);else throw new Error(e+"insert.");break;case"deleted":if(r)r(n.value,n.index,u);else throw new Error(e+"remove.");}}))})),f?f:o},n.insertItem=function(n,t,i){n.splice(i,0,t)},n.removeItem=function(n,t,i){n.splice(i,1)},n})();n.DataSetSubscription=t})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";var t,u,i,f,r;n.noSubCreateCategoryId="hidden_nosubcreate";t=ko.observable,(function(n){n.GalleryParametersKey="galleryParameters";n.GalleryOptionsKey="galleryOptions"})(u=n.Constants||(n.Constants={}));i=(function(){function n(){}return n.prototype.galleryCreatePreCheck=function(){return null},n})();n.BaseGalleryServiceViewModel=i,(function(n){n[n.template=0]="template";n[n.fragment=1]="fragment";n[n.custom=3]="custom";n[n.metadata=4]="metadata"})(f=n.ArtifactType||(n.ArtifactType={}));r=(function(){function n(){this.galleryParameters={selectedTemplateId:t(),templateJson:t(),subscriptionId:t(),resourceGroupName:t(),resourceGroupLocation:t(),resourceProviders:t(),primaryResourceId:t(),deploymentName:t()}}return n})();n.GalleryDataModel=r})(t=n.Gallery||(n.Gallery={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function r(){return FxImpl.Rpc.client.acquireObject(FxImpl.Constants.RpcMethods.getSettings,i.Constants.Shell,null).then((function(n){return n.getValue()}))}var i=n.Base;t.getSettings=r})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function r(n){return{trace:n,flush:function(){return f}}}function s(n,t){return n?new o(n,t):r(e)}function h(){return r((function(t){t.actionModifier!==n.Base.Diagnostics.Telemetry.ActionModifier.Start&&console.log("[PERF] "+JSON.stringify(t))}))}var u=n,i=window,f=n.Helpers.resolve(),e=u.noop,o=(function(){function n(n,t){i.location.search&&!n.includes("?")&&(n+=i.location.search);var r=FxImpl.getStandardDebouncer(n,!0,t,undefined,undefined,!0);this.trace=function(n){n&&r.execute([n],n.optional)};this.flush=function(){return r.flush()}}return n})();t.getTelemetryEventProcessor=s;t.getConsoleTelemetryEventProcessor=h})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";function t(n,t,i){return{extension:n,assetType:t,detailBladeInputs:i}}function i(n,t,i){return{extension:n,detailBlade:t,detailBladeInputs:i}}n.getAssetSelection=t;n.getBladeSelection=i})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";function h(n){return n.moved===undefined&&(n.status==="added"||n.status==="deleted")}function u(t,i){if(i){var u=t.peek(),r=u.slice();n.pushUnique(r,i,null,!0);r.length!==u.length&&t(r)}}function p(n,t,i){return{extension:n,detailBlade:t,detailBladeInputs:i}}function w(n,t,i){return{extension:n,assetType:t,detailBladeInputs:i}}function b(n,t){return n&&t?l.every((function(i){var e=i.name,r=n[e],u=t[e],f;return r&&u?(f=i.value,f?f(r,u):r===u):!r==!u})):!n==!t}function f(n){return function(t){return t.promise===n}}var i=ko,s=FxImpl.TriggerableLifetimeManager,r=FxImpl.getErrorMap({noCreateSelection:"",noMatchesSelection:"",badSelectableValue:"",readOnlyEdits:"",promiseCannotBeNull:"",percentValueNotNumber:""}),v=(function(){function t(t,f,e,o,c,l,a){var v=this,p,y,d;this.selectedItems=i.observableArray();this.activatedItems=i.observableArray();this.itemsWithChildEdits=i.observableArray();this.itemsArePinnable=i.observable(!0);this._msPortalFxCurrentCommands=i.observable();this._isDisposed=!1;ko.isObservable(t)&&typeof t!="object"||(f=t.itemMatchesSelection,e=t.createSelection,o=t.initialState,c=t.supplyCommands,l=t.keepDeselectedItemsActivated,a=t.leaveSelectionOnDeactivation,t=t.items);f&&!e&&r.noCreateSelection();e&&!f&&r.noMatchesSelection();p=this._lifetime=new s;this._msPortalFxHasCreateSelection=!0;f||e||(f=function(n,t){return n===t},e=function(n){return n},this._msPortalFxHasCreateSelection=!1);y=function(n,t){return i.ignoreDependencies((function(){return f(n,t)}))};this.itemMatchesSelection=y;this.createSelection=e;this._msPortalFxFindDataItem=function(i,r){var u=!(r&&r.length),f=u?y:function(t,i){var u=e(t);return n.find(r,(function(t){return!n.deepEquals(u[t],i[t])}))===undefined};return t().first((function(n){return f(n,i)}))};this._msPortalFxSupplyCommands=c?function(n){var t=c(n);return v._msPortalFxCurrentCommands(t),t}:undefined;this._msPortalFxDelayedBladeSelection=i.observable();var w,et=function(n){return n.data===w},g=function(n){return function(){return n.peek().some((function(n){return y(w,n)}))}},nt=g(this.activatedItems),tt=g(this.selectedItems),ot=function(n){return function(){return v.itemsWithChildEdits().some((function(t){return y(n,t.item)}))}},k=i.computed(p,(function(){var u=k?k.peek():[],f=u.map((function(n,t){return t})),e=[],o=t(),n;return o.forEach((function(t){var o,s,c,h;w=t;o=u.firstIndex(et);o>=0?(n=u[o],f[o]=-1,s=nt(),c=s||tt(),n.isActivated(s),n.isSelected(c)):(h=p.createChildLifetime(),n={data:w,isSelected:i.observable(tt()),isActivated:i.observable(nt()),hasChildEdits:i.computed(h,{read:ot(w),write:r.readOnlyEdits})},n._lifetime=h);e.push(n)})),f.forEach((function(n){if(n>=0){var t=u[n],i=t&&t._lifetime;i&&i.dispose()}})),e}));this.selectableItems=i.observableArray(k());k.subscribe(p,(function(n){(v.selectableItems().length||n.length)&&v.selectableItems.splice.apply(v.selectableItems,[0,v.selectableItems().length].concat(n))}));var it=this.selectableItems(),rt=function(t){var i=v.selectedItems().first((function(n){return y(t.data,n)})),u=v.activatedItems().first((function(n){return y(t.data,n)})),f=!v.selectableItems().includes(t),r;!f&&t.isSelected()?i||(u||!v._createDelayedBladeSelection?(r=u||e(t.data),n.isNullOrUndefined(r)||v.selectedItems.splice(0,0,r)):v._createDelayedBladeSelection(t.data)):(i&&v.selectedItems.remove(i),l||t.isActivated(!1))},ut=function(t){var f=v.selectedItems().first((function(n){return y(t.data,n)})),i=v.activatedItems().first((function(n){return y(t.data,n)})),o=!v.selectableItems().includes(t),r,u;!o&&t.isActivated()?i||(f||!v._createDelayedBladeSelection?(r=f||e(t.data),n.isNullOrUndefined(r)||v.activatedItems.splice(0,0,r)):(u=v._createDelayedBladeSelection(t.data),u&&v._msPortalFxDelayedBladeSelection(u))):(i&&v.activatedItems.remove(i),a||t.isSelected(!1))},b,ft=function(){b&&b.dispose();b=p.createChildLifetime();it.forEach((function(n){n.isSelected.subscribe(b,(function(){rt(n)}));n.isActivated.subscribe(b,(function(){ut(n)}))}))};this.selectableItems.subscribeArrayEdits(p,(function(t){t.forEach((function(t){h(t)&&!n.isNullOrUndefined(t.value)&&(rt(t.value),ut(t.value))}));ft()}));ft();d=function(n,t){n.subscribeArrayEdits(p,(function(n){n.forEach((function(n){h(n)&&it.some((function(i){if(y(i.data,n.value))return i[t](n.status==="added"),!0}))}))}))};d(this.selectedItems,"isSelected");d(this.activatedItems,"isActivated");o&&(u(this.selectedItems,i.unwrap(o.selectedItems)),u(this.activatedItems,i.unwrap(o.activatedItems)),u(this.itemsWithChildEdits,i.unwrap(o.itemsWithChildEdits)))}return t.prototype.activateAllSelectedItems=function(){this.activatedItems(this.selectedItems.slice(0))},t.prototype.dispose=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null);this._isDisposed=!0},t.prototype._setCreateDelayedBladeSelection=function(n){var t=this;this._createDelayedBladeSelection=n;this._msPortalFxCreateSelectionAsync=function(n){var i=t._createDelayedBladeSelection(n);return i?i.selectedValuePromise:Q(null)};this.createSelection=null},t})(),c,y,l,a,e,o;t.SelectableSet=v;c=(function(){function n(n){n===void 0&&(n={});var t=this,e=!1,u=i.observable(n.selectedValue),f=this,o=this._lifetime=new s;f.lock=function(){e=!0};f.setInternalSelectedValue=function(n){u(n)};f.isLocked=function(){return e};this.selectedValue=i.computed(o,{read:function(){return u()},write:function(n){u(n)}});this.isSelected=i.observable(!!n.isSelected);this.isCommandSelected=i.observable(!!n.isCommandSelected);this.hasChildEdits=i.observable(!1);this.isActivated=i.observable(!!n.isActivated);this.isClickable=i.pureComputed((function(){return!t.isSelected()}));this.value=i.computed(o,{read:function(){return t.isSelected()?t.selectedValue():undefined},write:function(n){n===undefined?(t.isSelected(!1),t.isActivated(!1)):r.badSelectableValue()}})}return n.prototype.dispose=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null)},n.prototype.setIsSelected=function(n,t){n&&n.container&&n.container.selectable?this.isSelected(!!n.container.selectable.isSelected):this.isSelected(t)},n.prototype.onClick=function(){this.isSelected(!0)},n})();t.Selectable=c,(function(t){var r=(function(n){function t(t){t===void 0&&(t={});var r=n.call(this,t)||this;return r.delayedBladeSelection=i.observable(),r}return __extends(t,n),t})(n.ViewModels.Selectable),u;t.Selectable=r,(function(n){function t(n,t){n._setCreateDelayedBladeSelection(t)}n.setCreateDelayedBladeSelection=t})(u=t.SelectableSet||(t.SelectableSet={}))})(y=t.Internal||(t.Internal={}));t.getBladeSelection=p;t.getAssetSelection=w;l=[{name:"extension"},{name:"detailBlade"},{name:"assetType"},{name:"resourceId"},{name:"detailBladeInputs",value:n.deepEquals},];t.equalDynamicSelections=b;a=(function(){function t(t){var r=this,u;this._operations=i.observableArray();u=n.ViewModels.Controls.Visualization.ProgressBar;this.inProgress=i.computed(t,(function(){return r._operations().length>0}));this.blockingUi=i.computed(t,(function(){return r._operations().some((function(n){return n.blockUi()}))}));this.shieldType=i.pureComputed((function(){var n=r._operations(),t;return n.length>0&&(t=n.every((function(n){return n.shieldType&&n.shieldType()===1}))),t?1:0}));this.progressBarViewModel=new u.ViewModel(t);i.computed(t,(function(){var n=r._operations().some((function(n){return n.deterministicPercentage()!==null}));r.progressBarViewModel.status(n?0:4)}));i.computed(t,(function(){var n=0,t=0;r._operations().forEach((function(i){var r=i.deterministicPercentage();r!==null&&(n++,t+=r)}));r.progressBarViewModel.valuePercentage(n===0?0:t/n)}))}return t.prototype.dispose=function(){},t.prototype.add=function(n,t){var s=this,u,f;n||r.promiseCannotBeNull();t=t||new o;var e=i.observable(null),h=i.observable(t.blockUi),c=i.observable(t.shieldType);n.progress&&n.progress((function(n){var t=n&&n.percent;typeof t=="string"&&(t=parseFloat(t),isNaN(t)&&r.percentValueNotNumber());typeof t=="number"&&e(Math.min(Math.max(t,0),100))}));u={promise:n,deterministicPercentage:e,blockUi:h,shieldType:c};f=function(){s._operations.remove(u)};this._operations.push(u);n.then(f,f)},t.prototype.remove=function(n){n||r.promiseCannotBeNull();this._operations.remove(f(n))},t.prototype.update=function(n,t){var i=this._operations().first(f(n));i&&i.blockUi(t.blockUi)},t.prototype.getOptionsForOperation=function(n){var t=this._operations().first(f(n));return t?{blockUi:t.blockUi(),shieldType:t.shieldType()}:null},t})();t.PartOperationList=a,(function(n){n[n.Opaque=0]="Opaque";n[n.Translucent=1]="Translucent"})(e||(e={}));t.ShieldType=e;o=(function(){function n(){}return n})();t.PartOperationOptions=o;t.ResourceIdTypeName="MsPortalFx.ViewModels.ResourceId"})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(t,i){if(u(f(t))||u(f(i)))throw new Error("compareIds requires ids for comparison.");return n.deepEquals(t,i,!0)}var u=n.isNullOrUndefined,e=n.initObservable,r=n.initObservableArray,f=ko.utils.peekObservable,i;t.compareIds=o;i=(function(){function n(n,t){t===void 0&&(t={});this._lifetime=n.createChildLifetime();this._msPortalFxSelectableSet=!0;this.dynamicSelectionProvider=t.dynamicSelectionProvider;this.commandGroupProvider=t.commandGroupProvider;this.pinProvider=t.pinProvider;this.selectionMode=t.selectionMode||2;this.activationMode=t.activationMode||2;this.selectedIds=r(t.selectedIds);this.selectedAll=e(t.selectedAll,!1);this.unselectedIds=r(t.unselectedIds);this.activatedIds=r(t.activatedIds)}return n.prototype.dispose=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null)},Object.defineProperty(n.prototype,"lifetime",{get:function(){return this._lifetime},enumerable:!0,configurable:!0}),n})();i=__decorate([n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object])],i);t.SelectableSet=i})(i=t.Selection2||(t.Selection2={}))})(i=t.Internal||(t.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Controls/Base"),i=(function(){function n(n){this.controlType=0;n?(this._ltm=n.createChildLifetime(),this._ltm.registerForDispose(this)):(r.error(FxImpl.createError("LifetimeManager was not provided. Creating a TriggerableLifetimeManager.",{data:{ctor:this.constructor+""}})),this._ltm=new FxImpl.TriggerableLifetimeManager)}return n.prototype.dispose=function(){this._ltm&&(this._ltm.dispose(),this._ltm=null)},Object.defineProperty(n.prototype,"lifetimeManager",{get:function(){return this._ltm},enumerable:!0,configurable:!0}),n.prototype.populateFromObject=function(n){var r=this,t=n;for(var i in t)t.hasOwnProperty(i)&&t[i]!==undefined&&(r[i]=t[i])},n.prototype._addDisposablesToCleanUp=function(n){this._ltm.registerForDispose(n)},n})();i=__decorate([n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object])],i);t.ViewModel=i})(i=t.Base||(t.Base={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.initObservable,r=(function(n){function t(t,r){var u=n.call(this,t)||this;return r===!1||r===!0?r={loading:ko.observable(r)}:(r===null||r===undefined)&&(r={}),u.disabled=i(r.disabled,!1),u.loading=i(r.loading,!1),u}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=r})(i=t.Loadable||(t.Loadable={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){var r=n.call(this,t)||this;return r.name=null,r.value=i(),r.dirty=i(),r}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=r})(t=n.EditableControl||(n.EditableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u;t.DefaultDelayValidationTimeout=500;u=(function(n){function t(t){var u=n.call(this,t)||this;return u.enableValidation=i(!0),u.delayValidationTimeout=i(0),u.validationState=i(0),u.validators=r(),u.validationResults=r(),u.valid=ko.computed(u.lifetimeManager,(function(){return!u.enableValidation()||u.validators().length===0||u.enableValidation()&&u.validators().length>0&&(u.validationState()===0||u.validationState()===2)})),u}return __extends(t,n),t})(n.EditableControl.ViewModel);t.ViewModel=u})(t=n.ValidatableControl||(n.ValidatableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";t.DefaultValidationDelay=500;var i=(function(n){function i(){var i=n!==null&&n.apply(this,arguments)||this;return i.delayValidationTimeout=ko.observable(t.DefaultValidationDelay),i.valueUpdateTrigger=0,i}return __extends(i,n),i})(n.ValidatableControl.ViewModel);t.ViewModel=i})(t=n.TypableControl||(n.TypableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){var r=n.call(this,t)||this;return r.popupAlignment=5,r.inputAlignment=12,r.dropDownPositioning=i(0),r}return __extends(t,n),t})(n.ValidatableControl.ViewModel);t.ViewModel=r})(i=t.EditableCombo||(t.EditableCombo={}))})(t=n.Forms||(n.Forms={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";var i=n,u=i.ViewModels.Forms,r=ko.observable,f,e,o;(function(n){n[n.Top=0]="Top";n[n.Left=1]="Left";n[n.Hidden=2]="Hidden"})(f=t.LabelPosition||(t.LabelPosition={})),(function(n){n[n.Bottom=0]="Bottom";n[n.Right=1]="Right"})(e=t.SubLabelPosition||(t.SubLabelPosition={})),(function(t){var f;(function(t){var f=(function(n){function t(t,f){var e=n.call(this,t,f)||this;return f=f||{},e.cssClass=i.initObservable(f.cssClass,""),e.hideValidationCheck=f.hideValidationCheck||!1,e.infoBalloonContent=i.isNullOrUndefined(f.infoBalloonContent)?r():f.infoBalloonContent,e.infoBalloonLinkContent=f.infoBalloonLinkContent||r(),e.label=i.isNullOrUndefined(f.label)?r():f.label,e.labelPosition=i.isNullOrUndefined(f.labelPosition)?r(u.LabelPosition.Top):f.labelPosition,e.subLabel=i.initObservable(f.subLabel,undefined),e.subLabelPosition=i.isNullOrUndefined(f.subLabelPosition)?r(u.SubLabelPosition.Bottom):f.subLabelPosition,e.visible=i.initObservable(f.visible,!0),e._msPortalFxLeftLabelWidth=r(),e._msPortalFxRequired=r(),e}return __extends(t,n),t})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=f})(f=t.LabelAndBalloon||(t.LabelAndBalloon={}))})(o=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";function a(n,t){var i=!1;return n.length===t.length&&(i=n.every((function(n,i){return n===t[i]}))),i}var u=n,e=u.Base.Diagnostics,h=u.Base.Promises.cancelOnDispose,f=u.isNullOrUndefined,r=ko,o=2,s=window.navigator.userAgent,c=!/MSIE /i.test(s)&&/Trident[\/]/i.test(s)&&!/Edge\//i.test(s),l=(function(t){function i(n,i,s,h){var c=this,l=null,v=null,y=null,a,p;return f(i)||i.valid&&i.sections?!f(i)&&i.valid&&i.sections&&(l=i):h=i,typeof s=="string"?v=s:s&&(y=s),s&&h&&h.defaultValue&&e.Log.writeEntry(o,"Forms","Both edit scope and default value are set.  Forms should only specify one of the two.  The default value will be ignored."),h=h||{},c=t.call(this,n,h)||this,a=c.lifetimeManager,c._options=h,c._msPortalFxViewModelValueChangesAreClean=!!c._options.viewModelValueChangesAreClean,c._form=l,c.controlType=0,c.enableValidation=r.observable(!1),c.valid=r.observable(!0),c.validate=r.observable(0),c.delayValidationTimeout=r.observable(u.ViewModels.Controls.ValidatableControl.DefaultDelayValidationTimeout),c.performValidation=r.observable(null),c.ensureValidation=r.observable(0),c.validations=h.validations||r.observableArray(),c.showValidationMessagesBelowControl=h.showValidationMessagesBelowControl||!1,c.validationResults=r.observableArray(),c.defaultValue=h.defaultValue||r.observable(null),c.initialValue=r.observable(null),c._previousEditScope=null,c.telemetryKeys=h.telemetryKeys,c._msPortalFxWidgetValue=r.observable(),c.enabled=r.observable(!c.disabled()),c.enabled.subscribe(a,(function(n){c.disabled(!n)})),c.disabled.subscribe(a,(function(n){c.enabled(!n)})),c.dirty=r.observable(!1),c._originalDirty=c.dirty,f(l)?(p=c.defaultValue(),c.value=r.observable(p),c.initialValue(p),c.enableValidation(!0)):v?c._setEditScopeAccessors(l._createEditScopeAccessorFromPath(v),l):y?c._setEditScopeAccessors(y,l):c.value=r.observable(c.defaultValue()),c.createValueSubscriptions(a),c._msPortalFxClearValidation=r.observable(),c._msPortalFxTriggerValidation=r.observable(),c}return __extends(i,t),i.prototype.resetDirtyComputed=function(n){u.disposeDisposable(this._dirtyLifetime);this._dirtyLifetime=this.lifetimeManager.createChildLifetime();r.computed(this._dirtyLifetime,n)},i.prototype._setEditScopeAccessors=function(n){if(f(this._editScopeAccessors))if(n.createdByBaseFormClass)this._editScopeAccessors=n,this._initializeFieldStateObservables();else{e.Log.writeEntry(o,"Forms","Field._setEditScopeAccessors only accepts EditScopeAccessors created by the Form.createEditScopeAccessors factory method.");throw new Error("Field._setEditScopeAccessors only accepts EditScopeAccessors created by the Form.createEditScopeAccessors factory method.");}else{e.Log.writeEntry(o,"Forms","Field._setEditScopeAccessors can only be called once.");throw new Error("Field._setEditScopeAccessors can only be called once.");}},i.prototype.clearValidation=function(){var n=this;return r.ignoreDependencies((function(){var t=n._msPortalFxClearValidation();return h(n.lifetimeManager,t||Q())}))},i.prototype.triggerValidation=function(){var t=this;return r.ignoreDependencies((function(){var i=t._msPortalFxTriggerValidation,r=i(),u=t.lifetimeManager;return h(u,r?Q(r()):function(){var t=Q.defer(),r=u.createChildLifetime();return i.subscribe(r,(function(i){r.dispose();i?Q().then(i).then(t.resolve).catch(t.reject):t.reject(new n.Errors.Error({message:"Invalid validating Function detected.",data:t.promise.stack}))})),t.promise})}))},i.prototype._initializeFieldStateObservables=function(){var n=this,i,o,s,e=this._editScopeAccessors,t=this.lifetimeManager;this.initialValue=r.computed(t,{read:function(){i&&i.dispose();i=t.createChildLifetime();var r=e.getOriginalObservable(i);return r?r():n.defaultValue()},write:function(n){e.getOriginalObservable(i)(n)}});this.value=r.computed(t,{read:function(){var i,r;return o&&o.dispose(),o=t.createChildLifetime(),i=e.getEditableObservable(o),n._form&&(r=n._form.editScope(),n._previousEditScope!==r&&(n.enableValidation(!1),n._previousEditScope=r)),f(i)?n.defaultValue.peek():i()},write:function(n){s&&s.dispose();s=t.createChildLifetime();var i=e.getEditableObservable(s);if(i)i(n);else if(!(c&&!n))throw new Error("Form should not allow edits until an EditScope is loaded.");}});this.createValueSubscriptions(t);this.resetDirtyComputed((function(){n.setDirty(!u.deepEquals(n.value(),n.initialValue()))}));this._enableValidationReactor=r.computed(t,(function(){n._form&&n._form.editScope();n.enableValidation(!!(e.getOriginalObservable(i)&&e.getEditableObservable(o)))}))},i.prototype.createValueSubscriptions=function(n){var t=this,f=!1,i=!1,e=this.value;Q.nextTick((function(){var n=t.value,i=!!t.lifetimeManager;n!==e&&i&&(u.disposeDisposable(t._newThisValueBinding),t._newThisValueBinding=n.subscribeAndRun(t.lifetimeManager,e))}));this.setValue(this.value(),this._msPortalFxWidgetValue);this.value.subscribe(n,(function(n){i?t._msPortalFxViewModelValueChangesAreClean&&i&&t.setDirty(!0):(f=!0,t.setValue(n,t._msPortalFxWidgetValue),f=!1,t._form&&t._form.viewModelValueChangesSetDefaultValues&&t.initialValue(n))}));this._msPortalFxWidgetValue.subscribe(n,(function(n){if(!f){if(i=!0,r.isComputed(t.value)&&(t.value()===n||Array.isArray(t.value())&&Array.isArray(n)&&a(t.value(),n))){if(!t._form)try{t.setValue(n,t.value)}catch(u){}}else t.setValue(n,t.value);i=!1}}))},i.prototype.setDirty=function(n){this.dirty===this._originalDirty&&this.dirty(n)},i.prototype.setValue=function(n,t){Array.isArray(n)&&this.controlType!==17?t(n.slice()):t(n)},i})(t.LabelAndBalloon.ViewModel);i.ViewModel=l})(i=t.Input||(t.Input={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this;return f.empty=ko.computed(f.lifetimeManager,(function(){return!f.value()})),f}return __extends(t,n),t})(n.Input.ViewModel);t.ViewModel=i})(t=n.Nullable||(n.Nullable={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r,u,f){var e=n.call(this,t,r,u,f)||this;return e.emptyValueText=e._options.emptyValueText||i(""),e.editing=i(!1),e}return __extends(t,n),t})(n.Nullable.ViewModel);t.ViewModel=r})(t=n.Editable||(n.Editable={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r,u,f){var e=n.call(this,t,r,u,f)||this;return e.valueUpdateTrigger=e._options.valueUpdateTrigger||0,e.delayValidationTimeout=e._options.delayValidationTimeout||i(500),e.onEnterPressed=e._options.onEnterPressed,e}return __extends(t,n),t})(n.Editable.ViewModel);t.ViewModel=r})(t=n.Typable||(n.Typable={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this;return f.popupAlignment=3,f.inputAlignment=10,f}return __extends(t,n),t})(n.Editable.ViewModel);t.ViewModel=i})(t=n.EditableComboBox||(n.EditableComboBox={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function c(n,t,u){u===void 0&&(u=".");var e,h,f;try{for(t=t.replace(/\[/g,u).replace(/\]/g,""),t=t.charAt(0)===u?t.substr(1):t,e=t.split(u),f=i.unwrap(n)[e[0]],h=1;h<e.length;h++)f=i.unwrap(f)[e[h]]}catch(c){r.invalidPath()}return(o.isNullOrUndefined(f)||!i.isObservable(f))&&(s.writeEntry(2,"MsPortalFx.ViewModels.Forms.EditScopeAccessors.InvalidObservablePath","'observablePath' does not identify a non-null observable (observablePath: "+t+")."),r.observablePathInvalid()),f}var o=n,s=o.Base.Diagnostics.Log,i=ko,u="",h={invalidPath:u,observablePathInvalid:u,setOnce:u,editScopeNotSet:u,obsMissing:u},r=FxImpl.getErrorMap(h),e,f;(function(n){n[n.Original=0]="Original";n[n.Editable=1]="Editable"})(e=t.EditScopeObservableType||(t.EditScopeObservableType={}));f=(function(){function n(n,t,r){var f=this,u;this.sections=i.observableArray();this.viewModelValueChangesSetDefaultValues=!1;t&&(this.editScope=t);this._getNestedData=r;n.registerForDispose(this);u=this._ltm=n.createChildLifetime();this.valid=i.computed(u,(function(){return!f.sections().some((function(n){return!n.valid()}))}))}return Object.defineProperty(n.prototype,"editScope",{get:function(){return this._editScope||r.editScopeNotSet(),this._editScope},set:function(n){this._editScope&&r.setOnce();this._editScope=n},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){this._ltm&&(this._ltm.dispose(),this._ltm=null)},n.prototype._createEditScopeAccessorFromPath=function(n){var t=function(t){return c(t,n)};return this._createEditScopeAccessorFromAccessorFunction(t,!0)},n.prototype.createEditScopeAccessor=function(n){var t,i,r,u;return n.writeToEditScope?(r=n,u=this._sanitizeAccessorOptions(r),this._createEditScopeAccessorFromOptions(u)):(t=n,i=this._sanitizeAccessorFunction(t),this._createEditScopeAccessorFromAccessorFunction(i,!0))},n.prototype.createCustomEditScopeAccessor=function(n){var t,i;return n.writeToEditScope?(i=n,this._createEditScopeAccessorFromOptions(i)):(t=n,this._createEditScopeAccessorFromAccessorFunction(t,!1))},n.prototype._sanitizeAccessorFunction=function(n){return this._sanitizeAccessorLambda(n)},n.prototype._sanitizeAccessorOptions=function(n){return{readFromEditScope:this._sanitizeAccessorLambda(n.readFromEditScope),writeToEditScope:this._sanitizeAccessorLambda(n.writeToEditScope)}},n.prototype._sanitizeAccessorLambda=function(n){return n},n._logEditScopeAccessorError=function(n){s.writeEntry(2,"EditScopeAccessor",n)},n.prototype._createEditScopeAccessorFromAccessorFunction=function(n,t){var i=this;return{getOriginalObservable:function(t){var u=i.editScope(),f,o,s;return u&&(o=u.getOriginal(u.root),s=i._getNestedData?i._getNestedData(o):o,f=n(s,t,e.Original),f||r.obsMissing("Original")),f},getEditableObservable:function(t){var o=i.editScope(),u,f,s;return o&&(f=o.root,s=i._getNestedData?i._getNestedData(f):f,u=n(s,t,e.Editable),u||r.obsMissing("Editable")),u},createdByBaseFormClass:!0,returnsObservablesFromEditScope:t}},n.prototype._createEditScopeAccessorFromOptions=function(n){var t=this;return{getOriginalObservable:function(r){return t.editScope()?i.computed(r,(function(){return n.readFromEditScope(t.editScope().getOriginal(t.editScope().root))})):null},getEditableObservable:function(r){return t.editScope()?i.computed(r,{read:function(){return n.readFromEditScope(t.editScope().root)},write:function(i){n.writeToEditScope(t.editScope().root,i)}}):null},createdByBaseFormClass:!0,returnsObservablesFromEditScope:!1}},n})();f=__decorate([n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Function,Function])],f);t.ViewModel=f})(i=t.Form||(t.Form={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=ko.observableArray,f=(function(n){function t(t,i,f,e){var o=n.call(this,t,i,f,e)||this;return o.groups=o._options.groups||u(),o.groups().length===0||o.groups()[0].options().length===0||r.isNullOrUndefined(o.defaultValue())&&o.defaultValue(o.groups()[0].options()[0].value),o}return __extends(t,n),t})(t.Input.ViewModel);i.ViewModel=f})(i=t.Groups||(t.Groups={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observableArray,r=(function(n){function t(t,r,u,f){var e=n.call(this,t,r,u,f)||this;return e.options=e._options.options||i(),e}return __extends(t,n),t})(n.Input.ViewModel);t.ViewModel=r})(t=n.Options||(n.Options={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=(function(n){function t(t,i,u,f){var e=this,o=f||{};return r.isNullOrUndefined(i)||typeof i.createEditScopeAccessor=="function"||(o=i),e=n.call(this,t,i,u,f)||this,e.min=r.initObservable(o.min,0),e.max=r.initObservable(o.max,10),e.step=r.initObservable(o.step,1),e.showStepMarkers=r.initObservable(o.showStepMarkers,!0),e.ariaLabel=r.initObservable(o.ariaLabel),e.legends=o.legends,e.hideTextbox=r.initObservable(o.hideTextbox,!1),e.customValues=o.customValues,e}return __extends(t,n),t})(t.Input.ViewModel);i.ViewModel=u})(i=t.Slider||(t.Slider={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var f=ko.observableArray,r=n.initObservable,e=(function(){function n(n,t,i,u){this.text=r(n);this.value=r(t);this.selected=r(i,!1);this.disabled=r(u,!1)}return n})(),u;i.ItemValue=e;u=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.label=null,t.values=f(),t}return __extends(t,n),t})(t.ValidatableControl.ViewModel);i.ViewModel=u})(i=t.ItemList||(t.ItemList={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,e=ko.pureComputed,s=e(n.wrap(!0)),u,o,f;(function(n){n[n.None=0]="None";n[n.Pending=1]="Pending";n[n.Success=2]="Success";n[n.Failure=3]="Failure"})(u=i.Status||(i.Status={}));o=(function(n){function t(t,i,f,e){var o=n.call(this,t)||this;return o.text=r(i||""),o.ariaLabel=r(),o.visible=r(!0),o.afterExecute=null,o.status=r(u.None),o.error=r(null),o.handler=r(null),o.attach(f,e),o}return __extends(t,n),t.prototype.execute=function(){var o=this,r=!1,n,f=this.error,t=this.status,i,e;try{if(f(null),t(u.Pending),i=this.handler(),!i)throw new Error("Command does not have handler.");e=i.execute();n=Q(e).then((function(){r=!0}))}catch(s){n=Q.reject(s)}return n.finally((function(n){r?t(u.Success):(f(n),t(u.Failure));var i=o.afterExecute;i&&i()}))},t.prototype.attach=function(n,t){if(n){var i=new f(n,t);this.attachHandler(i)}},t.prototype.attachHandler=function(n){this.handler(n)},t.prototype.detach=function(){this.handler(null)},t})(t.Loadable.ViewModel);i.ViewModel=o;f=(function(){function n(n,t,i){this.execute=function(){return n.call(i)};this.canExecute=t?e(t,i):s}return n})();i.DelegatingHandler=f})(i=t.Command||(t.Command={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var o=n,f=n.ViewModels,s=f.Controls,h=n.isNullOrWhiteSpace,r=ko.computed,e=ko.observable,l=o.Resources.Strings,u=l.DeleteAssetConfirmation,a=(function(n){function t(t,i){var f=n.call(this,t)||this,a,l,y,w;if(f.selectedItems=ko.observableArray(),f._gridItems=null,f._options=null,f._assetName=e(),f._assetTypeDisplayName=e(),f.affectedItemsLabel=e(u.affectedItemsLabel),f.controlType=76,f._options=i,a=f.lifetimeManager,f._assetTypeDisplayName(i.assetTypeDisplayName),l=i.grid,l){var p=l.selectableRowExtensionOptions,b=p?s.Lists.Grid.Extensions.SelectableRow:null,v=f.grid=new s.Lists.Grid.ViewModel(a,l.items,b,p);v.columns=l.columns;v.noRowsMessage=l.noRowsMessage;v.showHeader=o.isNullOrUndefined(l.showHeader)?!0:l.showHeader;p&&(f.selectedItems=v.selectableData.selectedItems);f._gridItems=v.items}return y=f._assetName,f.warning=r(a,(function(){return f._onUpdateWarningText(y())})),w=f.confirmationLabel=r(a,(function(){return f._onUpdateConfirmationLabel(f._assetTypeDisplayName())})),f.confirmationEditor=new c(a,y,w),f.valid=r(a,(function(){var n=y(),t=f.confirmationEditor.textBox.valid();return h(n)?!1:t})),f}return __extends(t,n),t.prototype._onUpdateWarningText=function(n){return u.warningText.format(n)},t.prototype._onUpdateConfirmationLabel=function(n){return u.confirmationLabel.format(n)},t.prototype._selectAll=function(){var n=this.grid&&this.grid.selectableData;n&&n.selectableItems().forEach((function(n){return n.isSelected(!0)}))},t})(t.Loadable.ViewModel),c;i.ViewModel=a;c=(function(){function n(n,t,i){var o=this._lifetimeManager=n.createChildLifetime(),e=this.textBox=new f.Forms.TextBox.ViewModel(n);e.disabled(!0);e.valueUpdateTrigger=4;r(o,(function(){var n=t();h(n)?(e.disabled(!0),e.validations([])):(e.disabled(!1),e.validations([new f.EqualsValidation(n,u.assetNameValidationFailureMessage.format(n))]),e.value(""))}));r(o,(function(){e.ariaLabel(i())}))}return n.prototype.dispose=function(){var n=this._lifetimeManager;n&&(n.dispose(),this._lifetimeManager=null)},n})()})(i=t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){var r=n.call(this,t)||this;return r.galleryItem=i(),r.bladeSelection=i(),r.bannerClicked=i(),r.createClicked=i(),r.controlType=77,r}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=r})(t=n.HeroBanner||(n.HeroBanner={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(n){function t(t){var i=n.call(this,t)||this;return i.disabled=ko.observable(!1),i.controlType=84,i}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);t.BaseViewModel=i})(i=t.HotSpot||(t.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=n.ViewModels.Controls.HotSpot.BaseViewModel,u=(function(n){function i(i){var r=n.call(this,i)||this;return r.selectable=t.Part.createSelectableViewModel(),r.clickableDuringCustomize=!1,r}return __extends(i,n),i})(r);i.ViewModel=u})(r=i.HotSpot||(i.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r){var u=n.call(this,t)||this;return u.controlType=88,u.clickableLink=r?r.clickableLink:i(),u}return __extends(t,n),t})(n.ViewModels.Controls.HotSpot.BaseViewModel);t.LinkViewModel=r})(i=t.HotSpot||(t.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Small=0]="Small";n[n.Normal=1]="Normal"})(r||(r={}));t.Size=r;u=(function(n){function t(t,r){var u=n.call(this,t,!1)||this;return u.image=r?r.image:i(),u.text=r?r.text:i(),u.size=r&&r.size?r.size:i(1),u}return __extends(t,n),t})(n.Loadable.ViewModel);t.BaseViewModel=u})(t=n.InfoBox||(n.InfoBox={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,t)||this;return i.isClickable&&i.isClickable.dispose(),i.isClickable=ko.pureComputed((function(){return i.isSelected()&&!!i.selectedValue()})),i}return __extends(t,n),t})(n.ViewModels.Selectable),r=(function(n){function t(t,r,u,f){var e=n.call(this,t,f)||this;return e.controlType=78,e.selectable=new i({isSelected:r&&r.isSelected}),e}return __extends(t,n),t})(t.BaseViewModel);t.ViewModel=r})(i=t.InfoBox||(t.InfoBox={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(n){function i(i,r){var u=n.call(this,i,r)||this;return u.controlType=87,u.clickableLink=r?r.clickableLink:t(),u}return __extends(i,n),i})(n.BaseViewModel);n.LinkViewModel=i})(t=n.InfoBox||(n.InfoBox={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){var r=n.call(this,t)||this;return r.header=i(""),r.title=i(""),r.description=i(""),r.callToActionText=i(""),r.callToActionUri=i(""),r.callToSecondaryActionText=i(""),r.callToSecondaryActionUri=i(""),r.imageType=i(0),r.controlType=79,r}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=r})(t=n.Notice||(n.Notice={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,c=ko.observableArray,e,u,f,o,s,h;(function(n){n[n.Sequential=0]="Sequential";n[n.NonSequential=1]="NonSequential"})(e=i.WizardMode||(i.WizardMode={})),(function(n){n[n.Form=0]="Form";n[n.Selector=1]="Selector"})(u=i.StepType||(i.StepType={}));f=(function(){function t(t,i,f,e,o){this.description=r("");this.iconUri=r();this.status=r();this.stepId=t;this.stepType=n.isNullOrUndefined(i)?u.Form:i;this.title=r(f);this.formBlade=e;this.extension=o}return t})();i.WizardStepBase=f;o=(function(t){function i(i,u){var f=this,o,s;return i&&i.createChildLifetime||(o=new n.Errors.Error("MsPortalFx.ViewModels.Controls.Wizard.ViewModel's constructor first argument must be lifetimeManager."),n.Base.Diagnostics.Log.writeEntry(2,"Wizard",o),i=undefined,u=arguments[0]),f=t.call(this,i)||this,f.controlType=107,f.mode=e.Sequential,f.steps=c(),f.selection=r(),s=f.savedState=r(),f.currentState=r(),f.stepOutput=r(),f.beginExecuteCommand=r(),f._autoOpenFirstStep=!1,u&&u.currentState!==undefined?s(u.currentState):f._autoOpenFirstStep=!0,f}return __extends(i,t),i.prototype.initialize=function(){this._autoOpenFirstStep&&(this.savedState({stepStatuses:[]}),this._autoOpenFirstStep=!1)},i})(t.Loadable.ViewModel);i.ViewModel=o;s=(function(n){function t(t,i,r,f,e,o){var s=n.call(this,t,u.Form,i,r,o)||this;return s.status(f),s.isOptional=!!e,s}return __extends(t,n),t})(f);i.WizardStep=s;h=(function(n){function t(t,i,f,e){var o=n.call(this,t,u.Selector,i,f,e)||this;return o.value=r(),o.defaultValue=r(),o.displayText=r(""),o.locked=r(!1),o.infoBalloonText=r(""),o.lockedBalloonText=r(""),o}return __extends(t,n),t})(f);i.SelectorStep=h})(i=t.Wizard||(t.Wizard={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,f=(function(){function n(n,t){this.linkText=n||"";this.linkUri=t||""}return n})(),r,u;t.Link=f;r=(function(){function n(n,t,i,r){this.top=n||0;this.left=t||0;this.width=i||0;this.height=r||0}return n})();t.Box=r;u=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.visible=i(!1),t.box=i(new r),t.content=i(""),t.link=i(),t.appendTo="body",t.closeOtherBalloons=!1,t}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=u})(t=n.Balloon||(n.Balloon={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,f,u;(function(n){n[n.Normal=0]="Normal";n[n.Emphasized=1]="Emphasized";n[n.Strong=2]="Strong"})(f=i.Emphasis||(i.Emphasis={}));u=(function(t){function i(i){var u=t.call(this,i)||this;return u.max=r(2e5),u.wrap=r(!0),u.click=$.noop,u.clear=new n.ViewModels.Controls.Command.ViewModel(i,""),u.scrollbars=!0,u.write=r().extend({notify:"always"}),u.writeLine=r().extend({notify:"always"}),u.writeText=r().extend({notify:"always"}),u.writeTextLine=r().extend({notify:"always"}),u.writeTextArray=r().extend({notify:"always"}),u}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=u})(i=t.TextStream||(t.TextStream={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u,f;(function(n){n[n.Text=0]="Text";n[n.Information=1]="Information";n[n.Success=2]="Success";n[n.Warning=3]="Warning";n[n.Error=4]="Error"})(u||(u={}));i.LogItemType=u;f=(function(t){function i(i,u){var f=t.call(this,i)||this;u=u||{};f.controlType=58;f.paused=n.initObservable(u.paused,!1);f.filters=n.initObservableArray(u.filters);f.ariaLabel=n.initObservable(u.ariaLabel);var e=f.log=r(),o=f.logItem=r(),s=f.logItems=r();return e.extend({notify:"always"}),o.extend({notify:"always"}),s.extend({notify:"always"}),f}return __extends(i,t),i})(t.TextStream.ViewModel);i.ViewModel=f})(i=t.LogStream||(t.LogStream={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=(function(t){function i(i,u){var f=t.call(this,i,u)||this;u=u||{};f.controlType=75;f.isReady=r(!1);f.prompt=n.initObservable(u.prompt,"> ");f.ariaLabel=n.initObservable(u.ariaLabel);f.clear=new n.ViewModels.Controls.Command.ViewModel(i);f.command=r("");f.text=r("");f.info=r("");f.success=r("");f.warning=r("");f.error=r("");f.command.extend({notify:"always"});f.text.extend({notify:"always"});f.info.extend({notify:"always"});f.success.extend({notify:"always"});f.warning.extend({notify:"always"});f.error.extend({notify:"always"});var e=i.createChildLifetime(),o=[];return["command","text","info","success","warning","error"].forEach((function(n){f[n].subscribe(e,(function(t){o.push({kind:n,data:t})}))})),f.isReady.subscribe(e,(function(){e.dispose();o.forEach((function(n){f[n.kind](n.data)}))})),f}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=u})(i=t.Console||(t.Console={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Auto=1]="Auto";n[n.Yes=2]="Yes";n[n.No=3]="No"})(r=t.Scroll||(t.Scroll={}));u=(function(n){function t(t,u){var f=n.call(this,t)||this;return f.controlType=108,f.src=u.src,f.scrolling=u.scrolling||r.Auto,f.postMessage=u.postMessage||i("Initialized"),f.receiveMessage=u.receiveMessage||i(),f}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=u})(i=t.IFrame||(t.IFrame={}))})(t=n.Internal||(n.Internal={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r){var u=n.call(this,t)||this;return u.controlIsReady=i(!1),u.controlType=113,u.src=r.src,u.postMessage=r.postMessage||i(),u.receiveMessage=r.receiveMessage||i(),u}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=r})(i=t.IFrameV2||(t.IFrameV2={}))})(t=n.Internal||(n.Internal={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var f=n,h=f.ViewModels,u=h.Controls.Command.ViewModel,r=ko.observable,c=ko.observableArray,e,l,o,s;(function(n){n[n.NotLoading=0]="NotLoading";n[n.Loading=1]="Loading";n[n.Failed=2]="Failed"})(e=i.QueryLoadingStatus||(i.QueryLoadingStatus={})),(function(n){n[n.Operator=0]="Operator";n[n.Operand=1]="Operand"})(l=i.CallbackMethodType||(i.CallbackMethodType={}));o=(function(){function n(){}return Object.defineProperty(n,"Group",{get:function(){return"group"},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Predicate",{get:function(){return"predicate"},enumerable:!0,configurable:!0}),n})();i.QueryExpressionType=o;s=(function(n){function t(t,i){var o=this,s=i&&i.schema?i.schema:i;return o=n.call(this,t)||this,o.controlType=31,o.schema=r(s),o.title=r(""),o.query=r(null),o.queryViewModel=r(),o.savedQuery=r(null),o.callback=null,o.showHeader=r(!0),o.showFooter=r(!0),o.add=new u(t),o.insert=new u(t),o.remove=new u(t),o.group=new u(t),o.ungroup=new u(t),o.save=new u(t),o.queryLoading=r({status:e.NotLoading}),o._msPortalFxOperandControls=c(),o.ariaLabel=f.initObservable(i&&i.ariaLabel?i.ariaLabel:""),o}return __extends(t,n),t})(t.Loadable.ViewModel);i.ViewModel=s})(r=i.QueryBuilder||(i.QueryBuilder={}))})(i=t.Data||(t.Data={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Info=0]="Info";n[n.Validation=2]="Validation"})(r=t.Type||(t.Type={}));u=(function(n){function t(t){var u=n.call(this,t)||this;return u.type=r.Info,u.content=i(""),u.ariaLabel=i(""),u.link=i(),u.balloonVisible=i(!1),u.stopClickPropagation=i(!0),u.controlType=32,u}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=u})(t=n.DockedBalloon||(n.DockedBalloon={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(n){u.push(n)}function s(){return u}var i=n.ViewModels.Controls.Command.Status,r=ko.observable,e,f,u;(function(n){n[n.None=0]="None"})(e=t.Extensions||(t.Extensions={}));f=(function(){function t(n){this.handler=r(n);this.status=r(i.None);this.error=r(null);this.errorMessage=r(null)}return t.prototype.execute=function(t){var r=n.Helpers.Deferred(),s=this.handler(),e=this.status,o=this.error,u=this.errorMessage,f;return e(i.Pending),o(null),u(null),s?s(t).then((function(n){e(i.Success);r.resolve(n)}),(function(n){e(i.Failure);o(n);n&&(n.message?u(n.message):n.toString&&u(n.toString()));r.reject(n)})):(f=new Error("Command is not available for execution."),r.reject(f),o(f),u(f.message)),r.promise()},t})();t.ExtensionCommand=f;u=[];t.registerExtensionSetup=o;t.getExtensionSetups=s})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.ViewModels.Controls.Documents.Editor.ExtensionCommand,i=ko.observable,f=ko.observableArray,e=(function(){function n(n,t,u){this.id=i(n||-1);this.lastUpdatedDate=i(null);this.publishedDate=i(null);this.parentId=i(-1);this.threadId=i(-1);this.author=i(u);this.content=i(t||"");this.canDelete=i(!1);this.isEditable=i(!1);this.save=new r}return n})(),u;t.DiscussionCommentViewModel=e;u=(function(){function n(n,t){this.id=i(n||-1);this.lastUpdatedDate=i(null);this.publishedDate=i(null);this.comments=f(t);this.save=new r;this.addComment=new r;this.deleteComment=new r}return n})();t.DiscussionThreadViewModel=u})(i=t.DiscussionThread||(t.DiscussionThread={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.Helpers,s=ko.observable,o=r.resolve(),u,f,e;(function(n){n[n.Discussion=1]="Discussion"})(u=i.Extensions||(i.Extensions={}));f=(function(n){function t(t,i,r){var u=n.call(this,t,i)||this;return u.position=s(r),u}return __extends(t,n),t})(n.ViewModels.Controls.Documents.DiscussionThread.DiscussionThreadViewModel);i.EditorThreadViewModel=f;e=(function(){function i(n){var t=this;this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;this.options=n;this._attachAddThreadHandler();n.threads.subscribeArrayAdds(this._lifetimeManager,(function(n){t._addThreadHandlers(n)}));n.threads().forEach((function(n){t._addThreadHandlers(n)}))}return i.prototype.dispose=function(){this.options=null;this._lifetimeManager.dispose()},i.prototype._attachAddThreadHandler=function(){var i=this.options,r;i.addThread||(i.addThread=new n.ViewModels.Controls.Documents.Editor.ExtensionCommand);r=function(n){var r,u;return r=new t.DiscussionThread.DiscussionCommentViewModel(-1,"",i.author()),r.canDelete(!0),r.isEditable(!0),u=new f(-(new Date).getTime(),[r],n),i.threads.push(u),o};i.addThread.handler(r)},i.prototype._addThreadHandlers=function(n){var t=this;this._attachSaveThreadHandler(n);this._attachAddCommentHandler(n);this._attachDeleteCommentHandler(n);n.comments().forEach((function(n){t._attachSaveCommentHandler(n)}))},i.prototype._attachSaveThreadHandler=function(n){var t=this,i=function(i){var u=t.options,f;return u.saveThread&&(f=u.saveThread(i,n,u.containerName),f)?f:r.reject("No save handler found.")};n.save.handler(i)},i.prototype._attachAddCommentHandler=function(n){var i=this,r=function(){var r;return r=new t.DiscussionThread.DiscussionCommentViewModel(-1,"",i.options.author()),r.canDelete(!0),r.isEditable(!0),r.threadId(n.id()),i._attachSaveCommentHandler(r),n.comments.push(r),o};n.addComment.handler(r)},i.prototype._attachDeleteCommentHandler=function(n){var t=this,i=function(i){var u,f=n.comments().first((function(n){return n.id()===i})),e=t.options;return f&&e.deleteComment&&(u=e.deleteComment(n.id(),i),u)?u.then((function(){n.comments.remove(f)})):r.reject("No save handler found.")};n.deleteComment.handler(i)},i.prototype._attachSaveCommentHandler=function(n){var t=this,i=function(i){var f=t.options,u;return f.saveComment&&(u=f.saveComment(i,n),u)?u:r.reject("No save handler found.")};n.save.handler(i)},i})();i.DiscussionCommandHandler=e;i.registerExtensionSetup((function(n,t){var i;return(n&u.Discussion)!==u.None&&!!t.discussion?(i=new e(t.discussion),[i]):null}))})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=n.ViewModels.Controls.Command.ViewModel,i=ko.observable,e=ko.observableArray,r,o,f;(function(n){n[n.Text=0]="Text";n[n.Custom=1]="Custom";n[n.Bat=2]="Bat";n[n.C=3]="C";n[n.CoffeeScript=4]="CoffeeScript";n[n.Cpp=5]="Cpp";n[n.CSharp=6]="CSharp";n[n.CSHtml=7]="CSHtml";n[n.Css=8]="Css";n[n.Dockerfile=9]="Dockerfile";n[n.FSharp=10]="FSharp";n[n.Go=11]="Go";n[n.Handlebars=12]="Handlebars";n[n.Html=13]="Html";n[n.Ini=14]="Ini";n[n.Jade=15]="Jade";n[n.Java=16]="Java";n[n.JavaScript=17]="JavaScript";n[n.JSHtm=18]="JSHtm";n[n.Json=19]="Json";n[n.Less=20]="Less";n[n.Lua=21]="Lua";n[n.MarkDown=22]="MarkDown";n[n.ObjectiveC=23]="ObjectiveC";n[n.Php=24]="Php";n[n.PowerShell=25]="PowerShell";n[n.Python=26]="Python";n[n.R=27]="R";n[n.Ruby=28]="Ruby";n[n.Sql=29]="Sql";n[n.Swift=30]="Swift";n[n.TypeScript=31]="TypeScript";n[n.VisualBasic=32]="VisualBasic";n[n.Xaml=33]="Xaml";n[n.Xml=34]="Xml"})(r||(r={}));t.ContentType=r,(function(n){n[n.Ignore=0]="Ignore";n[n.Info=1]="Info";n[n.Warning=2]="Warning";n[n.Error=3]="Error"})(o=t.MarkerSeverity||(t.MarkerSeverity={}));f=(function(n){function r(r,f,o,s,h,c,l,a){s===void 0&&(s={});h===void 0&&(h=null);c===void 0&&(c=t.Extensions.None);l===void 0&&(l=null);a===void 0&&(a=null);var v=n.call(this,r)||this;return v.controlType=37,v.contentType=i(f),v.customContentType=i(h),v.content=i(o),v.contentUri=i(),v.selectedContent=i(""),v.selectedRange=i({startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1}),v.markers=e(),v.position=i({lineNumber:1,column:1}),v.options=i(s),v.dirty=i(!1),v.visible=i(!0),v.save=new u(r,""),v.refresh=new u(r,""),v.autoSaveTimeout=i(0),v.extensions=c,v.extensionOptions=l,v.configuration=a,v.content.extend({notify:"always"}),v._setupExtensions(),v}return __extends(r,n),r.prototype._setupExtensions=function(){for(var i,r,f=t.getExtensionSetups(),n=0,u=f.length;n<u;n++)i=f[n],i&&(r=i(this.extensions,this.extensionOptions),r&&this._addDisposablesToCleanUp(r))},r})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=f})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=(function(n){function i(i,u,f,e,o,s,h){o===void 0&&(o={});s===void 0&&(s=t.Editor.Extensions.None);h===void 0&&(h=null);var c=n.call(this,i,u,e,o,null,s,h)||this;return c.controlType=33,c.originalContent=r(f),c.originalContent.extend({notify:"always"}),c}return __extends(i,n),i})(n.ViewModels.Controls.Documents.Editor.ViewModel);i.ViewModel=u})(i=t.DiffEditor||(t.DiffEditor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=n,u=(function(n){function t(t,u){var f=n.call(this,t)||this;return f.value=i(),u===!1||u===!0?u={loading:i(u)}:(u===null||u===undefined)&&(u={}),f.readOnly=f.disabled=i(!1),f.loading=i(!1),u=u||{},f.cssClass=r.initObservable(u.cssClass,""),f.hideValidationCheck=u.hideValidationCheck||!1,f.infoBalloonContent=r.isNullOrUndefined(u.infoBalloonContent)?i():u.infoBalloonContent,f.infoBalloonLinkContent=u.infoBalloonLinkContent||i(),f.label=r.isNullOrUndefined(u.label)?i():u.label,f.labelPosition=r.isNullOrUndefined(u.labelPosition)?i(r.ViewModels.Forms.LabelPosition.Top):u.labelPosition,f.subLabel=r.initObservable(u.subLabel,undefined),f.subLabelPosition=r.isNullOrUndefined(u.subLabelPosition)?i(r.ViewModels.Forms.SubLabelPosition.Bottom):u.subLabelPosition,f.visible=r.initObservable(u.visible,!0),f._msPortalFxLeftLabelWidth=i(),f._msPortalFxRequired=i(),f.controlType=40,f.hideTextbox=u&&u.hideTextbox,f.ariaLabel=r.initObservable(u&&u.ariaLabel,""),f._msPortalFxRows=u&&u.rows||1,f.subLabel=r.initObservable(u&&u.subLabel),f}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=u})(i=t.CopyableLabel||(t.CopyableLabel={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=ko.observable,i,r;(function(n){n[n.Invalid=0]="Invalid";n[n.Pending=1]="Pending";n[n.Uploading=2]="Uploading";n[n.Paused=3]="Paused";n[n.Complete=4]="Complete"})(i||(i={}));r=(function(n){function t(t){var i=n.call(this,t)||this;return i.accept="",i.maxFiles=1,i.sizeLimit=209715200,i.showProgressBars=u(!0),i.files=u([]),i.controlType=28,i}return __extends(t,n),t})(n.ViewModels.Controls.ValidatableControl.ViewModel);n.ViewModels.Controls.Forms.FileUpload={UploadStatus:i,ViewModel:r};t.UploadStatus=i;t.ViewModel=r})(i=t.FileUpload||(t.FileUpload={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.SortableColumn=1]="SortableColumn";n[n.SelectableRow=2]="SelectableRow";n[n.RightClickableRow=4]="RightClickableRow";n[n.Groupable=8]="Groupable";n[n.EditableRow=16]="EditableRow";n[n.Filterable=32]="Filterable";n[n.ReorderRow=64]="ReorderRow";n[n.ContextMenuShortcut=128]="ContextMenuShortcut";n[n.Pageable=256]="Pageable";n[n.Hierarchical=512]="Hierarchical";n[n.Scrollable=1024]="Scrollable";n[n.Hoverable=2048]="Hoverable";n[n.ResizableColumn=4096]="ResizableColumn"})(t=n.Extensions||(n.Extensions={}))})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t,i;(function(n){n[n.Html=1]="Html";n[n.Text=2]="Text";n[n.ShortTime=100]="ShortTime";n[n.LongTime=101]="LongTime";n[n.ShortDate=102]="ShortDate";n[n.LongDate=103]="LongDate";n[n.MonthDay=104]="MonthDay";n[n.YearMonth=105]="YearMonth";n[n.CustomDate=106]="CustomDate";n[n.Uri=107]="Uri";n[n.Icon=108]="Icon";n[n.IconLookup=109]="IconLookup";n[n.TextLookup=110]="TextLookup";n[n.SvgIcon=111]="SvgIcon";n[n.SvgIconLookup=112]="SvgIconLookup";n[n.PercentageBar=113]="PercentageBar";n[n.Number=114]="Number";n[n.HtmlBindings=1e3]="HtmlBindings"})(t=n.Format||(n.Format={})),(function(n){n[n.Default=0]="Default";n[n.CheckBox=1]="CheckBox";n[n.TextBox=2]="TextBox";n[n.MultiselectDropDown=3]="MultiselectDropDown";n[n.CheckBoxRowSelection=4]="CheckBoxRowSelection";n[n.DropDown=5]="DropDown";n[n.GroupDropDown=6]="GroupDropDown"})(i=n.HtmlBindingsType||(n.HtmlBindingsType={}))})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(){"use strict"})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Default=0]="Default";n[n.DateTime=1]="DateTime";n[n.SettingListGroupOrder=9999]="SettingListGroupOrder"})(t=n.SortFunction||(n.SortFunction={}))})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Sequential=0]="Sequential";n[n.Pageable=1]="Pageable"})(t=n.PageableType||(n.PageableType={}))})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Unsorted=0]="Unsorted";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"})(t||(t={}));n.SortOrder=t})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(n,t){return t(n)}function s(n){var t=n();return t||f.blockInteractionUntilEditScopeLoads(),t}function v(n){c.Log.writeEntry(2,"Grid",n)}var u=n,c=n.Base.Diagnostics,h=n.ViewModels,r=h.Controls.Lists.Grid.Extensions,i=ko,l=u.disposeDisposable,e="",a={itemsSuppliedWithEditableRow:e,editScopeRoot:e,pageableEditableRowMismatch:e,pageableScrollableMismatch:e,missingValidDataNavigator:e,itemsSuppliedWithPageableExtensionWithDataNav:e,blockInteractionUntilEditScopeLoads:e,itemsSuppliedWithScrollableExtensionWithDataNav:e,sortCallbackWithDataNav:e,loadBySkipTakeMissing:e,loadByContinuationTokenMissing:e,scrollableEditableRowMismatch:e},f=FxImpl.getErrorMap(a),y=(function(e){function c(c,l,a,v){var y=e.call(this,c)||this,p,w,ui,fi,ei,oi,ot,si,ct,lt,b,rt,st,at,wt,k,ut,vt,yt,bt,kt;c=y.lifetimeManager;y.controlType=54;y.addEmptyRow=i.observable();y.summary=i.observable();y.columns=i.observableArray();y.resetCallback=i.observable();y.noRowsMessage=i.observable(u.Resources.Strings.ViewModels.Controls.noRowsMessage);y.sortByList=i.observableArray();y.showHeader=!0;y._resetHandler=null;y._addCreatedLocked=!1;y._pendingResetCallbackPromise=null;y._msPortalFxActions={};y.ariaLabel=y.summary;y.items=l||i.observableArray();y.createdItems=i.observableArray();p=v||{};y.extensionsOptions={};y.getRowAriaLabel=p.getRowAriaLabel;y.rowAriaLabelDependencies=p.rowAriaLabelDependencies;var dt=a&r.ContextMenuShortcut,g=a&r.EditableRow,gt=a&r.Filterable,ni=a&r.Groupable,ti=a&r.Hierarchical,ii=a&r.Hoverable,ft=a&r.Pageable,ri=a&r.ReorderRow,et=a&r.ResizableColumn,nt=a&r.RightClickableRow,tt=a&r.Scrollable,it=a&r.SelectableRow,pt=a&r.SortableColumn;if(et||(a|=et=r.ResizableColumn),g&&(a|=it=r.SelectableRow,a|=nt=r.RightClickableRow),dt&&(a|=nt=r.RightClickableRow),nt&&(a|=it=r.SelectableRow),it&&(a|=nt=r.RightClickableRow),y.extensions=a,g&&(w=y.extensionsOptions.editableRow=u.clone(p.editableRow)),gt&&(ui=y.extensionsOptions.filterable=u.clone(p.filterable)),ni&&(fi=y.extensionsOptions.groupable=u.clone(p.groupable)),ti&&(ei=y.extensionsOptions.hierarchical=u.clone(p.hierarchical)),ii&&(oi=y.extensionsOptions.hoverable=u.clone(p.hoverable)),ft&&(ot=y.extensionsOptions.pageable=u.clone(p.pageable)),ri&&(si=y.extensionsOptions.reorderRow=u.clone(p.reorderRow)),et&&(ct=y.extensionsOptions.resizableColumn=u.clone(p.resizableColumn)),nt&&(y.extensionsOptions.controlCommands=p.controlCommands),tt&&(lt=y.extensionsOptions.scrollable=u.clone(p.scrollable)),it&&(b=y.extensionsOptions.selectableRow=u.clone(p.selectableRow),y.extensionsOptions.onRowClicked=p.onRowClicked),pt&&(rt=y.extensionsOptions.sortableColumn=u.clone(p.sortableColumn)),g&&(st=w.editScope,st&&l&&f.itemsSuppliedWithEditableRow(),st&&(y._editScope=st,w.editScope=null,w.getItems||(w.getItems=function(n){return ko.isObservable(n.root)&&Array.isArray(n.root())&&n.root.splice||f.editScopeRoot(),n.root}),at=function(n,t){return i.computed(c,(function(){var i=t(),r=i?i():[];n.splice.apply(n,[0,n().length].concat(r))}))},at(y.items,(function(){var n=y._editScope();return n&&o(n,w.getItems)})),at(y.createdItems,(function(){var n=y._editScope();return n&&n.getCreated(o(n,w.getItems))})),wt=i.computed(c,(function(){return!!y._editScope()})),u.extend(w,{create:function(){return y._create(s(y._editScope),w.getItems)},addCreated:function(n){y._addCreated(s(y._editScope),w.getItems,n)},markForDelete:function(n){y._markForDelete(s(y._editScope),n)},enableValidation:wt}),w.enableRowAdd!==!1&&y._addInitialCreatedRow(y._editScope,w.getItems))),ft&&(g&&f.pageableEditableRowMismatch(),tt&&f.pageableScrollableMismatch(),k=ot.dataNavigator,k||f.missingValidDataNavigator(),k&&l&&f.itemsSuppliedWithPageableExtensionWithDataNav(),ut=ot.type,ut!==t.PageableType.Pageable&&ut===t.PageableType.Sequential,ut!==t.PageableType.Sequential||k.loadByContinuationToken||f.loadByContinuationTokenMissing(),ut!==t.PageableType.Pageable||k.loadBySkipTake||f.loadBySkipTakeMissing(),y._resetHandler=function(){return y.reset()},k.addResetNavigationListener(y._resetHandler)),et&&tt&&!ct.resizeToPercent&&(ct.resizeToPercent=i.observable(!1)),pt){var d=rt.dataNavigator,hi=y.sortByList,ht=rt.sortCallback;d||(d=rt.dataNavigator=ft&&ot.dataNavigator||tt&&lt.dataNavigator);d&&ht&&f.sortCallbackWithDataNav();d||ht||(ht=rt.sortCallback=function(n){var t=y.items().slice(0);n&&n.length&&t&&t.length&&t.sort((function(t,i){var r=0;return n.some((function(n){var f=t[n.itemKey],e=i[n.itemKey];return r=u.compare(f,e),r&&n.sortOrder===2&&(r=-r),r!==0})),r}));y.items(t)});y._msPortalFxActions.sort=function(n){return(hi(n),d)?d.resetNavigation():Q(ht(n))}}return tt&&(g&&f.scrollableEditableRowMismatch(),ft&&f.pageableScrollableMismatch(),vt=lt.dataNavigator,vt&&(l&&f.itemsSuppliedWithScrollableExtensionWithDataNav(),y._resetHandler=function(){return y.reset()},vt.addResetNavigationListener(y._resetHandler))),it&&(yt=y.items,n.isUndefined(b.selectionMode)&&(b.selectionMode=1),n.isUndefined(b.leaveSelectionOnDeactivation)&&(b.leaveSelectionOnDeactivation=b.selectionMode!==1),y.createdItems&&(yt=i.computed(c,(function(){return y.items().concat(y.createdItems())}))),y.selectableData=new h.SelectableSet(yt,b.itemMatchesSelection,b.createSelection,b.initialSelection,b.supplyCommands,!0,b.leaveSelectionOnDeactivation)),bt=y.items.map(c,(function(n,t){return i.ignoreDependencies((function(){return y._createMetadataForItem(n,t)}))})),kt=y.createdItems.map(c,(function(n,t){return i.ignoreDependencies((function(){return y._createMetadataForItem(n,t)}))})),y.rowMetadata=i.observableArray(),i.computed(c,(function(){y.rowMetadata(bt().concat(kt()))})),y}return __extends(c,e),c.prototype.getRowMetadata=function(n){return this.rowMetadata().first((function(t){return t.item===n}))},c.prototype.reset=function(){var i=this,r=this.resetCallback(),t;return r?Q(r()):(this._pendingResetCallbackPromise||(t=Q.defer(),this._pendingResetCallbackPromise=t.promise,this.resetCallback.fxAwait(this.lifetimeManager,(function(n){return!!n})).then((function(r){i._pendingResetCallbackPromise?Q(r()).then((function(n){t.resolve(n)}),(function(n){t.reject(n)})).finally((function(){i._pendingResetCallbackPromise=null})):t.reject(new n.Errors.DisposedCanceledError)}))),this._pendingResetCallbackPromise)},c.prototype.dispose=function(){if(this._resetHandler){var n=this.extensionsOptions.pageable;n&&n.dataNavigator&&n.dataNavigator.removeResetNavigationListener(this._resetHandler);this._resetHandler=null}this._pendingResetCallbackPromise&&(this._pendingResetCallbackPromise=null);l(this.selectableData);e.prototype.dispose.call(this)},c.prototype._createMetadataForItem=function(n,t){var u={item:t,cssClass:i.observable(""),ariaLabel:i.observable()},e,f;return this.extensions&r.EditableRow&&(e=this.extensionsOptions.editableRow,e&&(u.editState=s(this._editScope).getEditState(t))),this.extensions&r.SelectableRow&&(f=this.extensionsOptions.selectableRow,u.selected=i.observable(!1),u.disabled=i.observable(!1),u.activated=i.observable(null),u.activatedInfo=i.observable(null),u.useDefaultActivation=i.observable(!0),f&&f.linkProvider&&(u.link=f.linkProvider(n,t))),this.extensions&r.Groupable&&(u.groupId=i.observable("")),u},c.prototype._create=function(n,t){var i=n.create(o(n,t)),r=this.extensionsOptions.editableRow;return r&&r.created&&r.created(i),this.addEmptyRow(i),u.Helpers.resolve(i)},c.prototype._addCreated=function(n,t,i){if(!this._addCreatedLocked)try{this._addCreatedLocked=!0;var r=this.createdItems().some((function(n){return n&&i&&n===i}));i&&!r&&n.addCreated(i,o(n,t))}finally{this._addCreatedLocked=!1}},c.prototype._markForDelete=function(n,t){var r=function(n){return n===t},i=this.items().first(r);if(i){n.markForDelete(i);return}if(i=this.createdItems().first(r),i){n.revert(i);return}v("The item marked for deletion could not be found.")},c.prototype._addInitialCreatedRow=function(n,t){var i=this,r=function(n){i._create(n,t)};n.fxOnceAndRun(this.lifetimeManager,(function(n){return r(n)}))},c})(u.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=y})(i=t.Grid||(t.Grid={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,s=ko.observableArray,u,e,f,o;(function(n){n[n.Selectable=1]="Selectable";n[n.Groupable=2]="Groupable";n[n.ContextMenu=4]="ContextMenu";n[n.Filterable=8]="Filterable"})(u=i.Extensions||(i.Extensions={})),(function(n){n[n.Collection=0]="Collection";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"})(e=i.GroupOrder||(i.GroupOrder={})),(function(n){n[n.Single=0]="Single";n[n.Multiple=1]="Multiple"})(f=i.SelectionMode||(i.SelectionMode={}));o=(function(t){function i(i,o,h){o===void 0&&(o=0);h===void 0&&(h={});var c=t.call(this,i)||this;return c.controlType=56,c.items=s(),c.events=$.noop,c.noItemsMessage=r(""),c.extensions=o,c.extensionOptions=h,c.outlineStyle=ko.observable(!0),c.extensions&u.Selectable&&(h.selectable||(h.selectable={}),n.isNullOrUndefined(h.selectable.selectionMode)&&(h.selectable.selectionMode=f.Single),h.selectable.selectedItem||h.selectable.selectionMode!==f.Single||(h.selectable.selectedItem=r()),h.selectable.selection||(h.selectable.selection=new n.ViewModels.SelectableSet(c.items)),n.isNullOrUndefined(h.selectable.activateOnSelected)&&(h.selectable.activateOnSelected=!0)),c.extensions&u.Groupable&&(h.groupable||(h.groupable={}),h.groupable.groupKey||(h.groupable.groupKey=r("")),h.groupable.headerTemplate||(h.groupable.headerTemplate=null),h.groupable.groups||(h.groupable.groups=null),h.groupable.noGroupLabel||(h.groupable.noGroupLabel=""),h.groupable.noGroupAriaLabel||(h.groupable.noGroupAriaLabel=""),h.groupable.order||(h.groupable.order=r(e.Collection))),c}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=o})(r=i.ListView||(i.ListView={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u.controlType=55,u}return __extends(t,n),t})(n.ListView.ViewModel);t.ViewModel=i})(t=n.Gallery||(n.Gallery={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u=(function(t){function u(n,u,f,e){var o=t.call(this,n)||this,s=e&&e.selectable&&e.selectable.supplyCommands;return FxImpl.shellInterface(o,{CurrentCommands:ko.observableArray(),OnItemClicked:e&&e.selectable&&e.selectable.onItemClicked,SupplyCommands:s?function(n){var t=s(n);return FxImpl.shellInterface(o).CurrentCommands(t),t}:undefined}),o.controlType=57,o.padding=i(16),o.alwaysExpanded=i(!1),o.ariaLabel=i(""),o.htmlTemplates=[],o.toggleNodeCallback=i(),o._tokenStorage={},o.pathSeparator="/",o.items=u||r(),o.extensions=f||0,o.extensionsOptions=e,o.canLoadMoreRootItems=ko.observable(!1),o._processCallBack=function(n){if(n)for(var t=0,i=n.length;t<i;t++)o._processItem(n[t])},o._processItems(o.items),o._selectableExists&&o._setupSelectable(e.selectable),o._loadableExists&&o._setupOnDemandLoadable(),o._selectableExists&&o.extensionsOptions.selectable.selectionMode===1&&o.selectableData.selectedPaths.subscribeArrayChanges(o.lifetimeManager,(function(n){o.findItemByPath(n).metadata.selected(!0)}),(function(n){o.findItemByPath(n).metadata.selected(!1)})),o}return __extends(u,t),u.prototype.loadMoreNode=function(n,t){return this.extensionsOptions.loadableByContinuationToken.loadMoreNode?this.extensionsOptions.loadableByContinuationToken.loadMoreNode(n,t):Q({items:[],continuationToken:null})},u.prototype.loadMoreRootItems=function(){var n=this;return this.extensionsOptions.loadableByContinuationToken.loadMoreRootItems?this.extensionsOptions.loadableByContinuationToken.loadMoreRootItems().then((function(t){t.length&&(n._processCallBack(t),n.items.push.apply(n.items,t))})):Q()},u.prototype.syncToken=function(n,t){this._tokenStorage[n]=t},u.prototype.getTokenByPath=function(n){return this._tokenStorage[n]},u.prototype.expandNode=function(n){this.toggleNode(n,!0)},u.prototype.collapseNode=function(n){this.toggleNode(n,!1)},u.prototype.toggleNode=function(n,t){t===undefined&&(t=!n.metadata.expanded());var i=this.toggleNodeCallback();i&&i(n,t)},u.prototype.findItemByPath=function(t){var o=this.items,i,f,s,u,e,h;if(t)for(f=t.split(this.pathSeparator),s=function(t){var u=f[t].toLowerCase();if(i=n.find(o(),(function(n){return u===n.text().toLowerCase()})),i)o=i.items||r();else return"break"},u=0,e=f.length;u<e;u++)if(h=s(u,e),h==="break")break;return i},Object.defineProperty(u.prototype,"_selectableExists",{get:function(){return(this.extensions&1)>0&&!!this.extensionsOptions.selectable},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"_loadableExists",{get:function(){return(this.extensions&2)>0&&!!this.extensionsOptions.onDemandLoadable},enumerable:!0,configurable:!0}),u.prototype._processItems=function(n){this._processCallBack(n());n.subscribeArrayBulkChanges(this.lifetimeManager,this._processCallBack)},u.prototype._processItem=function(n){var t=n.metadata||(n.metadata={});t.disabled=t.disabled||i(!1);t.expanded=t.expanded||i();this._selectableExists&&(t.selected=t.selected||i(!1),t.selectable=t.selectable||i(!0),t.focused=t.focused||i(!1));this._loadableExists&&(t.loadable=t.loadable||i());n.items=n.items||r();this._processItems(n.items)},u.prototype._setupSelectable=function(n){var t=this;this.selectableData={selectedItem:i(),selectedPath:i(),selectionMode:n.selectionMode||0,selectedItems:r(),selectedPaths:r()};this.selectableData.selectedPath.subscribe(this.lifetimeManager,(function(n){var i=t.findItemByPath(n);i&&t.selectableData.selectedItem(t.extensionsOptions.selectable.createSelection(i,n))}));this.selectableData.selectedPaths.subscribe(this.lifetimeManager,(function(n){var i=n.map((function(n){var i=t.findItemByPath(n);return t.extensionsOptions.selectable.createSelection(i,n)}));t.selectableData.selectedItems(i)}))},u.prototype._setupOnDemandLoadable=function(){var t=this,n=i();n.extend({notify:"always"});n.subscribe(this.lifetimeManager,(function(n){var i=t.findItemByPath(n);i&&t.extensionsOptions.onDemandLoadable.loadItem(i,n)}));this.onDemandLoadableData={loadingPath:n}},u})(n.ViewModels.Controls.Loadable.ViewModel);u=__decorate([n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Function,Number,Object])],u);t.ViewModel=u})(i=t.TreeView||(t.TreeView={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=(function(t){function i(i,r){r===void 0&&(r={});var u=t.call(this,i)||this;return u.controlType=110,u.markdown=n.initObservable(r.markdown,""),u.ariaLabel=n.initObservable(r.ariaLabel),u}return __extends(i,t),i})(t.Base.ViewModel);i.ViewModel=r})(i=t.Markdown||(t.Markdown={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i){var r=n.call(this,t)||this;return r.controlType=112,r.options=i,r}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=i})(t=n.PartPinner||(n.PartPinner={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){var r=n.call(this,t)||this;return r.show=i(!1),r.darkText=i(!1),r.controlType=89,r}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=r})(t=n.PreviewTag||(n.PreviewTag={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.initObservable,u=n.initValue,f=(function(t){function i(i,f){var e=t.call(this,i)||this;return e.controlType=93,e.defaultText=f.defaultText,e.submit=f.submit,e.update=f.update,e.hideSuggestions=r(f.hideSuggestions,!1),e.placeholder=r(f.placeholder,n.Resources.Strings.ViewModels.Controls.search),e.updateFrequency=u(f.updateFrequency,400),e.resultLimit=f.resultLimit,e.disabled=r(f.disabled,!1),e.ariaLabel=r(f.ariaLabel,""),e._msPortalFxresetTrigger=r(),e}return __extends(i,t),i.prototype.reset=function(){var n=this._msPortalFxresetTrigger;if(n())return n()();Q()},i})(t.Base.ViewModel);i.ViewModel=f})(i=t.SearchBox||(t.SearchBox={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,f=ko.observableArray,r,u;(function(n){n[n.Small=2]="Small";n[n.Large=3]="Large"})(r=t.Size||(t.Size={}));u=(function(n){function t(t){var u=n.call(this,t)||this;return u.items=f(),u.maxItems=i(),u.size=i(r.Small),u.controlType=60,u}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=u})(t=n.Settings||(n.Settings={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=(function(t){function i(i,r){r===void 0&&(r={});var u=t.call(this,i)||this;return u.controlType=100,u.onClick=r.onClick,u.text=n.initObservable(r.text,""),u.disabled=n.initObservable(r.disabled,!1),u.primary=n.initObservable(r.primary,!1),u.ariaLabel=n.initObservable(r.ariaLabel,""),u.visible=n.initObservable(r.visible,!0),u.loading=n.initObservable(r.loading,!1),u.icon=n.initObservable(r.icon),u}return __extends(i,t),i})(t.Base.ViewModel);i.ViewModel=r})(i=t.SimpleButton||(t.SimpleButton={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=(function(t){function i(i,r){var u=t.call(this,i,r)||this;return r=r||{},u.controlType=61,u.value=n.initObservable(r.value),u.unit=n.initObservable(r.unit),u.caption=n.initObservable(r.caption),u.infoBalloon=n.initObservable(r.infoBalloon),u.hideInfoBalloon=n.initObservable(r.hideInfoBalloon,!1),u}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=r})(i=t.SingleSetting||(t.SingleSetting={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.initObservableArray,f,u;(function(n){n[n.Orange=0]="Orange";n[n.DarkOrchid=1]="DarkOrchid";n[n.YellowGreen=2]="YellowGreen";n[n.MediumBlue=3]="MediumBlue"})(f=i.Colors||(i.Colors={}));u=(function(n){function t(t,i){i===void 0&&(i={});var u=n.call(this,t)||this;return u.controlType=95,u.headers=r(i.headers,[]),u.rows=r(i.rows,[]),u}return __extends(t,n),t})(t.Base.ViewModel);i.ViewModel=u})(i=t.SpecComparisonTable||(t.SpecComparisonTable={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i){i===void 0&&(i={});var r=n.call(this,t)||this;return r.controlType=101,r.text=i.text||"",r}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=i})(t=n.TextBlock||(n.TextBlock={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var c=ko.computed,i=[],f="azc-validatableControl-none",e="azc-validatableControl-invalid",o="azc-validatableControl-pending",r="azc-validatableControl-valid-validated",s="data-validatable-control-valid",l="data-validatable-control-validation-state",u,h;i[0]="none";i[1]="invalid";i[2]="valid";i[3]="pending";u=(function(){function t(){this._destroyIds=[]}return t.prototype._checkExistsOrRegisterDestroyId=function(n){var t=!this._destroyIds.includes(n);return t&&this._destroyIds.push(n),!t},t.prototype.isDestroyed=function(){return this._destroyIds.length>0},t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(null)||this._ltm&&(this._ltm.dispose(),this._ltm=null)},t.prototype.initialize=function(t,i){var u=this,r,f,e;this._element=t;this._validatable={enableValidation:i.enableValidation,valid:i.valid,validationState:i.validationState,validators:i.validators};n.disposeDisposable(this._ltm);r=this._ltm=new FxImpl.TriggerableLifetimeManager;f=this._validatable.validationState;f.subscribeAndRun(r,(function(n){u.onValidationStateChanged(n)}));e=ko.computed(r,(function(){var r="",i=u._validatable.validators(),n,t;if(i)for(n=0;n<i.length;n++)if(t=i[n],!t.valid()&&t.message()){r=t.message();break}return r}));e.subscribeAndRun(r,(function(n){u.onErrorMessageChanged(n)}))},t.prototype.onErrorMessageChanged=function(){},t.prototype.onValidationStateChanged=function(){},t})();t.ValidationPlacementBase=u;h=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t._input=null,t}return __extends(t,n),t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._element&&this._element.removeClass([f,e,o,r].join(" ")),this._input&&this._input.removeAttr(s))},t.prototype.initialize=function(t,i){var u=this,f;n.prototype.initialize.call(this,t,i);f=this._ltm;this._valid=c(f,(function(){return u._validatable.enableValidation()&&u._validatable.validators().length>0&&u._validatable.validationState()===2}));this._valid.subscribe(f,(function(n){u._element.toggleClass(r,n)}));this._input=this._element.find("input, select, textarea");this._validatable.validationState.notifySubscribers(this._validatable.validationState());this._setValidationAttribute(this._validatable.validationState())},t.prototype.onValidationStateChanged=function(n){var t=this._element;t.toggleClass(f,n===0);t.toggleClass(e,n===1);t.toggleClass(o,n===3);this._element.toggleClass(r,ko.unwrap(this._valid));this._setValidationAttribute(n)},t.prototype._setValidationAttribute=function(n){var t=this._input;t&&(t.attr(s,n===2||this._validatable.validators().length===0),t.attr(l,i[n]))},t})(u);t.Css=h})(i=t.ValidationPlacements||(t.ValidationPlacements={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r;t.escapeRegExpOperators=n.regexEscape;r=(function(){function n(n){var t=this,r;this.message=i(n);this.validationState=i(0);this.validate=i();this.isEmptyValid=i(!1);r=this._ltm=new FxImpl.TriggerableLifetimeManager;this.valid=ko.computed(r,(function(){return t.validationState()===2}));this.validate.subscribe(r,(function(n){t.validationState(t._validate(n))}))}return n.prototype.dispose=function(){this._ltm&&(this._ltm.dispose(),this._ltm=null)},n.prototype._validate=function(){return 0},n})();t.Validator=r})(i=t.Validators||(t.Validators={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(){"use strict"})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,u=ko.observableArray,gt=0,v,y,p,w,b,k,d,ni,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ti,c,ii,ri,h,ui,fi,ei,oi,si,ct,hi,lt,e,at,ci,o,f,vt,l,yt,pt,s,a,wt,li,bt,kt,ai,vi,dt;(function(n){n[n.Line=0]="Line";n[n.Area=1]="Area";n[n.Scatter=2]="Scatter";n[n.StackedBar=3]="StackedBar";n[n.GroupedBar=4]="GroupedBar";n[n.SplitBar=5]="SplitBar";n[n.StackedArea=6]="StackedArea"})(v||(v={}));i.ChartType=v,(function(n){n[n.Linear=0]="Linear";n[n.Monotone=1]="Monotone";n[n.StepAfter=2]="StepAfter"})(y||(y={}));i.Interpolation=y,(function(n){n[n.Solid=0]="Solid";n[n.Dotted=1]="Dotted";n[n.Dashed=2]="Dashed";n[n.Trendline=3]="Trendline";n[n.UsageThreshold=4]="UsageThreshold";n[n.WarningThreshold=5]="WarningThreshold"})(p||(p={}));i.LineStyle=p,(function(n){n[n.ShowLineWithPoints=0]="ShowLineWithPoints";n[n.HideLine=1]="HideLine";n[n.ShowLineWithXHoverPoint=2]="ShowLineWithXHoverPoint"})(w||(w={}));i.LineState=w,(function(n){n[n.Solid=0]="Solid";n[n.CrossHatching=1]="CrossHatching";n[n.DiagonalHatching=2]="DiagonalHatching";n[n.DottedHatching=3]="DottedHatching"})(b||(b={}));i.AreaHatchingPattern=b,(function(n){n[n.Stacked=0]="Stacked";n[n.Grouped=1]="Grouped";n[n.Split=2]="Split"})(k||(k={}));i.BarChartType=k,(function(n){n[n.None=0]="None";n[n.Top=1]="Top";n[n.Right=2]="Right";n[n.Bottom=3]="Bottom";n[n.Left=4]="Left"})(d||(d={}));i.AxisPosition=d,(function(n){n[n.All=0]="All";n[n.XSlider_Off=1]="XSlider_Off";n[n.XSlider_noCallout=2]="XSlider_noCallout";n[n.ChartArea_Off=4]="ChartArea_Off";n[n.ChartArea_noClick=8]="ChartArea_noClick";n[n.ChartArea_noHover=16]="ChartArea_noHover"})(ni=i.InteractionBehavior||(i.InteractionBehavior={})),(function(n){n[n.None=0]="None";n[n.Top=1]="Top";n[n.Right=2]="Right";n[n.Bottom=3]="Bottom";n[n.Left=4]="Left"})(g||(g={}));i.LegendPosition=g,(function(n){n[n.Max=0]="Max";n[n.Min=1]="Min";n[n.First=2]="First";n[n.Last=3]="Last";n[n.Every=4]="Every";n[n.Custom=5]="Custom"})(nt||(nt={}));i.DataLabelContext=nt,(function(n){n[n.Callout=0]="Callout";n[n.Badge=1]="Badge"})(tt||(tt={}));i.DataLabelStyle=tt,(function(n){n[n.Ordinal=0]="Ordinal";n[n.Linear=1]="Linear";n[n.Time=2]="Time";n[n.Log=3]="Log"})(it||(it={}));i.Scale=it,(function(n){n[n.None=0]="None";n[n.Low=1]="Low";n[n.High=2]="High"})(rt||(rt={}));i.AxisLabelPosition=rt,(function(n){n[n.GreaterThan=0]="GreaterThan";n[n.LessThan=1]="LessThan"})(ut||(ut={}));i.ConditionOperator=ut,(function(n){n[n.General=0]="General";n[n.HorizontalLine=1]="HorizontalLine";n[n.VerticalLine=2]="VerticalLine";n[n.Uniform=3]="Uniform"})(ft||(ft={}));i.SeriesType=ft,(function(n){n[n.Default=0]="Default";n[n.Point=2]="Point";n[n.MultiplePointsSingleSeries=3]="MultiplePointsSingleSeries";n[n.MultiplePointsMultipleSeries=4]="MultiplePointsMultipleSeries"})(et||(et={}));i.MetricRuleScope=et,(function(n){n[n.AllTogether=0]="AllTogether";n[n.AllSeparately=1]="AllSeparately";n[n.SingleSeries=2]="SingleSeries"})(ot||(ot={}));i.MetricRuleAggregationScope=ot,(function(n){n[n.CurrentXValue=0]="CurrentXValue";n[n.CurrentYValue=1]="CurrentYValue";n[n.MinY=2]="MinY";n[n.MaxY=3]="MaxY";n[n.AverageY=4]="AverageY";n[n.SumY=5]="SumY";n[n.Count=6]="Count";n[n.CustomValue=7]="CustomValue"})(st||(st={}));i.MetricRuleAggregationType=st;ht=(function(){function n(){this.context=r(0);this.style=r(0);this.formatter=r(null)}return n})();i.DataLabel=ht;ti=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartItems=u(),t.context=r(5),t}return __extends(t,n),t})(ht);i.CustomDataLabel=ti;c=(function(){function t(t,i){this.name=r("");this.scale=r(0);this.reverseDomain=r(!1);this.ticks=r(0);this.position=r(3);this.positionIndex=r(0);this.showAxis=r(!0);this.autoScaleUnit=r(!0);this.showName=r(!1);this.showLabel=r(1);this.labelPadding=r(50);this.rotateLabel=r(0);this.showAxisLine=r(!1);this.showTickMarks=r(!1);this.showGridLines=r(!1);this.inputFormat=r("");this.outputFormat=r("");this.formatOptions=r(null);this.xSliderOutputFormat=r(null);this.xSliderFormatOptions=r(null);this.displayLabelFormatter=r("");this.xSliderCalloutDisplayFormatter=r("");this.min=r(null);this.max=r(null);this.unit=r(n.UnitConversion.Unit.None);this.displaySIUnit=r(!1);this.defaultAxisPadding=r(null);this.customAxisPadding=r(null);t&&this.position(t);i&&this.scale(i)}return t})();i.Axis=c;ii=(function(){function n(n,t,i,r,u,f,e){this.years=n;this.months=t;this.days=i||0;this.hours=r||0;this.minutes=u||0;this.seconds=f||0;this.milliseconds=e||0}return n})();i.DateSpan=ii;ri=(function(){function n(n){this.value=n}return n})();i.NumberSpan=ri;h=(function(){function n(){this.type=r(0);this.name=r(String(gt=gt+1&65535))}return n})();i.SeriesBase=h;ui=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.values=u(),t.xAxisName=r(""),t.yAxisName=r(""),t}return __extends(t,n),t})(h);i.Series=ui;fi=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=r(3),t.startXValue=r(null),t.span=r(null),t.yValues=u(),t.xAxisName=r(""),t.yAxisName=r(""),t}return __extends(t,n),t})(h);i.UniformSeries=fi;ei=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=r(1),t.value=r(null),t.axisName=r(""),t}return __extends(t,n),t})(h);i.LineSeries=ei;oi=(function(){function t(n){n?this._initOptions(n):this._initLegacyDefaults()}return t.prototype._initOptions=function(t){n.shallowCopyFromObject(this,t,["scope","scopeSeriesName","metrics",])},t.prototype._initLegacyDefaults=function(){this.scope=r(null);this.scopeSeriesName=r(null);this.metrics=u()},t})();i.MetricRule=oi;si=(function(){function t(n){n?this._initOptions(n):this._initLegacyDefaults()}return t.prototype._initOptions=function(t){n.shallowCopyFromObject(this,t,["aggregationScope","aggregationType","aggregationSeriesName","showBarColor","colorCode","hatchingPattern","formatOptions","title","unit","customValue","defaultInfoBalloon",])},t.prototype._initLegacyDefaults=function(){this.aggregationScope=r(2);this.aggregationType=r(4);this.aggregationSeriesName=r(null);this.showBarColor=r(!0);this.colorCode=r(null);this.hatchingPattern=r(null);this.outputFormat=r(null);this.formatOptions=r(null);this.title=r(null);this.unit=r(null);this.customValue=r(null);this.defaultInfoBalloon=r(null)},t})();i.MetricRuleMetric=si;ct=(function(){function n(){this.chartViewIndex=r(null);this.seriesViewIndex=r(null)}return n})();i.SeriesId=ct;hi=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartItems=u(),t}return __extends(t,n),t})(ct);i.SeriesSubset=hi;lt=(function(){function n(){}return n})();i.Events=lt;e=(function(){function n(){}return n})();i.SeriesChartEvents=e;at=(function(){function n(){}return n})();i.BarChartEvents=at;ci=(function(){function n(){this.seriesName=r("");this.conditionOperator=r(0);this.interpolation=r(0)}return n})();i.RenderingCondition=ci;o=(function(){function n(){this.seriesName=r("");this.displayName=r("");this.cssClass=r("");this.dataLabels=u();this.showTooltip=r(!1);this.tooltipFormatter=r("Series: '{0}' Point: {1} Value: {2}");this.renderingConditions=u();this.selectable=r(!0);this.hoverable=r(!0);this.hideFromLegend=r(!1);this.autoGenerated=!1}return n})();i.SeriesView=o;f=Object.create(null);vt=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.interpolation=r(0),t.lineStyle=r(0),t.showTooltip=r(!1),t.showDataPoints=r(!0),t}return __extends(t,n),t})(o);i.LineChartSeriesView=vt;l=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.interpolation=r(0),t.areaHatchingPattern=r(0),t.showTooltip=r(!1),t}return __extends(t,n),t})(o);i.AreaChartSeriesView=l;yt=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(l);i.StackedAreaChartSeriesView=yt;pt=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.radius=r(2),t.showTooltip=r(!1),t}return __extends(t,n),t})(o);i.ScatterChartSeriesView=pt;s=(function(){function n(){this.chartType=r(undefined);this.seriesView=u()}return n.prototype.newSeriesView=function(){return null},n})();i.View=s;a=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartType=r(0),t.seriesView=u(),t.events=new e,t}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t})(s);a.defaultChartType=0;i.LineChartView=a;f[a.defaultChartType]=function(n){var t=new vt;return n&&t.seriesName(n.name()),t};wt=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartType=r(1),t.seriesView=u(),t.events=new e,t}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t})(s);wt.defaultChartType=1;i.AreaChartView=wt;f[1]=function(n){var t=new l;return n&&t.seriesName(n.name()),t};li=(function(){function n(){this.enableSparseSeries=r(!0);this.chartType=r(undefined);this.seriesView=u()}return n.prototype.newSeriesView=function(){return null},n})();i.StackedChartView=li;bt=(function(){function n(){this.chartType=r(6);this.seriesView=u();this.events=new e;this.lineState=r(0);this.enableSparseSeries=r(!0)}return n.prototype.newSeriesView=function(n){return f[this.chartType()](n)},n})();bt.defaultChartType=6;i.StackedAreaChartView=bt;f[6]=function(n){var t=new yt;return n&&t.seriesName(n.name()),t};kt=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartType=r(2),t.seriesView=u(),t.events=new e,t}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t})(s);kt.defaultChartType=2;i.ScatterChartView=kt;f[2]=function(n){var t=new pt;return n&&t.seriesName(n.name()),t};ai=(function(n){function t(t){var i=n.call(this)||this;i.barPaddingRatio=r(.3);i.enableSparseSeries=r(!0);i.barChartType=r(0);i.xAxisSpan=r(null);i.events=new at;i.barChartType(t);switch(t){case 0:i.chartType(3);break;case 1:i.chartType(4);break;case 2:i.chartType(5)}return i}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t})(s);i.BarChartView=ai;f[3]=f[4]=f[5]=function(n){var t=new o;return n&&t.seriesName(n.name()),t};vi=(function(){function n(n,t){this.xValue=n;this.yValue=t}return n})();i.ChartItem=vi;dt=(function(t){function i(f){var e=t.call(this,f)||this;return e.title=r(""),e.showTitle=r(!1),e.width=r(0),e.height=r(0),e.sizeChanged=r({width:0,height:0}),e.noDataMessage="No data to display",e.series=u(),e.xAxis=new c,e.yAxis=new c(4,1),e.secondaryXAxes=u(),e.secondaryYAxes=u(),e.views=u(),e.legendPosition=r(0),e.interactionBehavior=r(ni.All),e.autogenerateSeriesViews=r(!0),e.events=new lt,e.seriesSelections=u(),e.seriesHovers=u(),e.hoveredID=u(),e.metricsRules=u(),e.enableTrackXSlider=r(),e.xSliderCoordinate=r(),e.xSliderFilterHoverThreshold=r(),e.ariaLabel=r(""),e.ariaDesc=r(""),e.noData=r(!1),e.metrics=new n.ViewModels.Controls.Visualization.Metrics.ViewModel(f),e.controlType=63,e.xAxis.showTickMarks(!0),e.yAxis.labelPadding(i.defaultYAxisLabelPadding),ko.reactor(e.lifetimeManager,(function(){if(e.autogenerateSeriesViews()){var n=e.series()||[],t=e.views();t.forEach((function(t){var r=t.seriesView.peek(),u=r.filter((function(n){return n.autoGenerated})),f=u.filter((function(t){return n.some((function(n){return n.name.peek()===t.seriesName.peek()}))})),e=u.filter((function(n){return!f.includes(n)})),o=n.filter((function(n){var t=n.name();return!f.some((function(n){return t===n.seriesName.peek()}))}));e.forEach((function(n){return r.remove(n)}));o.forEach((function(n){var u=i.getDefaultSeriesViewCreator(t.chartType())(n,t);u.autoGenerated=!0;r.push(u)}));t.seriesView(r)}))}})),e}return __extends(i,t),i.getDefaultSeriesViewCreator=function(n){return f[n]},i})(t.Loadable.ViewModel);dt.defaultYAxisLabelPadding=38;i.ViewModel=dt})(r=i.Chart||(i.Chart={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,u=(function(t){function i(i,u){var f=t.call(this,i)||this;return f.valueInitialized=!1,f._msPortalFxRerenderTrigger=r(0),f._msPortalFxAriaLive=r(!1),u=u||{},f.controlType=65,f.gaugeSize=n.initObservable(u.gaugeSize,0),f.groupInfos=n.initObservableArray(u.groupInfos),f.itemsDataArray=n.initObservableArray(u.itemsDataArray),f.itemSetting=n.initObservable(u.itemSetting),f.total=n.initObservable(u.total,100),f.startOffset=n.initObservable(u.startOffset,-90),f.totalFormat=n.initObservable(u.totalFormat,"{0}"),f.unitFormat=n.initObservable(u.unitFormat,""),f.infoFormat=n.initObservable(u.infoFormat,""),f.numberFormatOptions=n.initObservable(u.numberFormatOptions,{minimumFractionDigits:0,maximumFractionDigits:1}),f.hoverInfoFormat=n.initObservable(u.hoverInfoFormat,"{0} {1}{2}"),f.selectedInfoFormat=n.initObservable(u.selectedInfoFormat,"{0}/{1}{2}"),f.hoveredUnit=n.initObservable(u.hoveredUnit,"%"),f.disableSelectOnClick=n.initObservable(u.disableSelectOnClick,!1),f.showCenter=n.initObservable(u.showCenter,!0),f.noData=n.initObservable(u.noData,!1),f.ariaLabel=n.initObservable(u.ariaLabel),f.ariaDesc=n.initObservable(u.ariaDesc),f}return __extends(i,t),i.prototype.render=function(){this._msPortalFxRerenderTrigger(this._msPortalFxRerenderTrigger.peek()+1)},i})(t.Loadable.ViewModel);i.ViewModel=u})(r=i.Donut||(i.Donut={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var it=window,i=ko.observable,c=ko.unwrap,l=MsPortalFx.Base.Internal,u=l.ObservableMap,a=MsPortalFx.ViewModels.SelectableSet,rt=MsPortalFx.ViewModels.Controls.Loadable,r=MsPortalFx.Helpers.resolve(),e,v,y,p,w,b,ut,k,d,o,ft,g,f,s,nt,h,tt;(function(n){n[n.None=0]="None";n[n.Horizontal=1]="Horizontal";n[n.Vertical=2]="Vertical"})(e=t.GraphScrollBars||(t.GraphScrollBars={})),(function(n){n[n.AlwaysVisible=0]="AlwaysVisible";n[n.AlwaysHidden=1]="AlwaysHidden";n[n.AppearWhenNodesOutsideOfTheView=2]="AppearWhenNodesOutsideOfTheView"})(v=t.GraphScrollBarsVisibilityMode||(t.GraphScrollBarsVisibilityMode={})),(function(n){n[n.Blade=0]="Blade";n[n.Document=1]="Document";n[n.Document2=2]="Document2";n[n.Document3=3]="Document3"})(y=t.GraphEditorSkinStyle||(t.GraphEditorSkinStyle={})),(function(n){n[n.NodeCenter=0]="NodeCenter";n[n.NodePort=1]="NodePort"})(p=t.EdgeConnectionStrategy||(t.EdgeConnectionStrategy={})),(function(n){n[n.None=0]="None";n[n.MoveEntities=1]="MoveEntities";n[n.AddRemoveEntities=2]="AddRemoveEntities"})(w=t.GraphEditorCapabilities||(t.GraphEditorCapabilities={})),(function(n){n[n.Rebuild=0]="Rebuild";n[n.Incremental=1]="Incremental"})(b=t.EntityRenderMode||(t.EntityRenderMode={})),(function(n){n[n.Normal=1]="Normal";n[n.Strong=2]="Strong"})(ut=t.EdgeStrength||(t.EdgeStrength={})),(function(n){n[n.Single=1]="Single";n[n.Double=2]="Double"})(k=t.EdgeType||(t.EdgeType={})),(function(n){n[n.Solid=1]="Solid";n[n.Dotted=2]="Dotted";n[n.Dashed=3]="Dashed"})(d=t.EdgeStyle||(t.EdgeStyle={})),(function(n){n[n.None=1]="None";n[n.Arrow=2]="Arrow";n[n.Circle=3]="Circle"})(o=t.EdgeMarker||(t.EdgeMarker={})),(function(n){n[n.GraphNode=0]="GraphNode";n[n.GraphEdge=1]="GraphEdge"})(ft=t.GraphEntityType||(t.GraphEntityType={}));g=(function(){function n(n,t,i,r,u){u===void 0&&(u=null);this.id=n;this.entityType=t;this.detailBlade=i;this.detailBladeInputs=r;this.extension=u}return n})();t.SelectedGraphEntity=g;f=(function(){function n(n){n===void 0&&(n=MsPortalFx.getUniqueId());this.commandGroup=i("");this.selected=i(!1);this.selectable=i(!0);this.id=i(n);this.dimmed=i(!1)}return n})();t.GraphEntity=f;s=(function(n){function t(t,r){var u=n.call(this)||this;return u.strength=i(1),u.type=i(k.Single),u.style=i(d.Solid),u.startMarker=i(o.Circle),u.endMarker=i(o.Arrow),u.startNodePadding=i(7),u.endNodePadding=i(7),u.selectable(!1),u.startNodeId=i(t.id()),u.endNodeId=i(r.id()),u}return __extends(t,n),t})(f);t.GraphEdge=s;nt=(function(n){function t(t){var i=n.call(this)||this;return i.extensionViewModel=null,i.extensionTemplate="",i.detailBlade=null,i.detailBladeInputs=null,i.detachedLinkHolder=!1,i.initialRect={x:0,y:0,height:85,width:85},t&&(t.x!==undefined&&(i.initialRect.x=t.x),t.y!==undefined&&(i.initialRect.y=t.y),t.height!==undefined&&(i.initialRect.height=t.height),t.width!==undefined&&(i.initialRect.width=t.width)),i}return __extends(t,n),t})(f);t.GraphNode=nt;h=(function(){function n(){}return n.run=function(n,t,i){if(t.length>0||i.length>0){var f=new u,r=new u;t.forEach((function(n){r.put(n.id,n)}));i.forEach((function(n){f.put(n.id,n)}));(f.count>0||r.count>0)&&n.edges.modify((function(){n.edges.toArray().forEach((function(t){var i,u;r.lookup(t.startNodeId())&&(i=n.graphNodes.lookup(t.endNodeId()),i.detachedLinkHolder&&r.put(i.id(),{id:i.id()}),f.put(t.id(),{id:t.id()}));r.lookup(t.endNodeId())&&(u=n.graphNodes.lookup(t.startNodeId()),u.detachedLinkHolder&&r.put(u.id(),{id:u.id()}),f.put(t.id(),{id:t.id()}));f.lookup(t.id())&&n.edges.remove(t.id())}))}));r.count>0&&n.graphNodes.modify((function(){r.forEach((function(t){n.graphNodes.remove(t.id)}))}));f.dispose();r.dispose()}},n})();t.GraphEntitiesDeletion=h;tt=(function(n){function t(f,o){var c;o===void 0&&(o=y.Blade);c=n.call(this,f)||this;c.ariaLabel=i("");c.scrollBars=i(e.Horizontal|e.Vertical);c.scrollBarsVisibilityMode=i(v.AlwaysVisible);c.edgeConnectionStrategy=i(p.NodeCenter);c.editorCapabilities=i(w.None);c.graphNodes=new u;c.edges=new u;c.gridResolution=i(10);c.widgetAttached=i(!1);c.layoutChanged=i(0);c.getLayoutNoOverlaps=i(null);c.setNodeRects=i((function(){throw new Error("Function called before widget was initialized.");}));c.getNodeRects=i((function(n){n===void 0&&(n=[]);throw new Error("Function called before widget was initialized.");}));c.rectSelectionMode=i(!1);c.entityRenderMode=i(b.Rebuild);c.zoomToFit=i((function(){return r}));c.zoomToFitPadding=i(100);c.zoomIn=i((function(){return r}));c.zoomOut=i((function(){return r}));c.zoomTo100Percent=i((function(){return r}));c.focusOnNode=i((function(){return Q(!0)}));c.focusOnEdge=i((function(){return Q(!0)}));c.bringRectIntoView=i((function(){return Q(!0)}));c.duplicateSelectedEntities=i((function(){return Q()}));c.edgeContextMenuVisible=i(!1);c.disableMouseWheelZoom=i(!1);c.enableLineage=i(!1);c.controlType=67;c.styleSkin=o;var k=new l.ObservableMapUnion(c.lifetimeManager,c.graphNodes,c.edges),d=t.itemMatchesSelection,g=t.createSelection;return c.selectableSet=new a(ko.observableArray(),d,g),c.selection=new a(ko.observableArray(),d,g),c.selectableSet.selectedItems.subscribe(f,(function(n){var t=[];n.forEach((function(n){var i=k.lookup(n.id);i&&t.push(i)}));c.selection.selectedItems(t)})),c.selectableSet.activatedItems.subscribe(f,(function(n){var t=[];n.forEach((function(n){var i=k.lookup(n.id);i&&t.push(i)}));c.selection.activatedItems(t)})),c.addEdge=function(n){return r.then((function(){var r={id:i(n.startNodeId)},u={id:i(n.endNodeId)},t=new s(r,u);c.edges.put(t.id(),t)}))},c.deleteEntities=function(n,t){return r.then((function(){h.run(c,n,t)}))},c}return __extends(t,n),t.itemMatchesSelection=function(n,t){return c(n.id)===c(t.id)},t.createSelection=function(n){return n},t})(rt.ViewModel);t.ViewModel=tt;it.define("Fx/Controls/Graph",[],(function(){return n.Graph}))})(t=n.Graph||(n.Graph={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){n.Graph=FxImpl.Graph})(t=n.Visualization||(n.Visualization={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,f=n,v=70,y=120,p=16,w=16,s,e,b,h,c,u,l,o,a;(function(n){n[n.HexagonLayout=1]="HexagonLayout"})(s=i.Extensions||(i.Extensions={}));e=(function(){function n(n,t){this.latitude=n;this.longitude=t}return n})();i.Location=e,(function(n){n[n.Solid=0]="Solid";n[n.AnimatedDashed=1]="AnimatedDashed"})(b=i.LinkType||(i.LinkType={}));h=(function(){function n(){this.id="";this.location=new e(0,0);this.metadata=new u}return n})();i.Item=h,(function(n){n[n.Source=0]="Source";n[n.Target=1]="Target";n[n.IconOnly=2]="IconOnly"})(c=i.ItemType||(i.ItemType={}));u=(function(){function n(){this.icon=r({type:0,data:"",palette:0});this.iconWidth=r(w);this.iconHeight=r(p)}return n})();i.ItemMetadata=u;l=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=c.Target,t.text=r(""),t.hasFill=r(!1),t.itemScale=r(1),t}return __extends(t,n),t})(u);i.HexagonLayoutItemMetadata=l;o=(function(){function n(){}return n})();i.Events=o;a=(function(n){function t(t,i,u,e){i===void 0&&(i=r([]));var h=this,c=0;return typeof u=="number"?(c=u,e=typeof e=="object"?e:{}):typeof u=="object"&&(e=u),i===void 0&&(i=r([])),c===void 0&&(c=0),e===void 0&&(e={}),h=n.call(this,t)||this,h.controlType=68,h.events=new o,h.width=r(505),h.height=r(319),h.items=i,h.extensions=c,h.extensionOptions=e,h.ariaLabel=f.initObservable(e&&e.ariaLabel,""),h.ariaDesc=f.initObservable(e&&e.ariaDesc,""),h.extensions&s.HexagonLayout&&(h.extensionOptions.hexagonLayout=f.extend(h._getDefaultOptions(),h.extensionOptions.hexagonLayout)),h}return __extends(t,n),t.prototype.dispose=function(){n.prototype.dispose.call(this)},t.prototype._getDefaultOptions=function(){return{showLinks:r(!1),links:r(),rows:r(v),columns:r(y)}},t})(t.Loadable.ViewModel);i.ViewModel=a})(r=i.Map||(i.Map={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=n.initObservable,u,f,e,o,s,h;(function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large";n[n.XLarge=3]="XLarge";n[n.ExtraSmall=4]="ExtraSmall"})(u||(u={}));i.Size=u,(function(n){n[n.Horizontal=0]="Horizontal";n[n.Vertical=1]="Vertical"})(f||(f={}));i.Orientation=f,(function(n){n[n.Top=1]="Top";n[n.Left=2]="Left";n[n.Right=4]="Right";n[n.Bottom=8]="Bottom"})(e||(e={}));i.Alignment=e,(function(n){n[n.Solid=0]="Solid";n[n.CrossHatching=1]="CrossHatching";n[n.DiagonalHatching=2]="DiagonalHatching";n[n.DottedHatching=3]="DottedHatching"})(o||(o={}));i.HatchingPattern=o;s=(function(n){function t(t,i){var u=n.call(this,t,i)||this;return i=i||{},u.barCssClass=r(i.barCssClass,""),u.showBarColor=r(i.showBarColor,!0),u.hatchingPattern=r(i.hatchingPattern,0),u.unitAlignment=r(i.unitAlignment,4),u.captionAlignment=r(i.captionAlignment,1),u.hide=r(i.hide,!1),u.prioritized=r(i.prioritized,!1),u.ariaLabel=r(i.ariaLabel),u}return __extends(t,n),t})(n.ViewModels.Controls.SingleSetting.ViewModel);i.SingleMetric=s;h=(function(t){function i(i,u){var f=t.call(this,i,u)||this;return u=u||{},f.controlType=69,f.items=n.initObservableArray(u.items),f.orientation=r(u.orientation,0),f.size=r(u.size,2),f.visible=r(u.visible,!0),f.ariaLabel=r(u.ariaLabel),f}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=h})(r=i.Metrics||(i.Metrics={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var o=n.Base.Diagnostics,u=new o.Log("MsPortalFx/ViewModels/Controls/ProgressBar"),f=ko.observable,r,e;(function(n){n[n.InProgress=0]="InProgress";n[n.Error=1]="Error";n[n.Warning=2]="Warning";n[n.Success=3]="Success";n[n.Indeterminate=4]="Indeterminate";n[n.IndeterminateVertical=5]="IndeterminateVertical"})(r||(r={}));i.StatusType=r;e=(function(t){function i(i,r){var e=t.call(this,i,r)||this;return e.valuePercentage=f(0),e.status=f(0),e.controlType=71,r=r||{},e.valuePercentage=n.initObservable(r.valuePercentage,0),e.ariaLabel=n.initObservable(r.ariaLabel),e.status=n.initObservable(r.status,0),e.valuePercentage.subscribe(i,(function(n){e.status()!==4&&((isNaN(n)||n===null)&&u.error("View model valuePercentage is "+n+" which is not number."),(n>100||n<0)&&u.error("View model valuePercentage is "+n+" which is not between 0 to 100."))})),e}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=e})(r=i.ProgressBar||(i.ProgressBar={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=(function(t){function i(i,r){var u=t.call(this,i,r)||this;return r=r||{},u.controlType=72,u.errorWarningShape=n.initObservable(r.errorWarningShape,0),u.gaugeSize=n.initObservable(r.gaugeSize,0),u.instance=n.initObservable(r.instance,55),u.instanceQuota=n.initObservable(r.instanceQuota,65),u.total=n.initObservable(r.total,75),u.totalQuota=n.initObservable(r.totalQuota,80),u.totalCaption=n.initObservable(r.totalCaption,"total is {2}"),u.showCenter=n.initObservable(r.showCenter,!0),u.omitTotal=n.initObservable(r.omitTotal,!1),u.noQuota=n.initObservable(r.noQuota,!1),u.maximum=n.initObservable(r.maximum,100),u.startOffset=n.initObservable(r.startOffset,-90),u.unit=n.initObservable(r.unit,"%"),u.valueDisplayFormat=n.initObservable(r.valueDisplayFormat,"{0}"),u.hideTick=n.initObservable(r.hideTick,!1),u.ariaLabel=n.initObservable(r.ariaLabel),u.ariaDesc=n.initObservable(r.ariaDesc),u}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=r})(r=i.QuotaGauge||(i.QuotaGauge={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=n,u=0,e=(function(){function t(n){var t=$.extend(this._getDefaultOptions(),n);this._initOptions(t)}return t.prototype._getDefaultOptions=function(){return{name:String(u=u+1&65535),values:ko.observableArray()}},t.prototype._initOptions=function(t){n.shallowCopyFromObject(this,t,["name","values","viewOptions"])},t})(),f;i.Series=e;f=(function(t){function i(n,i){var u=t.call(this,n)||this,f;return u.controlType=97,f=$.extend(u._getDefaultOptions(),i),u._initOptions(f),u.ariaLabel=r.initObservable(f.ariaLabel,""),u.ariaDesc=r.initObservable(f.ariaDesc,""),u}return __extends(i,t),i.prototype._getDefaultOptions=function(){return{series:ko.observableArray()}},i.prototype._initOptions=function(t){n.shallowCopyFromObject(this,t,["series","xAxis","yAxis","chartType","viewOptions","metricsRules","legendPosition"])},i})(t.Loadable.ViewModel);i.ViewModel=f})(r=i.SimpleChart||(i.SimpleChart={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(t){function i(i,r){var u=t.call(this,i,r)||this;return r=r||{},u.controlType=73,u.gaugeSize=n.initObservable(r.gaugeSize,0),u.hideTick=n.initObservable(r.hideTick,!0),u.maximum=n.initObservable(r.maximum,100),u.startOffset=n.initObservable(r.startOffset,-90),u.unit=n.initObservable(r.unit,""),u.current=n.initObservable(r.current,55),u.captionDisplayFormat=n.initObservable(r.captionDisplayFormat,""),u.valueDisplayFormat=n.initObservable(r.valueDisplayFormat,"{0}"),u.ariaLabel=n.initObservable(r.ariaLabel),u.ariaDesc=n.initObservable(r.ariaDesc),u}return __extends(i,t),i})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=i})(i=t.SingleValueGauge||(t.SingleValueGauge={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var o=FxImpl.Extension,i=ko.observable,r=n.Resources.Strings,f=412,u=(function(){function n(n,t,i){this.status=n;this.statusCode=t;this.errorMessage=i}return n})(),e;t.Status=u;e=(function(){function n(n){var t=this,e,s;this.downloadStatus=i();e=n.addDefaultAuthorizationToken;e&&(this.authorizationOptions={resourceName:e!==!0?n.addDefaultAuthorizationToken.resourceName:""});this.authorizationToken=n.authorizationToken||i("");this.downloadType=n.downloadType||i(1);this.headers=n.headers||i({});this.httpMethod=n.httpMethod||i("GET");this.httpRequestContent=n.httpRequestContent||i("");this.httpRequestContentType=n.httpRequestContentType||i("application/json");this.targetFileName=n.targetFileName||i("");this.targetUri=n.targetUri||i("");this.errorMessage=n.errorMessage||i("");this.targetUriCallback=n.targetUriCallback;this.showUriCallbackConfirmationDialog=n.showUriCallbackConfirmationDialog;this.uriCallbackConfirmationDialogOptions=n.uriCallbackConfirmationDialogOptions;this.showDownloadProgressDialog=n.showDownloadProgressDialog||i(!1);this.downloadProgressDialogOptions=n.downloadProgressDialogOptions;this.onStart=n.onStart;this.onEnd=n.onEnd;this.authorizationOptions&&(s={resourceName:this.authorizationOptions.resourceName||""},o.getRuntime().getAuthorizationToken(s).then((function(n){n&&n.header?t.authorizationToken(n.header):t.downloadStatus(new u(r.FileDownloadCommand.fileDownloadErrorStatus,f,r.FileDownloadCommand.authTokenNotAvailable))}),(function(n){t.downloadStatus(new u(r.FileDownloadCommand.fileDownloadErrorStatus,f,n))})))}return n})();t.Context=e})(i=t.FileDownload||(t.FileDownload={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.Resources.Strings.FileDownload,u=(function(t){function i(i,u){var f=t.call(this,i)||this;return f.controlType=82,f.type=7,f.context=u.context,f.label=n.initObservable(u.label,""),f.disabled=n.initObservable(u.disabled,!1),f.unauthorizedMessage=n.initObservable(u.unauthorizedMessage,r.unauthorizedText),f.asLink=u.asLink,f.ariaLabel=u.ariaLabel?n.initObservable(u.ariaLabel):f.label,f}return __extends(i,t),i.prototype.unauthorized=function(n){this.unauthorizedMessage(n||r.unauthorizedText);this.disabled(!0)},i})(t.Loadable.ViewModel);i.ViewModel=u})(i=t.FileDownloadButton||(t.FileDownloadButton={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var r,u,i;(function(n){n[n.PlayReady=0]="PlayReady";n[n.Widevine=1]="Widevine";n[n.AES=2]="AES"})(r=t.ProtectionType||(t.ProtectionType={})),(function(n){n[n.Smooth=0]="Smooth";n[n.Dash=1]="Dash";n[n.HLS=2]="HLS";n[n.ProgressiveMP4=3]="ProgressiveMP4"})(u=t.StreamingFormatMimeType||(t.StreamingFormatMimeType={}));i=(function(n){function t(t,i){var r=n.call(this,t)||this;return r.controlType=109,i=i||{source:{url:""}},r.autoplay=i.autoplay||!1,r.controls=i.controls||!0,r.poster=i.poster||"",r.logo=i.logo||{enabled:!1},r.source=i.source,r}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=i})(i=t.AzureMediaPlayer||(t.AzureMediaPlayer={}))})(t=n.Unsupported||(n.Unsupported={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";var t;(function(t){var i;(function(t){var i=MsPortalFx.ViewModels.Controls.HotSpot.BaseViewModel,r=n.Composition.Selectable,u=(function(n){function t(t,i,u){var f=n.call(this,t)||this;return i&&(f.selectable=new r.Selectable2(i)),f.clickableDuringCustomize=!!u,f}return __extends(t,n),t})(i);t.ViewModel2=u})(i=t.HotSpot||(t.HotSpot={}))})(t=n.Controls||(n.Controls={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";var e=ko.utils.arrayPushAll,r=ko.computed,i=ko.observable,f=ko.observableArray,u=(function(t){function u(u,o,s,h,c,l){var a,v;return l===void 0&&(l=null),a=t.call(this,u)||this,a.enableValidation=i(!1),a.valid=i(!0),a.validate=i(0),a.label=i(),a.labelPosition=i(),a.validations=f(),a.validationResults=f(),a.delayValidationTimeout=i(n.ViewModels.Controls.ValidatableControl.DefaultDelayValidationTimeout),a.enabled=i(!0),a.infoBalloonContent=i(c),v=a.lifetimeManager,a.initialValue=r(v,(function(){var n=o.getOriginalObservable();return n?n():l})),a.value=r(v,{read:function(){var n=o.getEditableObservable();return n?n():l},write:function(n){var t=o.getEditableObservable();if(t)t(n);else throw new Error("Form should not allow edits until an EditScope is loaded.");}}),a.label(s),a.labelPosition(n.ViewModels.Forms.LabelPosition.Top),h&&e(a.validations,h),c&&(a.infoBalloonContent=i(c)),a.dirty=i(!1),r(v,(function(){a.setDirty(a.value()!==a.initialValue())})),a._enableValidationReactor=r(v,(function(){a.enableValidation(!!(o.getOriginalObservable()&&o.getEditableObservable()))})),a.performValidation=i(null),a.ensureValidation=i(0),a._msPortalFxClearValidation=i(),a._msPortalFxTriggerValidation=i(),a}return __extends(u,t),u.prototype.clearValidation=function(){var n=this._msPortalFxClearValidation();if(n)return Q(n());Q()},u.prototype.triggerValidation=function(){var n=this._msPortalFxTriggerValidation;return n.fxAwaitAndRun(this.lifetimeManager,(function(n){return!!n})).then((function(n){return n()}))},u.prototype.setDirty=function(n){try{this.dirty(n)}catch(t){}},u})(n.ViewModels.Controls.Loadable.ViewModel),o,s,h,c,l,a;t.Field=u;o=(function(n){function t(t,i,u,f,e){var o=n.call(this,t,i,u,f,e)||this;return o.empty=r(o.lifetimeManager,(function(){return!o.value()})),o}return __extends(t,n),t})(u);t.NullableField=o;s=(function(n){function t(t,r,u,f,e){var o=n.call(this,t,r,u,f,e)||this;return o.editing=i(!1),o}return __extends(t,n),t})(o);t.EditableField=s;h=(function(n){function t(t,i,r,u,o,s){var h=n.call(this,t,i,r,o,s,u.length===0||u[0].options().length===0?undefined:u[0].options()[0].value)||this;return h.groups=f(),e(h.groups,u),h}return __extends(t,n),t})(u);t.GroupsField=h;c=(function(n){function t(t,i,r,u,o,s){var h=this;if(u.length===0)throw new Error("'values' array must contain one or more FormOption values.");return h=n.call(this,t,i,r,o,s,u[0].value)||this,h.options=f(),e(h.options,u),h}return __extends(t,n),t})(u);t.OptionsField=c;l=(function(n){function t(t,r,u,f,e,o,s,h,c,l){r===void 0&&(r=null);u===void 0&&(u=null);f===void 0&&(f=0);e===void 0&&(e=10);o===void 0&&(o=[]);s===void 0&&(s=!1);h===void 0&&(h=null);c===void 0&&(c=null);l===void 0&&(l=1);var a=n.call(this,t,r,u,o,h,c)||this;return a.showStepMarkers=i(s),a.min=i(f),a.max=i(e),a.step=i(l),a}return __extends(t,n),t})(u);t.SliderBaseField=l;a=(function(n){function t(t,r,u,f,e){var o=n.call(this,t,r,u,f,e)||this;return o.editing=i(!1),o.valueUpdateTrigger=0,o}return __extends(t,n),t})(s);t.TypableField=a})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(n){function i(i,r,u,f,e,o){var s=n.call(this,i,r,u,f,o)||this;return s.emptyValueText=t(e),s.popupAlignment=3,s.inputAlignment=10,s}return __extends(i,n),i})(n.EditableField);n.EditableComboField=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";var i=ko.observable,t=ko.isObservable,r=(function(){function n(n,r){this.text=t(n)?n:i(n);this.value=t(r)?r():r}return n})(),u;n.Option=r;u=(function(n){function r(r,u,f){var e=n.call(this,r,u)||this;return f!==undefined&&(e.disabled=t(f)?f:i(f)),e}return __extends(r,n),r})(r);n.DisablableOption=u})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(n){function i(i,r,u,f){var e=n.call(this,i,r,u)||this;return f!==undefined&&(e.selected=ko.isObservable(f)?f:t(f)),e}return __extends(i,n),i})(n.DisablableOption);n.SelectableOption=i})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(){"use strict"})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";function t(n){var t=typeof n!="string";return t&&(n=undefined),{valid:t,message:n}}function i(n){return Q(t(n))}n.getValidationResult=t;n.getValidationResultPromise=i;var r=(function(){function n(n){this.type=n}return n})();n.Validation=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(n){function i(i,r){var u=n.call(this,i)||this;return u.message=r,u.isEmptyValid=t(!1),u}return __extends(i,n),i})(n.Validation);n.StaticMessageValidation=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){var r=n.call(this,22,i)||this;return r.compareTo=t,r}return __extends(t,n),t})(n.StaticMessageValidation);n.CaseInsensitiveComparisonValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){var r=n.call(this,6,i)||this;return r.characters=t,r}return __extends(t,n),t})(n.StaticMessageValidation);n.ContainsCharactersValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){var r=n.call(this,4,i)||this;return r.searchString=t,r}return __extends(t,n),t})(n.StaticMessageValidation);n.ContainsValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){var r=n.call(this,21)||this;return r.message=t,r.validate=i,r}return __extends(t,n),t})(n.Validation),i;n.CustomValidationV=t;i=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(t);n.CustomValidation=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){var r=n.call(this,13,i)||this;return r.compareTo=t,r}return __extends(t,n),t})(n.StaticMessageValidation);n.EqualsValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t){return n.call(this,8,t)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.HasDigitValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t){return n.call(this,9,t)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.HasLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t){return n.call(this,11,t)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.HasLowerCaseLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t){return n.call(this,12,t)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.HasPunctuationValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t){return n.call(this,10,t)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.HasUpperCaseLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t){return n.call(this,0,t)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.InvalidValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i,r){var u=n.call(this,14,r)||this;return u.min=t,u.max=i,u}return __extends(t,n),t})(n.StaticMessageValidation);n.LengthRangeValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){var r=n.call(this,23,i)||this;return r.compareTo=t,r}return __extends(t,n),t})(n.StaticMessageValidation);n.LocaleAwareCaseInsensitiveComparisonValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){var r=n.call(this,16,i)||this;return r.max=t,r}return __extends(t,n),t})(n.StaticMessageValidation);n.MaxLengthValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){var r=n.call(this,20,i)||this;return r.max=t,r}return __extends(t,n),t})(n.StaticMessageValidation);n.MaxValueValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){var r=n.call(this,15,i)||this;return r.min=t,r}return __extends(t,n),t})(n.StaticMessageValidation);n.MinLengthValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){var r=n.call(this,19,i)||this;return r.min=t,r}return __extends(t,n),t})(n.StaticMessageValidation);n.MinValueValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){var r=n.call(this,7,i)||this;return r.characters=t,r}return __extends(t,n),t})(n.StaticMessageValidation);n.NotContainsCharactersValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){var r=n.call(this,5,i)||this;return r.searchString=t,r}return __extends(t,n),t})(n.StaticMessageValidation);n.NotContainsValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i,r){var u=n.call(this,3,i)||this;return u.pattern=t,u.successMessage=r||undefined,u}return __extends(t,n),t})(n.StaticMessageValidation);n.NotRegExMatchValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t){return n.call(this,17,t)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.NumericValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i,r){var u=n.call(this,18,r)||this;return u.min=t,u.max=i,u}return __extends(t,n),t})(n.StaticMessageValidation);n.RangeValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i,r){var u=n.call(this,2,i)||this;return u.pattern=t,u.successMessage=r||undefined,u}return __extends(t,n),t})(n.StaticMessageValidation);n.RegExMatchValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t){return n.call(this,1,t)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.RequiredValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){var r=n.call(this,24,t)||this;return r.options=i||{},r}return __extends(t,n),t})(n.StaticMessageValidation);n.UriValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){var t=(function(){function n(n){this.type=n}return n})(),r,u,f,e,o,s,h,c,l,a,v,i,y,p,w,b,k;n.BaseFormat=t;r=(function(n){function t(t){return t===void 0&&(t={}),n.call(this,1)||this}return __extends(t,n),t})(t);n.Html=r;u=(function(n){function t(t){return t===void 0&&(t={}),n.call(this,2)||this}return __extends(t,n),t})(t);n.Text=u;f=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,113)||this;return i.dateFormat=t.dateFormat,i}return __extends(t,n),t})(t);n.Date=f;e=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,114)||this;return i.numberFormat=t.numberFormat,i}return __extends(t,n),t})(t);n.Number=e;o=(function(n){function t(){return n.call(this,107)||this}return __extends(t,n),t})(t);n.Uri=o;s=(function(n){function t(){return n.call(this,108)||this}return __extends(t,n),t})(t);n.Icon=s;h=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,109)||this;return i.iconLookup=t.iconLookup,i}return __extends(t,n),t})(t);n.IconLookup=h;c=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,110)||this;return i.textLookup=t.textLookup,i}return __extends(t,n),t})(t);n.TextLookup=c;l=(function(n){function t(t){var i=n.call(this,111)||this;return t&&(i.height=t.height,i.width=t.width),i}return __extends(t,n),t})(t);n.SvgIcon=l;a=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,112)||this;return i.svgIconLookup=t.svgIconLookup,i.height=t.height,i.width=t.width,i}return __extends(t,n),t})(t);n.SvgIconLookup=a;v=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,1e3)||this;return i.template=t.template,i}return __extends(t,n),t})(t);n.HtmlTemplate=v;i=(function(n){function t(t,i){i===void 0&&(i={});var r=n.call(this,t)||this;return r.label=i.label,r.validations=i.validations,r.validate=i.validate,r.infoBalloonContent=i.infoBalloonContent,r}return __extends(t,n),t})(t);n.FieldFormat=i;y=(function(n){function t(t){return t===void 0&&(t={}),n.call(this,1001,t)||this}return __extends(t,n),t})(i);n.CheckBox=y;p=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,1002,t)||this;return i.emptyValueText=t.emptyValueText,i}return __extends(t,n),t})(i);n.TextBox=p;w=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,1003,t)||this;return i.displaySeparator=t.displaySeparator,i.groups=t.groups,i.maxSelectAllowed=t.maxSelectAllowed,i.multiItemsDisplayFormat=t.multiItemsDisplayFormat,i.multiItemsMaxDisplayFormat=t.multiItemsMaxDisplayFormat,i.multiselect=t.multiselect,i.valueSeparator=t.valueSeparator,i}return __extends(t,n),t})(i);n.MultiselectDropDown=w;b=(function(n){function t(t){return t===void 0&&(t={}),n.call(this,1004,t)||this}return __extends(t,n),t})(i);n.CheckBoxRowSelection=b;k=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,1005,t)||this;return i.options=t.options,i}return __extends(t,n),t})(i);n.DropDown=k})(t=n.Formatters||(n.Formatters={}))})(t=n.Grid2||(n.Grid2={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var i=MsPortalFx.ViewModels.Internal.Selection2.SelectableSet,r=MsPortalFx.initValue,u=(function(n){function t(t,i){var u=n.call(this,t,i)||this;return u.enabled=r(i.enabled,!0),u}return __extends(t,n),t})(i),t;n.SelectionViewModel=u;t=(function(n){function t(t,i){i===void 0&&(i={});var r=n.call(this,t,i)||this;return r.dataNavigator=i.dataNavigator,r.loading=ko.observable(!1),r}return __extends(t,n),t})(MsPortalFx.ViewModels.Controls.Loadable.ViewModel);n.ViewModel=t})(t=n.Base||(n.Base={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function l(n){switch(n){case 2:return t.defaultBlobStoreUploadMaxSize;case 4:return t.defaultAppendBlobStoreUploadMaxSize;case 3:return t.defaultPageBlobStoreUploadMaxSize;case 5:return t.defaultAzureFileServiceUploadMaxSize;default:return t.defaultAppendBlobStoreUploadMaxSize}}function a(n,t,i){return FxImpl.FileUpload.getUploadInfos(n,t,i)}function v(n,t,i){return FxImpl.FileUpload.getResumableUploadInfos(n,t,i)}function y(n,t,i){return FxImpl.FileUpload.getAsyncUploadTasks(n,t,i)}function p(n,t,i){return FxImpl.FileUpload.invokeUploadAction(n,t,i)}function w(n,t,i){return FxImpl.FileUpload.getNextChunk(n,t,i)}function b(n){FxImpl.FileUpload.registerRenewSasUriCallback(n)}var i=ko.observable,u,r,f,e,o,s,h,c;t.defaultFullFileUploadMaxSize=2097152;t.defaultFullFileUploadChunkSize=t.defaultFullFileUploadMaxSize;t.defaultStreamFileUploadMaxSize=10737418240;t.defaultStreamFileUploadChunkSize=1048576;t.defaultBlobStoreUploadMaxSize=524288e7;t.defaultAppendBlobStoreUploadMaxSize=2097152e5;t.defaultPageBlobStoreUploadMaxSize=1099511627776;t.defaultAzureFileServiceUploadMaxSize=1099511627776;t.defaultBlobStoreUploadChunkSize=t.defaultFullFileUploadMaxSize;t.pageBlobPageSize=512;t.defaultResumableTrackingChunkSize=t.defaultBlobStoreUploadChunkSize*4;u=n.Resources.Strings.FileUpload;t.getUploadInfos=a;t.getResumableUploadInfos=v;t.getAsyncUploadTasks=y;t.invokeUploadAction=p;t.getNextChunk=w;t.registerRenewSasUriCallback=b;r=(function(){function i(i){var r=n.extend({},i);this.type=0;this.contentType=r.contentType||0;this.encoding=r.encoding||null;this.maxFileSize=r.maxFileSize||t.defaultFullFileUploadMaxSize;this.chunkSize=r.chunkSize||t.defaultFullFileUploadChunkSize;this.category=r.category||null;this.uploadTarget=r.uploadTarget||null;this.notificationBlade=r.notificationBlade||null;this.resumable=n.initValue(r.resumable,!1);this.disableNotifications=n.initValue(r.disableNotifications,!1);this.resourceStrings=r.resourceStrings||null}return i})();t.FullFileUploadContext=r;f=(function(i){function r(r){var u=this,f=n.extend({},r);return u=i.call(this,f)||this,u.type=1,u.maxFileSize=t.defaultStreamFileUploadMaxSize,u.chunkSize=t.defaultStreamFileUploadChunkSize,u.longRunning=n.initValue(f.longRunning,!1),u}return __extends(r,i),r})(r);t.StreamFileUploadContext=f;e=(function(i){function r(r){var u=i.call(this,r)||this,f=n.extend({},r);return u.type=n.initValue(f.type,2),u.maxFileSize=n.initValue(f.maxFileSize,l(u.type)),u.chunkSize=f.chunkSize||t.defaultBlobStoreUploadChunkSize,u.context=n.initObservable(f.context,null),u.addFilenameToSasUri=n.initObservable(f.addFilenameToSasUri,!1),u.useDefaultFileInfoContext=n.initObservable(f.useDefaultFileInfoContext,!0),u.sasUriCommand=n.initObservable(f.sasUriCommand,null),u.useRenewSasUriCallback=n.initValue(u.useRenewSasUriCallback,!1),u}return __extends(r,i),r})(r);t.BlobStoreFileUploadContext=e;o=(function(){function n(){this.uploadResult=i(null);this._msPortalFxUploadAction=i(0);this._msPortalFxActionTrigger=i(0)}return n.prototype.resume=function(){this._msPortalFxUploadAction(2);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.pause=function(){this._msPortalFxUploadAction(1);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.cancel=function(){this._msPortalFxUploadAction(3);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.dispose=function(){this._msPortalFxUploadAction(4);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n})();t.UploadTask=o;s=(function(){function n(n){this.uploadInfo=n}return n.prototype.resume=function(n){var t=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:t.id(),name:t.name},2,n)},n.prototype.pause=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},1)},n.prototype.cancel=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},3)},n.prototype.complete=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},7)},n.prototype.abort=function(n){var t=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:t.id(),name:t.name},8,n)},n.prototype.dispose=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},4)},n.prototype.getNextChunk=function(n,t){var i=this.uploadInfo;if(i.type()!==1)throw new Error(u.notSupported);return FxImpl.FileUpload.getNextChunk({id:i.id(),name:i.name},n,t)},n})();t.AsyncUploadTask=s;h=(function(){function t(n,t,r){this.uploadInfo=n;this._msPortalFxActionCallback=i(t);this._msPortalFxGetNextChunkCallback=i(r)}return t.prototype.resume=function(n){return this._invoke(2,n)},t.prototype.pause=function(){return this._invoke(1)},t.prototype.cancel=function(){return this._invoke(3)},t.prototype.complete=function(){return this._invoke(7)},t.prototype.abort=function(n){return this._invoke(8,n)},t.prototype.dispose=function(){return this._invoke(4)},t.prototype.getNextChunk=function(n,t){var i=this.uploadInfo;return this._execCallback(this._msPortalFxGetNextChunkCallback,{id:i.id(),name:i.name},n,t)},t.prototype._invoke=function(n,t){var i=this.uploadInfo;return this._execCallback(this._msPortalFxActionCallback,[{id:i.id(),name:i.name}],n,t)},t.prototype._execCallback=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return n.tryImmediateResolve(Q(t()),(function(n){return n?Q(n.apply(null,r)):FxImpl.QReject(u.notReady)}))},t})();t.AsyncUploadWidgetTask=h;c=(function(){function n(n){this.id=n.id;this.name=n.name;this.mimetype=n.mimetype;this.size=n.size;this.valid=i(!0)}return n})();t.SelectedFile=c})(i=t.FileUpload||(t.FileUpload={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function e(n,r,u){var f=u?{uploadKey:n,action:r,context:u}:{uploadKey:n,action:r};return t.uploadActionEndPoint.invoke(i.client,"fx",f)}function u(n,t,u){var f=Q.defer();return i.client.acquireObject(r,"fx",{uploadKeys:t,category:u}).then((function(t){n.registerForDispose(t);var i=t.getValue();f.resolve(i.uploads)})),f.promise}function o(n,t,u){var f=Q.defer();return i.client.acquireObject(r,"fx",{uploadKeys:t,category:u,resumable:!0}).then((function(t){n.registerForDispose(t);var i=t.getValue();f.resolve(i.uploads)})),f.promise}function s(n,t,i){var r=Q.defer();return u(n,t,i).then((function(n){var t=[];n&&n.length>0&&(t=n.map((function(n){return new f.AsyncUploadTask(n)})));r.resolve(t)})),r.promise}function h(t,i,r){var u;return(i!==undefined||r!==undefined)&&(u={startByte:i,chunkSize:r}),n.FileUpload.invokeUploadAction(t,9,u)}function c(n){t.uploadRenewSasUriEndPoint.register(i.client,MsPortalFx.Base.Constants.Shell,(function(t){return Q(n(t.fileInfo,t.context))}))}var f=MsPortalFx.ViewModels.FileUpload,i=n.Rpc,r="FxImpl.FileUpload.getUploadInfos";t.getUploadInfosEndPoint=new i.ProxiedObjectTypeDefinition(r);t.uploadActionEndPoint=new i.ActionEndPointDefinition("FxImpl.FileUpload.uploadActionMethodName");t.uploadRenewSasUriEndPoint=new i.FuncEndPointDefinition("FxImpl.FileUpload.uploadRenewSasUri");t.invokeUploadAction=e;t.getUploadInfos=u;t.getResumableUploadInfos=o;t.getAsyncUploadTasks=s;t.getNextChunk=h;t.registerRenewSasUriCallback=c})(t=n.FileUpload||(n.FileUpload={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";var i=n.ViewModels.Controls.FileDownload,u=(function(n){function t(t,i,r){return n.call(this,t,i,r)||this}return __extends(t,n),t})(i.Status),r;t.Status=u;r=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t})(i.Context);t.Context=r})(i=t.FileDownload||(t.FileDownload={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=(function(t){function i(i,r,u,f){var e=t.call(this,i,r,u,f)||this,o;return e.controlType=7,o=e._options,e.inlineLabel=o.inlineLabel||!1,e.ariaLabel=n.initObservable(o.ariaLabel,""),e}return __extends(i,t),i})(t.Base.Input.ViewModel);i.ViewModel=r})(i=t.CheckBox||(t.CheckBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=n.initObservable,f=(function(n){function t(t,i){var f=n.call(this,t,i)||this;return f.controlType=23,f.htmlTemplate=u(i.htmlTemplate),f.innerViewModel=i.innerViewModel,f.isolated=i.isolated!==!1,f.validate=r(0),f.valid=r(!0),f.dirty=r(!1),f.loading=r(!1),f._msPortalFxClearValidation=r(),f._msPortalFxTriggerValidation=r(),f}return __extends(t,n),t.prototype.clearValidation=function(){var n=this._msPortalFxClearValidation();return n?Q(n()):Q()},t.prototype.triggerValidation=function(){var i=this._msPortalFxTriggerValidation,r=i(),n,t;return r?Q(r()):(n=Q.defer(),t=this.lifetimeManager.createChildLifetime(),i.subscribe(t,(function(i){i().then(n.resolve).catch(n.reject).finally((function(){t.dispose()}))})),n.promise)},t})(t.Base.LabelAndBalloon.ViewModel);i.ViewModel=f})(i=t.CustomHtml||(t.CustomHtml={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=(function(n){function t(t,i,u,f){var e=this,o=f||{};return r.isNullOrUndefined(i)||typeof i.createEditScopeAccessor=="function"||(o=i),e=n.call(this,t,i,u,f)||this,e.controlType=91,e.showStepMarkers=r.initObservable(o.showStepMarkers,!0),e.customValues=r.initObservable(o.customValues,[1,2,3,4,5,6,7,8,9,10]),e.ariaLabel=r.initObservable(o.ariaLabel),e.legends=o.legends,e.hideTextbox=r.initObservable(o.hideTextbox,!1),e}return __extends(t,n),t})(t.Base.Input.ViewModel);i.ViewModel=u})(i=t.CustomValueSlider||(t.CustomValueSlider={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=ko.computed,f=(function(t){function i(i,f,e,o){var s=this,h=o||{},c;return r.isNullOrUndefined(f)||typeof f.createEditScopeAccessor=="function"||(h=f),s=t.call(this,i,f,e,o)||this,s.valueSeparator=";",c=function(t){return n.isNumeric(t)?t.toString():""},s.controlType=111,s.showStepMarkers=r.initObservable(h.showStepMarkers,!0),s.customValues=r.initObservable(h.customValues,[1,2,3,4,5,6,7,8,9,10]),s.ariaLabel=r.initObservable(h.ariaLabel),s.legends=h.legends,s.hideTextbox=r.initObservable(h.hideTextbox,!1),s.start=u(i,{read:function(){var t=null,i=(s.value()||"").split(s.valueSeparator),n;return i.length===2&&(n=parseFloat(i[0]),isNaN(n)||(t=n)),t},write:function(n){s.value(c(n)+s.valueSeparator+c(s.end()))}}),s.end=u(i,{read:function(){var t=null,i=(s.value()||"").split(s.valueSeparator),n;return i.length===2&&(n=parseFloat(i[1]),isNaN(n)||(t=n)),t},write:function(n){s.value(c(s.start())+s.valueSeparator+c(n))}}),s}return __extends(i,t),i})(t.Base.Input.ViewModel);i.ViewModel=f})(i=t.CustomRangeSlider||(t.CustomRangeSlider={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=(function(t){function i(i,r,u,f){var e=t.call(this,i,r,u,f)||this,o;return e.controlType=25,o=e._options,e.enabledDateTimeRange=o.enabledDateTimeRange||ko.observable(new n.DateUtil.DateTimeRange),e.allowEmpty=!!o.allowEmpty,e.ariaLabel=n.initObservable(o.ariaLabel,""),e}return __extends(i,t),i.prototype._setEditScopeAccessors=function(n){var i=this;t.prototype._setEditScopeAccessors.call(this,n);this._options.viewModelValueChangesAreClean||this.resetDirtyComputed((function(){var n=i.value(),t=i.initialValue();n||t?n&&t?i.setDirty(n.getFullYear()!==t.getFullYear()||n.getMonth()!==t.getMonth()||n.getDate()!==t.getDate()):i.setDirty(!0):i.setDirty(!1)}))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=r})(i=t.DatePicker||(t.DatePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=ko.observable,r=Math.floor,f=(function(t){function i(i,r,f,e){var o=t.call(this,i,r,f,e)||this,s,h;return o.showSeconds=!0,o.controlType=26,s=o._options,o.enabledDateTimeRange=s.enabledDateTimeRange||u(new n.DateUtil.DateTimeRange),o.showTimezoneDropdown=n.initObservable(s.showTimezoneDropdown,!1),o.timezoneOffset=n.initObservable(s.timezoneOffset,null),o.allowEmpty=!!s.allowEmpty,o.emptyTimeValueText=n.initObservable(s.emptyTimeValueText,""),o.ariaLabel=n.initObservable(s.ariaLabel,""),h=s.showSeconds,n.isNullOrUndefined(h)||(o.showSeconds=h),o}return __extends(i,t),i.prototype._setEditScopeAccessors=function(n){var i=this;t.prototype._setEditScopeAccessors.call(this,n);this._options.viewModelValueChangesAreClean||this.resetDirtyComputed((function(){var n=i.value(),t=i.initialValue();n||t?n&&t?i.setDirty(r(n.getTime()/1e3)!==r(t.getTime()/1e3)):i.setDirty(!0):i.setDirty(!1)}))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=f})(i=t.DateTimePicker||(t.DateTimePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=n.DateUtil.DateTimeRange,r=Math.floor,f=(function(t){function i(i,r,f,e){var o=t.call(this,i,r,f,e)||this,s;return o.controlType=27,s=o._options,o.startDateTimeEnabledRange=n.initObservable(s.startDateTimeEnabledRange,new u),o.endDateTimeEnabledRange=n.initObservable(s.endDateTimeEnabledRange,new u),o.showTimezoneDropdown=n.initObservable(s.showTimezoneDropdown,!1),o.timezoneOffset=n.initObservable(s.timezoneOffset,null),o.emptyTimeValueText=n.initObservable(s.emptyTimeValueText,""),o.displayFieldsInline=n.initObservable(s.displayFieldsInline,!1),o.emptyValueText=n.initObservable(s.emptyValueText,""),o.ariaLabel=n.initObservable(s.ariaLabel,""),o}return __extends(i,t),i.prototype._setEditScopeAccessors=function(n){var i=this;t.prototype._setEditScopeAccessors.call(this,n);this._options.viewModelValueChangesAreClean||this.resetDirtyComputed((function(){var n=i.value(),t=i.initialValue();n||t?n&&t?i.setDirty(r(n.startDateTime().getTime()/1e3)!==r(t.startDateTime().getTime()/1e3)||r(n.endDateTime().getTime()/1e3)!==r(t.endDateTime().getTime()/1e3)):i.setDirty(!0):i.setDirty(!1)}))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=f})(i=t.DateTimeRangePicker||(t.DateTimeRangePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(t){function i(i,r,u,f){var e=t.call(this,i,r,u,f)||this;return e.controlType=92,e.ariaLabel=r&&n.initObservable(r.ariaLabel,""),e}return __extends(i,t),i})(n.ViewModels.Forms.Base.Editable.ViewModel);t.ViewModel=i})(i=t.DayPicker||(t.DayPicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.ViewModels.Forms.Base,i=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this;return f._msPortalFxLogValidation=ko.observable(),f.controlType=3,f}return __extends(t,n),t})(r.Options.ViewModel);t.ViewModel=i;n.ViewModels.Forms.DropDown={};n.ViewModels.Forms.DropDown.ViewModel=i})(i=t.DropDown||(t.DropDown={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=ko.observableArray,i=(function(t){function i(i,u,f,e){var o=t.call(this,i,u,f,e)||this,s;return o.controlType=98,s=o._options,o.items=s.items||r(),o.filter=s.filter||!1,o.customFilter=s.customFilter,o.filterPlaceholder=s.filterPlaceholder||"",o.filterString=n.initObservable(""),o.isPopUpOpen=n.initObservable(!1),o.multiItemDisplayText=s.multiItemDisplayText,o.placeholder=s.placeholder||"",o.multiselect=s.multiselect||!1,o.selectAll=s.selectAll||!1,o.selectAllOverride=s.selectAllOverride,o.suppressSelectedUpdate=n.initObservable(!1),o.ariaLabel=n.initObservable(s.ariaLabel,""),o}return __extends(i,t),i})(n.ViewModels.Forms.Base.Input.ViewModel);t.ViewModel=i;n.ViewModels.Forms.GroupDropDown={};n.ViewModels.Forms.GroupDropDown.ViewModel=i})(i=t.GroupDropDown||(t.GroupDropDown={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this;return f.controlType=99,f}return __extends(t,n),t})(n.ViewModels.Forms.Base.Editable.ViewModel);t.ViewModel=i})(i=t.DurationPicker||(t.DurationPicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function g(n,t){var u=n.items();if(u.length===1){for(var i=u[0],f=[],r=[];i;)f.push(new h(i.text(),i.value)),i.children&&(r=r.concat(i.children.map((function(n){return n.text(i.text()+t+n.text()),n})))),i=r.shift();n.items(f)}}function b(n){return(n.text()||"").toLocaleLowerCase()}function nt(n,t){var i=b(n),r=b(t);return i===r?0:i>r&&1||-1}function tt(n){return n.sort(nt)}function v(n,t,i){var r=n[i];r?r.includes(t)||r.push(t):n[i]=[t]}function y(n,t,i,r){var o,u,f,e;for(r===void 0&&(r=" "),o=t.length,u=0;u<o;u++)for(f=t[u],n.addWord(f,i),e=u+1;e<o;e++)f=f+r+t[e],n.addWord(f,i)}function it(n,t,i,r){y(n,t.split(" "),i);y(n,t.split(r),i,r)}function rt(n){var t={},i=[];return n.forEach((function(n){var r=n.text();t.hasOwnProperty(r)||(t[r]=i.push(n))})),i}function d(n){return n?(t=n.lineMatches).concat.apply(t,n.children.map(d)):[];var t}var p=n.ViewModels.Forms,s=ko.observable,w=ko.computed,h=(function(n){function t(t,i,r){var u=n.call(this,t,i)||this;return u.children=r||[],u}return __extends(t,n),t})(p.Option),u,f,c,e,l,k,a,r,o,i;t.HierarchicalFormOptionItem=h;u=(function(){function n(n){this.children=[];this.lineMatches=[];this._value=n&&n.toLocaleLowerCase()}return n.prototype.getChild=function(n){return this.children.first((function(t){return t._value===n.toLocaleLowerCase()}))},n.prototype.matchesValue=function(n){return this._value&&this._value===n.toLocaleLowerCase()},n})();t.Node=u;f=(function(){function n(n,t,i){var r=this,u;this._filterInProgress=!1;n.registerForDispose(this);this._viewModel=t;this._filterOptions=i;u=this._ltm=n.createChildLifetime();ko.reactor(u,(function(){r._filterInProgress=!0;var n=r.filterData(t.filterText());t.filterInProgress(r._viewModel.items().length!==n.length);t.filteredItems(n);r._filterInProgress=!1}))}return n.prototype.dispose=function(){this._ltm&&(this._ltm.dispose(),this._ltm=null)},n.prototype.filterData=function(n){return this._viewModel.items().filter((function(t){var i;return ko.unwrap(t.doNotFilter)||(i=t.text())&&i.toLowerCase().includes(n.toLowerCase())}))},n.prototype._setfilteredItems=function(n){this._viewModel.filteredItems(n)},n})();t.SearchFilter=f;c=(function(n){function t(t,i,r){var u=this,e=r.delimiter||"\\",f=t.createChildLifetime();return i.items.subscribeAndRun(f,(function(){g(i,e)})),u=n.call(this,t,i,r)||this,u._ltm.registerForDispose(f),u}return __extends(t,n),t})(f);t.TreeSearchFilter=c;e=(function(){function n(n,t,i){var u=this;this._filterInProgress=!1;this._directMatchDictionary={};this._viewModel=t;this._filterOptions=i;this._prefixTree=new r;w(n,(function(){u._filterInProgress||(u._directMatchDictionary={},u._prefixTree=new r,u._setFilteredItems(u._viewModel.items()))}));t.filterText.subscribe(n,(function(n){u._filterInProgress=!0;var i=u.filterData(n);t.filterInProgress(u._viewModel.items().length!==i.length);t.filteredItems(i);u._filterInProgress=!1}))}return n.prototype.filterData=function(n){var r=this,t=[],i={};return this._prefixTree.getMatches(n).forEach((function(n){i[n]||(t=t.concat(r._directMatchDictionary[n]),i[n]=!0)})),tt(t)},n.prototype._setFilteredItems=function(n){var t=this;n.forEach((function(n){return t._addToSearchOnInitialize(n,n.text())}));this._viewModel.filteredItems(n);this._viewModel.filterText("")},n.prototype._addToSearchOnInitialize=function(n,t){v(this._directMatchDictionary,n,t);y(this._prefixTree,t.split(" "),t)},n.prototype._setfilteredItems=function(n){this._viewModel.filteredItems(n)},n})();t.SearchFilterPrefixTree=e;l=(function(n){function t(t,i,u){var f=n.call(this,t,i,u)||this;return f._childPrefixTree=new r,f._childMatchDictionary={},f}return __extends(t,n),t.prototype.filterData=function(n){var t=this._prefixTree.getMatches(n),i=this._childPrefixTree.getMatches(n);return rt(this._processMatches(t,i))},t.prototype._setFilteredItems=function(t){this._directMatchDictionary={};this._childMatchDictionary={};this._childPrefixTree=new r;t.length===1&&(this._filterOptions.delimiter=this._filterOptions.delimiter||"\\",t=this._flattenTree(t[0]),this._viewModel.items(t));n.prototype._setFilteredItems.call(this,t)},t.prototype._addToSearchOnInitialize=function(){},t.prototype._processMatch=function(n,t){var i=this,r=[],u=[];return n.forEach((function(n){t[n]||(r.push(i._directMatchDictionary[n]||[]),u.push(i._childMatchDictionary[n]||[]),t[n]=!0)})),{filteredResults:[].concat.apply([],r),filteredChildResults:[].concat.apply([],u),isResultProcessed:t}},t.prototype._processMatches=function(n,t){var i=this._processMatch(n,{}),r=this._processMatch(t,i.isResultProcessed);return[].concat(i.filteredResults,r.filteredResults,i.filteredChildResults,r.filteredChildResults)},t.prototype._flattenTree=function(n){for(var i=this,t=n,f=[],r=[],e=function(){var e=new h("",""),o=t===n;u._updateCurrentItem(e,e,t.text(),t.text(),o?0:1);v(o?u._directMatchDictionary:u._childMatchDictionary,e,e.text());f.push(e);t.children&&(r=r.concat(t.children.map((function(n){var r=n.text(),u=t.text()+i._filterOptions.delimiter+r;return i._updateCurrentItem(n,t,r,u,0),v(i._directMatchDictionary,e,t.text()),n}))));t=r.shift()},u=this;t;)e();return f},t.prototype._updateCurrentItem=function(n,t,i,r,u){var f=u===0&&this._prefixTree||u===1&&this._childPrefixTree;f&&it(f,i,r,this._filterOptions.delimiter);n.text(n.value=r)},t})(e);t.TreeSearchFilterPrefixTree=l;k=[function(n,t,i){var r=i.algorithmType===1?e:f;return new r(n,t,i)},function(n,t,i){var r=i.algorithmType===1?l:c;return new r(n,t,i)}];a=(function(){function n(){}return n.prototype.getSearchFilter=function(n,t,i){i||(t.filterOptions=i={datasetType:0});var r=k[i.datasetType];return r?r(n,t,i):null},n})();t.FilterFactory=a;r=(function(){function n(){this._root=new u}return n.prototype.addWord=function(n,t){var i=this._root.lineMatches;n.split("").reduce((function(n,t){var i=n.getChild(t);return i||n.children.push(i=new u(t)),i}),this._root);i.includes(t)||i.push(t)},n.prototype.getMatches=function(n){var t=this._root,i,r=n.split("").first((function(n){return i=t.getChild(n),!i||!(t=i)}));return r?d(t):[]},n})();t.PrefixTree=r;o=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this,e,o,h;return f._msPortalFxLogValidation=s(),f.filteredItems=ko.observableArray(),f.filterText=s(""),f.noRowsMessage=s(""),f.filterInProgress=s(!1),f.controlType=12,e=f._options,e.options||(e.options=ko.observableArray()),o=f.value(),o&&f.filterText(o),h=f._values=e.options,f.populated=w(t,(function(){return!!h().length})),(new a).getSearchFilter(t,f,f._options.filterOptions),f}return __extends(t,n),Object.defineProperty(t.prototype,"items",{get:function(){return this._values},enumerable:!0,configurable:!0}),t})(p.Base.EditableComboBox.ViewModel);o=__decorate([n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Object,Object])],o);t.ViewModel=o;i=n.ViewModels.Forms.FilterComboBox={};i.HierarchicalFormOptionItem=h;i.Node=u;i.SearchFilter=f;i.TreeSearchFilter=c;i.SearchFilterPrefixTree=e;i.TreeSearchFilterPrefixTree=l;i.FilterFactory=a;i.PrefixTree=r;i.ViewModel=o})(i=t.FilterComboBox||(t.FilterComboBox={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=(function(n){function t(t,i,u,f){var e=n.call(this,t,i,u,f)||this,o;return e.controlType=13,o=e._options,e.rows=r.initObservable(o.rows,7),e.spellcheck=i&&i.spellcheck?i.spellcheck:ko.observable(!1),e.ariaLabel=r.initObservable(o.ariaLabel,""),e}return __extends(t,n),t})(t.Base.Typable.ViewModel);i.ViewModel=u})(i=t.MultiLineTextBox||(t.MultiLineTextBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=n.ViewModels.Forms,i=ko.observable,r=(function(t){function r(r,u,f,e){var o=t.call(this,r,u,f,e)||this,s;return o._msPortalFxLogValidation=ko.observable(),o.controlType=8,s=o._options,o.valueInitialized=!1,o.valueSeparator=";",o.popupShown=i(!1),o.multiselect=s.multiselect||i(!0),o.showSelectAll=s.showSelectAll||i(!1),o.showTotal=s.showTotal||!1,o.formatSetting=s.formatSetting||null,o.maxSelectAllowed=s.maxSelectAllowed||i(),o.multiItemsDisplayFormat=s.multiItemsDisplayFormat||i(""),o.multiItemsMaxDisplayFormat=s.multiItemsMaxDisplayFormat||i(""),o.ariaLabel=n.initObservable(s.ariaLabel),o.filter=s.filter,o.filterPlaceholder=s.filterPlaceholder,o.customFilter=s.customFilter,o}return __extends(r,t),r})(u.Base.Groups.ViewModel);t.ViewModel=r;n.ViewModels.Forms.MultiSelectDropDown={};n.ViewModels.Forms.MultiSelectDropDown.ViewModel=r})(i=t.MultiSelectDropDown||(t.MultiSelectDropDown={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=(function(n){function t(t,i,u,f){var e=n.call(this,t,i,u,f)||this,o;return e.controlType=10,o=e._options,e.min=r.initObservable(o.min,null),e.max=r.initObservable(o.max,null),e.decimalPoint=r.initObservable(o.decimalPoint,2),e.invalidText=r.initValue(o.invalidText,r.Resources.Strings.NumericTextBox.invalidText),e.placeholder=r.initObservable(o.placeholder,null),e.allowEmpty=r.initValue(o.allowEmpty,!1),e.ariaLabel=r.initObservable(o.ariaLabel,""),e}return __extends(t,n),t})(t.Base.Typable.ViewModel);i.ViewModel=u})(i=t.NumericTextBox||(t.NumericTextBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=(function(n){function t(t,i,u,f){var e=n.call(this,t,i,u,f)||this,o;return e.controlType=29,e.showValidationMessagesBelowControl=!0,o=e._options,e.requestUrl=r.initObservable(o.requestUrl,null),e.buttonText=r.initObservable(o.buttonText,null),e.popupWidth=r.initObservable(o.popupWidth,null),e.popupHeight=r.initObservable(o.popupHeight,null),e.primary=r.initObservable(o.primary,!0),e.ariaLabel=o.ariaLabel?r.initObservable(o.ariaLabel):e.buttonText,e.beforeRequest=o.beforeRequest||Q,e}return __extends(t,n),t})(t.Base.Input.ViewModel);i.ViewModel=u})(i=t.OAuthButton||(t.OAuthButton={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=(function(t){function i(i,r,u,f){var e=t.call(this,i,r,u,f)||this;return e.controlType=4,e.showValidationMessagesBelowControl=!0,f=e._options,e.sizeToContent=f.sizeToContent!==undefined?f.sizeToContent:!0,e.radioButtonStyle=!!f.radioButtonStyle,e.singleItemPerLine=!!f.singleItemPerLine,e.ariaLabel=n.initObservable(f.ariaLabel,""),e}return __extends(i,t),i})(t.Base.Options.ViewModel);i.ViewModel=r})(i=t.OptionsGroup||(t.OptionsGroup={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,f=r.ViewModels,u=(function(n){function t(t,i,u,f){var e=n.call(this,t,i,u,f)||this;return e.controlType=5,e.emptyValueText=e._options.emptyValueText||ko.observable(),e.ariaLabel=r.initObservable(e._options.ariaLabel,""),e.showValidationsAsPopup=!!(e._options&&e._options.showValidationsAsPopup),e.showValidationsAsPopup&&(e.showValidationMessagesBelowControl=!0,e.valueUpdateTrigger=4),e}return __extends(t,n),t})(t.Base.Typable.ViewModel);i.ViewModel=u})(i=t.PasswordBox||(t.PasswordBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.computed,u=(function(t){function i(i,u,f,e){var o=t.call(this,i,u,f,e)||this,s;return o.controlType=9,o.valueSeparator=";",s=function(t){return n.isNumeric(t)?t.toString():""},o.start=r(o.lifetimeManager,{read:function(){var t=null,r=(o.value()||"").split(o.valueSeparator),i;return(r.length===2&&(i=parseFloat(r[0]),isNaN(i)||(t=i)),n.isNumeric(o.min())&&n.isNumeric(t))?Math.max(t,o.min()):t},write:function(n){o.value(s(n)+o.valueSeparator+s(o.end()))}}),o.end=r(o.lifetimeManager,{read:function(){var t=null,r=(o.value()||"").split(o.valueSeparator),i;return(r.length===2&&(i=parseFloat(r[1]),isNaN(i)||(t=i)),n.isNumeric(o.max())&&n.isNumeric(t))?Math.min(t,o.max()):t},write:function(n){o.value(s(o.start())+o.valueSeparator+s(n))}}),o}return __extends(i,t),i})(t.Base.Slider.ViewModel);i.ViewModel=u})(i=t.RangeSlider||(t.RangeSlider={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=n,r=ko.unwrap,i=ko.observable,f=ko.computed,e=(function(t){function e(e,o){var s=t.call(this,e)||this;return s.active=i(!1),s.children=ko.observableArray(),s.dirty=i(!1),s.name=i(),s.width=i(),s.submit=i(),s.populateSection=i(),s.style=i(1),s.valid=i(!0),s.validate=null,s.tabSection=i(),s.tabHasBeenLoaded=i(!1),s.cssClass=i(),s.controlType=15,u.isNullOrUndefined(o)&&(o={}),s.children=o.children||s.children,s.cssClass=n.initObservable(o.cssClass,""),s.minHeight=o.minHeight,s.name=o.name||s.name,s.populateSection=o.populateSection||s.populateSection,s.style=o.style||s.style,s.submit=o.submit||s.submit,s.tabStyle=o.tabStyle||0,s.visible=n.initObservable(o.visible,!0),s.width=o.width||s.width,s.leftLabelPosition=o.leftLabelPosition,s.leftLabelWidth=o.leftLabelWidth,f(s.lifetimeManager,(function(){var n=s.children(),t=n.some((function(n){var t=r(n);return t.dirty?t.dirty():!1})),i=s.tabSection&&s.tabSection()&&s.tabSection().children().some((function(n){var t=r(n);return t.dirty?t.dirty():!1})),u=n.some((function(n){var t=r(n);return t.valid?!t.valid():!1})),f=n.some((function(n){var t=r(n);return t.loading?t.loading():!1}));s.dirty(t||i);s.valid(!u);s.loading(f)})),s}return __extends(e,t),e.prototype.clearValidation=function(){return Q.all(this.children().map((function(n){return n.clearValidation()})))},e.prototype.triggerValidation=function(){var t=this.children().filter((function(n){return typeof n.triggerValidation=="function"})).map((function(n){return n.triggerValidation()}));return Q.all(t).then((function(t){return t.every(n.identity)}))},e})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=e})(i=t.Section||(t.Section={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var r;(function(r){"use strict";var u=(function(t){function i(i,r,u,f){var e=t.call(this,i,r,u,f)||this,o;return e.controlType=11,o=e._options,e.showValue=n.initObservable(o.showValue,!0),e.displayText=n.initObservable(o.displayText,""),e.icon=n.initObservable(o.icon),e.locked=n.initObservable(o.locked,!1),e.infoBalloonText=n.initObservable(o.infoBalloonText,""),e.lockedBalloonText=n.initObservable(o.lockedBalloonText,""),e.infoBalloonLink=n.initObservable(o.infoBalloonLink,new n.ViewModels.Controls.Balloon.Link),e.ariaLabel=n.initObservable(o.ariaLabel),e.isDefault=ko.computed(i,(function(){return e.defaultValue()===e.value()})),e}return __extends(i,t),i})(i.Base.Editable.ViewModel),f;r.ViewModelBase=u;f=(function(i){function r(r,u,f,e){var s=i.call(this,r,u,f,e)||this,o=s._options;return o&&o.onClick?s._msPortalFxOnClick=function(){return o.onClick()}:s.selectable=new t.Selectable({allowUnselect:!1,selectedValue:o.selectedValue||!0,isSelected:o.initialState&&o.initialState.selectable&&o.initialState.selectable.isSelected,isActivated:o.initialState&&o.initialState.selectable&&o.initialState.selectable.isActivated}),s._options.viewModelValueChangesAreClean||s.resetDirtyComputed((function(){s.setDirty(!n.deepEquals(s.value(),s.initialValue()))})),s}return __extends(r,i),r})(u);r.ViewModel=f})(r=i.Selector||(i.Selector={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=n.Resources.Strings.ViewModels.Controls.CreatorAndSelector,f,e;(function(n){n[n.CreateOnly=0]="CreateOnly";n[n.SelectOnly=1]="SelectOnly";n[n.CreateOrSelect=2]="CreateOrSelect"})(f=i.Mode||(i.Mode={}));e=(function(n){function t(t,i,e,o){var s=n.call(this,t,i,e,o)||this,h;return s.textBoxLabel=r(""),s.selectExistingLinkDisplayText=r(""),s.createNewLinkDisplayText=r(""),s.controlType=83,h=s._options,s.createNew=h.createNew||r(!0),s.textBoxLabel=h.textBoxLabel||r(""),s.selectExistingLinkDisplayText=h.selectExistingLinkDisplayText||r(u.selectExisting),s.createNewLinkDisplayText=h.createNewLinkDisplayText||r(u.createNew),s.displayMode=h.displayMode||r(f.CreateOrSelect),s.valueUpdateTrigger=h.valueUpdateTrigger||4,s}return __extends(t,n),t})(t.Selector.ViewModel);i.ViewModel=e})(i=t.CreatorAndSelector||(t.CreatorAndSelector={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=n.Resources.Strings.ViewModels.Controls.CreatorAndSelector,o=n.ViewModels,r=ko.observable,f,e;(function(n){n[n.CreateOnly=0]="CreateOnly";n[n.SelectOnly=1]="SelectOnly";n[n.CreateOrSelect=2]="CreateOrSelect"})(f=i.Mode||(i.Mode={}));e=(function(n){function t(t,i,e,o){var s=this,c,h;return i||(o={defaultValue:r({value:"",createNew:!0})}),!i||i.valid&&i.sections||(c=i.defaultValue,c?c()||c({value:"",createNew:!0}):c=r({value:"",createNew:!0})),s=n.call(this,t,i,e,o)||this,s.controlType=85,i.valid&&i.sections&&!s._msPortalFxViewModelValueChangesAreClean&&s.resetDirtyComputed((function(){var n=s.value(),t=s.initialValue();n&&t?s.setDirty(t.value!==n.value||t.createNew!==n.createNew):s.setDirty(n!==t)})),h=s._options,s.textBoxLabel=h.textBoxLabel||r(""),s.selectExistingLinkDisplayText=h.selectExistingLinkDisplayText||r(u.selectExisting),s.createNewLinkDisplayText=h.createNewLinkDisplayText||r(u.createNew),s.displayMode=h.displayMode||r(f.CreateOrSelect),s.valueUpdateTrigger=h.valueUpdateTrigger||4,s}return __extends(t,n),t})(t.Selector.ViewModel);i.ViewModel=e})(i=t.CreatorAndSelectorV2||(t.CreatorAndSelectorV2={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var f=MsPortalFx.ViewModels,e=f.Forms,o=MsPortalFx.ViewModels.Obsolete.Forms.FilterComboBox,u=e.Section,t=ko.observable,r=ko.observableArray,s=ko.reactor,h=MsPortalFx.Resources.Strings.ViewModels.Controls.CreatorAndComboBox,l,i,c;(function(n){n[n.UseExisting=0]="UseExisting";n[n.CreateNew=1]="CreateNew"})(l=n.Mode||(n.Mode={})),(function(n){n[n.UseExisting=0]="UseExisting";n[n.CreateNew=1]="CreateNew";n[n.Both=2]="Both"})(i=n.AllowedMode||(n.AllowedMode={}));c=(function(n){function c(c,l){var a=this,v=l.filterComboOptions=MsPortalFx.clone(l&&l.filterComboOptions),tt=l.children,w,b,k;l.allowedMode||(l.allowedMode=t(i.Both));var y,d,g,nt=[d={text:t(h.createNew),value:!0},g={text:t(h.useExisting),value:!1},],it={label:v.label,options:y=r(nt),defaultValue:t(!0),validations:r([new f.RequiredValidation,]),radioButtonStyle:!0,infoBalloonContent:v.infoBalloonContent,infoBalloonLinkContent:v.infoBalloonLinkContent,viewModelValueChangesAreClean:v.viewModelValueChangesAreClean},p=new e.OptionsGroup.ViewModel(c,it);return v.label=undefined,v.labelPosition=undefined,v.infoBalloonContent=undefined,v.infoBalloonLinkContent=undefined,w=l.accessor?new o.ViewModel(c,l.form,l.accessor,v):new o.ViewModel(c,v),b=new u.ViewModel(c,{children:tt,style:t(1)}),k=new u.ViewModel(c,{children:r([w]),style:t(1)}),l.children=r([p]),s(c,(function(){var n=l.children;n().length>1&&n.pop();p.value()?n.push(b):n.push(k)})),a=n.call(this,c,l)||this,a.control=w,a.createOrSelectControl=p,a.allowedMode=l.allowedMode,a._newSection=b,a._selectSection=k,a._options=l,s(c,(function(){switch(l.allowedMode()){case i.CreateNew:y([d]);a.toggleNewOrExisting();break;case i.UseExisting:y([g]);a.toggleNewOrExisting();break;default:y(nt)}})),a}return __extends(c,n),c.prototype.toggleNewOrExisting=function(n){var r=this.createOrSelectControl.value,u=this._options.allowedMode(),t=n===undefined?!r():!!n;switch(u){case i.CreateNew:t=!0;break;case i.UseExisting:t=!1}r(t)},c})(u.ViewModel);n.ViewModel=c})(t=n.CreatorAndComboBox||(n.CreatorAndComboBox={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this;return f.controlType=6,f}return __extends(t,n),t})(n.Base.Slider.ViewModel);t.ViewModel=i})(t=n.Slider||(n.Slider={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=ko.observable,i,r;(function(n){n[n.Primary=0]="Primary";n[n.Secondary=1]="Secondary";n[n.Both=2]="Both"})(i||(i={}));t.Panes=i;r=(function(n){function t(t,i){var r=n.call(this,t)||this,f;return r.controlType=21,f=i||{},r.primaryPaneSize=f.primaryPaneSize||300,r.showPanes=f.showPanes||u(2),r.vertical=f.vertical||!1,r.reversed=f.reversed||!1,r.minPaneSizes=f.minPaneSizes||{primaryPaneSize:0,secondaryPaneSize:0},r}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=r})(i=t.Splitter||(t.Splitter={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.computed,u=(function(t){function u(n,u){var f=t.call(this,n)||this,e;return f.disabled=i(!1),f.loading=i(!1),f.controlType=1,f.validate=i(0),f.fields=ko.observableArray(),e=f.lifetimeManager,f.dirty=r(e,(function(){return f.fields().some((function(n){return n.dirty()}))})),f.valid=r(e,(function(){return!f.fields().some((function(n){return!n.valid()}))})),f.validate.subscribe(e,(function(n){f.fields().forEach((function(t){t.validate(n)}))})),u&&ko.utils.arrayPushAll(f.fields,u),f}return __extends(u,t),u.prototype.clearValidation=function(){return Q.all(this.fields().map((function(n){return n.clearValidation()})))},u.prototype.triggerValidation=function(){return Q.all(this.fields().map((function(n){return n.triggerValidation()}))).then((function(t){return t.every(n.identity)}))},u})(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=u})(i=t.StaticSection||(t.StaticSection={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.ViewModels,f=i.Forms,e=i.Obsolete.Forms.FilterComboBox,r=(function(){function t(t,i){i===void 0&&(i={});this.separator=n.initObservable(i.separator,";");this.viewModel=new e.ViewModel(t,i.viewModel)}return t})(),u;t.StringListBoxNewValueOptions=r;u=(function(t){function i(i,u,f,e){var o=t.call(this,i,u,f,e)||this,s;return o.controlType=17,s=o._options,o.values=n.initObservable(s.values,[]),o.selected=n.initObservable(s.selected),o.ariaLabel=n.initObservable(s.ariaLabel),o.newValueOptions=new r(i,s.newValueOptions),o}return __extends(i,t),i.prototype._setEditScopeAccessors=function(n,i){var r=this;t.prototype._setEditScopeAccessors.call(this,n,i);this._options.viewModelValueChangesAreClean||this.resetDirtyComputed((function(){r.setDirty(!r._compareValues(r.value(),r.initialValue()))}))},i.prototype._getUniqueValues=function(n){var t=n.slice(0);return t.sort((function(n,t){return n.localeCompareIgnoreCase(t)})),t.reduce((function(n,t){return(n.length===0||t.localeCompareIgnoreCase(n[n.length-1])!==0)&&n.push(t),n}),[])},i.prototype._compareValues=function(n,t){var r,u,i;if(n&&!t||!n&&t)return!1;if(!n&&!t)return!0;if(r=this._getUniqueValues(n),u=this._getUniqueValues(t),r.length!==u.length)return!1;for(i=0;i<r.length;i++)if(r[i].localeCompareIgnoreCase(u[i])!==0)return!1;return!0},i})(f.Base.Editable.ViewModel);t.ViewModel=u})(i=t.StringListBox||(t.StringListBox={}))})(i=t.Forms||(t.Forms={}))})(i=t.Vso||(t.Vso={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,e=r.ViewModels,u=ko.observable,f=(function(n){function t(t,i,f,e){var o=n.call(this,t,i,f,e)||this;return o.controlType=2,o.readonly=o._options.readonly||!1,o.actionHandler=e?e.actionHandler:i?i.actionHandler:null,o.actionsEnabled=u(!0),o.ariaLabel=r.initObservable(o._options.ariaLabel,""),o.showValidationsAsPopup=!!(o._options&&o._options.showValidationsAsPopup),o.spellcheck=i&&i.spellcheck?i.spellcheck:u(!1),o.onEnterPressed=e?e.onEnterPressed:i?i.onEnterPressed:null,o.showValidationsAsPopup&&(o.showValidationMessagesBelowControl=!0,o.valueUpdateTrigger=4),o}return __extends(t,n),t})(t.Base.Typable.ViewModel);i.ViewModel=f})(i=t.TextBox||(t.TextBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=(function(t){function i(i,r,u,f){var e=t.call(this,i,r,u,f)||this,o,s;return e.showSeconds=!0,e.controlType=24,o=e._options,e.enabledDateTimeRange=o.enabledDateTimeRange||ko.observable(new n.DateUtil.DateTimeRange),e.allowEmpty=!!o.allowEmpty,e.ariaLabel=n.initObservable(o.ariaLabel,""),s=e._options.showSeconds,n.isNullOrUndefined(s)||(e.showSeconds=s),e}return __extends(i,t),i.prototype._setEditScopeAccessors=function(n){var i=this;t.prototype._setEditScopeAccessors.call(this,n);this._options.viewModelValueChangesAreClean||this.resetDirtyComputed((function(){var n=i.value(),t=i.initialValue();n||t?n&&t?i.setDirty(Math.floor(n.getTime()/1e3)!==Math.floor(t.getTime()/1e3)):i.setDirty(!0):i.setDirty(!1)}))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=r})(i=t.TimePicker||(t.TimePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";function r(t,i,r){return n.tryImmediateResolve(Q(t),(function(n){if(!n)return FxImpl.QReject(s.notReady);var t=i.map((function(n){return{id:n.id,name:n.name}}));return n(t,r)}))}var o=n.isNullOrUndefined,u=ko.observable,f=ko.observableArray,s=n.Resources.Strings.FileUpload,e;i.execUpload=r;e=(function(t){function i(i,r,e,s){var h=t.call(this,i,r,e,s)||this,c;return h.controlType=106,c=h._options,h.accept=c.accept||null,h.allowedFileExtensions=c.allowedFileExtensions||null,h.maxFiles=c.maxFiles||1,h.uploadContext=c.uploadContext||u(),h.selectedFiles=f(),h.uploadTasks=f(),h.autoAddUploadTasks=n.isNullOrUndefined(c.autoAddUploadTasks)?!0:c.autoAddUploadTasks,h.ariaLabel=n.initObservable(c.ariaLabel),h._msPortalFxUploadActionCallback=u(null),o(r)||r.valid&&r.sections||h._options.viewModelValueChangesAreClean||h.resetDirtyComputed((function(){h.setDirty(!n.deepEquals(h.value(),h.initialValue()))})),h}return __extends(i,t),i.prototype.addUploadTasks=function(n){return r(this._msPortalFxUploadActionCallback(),n,5)},i.prototype.resetUploadTasks=function(){return r(this._msPortalFxUploadActionCallback(),[],6)},i})(t.Base.Editable.ViewModel);i.ViewModel=e})(i=t.AsyncFileUpload||(t.AsyncFileUpload={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=2097152,s=u,h=209715200,c=1048576,l=53687091200,a=u,i=ko.observable,r=(function(){function n(){this.type=0;this.contentType=0;this.encoding=null;this.maxFileSize=u;this.chunkSize=s}return n})(),f,e,o;t.FullFileUploadContext=r;f=(function(n){function t(){var t=n.call(this)||this;return t.type=1,t.maxFileSize=h,t.chunkSize=c,t}return __extends(t,n),t})(r);t.StreamFileUploadContext=f;e=(function(n){function t(){var t=n.call(this)||this;return t.context=i(),t.sasUriCommand=i(),t.type=2,t.maxFileSize=l,t.chunkSize=a,t.skipSasUriUpdateWithSelectedFile=i(!1),t}return __extends(t,n),t})(r);t.BlobStoreFileUploadContext=e;o=(function(n){function t(t,u,f,e){var o=n.call(this,t,u,f,e)||this,s;return o.controlType=81,s=o._options,o.accept=s.accept||"",o.maxFiles=s.maxFiles||1,o.uploadContext=s.uploadContext||i(new r),o.cancelAllUploads=s.cancelAllUploads||i(!1),o.showProgressBars=s.showProgressBars||i(!0),o.files=i([]),o}return __extends(t,n),t})(n.ViewModels.Forms.Base.Editable.ViewModel);t.ViewModel=o})(i=t.FileUpload||(t.FileUpload={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u,f;(function(n){n[n.Allow=0]="Allow";n[n.Disallow=1]="Disallow";n[n.Ignore=2]="Ignore"})(u=t.UnrecognizedTokenBehavior||(t.UnrecognizedTokenBehavior={}));f=(function(n){function t(t,f,e,o){var s=n.call(this,t,f,e,o)||this;return s.tokenStartAndEndCharacters=i({tokenStart:"[",tokenEnd:"]"}),s.items=r(),s.unrecognizedTokenBehavior=i(u.Disallow),s.removeTokenOnDelete=i(!1),s.valueKey=i("name"),s.columns=r(),s.rowsCount=i(7),s.defaultColumnWidth=i("150px"),s.noRowsMessage=i(""),s.controlType=30,s._setDefaults(s._options),s}return __extends(t,n),t.prototype._setDefaults=function(n){for(var t in n)this[t]=n[t]||this[t]},t})(n.Base.Editable.ViewModel);t.ViewModel=f})(t=n.TokenComboBox||(n.TokenComboBox={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=(function(t){function i(i,u,f,e){var o=t.call(this,i,u,f,e)||this,s;return o.controlType=22,s=o._options,o.inlineLabel=s.inlineLabel||!1,o.ariaLabel=n.initObservable(s.ariaLabel,""),o.canUserSetIndeterminate=s.canUserSetIndeterminate||r(!0),o}return __extends(i,t),i})(t.Base.Input.ViewModel);i.ViewModel=u})(i=t.TriStateCheckBox||(t.TriStateCheckBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){"use strict";var o=n.ViewModels,it=o.FileDownload,s=n.Base.Images,u=ko,r=n.initObservable,c=n.Resources.Strings.ViewModels.Toolbar,h=(function(){function n(n,t){t===void 0&&(t={});this.type=n;this.name=t.name||"";this.disabled=typeof u.unwrap(t.disabled)=="string"?r(t.disabled,""):r(t.disabled,!1);this.ariaLabel=r(t.ariaLabel,undefined);this.tooltip=r(t.tooltip,undefined);this.unauthorizedMessage=r(t.unauthorizedMessage,undefined)}return n.prototype.unauthorized=function(n){var t;t=typeof n=="boolean"?n?c.noAccess:null:n?n:c.noAccess;this.unauthorizedMessage(t)},n})(),l,a,f,v,e,y,p,w,b,k,d,g,nt,tt;i.ToolbarItem=h;l=(function(n){function t(t,i){i===void 0&&(i={});var f=n.call(this,t,i)||this;return f.controlType=62,f.showLabels=r(i.showLabels,!1),f.items=u.observableArray(),f}return __extends(t,n),t.prototype.setItems=function(n){this.items(n)},t})(t.Controls.Loadable.ViewModel);i.Toolbar=l;a=(function(){function n(){this.type=12}return n})();i.Separator=a;f=(function(n){function t(t,i){i===void 0&&(i={});var u=n.call(this,t,i)||this;return u.label=r(i.label,""),u.icon=r(i.icon,{type:0}),u}return __extends(t,n),t})(h);i.ToolbarButton=f;v=(function(n){function t(t){var i=n.call(this,1)||this;return i.items=t,i}return __extends(t,n),t})(h);i.ToolbarGroup=v;e=(function(n){function t(t,i){i===void 0&&(i={});var r=n.call(this,t,i)||this;return r.command=i.command,r}return __extends(t,n),t})(f);i.ExecutableButtonBase=e;y=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,4,t)||this;return i.commandContext=t.commandContext||u.observable(),i}return __extends(t,n),t})(e);i.CommandButton=y;p=(function(n){function t(t){var i=this,f;return f=typeof t=="string"?{optionGroupName:t}:t||{},i=n.call(this,6,f)||this,i.optionGroupName=f.optionGroupName||"",i.checked=r(f.checked,!1),i.commandContext=f.commandContext||u.observable(),i}return __extends(t,n),t})(e);i.ToggleButton=p;w=(function(n){function t(t){var r=this,i;return typeof t=="number"?i={type:t}:(i=t||{},i.type=i.type||5),r=n.call(this,i.type,i)||this,r.dialogOptions=i.dialogOptions,r}return __extends(t,n),t})(e);i.DialogButton=w;b=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,8,t)||this;return i.icon=r(t.icon,s.Upload()),i.accept=t.accept||"",i.maxFiles=t.maxFiles||1,i.uploadContext=t.uploadContext||u.observable(new o.FileUpload.FullFileUploadContext),i.cancelAllUploads=t.cancelAllUploads||u.observable(!1),i.cancelAllUploadsOnFileSelection=t.cancelAllUploadsOnFileSelection||u.observable(!0),i.uploadTasks=u.observableArray(),i}return __extends(t,n),t})(f);i.FileUploadButton=b;k=(function(n){function t(t){var i=n.call(this,7,t)||this;return i.icon=r(t.icon,s.Download()),i.context=u.observable(new it.Context(t)),i}return __extends(t,n),t})(f);i.FileDownloadButton=k;d=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,9,t)||this;return i.icon=r(t.icon,s.Link()),i.requestUrl=r(t.requestUrl,null),i.popupWidth=r(t.popupWidth,800),i.popupHeight=r(t.popupHeight,600),i}return __extends(t,n),t})(f);i.OAuthButton=d;g=(function(n){function t(t){var i=n.call(this,3,t)||this,r=i.selectable=new o.Selectable(t);return t||r.selectedValue()!==undefined||r.selectedValue(null),i}return __extends(t,n),t})(f);i.OpenBladeButton=g;nt=(function(n){function t(t){var i=n.call(this,10,t)||this;return t&&(i.id=t.id,i.selectable=new FxImpl.Composition.Selectable.Selectable2(t)),i}return __extends(t,n),t})(f);i.OpenBladeButton2=nt;tt=(function(n){function i(i,r){var e=this,f;return typeof i=="string"?f={uri:i,target:r||"_blank"}:(f=i,f.target=f.target||"_blank"),e=n.call(this,2,f)||this,e.clickableLink=new t.ClickableLink(u.observable(f.uri),u.observable(f.target)),e}return __extends(i,n),i})(f);i.OpenLinkButton=tt})(i=t.Toolbars||(t.Toolbars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){"use strict";var r=ko,f,u,e,o,s,h,c,l,a;(function(n){n[n.Unstyled=0]="Unstyled";n[n.BottomBanner=1]="BottomBanner"})(f||(f={})),(function(n){function f(n){return!!n&&n.status===3&&(n.action===2||n.action===4)}var i,u;(function(n){n[n.None=0]="None";n[n.Previous=1]="Previous";n[n.Next=2]="Next";n[n.Skip=3]="Skip";n[n.Complete=4]="Complete";n[n.Cancel=5]="Cancel"})(i||(i={}));n.Action=i;n.isCompleted=f;u=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.valid=r.observable(),t.input=r.observable(),t.output=r.observable({status:1,action:0}),t}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.input(n.input),n.valid!==undefined&&this.valid(n.valid),Q()},t})(t.Controls.Loadable.ViewModel);n.ViewModel=u})(u=i.Base||(i.Base={})),(function(t){var i=(function(t){function i(){var i=t!==null&&t.apply(this,arguments)||this;return i.enableErrorInfoBox=r.observable(!0),i._msPortalFxClearGroupValidationMessage=r.observable(n.noop),i.asyncValidations=[],i}return __extends(i,t),i.prototype.clearGroupValidationMessage=function(){this._msPortalFxClearGroupValidationMessage()()},i})(u.ViewModel);t.ViewModel=i})(e=i.ErrorInfoBoxActionBar||(i.ErrorInfoBoxActionBar={})),(function(t){var i=(function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.deleteButtonClick=function(){this._onButtonClicked(!0)},i.prototype.cancelButtonClick=function(){this._onButtonClicked(!1)},i.prototype._onButtonClicked=function(t){this.output({status:t?3:0,action:t?4:5,userActionId:n.getUniqueId()})},i})(u.ViewModel);t.ViewModel=i})(o=i.DeleteActionBar||(i.DeleteActionBar={})),(function(n){var t=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.saveButtonClick=function(){},t.prototype.discardButtonClick=function(){},t})(u.ViewModel);n.ViewModel=t})(s=i.FormActionBar||(i.FormActionBar={})),(function(n){var t=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.updateButtonClick=function(){},t.prototype.resetButtonClick=function(){},t})(u.ViewModel);n.ViewModel=t})(h=i.FilterActionBar||(i.FilterActionBar={})),(function(n){var t=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.enableErrorInfoBox=r.observable(!1),t.actionButtonLabel=r.observable(),t.actionButtonUri=r.observable(),t.actionButtonUriWindowFeatures=r.observable(),t.actionSummaryHtml=r.observable(),t.allowToggleProvisioningLocation=r.observable(!1),t.secondaryLinkDisplayText=r.observable(),t.secondaryLinkTriggerValidation=r.observable(!1),t.secondaryLinkStyle=r.observable(0),t}return __extends(t,n),t.prototype.actionButtonClick=function(){},t.prototype.onInputsSet=function(t){var i=this;return n.prototype.onInputsSet.call(this,t).then((function(){t.actionButtonLabel&&i.actionButtonLabel(t.actionButtonLabel);t.actionSummaryHtml&&i.actionSummaryHtml(t.actionSummaryHtml);t.allowToggleProvisioningLocation&&i.allowToggleProvisioningLocation(t.allowToggleProvisioningLocation);t.secondaryLinkDisplayText&&i.secondaryLinkDisplayText(t.secondaryLinkDisplayText);t.secondaryLinkStyle!==undefined&&i.secondaryLinkStyle(t.secondaryLinkStyle);t.secondaryLinkTriggerValidation&&i.secondaryLinkTriggerValidation(t.secondaryLinkTriggerValidation)}))},t})(e.ViewModel);n.ViewModel=t})(c=i.GenericActionBar||(i.GenericActionBar={})),(function(n){var t,i;(function(n){n[n.Default=0]="Default";n[n.Purchase=1]="Purchase"})(t||(t={}));n.ActionButtonText=t;n.SecondaryLinkStyle=f;i=(function(n){function t(t,i){var u=n.call(this,t)||this;return u.actionInProgress=r.observable(!1),u.input=r.observable(),u.isProvisioningBlade=r.observable(),u.provisionOnStartboardPart=r.observable(),u.masterIsProvisioningPart=r.observable(!1),u.eula=r.observable(),u.secondaryLinkDisplayText=r.observable(),u.secondaryLinkTriggerValidation=r.observable(!1),u.secondaryLinkStyle=r.observable(0),u.disablePrimaryButton=r.observable(!0),u.triggerSelectAction=r.observable(""),u.forceInProgressStatus=r.observable(),u.dropDown=r.observable(),u.showActionBar=r.observable(!0),u.actionButtonUri=r.observable(),u.actionButtonLabel=r.observable(0),i&&typeof i.hideActionBar=="boolean"&&u.showActionBar(!i.hideActionBar),u}return __extends(t,n),t.prototype.onInputsSet=function(t){var i=this;return"actionInProgress"in t&&this.actionInProgress(!!t.actionInProgress),n.prototype.onInputsSet.call(this,t).then((function(){i.eula(t.eula);t.secondaryLinkDisplayText&&i.secondaryLinkDisplayText(t.secondaryLinkDisplayText);t.isProvisioningBlade&&i.isProvisioningBlade(t.isProvisioningBlade);i.masterIsProvisioningPart(t.input&&!!t.input.masterIsProvisioningPart);i.forceInProgressStatus(t.forceInProgressStatus);t.suppressErrorInfoBox&&i.enableErrorInfoBox(!1);i.disablePrimaryButton(!!t.disablePrimaryButton);f[t.secondaryLinkStyle]&&i.secondaryLinkStyle(t.secondaryLinkStyle);t.dropDown&&i.dropDown(t.dropDown);t.secondaryLinkTriggerValidation&&i.secondaryLinkTriggerValidation(t.secondaryLinkTriggerValidation)}))},t})(e.ViewModel);n.ViewModel=i})(l=i.CreateActionBar||(i.CreateActionBar={})),(function(n){var t=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.triggerSelectAction=r.observable(""),t.eula=r.observable(),t.showSelectButton=r.observable(),t.selectButtonText=r.observable(),t}return __extends(t,n),t.prototype.onInputsSet=function(t){"triggerSelectAction"in t&&this.triggerSelectAction(t.triggerSelectAction);"eula"in t&&this.eula(t.eula);"selectButtonText"in t&&this.selectButtonText(t.selectButtonText);var i=this.showSelectButton;return"showSelectButton"in t?i(!!t.showSelectButton):i()===undefined&&i(!0),n.prototype.onInputsSet.call(this,t)},t})(u.ViewModel);n.ViewModel=t})(a=i.PickerActionBar||(i.PickerActionBar={}))})(i=t.ActionBars||(t.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";function f(n,t){var r=t&&t.actionBar;r instanceof i&&n._actionBar(r)}var t=MsPortalFx.ViewModels,i=t.ActionBars.Base.ViewModel,r=ko,u=(function(n){function t(t,i){var u=n.call(this,t,i)||this;return u._actionBar=r.observable(),u}return __extends(t,n),t})(t.PartContainer);n.BladeContainer=u;n.bindActionBar=f})(t=n.BladeContainer||(n.BladeContainer={}))})(t=n.Composition||(n.Composition={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko,i=(function(){function n(n){this.type=0;this.title=n}return n})(),r,u,f,e,o;n.Dialog=i,(function(n){n[n.AbortRetryIgnore=0]="AbortRetryIgnore";n[n.OK=1]="OK";n[n.OKCancel=2]="OKCancel";n[n.RetryCancel=3]="RetryCancel";n[n.YesNo=4]="YesNo";n[n.YesNoCancel=5]="YesNoCancel"})(r||(r={}));n.MessageBoxButtons=r;u=(function(n){function t(t,i,r){var u=n.call(this,t)||this;return u.type=1,u.text=i,u.buttons=r,u}return __extends(t,n),t})(i);n.MessageBox=u;f=(function(n){function i(i,r,u){var f=n.call(this,i)||this;return f.text=t.observable(""),f.completionPercentage=t.observable(-1),f.type=2,f.text(r),u!==undefined&&f.completionPercentage(u),f}return __extends(i,n),i})(i);n.ProgressBox=f;e=(function(n){function i(i){var r=n.call(this,i)||this;return r.description=t.observable(),r.type=3,r}return __extends(i,n),i})(i);n.FormDialog=e;o=(function(n){function i(){var i=n.call(this,"")||this;return i.listItems=t.observableArray(),i.selectedItem=t.observable(),i.type=4,i}return __extends(i,n),i})(i);n.ListPopup=o})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function h(){u.client.registerRpcEndPoint(r.submitProvisionerTelemetry,{allowedOrigin:null,handler:function(n,t){n.extension=t.srcWindowId;s.trace(n)}})}function f(n){u.client.invokeRpc(r.submitProvisionerTelemetry,o.Shell,n)}function e(n,t){t||(t={});t.source="Provisioner";t.action=n;var i=t.data||{},r=i.launchingContext||{};return r.telemetryId&&(i.telemetryId=r.telemetryId),f(t),t}function c(n){return e("ProvisioningStarted",n)}function l(n){return e("ProvisioningEnded",n)}var i=MsPortalFx.Base,o=i.Constants,r=n.Constants.RpcMethods,u=n.Rpc,s=i.Diagnostics.Telemetry;t.ActionModifier={Failed:"Failed",Succeeded:"Succeeded"};t.ProvisioningStatus={NoPromise:"NoPromise",Resolved:"Resolved",UnknownFailure:"UnknownFailure"};t.registerTelemetrySubmissionHandler=h;t.traceDeployment=f;t.traceProvisioningStarted=c;t.traceProvisioningEnded=l})(t=n.ProvisioningTelemetry||(n.ProvisioningTelemetry={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n,l=r.Base,f=r.Helpers,a=r.Services.Gallery,v=a.Constants,e=FxImpl.ProvisioningTelemetry,i=ko.observable,y=ko.toJS,k=l.Constants.ExtensionNames.Hubs,p=new l.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollection/Internal/Provisioner"),d=v.GalleryParametersKey,o=v.GalleryOptionsKey,h="",g={provEntityUndefined:h,notEnabled:h,unableToLocatePart:h},c=FxImpl.getErrorMap(g),nt=(function(){function n(){this.inputs=i();this.errors=i([])}return n})(),w,s,u,b;t.CollectorBindingInternals=nt;w=(function(){function n(){this.outputs=i();this.commit=i()}return n})();t.ProviderBindingInternals=w;s=(function(){function t(t){var r=this,i;this._provisioningEntity=undefined;this._data=undefined;this._options=undefined;this._executionDeferred=undefined;this._mappedOutputs=undefined;t||c.provEntityUndefined();this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;this._provisioningEntity=t;i=this._executionDeferred=f.Deferred();Q(i.promise()).finally((function(){r.dispose()})).catch(n.noop)}return Object.defineProperty(t.prototype,"mappedOutputs",{get:function(){return this._mappedOutputs},enumerable:!0,configurable:!0}),t.prototype.executeProvisioning=function(n,t){var v=this,i=this._provisioningEntity,e,k,r,h,l,d,u;if(i.enableProvisioning()||c.notEnabled(),e=n,i.executeProvisioning&&i.mapOutputsForProvisioning)return r=FxImpl.createError("You can only override 'executeCustomProvisioning' or 'mapOutputsForProvisioning', but not both."),p.error(r),f.reject(r);if(!i.executeProvisioning){var w=t&&t[o],s=w&&w.galleryItem,b=s&&s.categoryIds||[];if(b.length>0&&(k=b.some((function(n){return n.toLowerCase()===a.noSubCreateCategoryId})),k))return r=FxImpl.createError("The gallery item '"+s.itemDisplayName+"' requires no subscriptions, which requires custom provisioning. Override 'executeProvisioning'"),p.error(r),f.reject(r)}return(i.mapOutputsForProvisioning&&(n=i.mapOutputsForProvisioning(e)),h=i.provisionOnStartboardPart,l=i.privatePcPrBI,h&&h())?(l.masterIsProvisioningPart()?this._mappedOutputs=n:(this._initializeProvisioningEntity(t[o]),d={provisioningOptions:{originalData:e,data:y(n),options:y(t)}},l.triggerProvisioningInStartboardPart(d)),f.resolve()):i.executeProvisioning?(this._traceProvisioningStarted(),u=i.executeProvisioning(n),u?u.then((function(){v._traceProvisioningEnded(!0)}),(function(){v._traceProvisioningEnded(!1)})):this._traceProvisioningEnded(undefined),u):this._beginExecution(n,t)},t.prototype.dispose=function(){var n=this._lifetimeManager;n&&(n.dispose(),this._lifetimeManager=null)},t.prototype._initializeProvisioningEntity=function(n){var u=n.uiDefinition.markup.reference,t=u.provisioningPartName,i=u.provisioningPartExtension,r;t||i?t&&i||c.unableToLocatePart():(t="ProvisionerPart",i=k);r=this._provisioningEntity.privatePcPrBI;r.provisioningPartName(t);r.provisioningPartExtensionName(i)},t.prototype._beginExecution=function(n,t){var o=this,e=this._executionDeferred,i,f;return e.state()==="pending"&&(this._data=n,this._options=t,i=this._provisioningEntity.privatePcPrBI,f=this._lifetimeManager,f&&(i.provisioningCommand.fxOnce(f,(function(n){n.status(u.Idle);o._executeProvisioning(n)})),i.triggerProvisioningCommand(r.getUniqueId()))),e.promise()},t.prototype._executeProvisioning=function(n){var t=this,r,i;n.status(u.InProgress);this._traceProvisioningStarted();r=n.execute({options:this._options,data:this._data});i=this._executionDeferred;r?r.then((function(r){t.deploymentResponse=r;t._provisioningEntity.privatePcPrBI.provisioningStarted({galleryParameters:t._data.outputParameters[d],configurationOptions:t._options[o],deploymentResponse:r});n.status(u.Succeeded);t._traceProvisioningEnded(!0);i.resolve()}),(function(){n.status(u.Failed);t._traceProvisioningEnded(!1);i.reject()})):(this._traceProvisioningEnded(undefined),i.resolve())},t.prototype._createEventBase=function(){var i=this._options,r=i&&i[o],n=r&&r.launchingContext,t={name:undefined,data:{oldCreateApi:!0}};return n&&(t.name=n.galleryItemId,t.data.launchingContext=n),t},t.prototype._traceProvisioningStarted=function(){return e.traceProvisioningStarted(this._createEventBase())},t.prototype._traceProvisioningEnded=function(n){var r=this._createEventBase(),u=e.ActionModifier,f=e.ProvisioningStatus,t,i;return n===undefined?(t=u.Succeeded,i=f.NoPromise):n?(t=u.Succeeded,i=f.Resolved):(t=u.Failed,i=f.UnknownFailure),r.actionModifier=t,r.data.provisioningStatus=i,e.traceProvisioningEnded(r)},t})();s=__decorate([r.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object])],s);t.Provisioner=s,(function(n){n[n.Idle=0]="Idle";n[n.InProgress=1]="InProgress";n[n.Succeeded=2]="Succeeded";n[n.Failed=3]="Failed"})(u=t.ProvisioningCommandStatus||(t.ProvisioningCommandStatus={}));b=(function(){function n(){this.triggerProvisioningCommand=i();this.provisioningPartExtensionName=i();this.provisioningPartName=i();this.triggerProvisioningInStartboardPart=i();this.masterIsProvisioningPart=i(!1);this.forceDiscardJourney=i(!0);this.provisioningCommand=i();this.provisioningAttempted=i();this.provisioningStarted=i();this.provisioningCompleted=i()}return n})();t.ProvisioningEntityBindingInternals=b})(i=t.Internal||(t.Internal={}))})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var p=n.Base,w=FxImpl.Extension,b=p.Images,i=ko.observable,k=ko.observableArray,d=n.Resources.Strings,f="error",e=412,o=FxImpl.getErrorMap({hasNotBeenImplemented:""}),r=(function(){function n(){this.enabled=i(!0);this.icon=i();this.text=i();this.ariaLabel=ko.observable();this.tooltip=i()}return n})(),s,h,c,l,a,u,v,y,g;t.CommandBase=r;s=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.status=i(0),t.dialog=i(),t}return __extends(t,n),t.prototype.execute=function(){o.hasNotBeenImplemented("execute")},t.prototype.dialogClick=function(){o.hasNotBeenImplemented("dialogClick")},t})(r);t.Command=s;h=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.navigateUri=i(""),t.navigateTarget=i("_blank"),t}return __extends(t,n),t})(r);t.UriCommand=h;c=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.navigateUri=i(""),t.navigateUriCallback=i(null),t.navigateTarget=i("_blank"),t.showUriCallbackConfirmationDialog=i(!1),t}return __extends(t,n),t})(r);t.UriCallbackCommand=c;l=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.listItems=k(),t.selectedItem=i(""),t}return __extends(t,n),t})(r);t.ListCommand=l;a=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.viewModel=i(null),t}return __extends(t,n),t})(r);t.DynamicCommand=a;u=(function(){function n(n,t,i){this.status=n;this.statusCode=t;this.errorMessage=i}return n})();t.FileDownloadStatus=u;v=(function(n){function t(t){var r=n.call(this)||this,o,s;return r.targetUri=i(""),r.targetUriCallback=i(null),r.httpMethod=i("GET"),r.httpRequestContent=i(""),r.httpRequestContentType=i("application/json"),r.headers=i({}),r.authorizationToken=i(null),r.targetFileName=i(""),r.errorMessage=i(""),r.downloadType=i(1),r.downloadStatus=i(),r.showUriCallbackConfirmationDialog=i(!1),r.uriCallbackConfirmationDialogOptions=null,r.showDownloadProgressDialog=i(!1),r.downloadProgressDialogOptions=null,r.icon(b.Download()),t===!0?o={resourceName:""}:t&&(o=t.authorizationOptions),o&&(s={resourceName:o.resourceName},w.getRuntime().getAuthorizationToken(s).then((function(n){n&&n.header?r.authorizationToken(n.header):r.downloadStatus(new u(f,e,d.FileDownloadCommand.authTokenNotAvailable))}),(function(n){r.downloadStatus(new u(f,e,n))}))),r}return __extends(t,n),t})(r);t.FileDownloadCommand=v;y=(function(n){function i(t){var u=n.call(this)||this,r=t.selectable;return r&&r.selectedValue||(t.selectable=i.createSelectableViewModel()),u}return __extends(i,n),i.createSelectableViewModel=function(n){return new t.Selectable({selectedValue:arguments.length===1?n:{}})},i})(r);t.OpenBladeCommand=y,(function(t){var r;(function(t){function u(n){n.enabled(null);(n.icon||f)(null);(n.text||f)(null)}var r=n.ViewModels,f=i(""),c=(function(n){function t(t){var i=n.call(this,t)||this;return u(i),i}return __extends(t,n),t})(r.OpenBladeCommand),e,o,s,h;t.OpenBladeCommand=c;e=(function(n){function t(){var t=n.call(this)||this;return u(t),t}return __extends(t,n),t})(r.FileDownloadCommand);t.FileDownloadCommand=e;o=(function(n){function t(){var t=n.call(this)||this;return u(t),t}return __extends(t,n),t})(r.Command);t.ExecutableCommand=o;s=(function(n){function t(){var t=n.call(this)||this;return u(t),t}return __extends(t,n),t})(r.UriCallbackCommand);t.UriCallbackCommand=s;h=(function(n){function t(){var t=n.call(this)||this;return u(t),t}return __extends(t,n),t})(r.UriCommand);t.UriCommand=h})(r=t.Dynamic||(t.Dynamic={}))})(g=t.Commands||(t.Commands={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(){function t(){this.title=i();this.shortTitle=i();this.description=i();this.icon=i(n.Base.Images.Shell.DefaultBlade());this.size=ko.observable(1)}return t})();t.ButtonPart=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";var r=ko.observable,u=(function(){function n(){this.inputParameters={};this.inputMetadata={};this.options={}}return n})(),t,i;n.ParameterCollectionInput=u;t=(function(){function n(){this.outputParameters={}}return n})();n.ParameterCollectionOutput=t;i=(function(){function n(){}return n.modelToParameters=function(n){var i={},t,r;for(t in n){t in i||(i[t]={});for(r in n[t])i[t][r]=n[t][r]()||""}return i},n.parametersToModel=function(n){var u={},t,i;for(t in n)for(i in n[t]){if(t in u||(u[t]={}),ko.isObservable(n[t][i])||ko.isComputed(n[t][i]))throw new Error("Parameters cannot be knockout observables.");u[t][i]?u[t][i](n[t][i]):u[t][i]=r(n[t][i])}return u},n})();n.Models=i})(t=n.ParameterCollection||(n.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var r=ko.unwrap,t="",u={onProviderCommitMissing:t,onCommitSuccessActionMissing:t,onCommitFailedActionMissing:t},i=FxImpl.getErrorMap(u),f=(function(){function n(n){this._provisioner=null;this._previousOutputs=null;this._previousCommit="";this._previousDetailBladeOutput=null;this._provisioner=n}return n.prototype.onProviderBindingInternalsReceived=function(n,t,u,f,e,o){var a=this,c;if(f||i.onProviderCommitMissing(),e||i.onCommitSuccessActionMissing(),o||i.onCommitFailedActionMissing(),n){var h=r(n.commit),s=r(n.outputs),l=function(){e();a._provisioner.executeProvisioning(s,t)};!h||h===this._previousCommit||!s||s===this._previousOutputs||!u||u===this._previousDetailBladeOutput||(this._previousOutputs=s,this._previousCommit=h,c=f(null,s),c?c.then((function(n){n?l():o()}),(function(){o()})):l())}},n})();n.CollectorBase=f})(t=n.Internal||(n.Internal={}))})(t=n.ParameterCollection||(n.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function e(n,t,r){var u=n&&n.stepStatuses,f=u&&u.length?u[0].status:0;return i({stepId:"NoWizardStep",status:f,isFirstStep:!0,isLastStep:!0,isOptional:!1,disabled:!1,allowToggleProvisioningLocation:t,masterIsProvisioningPart:r})}var r=n.ViewModels,f=t.Internal,i=ko.observable,u=" is not implemented",o=(function(n){function t(t,u,o,s){var h=n.call(this)||this,l;h.editScopeId=i();h._commit=i();h._baseButtonContainer=null;h._baseProviderCommit=null;h._initialLoadComplete=!1;l=u&&u.container;t.selectable=new r.Internal.Selectable({selectedValue:!0,isSelected:!!l&&l.selectable.isSelected});var c={stepStatuses:[]},a=u&&u.content,v=a&&a.currentState;return v&&(c=v),h.beginExecuteCommand=i(!1),h.savedState=i(c),h.currentState=i(c),h.stepInput=e(c,o!==!1,s),h.stepOutput=i(),h.parameterCollectionErrors=i(),h.privateFcTpBI=new f.CollectorBindingInternals,h._baseButtonContainer=t,h._ltm=t.createChildLifetime(),h}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=this,o=this.privateFcTpBI,r,u,i,s,f,e;return o.inputs(this.getProviderInputs(null)),this._initialLoadComplete||(r=this._ltm,this.parameterCollectionErrors.subscribe(r,(function(n){var t=o.errors;t(n);t([])})),this.stepOutput.subscribe(r,(function(n){t._processStepOutput(n)})),this._baseButtonContainer.selectable.isSelected.subscribe(r,(function(){t.savedState(t.currentState())})),this._initialLoadComplete=!0),u=n.fromProviderBindingInternals,u&&(i=u.commit,!i||i===this._baseProviderCommit||(this._baseProviderCommit=i,s=this.onProviderCommit(null,u.outputs),s.then((function(n){n?(t._baseButtonContainer.selectable.isSelected(!1),t._commit(i)):t.parameterCollectionErrors([{errorMessage:"Parameter Collection failed!"}])})))),f=n.stepOutput,f&&this.stepOutput(f),e=this.savedState,e()||e(n.savedState),null},t.prototype.getProviderInputs=function(){throw new Error("'getProviderInputs'"+u);},t.prototype.onProviderCommit=function(){throw new Error("'onProviderCommit'"+u);},t.prototype.dispose=function(){this._ltm&&(this._ltm.dispose(),this._ltm=null)},t.prototype._processStepOutput=function(n){n&&(this.currentState({stepStatuses:[{stepId:n.stepId,status:n.status}],selectedStepId:n.stepId}),this.beginExecuteCommand(n.status===3))},t})(r.ButtonPart);t.BaseGalleryButtonPartViewModel=o})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i,r;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){n[n.None=0]="None";n[n.Success=1]="Success";n[n.Warning=2]="Warning";n[n.Error=3]="Error";n[n.Information=4]="Information";n[n.Stopped=5]="Stopped";n[n.Canceled=6]="Canceled";n[n.Critical=7]="Critical";n[n.Disabled=8]="Disabled";n[n.Failed=9]="Failed";n[n.Pending=10]="Pending";n[n.Unknown=11]="Unknown"})(t||(t={}));n.ResourceStatus=t})(t=n.CsmTopology||(n.CsmTopology={}))})(t=n.Visualization||(n.Visualization={}))})(i=t.Controls||(t.Controls={})),(function(t){var i;(function(t){function ut(n,t){var i,r,u=function(){i={};r=0};return u(),function(f){var e=i[f];return e===undefined&&(e=n(f),r++==1e3&&kt.nextTick(u),i[f]=e),t(e)}}function e(n){return ut((function(t){return JSON.stringify(n(t))}),JSON.parse)}function i(t){return ut((function(n){return t.test(n)}),n.identity)}function ot(n){return ft(n)||et(n)}function o(n,i){if(!n||typeof n!="string")return!1;var r=st(n)||t.isSubscriptionId(n)||t.isResourceGroupId(n);return i?r:r||ot(n)||t.isTagId(n)}function f(n){return n.toLowerCase()}function ii(n){var e="/providers/Microsoft.Resources"+n,u=dt.exec(e),i;if(u){for(var t=new v,f=t.provider=u[1],o=u[2],r=void 0;r=gt.exec(o);){if(!r)return;t.types.push(t.type=r[1]);t.resources.push(t.resource=r[2]);f+="/"+t.type;t.resourceMap[f]=t.resource}return i=ni.exec(n),i&&i.length&&(t.subscription=i[1],t.resourceGroup=i[2]),t}}function lt(n){return e((function(t){var i;return n(t)&&(i=ii(t))||r.invalidId(),i}))}function ri(t){return o(t)?n.sanitizeMessage(t):"<REDACTED>"}function ui(n,t,i){return h(n,t)+"/deployments/"+i}function fi(n){return s(n.subscription)}function w(n){return s(n.subscription)}function b(n){var t=n.subscription;return t?s(t):""}function ei(n){return w(t.parseResourceGroupDescriptor(n))}function oi(n){return b(t.parseResourceDescriptor(n))}function s(n){return"/subscriptions/"+n}function si(n){return h(n.subscription,n.resourceGroup)}function k(n){return h(n.subscription,n.resourceGroup)}function hi(n){return k(t.parseResourceDescriptor(n))}function h(n,t){return"/subscriptions/"+n+"/resourceGroups/"+t}function at(n){var t=n.provider;return ht(t,ht.apply(void 0,n.types))}function vt(n){return function(t){return at(n(t))}}function yt(n){for(var i="/subscriptions/"+n.subscription+"/resourceGroups/"+n.resourceGroup+"/providers/"+n.provider,r=n.types,u=n.resources,t=0;t<r.length;t++)i+="/"+r[t]+"/"+u[t];return i}function ci(n){return"/subscriptions/"+n.subscription+"/resourceGroups/"+n.resourceGroup+"/providers/"+n.provider+"/"+n.types[0]+"/"+n.resources[0]}function li(n){var t;n.types.length<2&&r.notForNestedResource();var i="/subscriptions/"+n.subscription+"/resourceGroups/"+n.resourceGroup+"/providers/"+n.provider,u=n.types,f=n.resources;for(t=0;t<u.length-1;t++)i+="/"+u[t]+"/"+f[t];return i}function ai(t,i){var r=f(t)+"/";return n.startsWith(f(i),r)}function pt(n,t){return n+":"+yt(t)}function wt(n){return function(i){return pt(n,t.parseResourceDescriptor(i))}}function c(n){return function(t,i){return t&&i?t===i||n(t)&&f(t)===f(i):!t==!i}}function d(n){return function(t){return n(t),f(t)}}function vi(n){return o(n)?f(n):null}function yi(n,i){return n&&i&&t.compareSubscriptionId(n,w(t.parseResourceGroupDescriptor(i)))}function pi(n,i){return n&&i&&t.compareSubscriptionId(n,b(t.parseResourceDescriptor(i)))}function wi(n,i){return n&&i&&t.compareResourceGroupId(n,k(t.parseResourceDescriptor(i)))}var u=ko,kt=Q,dt=/(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((:?\/[^\/]+\/[^\/]+)*)$/i,gt=/\/([^\/]+)\/([^\/]+)/ig,ni=/\/subscriptions\/([^\/\s]+)(?:\/resourceGroups\/([^\/\s]+))?/i,g=/^\/subscriptions\/([^\/\s]+)$/i,nt=/^\/subscriptions\/([^\/\s]+)\/resourceGroups\/([^\/\s]+)$/i,tt=/^\/subscriptions\/([^\/\s]+)\/resourceGroups\/([^\/\s]+)\/deployments\/([^\/]+)$/i,it=/^\/subscriptions\/([^\/\s]+)\/resourceGroups\/([^\/\s]+)\/providers\/microsoft.resources\/deployments\/([^\/]+)$/i,rt=/^\/subscriptions\/([^\/\s]+)\/tagNames\/([^\/]+)(?:\/tagValues\/([^\/]+))?$/i,ft,et,st,ct,l,a,v,y,p,bt;t.isTenantResource=i(/^(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)*)$/i);t.isSubscriptionId=i(g);t.isResourceGroupId=i(nt);t.isResourceId=i(/^(?:\/subscriptions\/[^\/\s]+(\/resourceGroups\/[^\/\s]+)?)?(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)+)$/i);ft=i(it);et=i(tt);t.isDeploymentId=ot;t.isTagId=i(rt);st=i(/^(?:\/subscriptions\/[^\/\s]+(\/resourceGroups\/[^\/\s]+)?)?(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)*)$/i);t.isResourceManagerId=o;var ht=n.getJoinFunc("/"),r=FxImpl.getErrorMap({invalidDeployment:"",invalidId:"",invalidRG:"",invalidSub:"",invalidTag:"",notForNestedResource:""}),ti;(function(n){n[n.Failure=0]="Failure";n[n.DataNotAvailable=1]="DataNotAvailable";n[n.AccessDenied=2]="AccessDenied"})(ti=t.MappingRejectionReason||(t.MappingRejectionReason={}));ct=(function(){function n(){this.name=u.observable();this.description=u.observable();this.descriptionUri=u.observable();this.status=u.observable();this.statusMessage=u.observable()}return n})();t.Service=ct;l=(function(){function n(){}return n})();t.SubscriptionDescriptor=l;a=(function(){function n(){}return n})();t.ResourceGroupDescriptor=a;v=(function(){function n(){this.types=[];this.resources=[];this.resourceMap={}}return n})();t.ResourceDescriptor=v;y=(function(){function n(){}return n})();t.DeploymentDescriptor=y;p=(function(){function n(){}return n})();t.TagDescriptor=p;t.sanitizeId=ri;t.parseSubscriptionDescriptor=e((function(n){var i,u;return t.isSubscriptionId(n)||r.invalidSub(),i=g.exec(n),i&&i.length===2||r.invalidSub(),u=new l,u.subscription=i[1],u}));t.parseResourceGroupDescriptor=e((function(n){var i,u;return t.isResourceGroupId(n)||r.invalidRG(),i=nt.exec(n),i&&i.length===3||r.invalidRG(),u=new a,u.subscription=i[1],u.resourceGroup=i[2],u}));t.parseResourceDescriptor=lt(t.isResourceId);t.parseResourceManagerDescriptor=lt(o);t.parseDeploymentDescriptor=e((function(n){var t=it.exec(n),i;return t&&t.length===4||(t=tt.exec(n)),t&&t.length===4||r.invalidDeployment(),i=new y,i.subscription=t[1],i.resourceGroup=t[2],i.deploymentName=t[3],i}));t.parseTagDescriptor=e((function(n){var t=rt.exec(n),i;return t&&t.length===4||r.invalidTag(),i=new p,i.subscription=t[1],i.tagName=t[2],i.tagValue=t[3],i}));t.buildDeploymentId=ui;t.buildSubscriptionIdFromDescriptor=fi;t.buildSubscriptionIdFromResourceGroupDescriptor=w;t.buildSubscriptionIdFromResourceDescriptor=b;t.buildSubscriptionIdFromResourceGroupId=ei;t.buildSubscriptionIdFromResourceId=oi;t.buildSubscriptionIdFromSubscriptionName=s;t.buildResourceGroupIdFromDescriptor=si;t.buildResourceGroupIdFromResourceDescriptor=k;t.buildResourceGroupIdFromResourceId=hi;t.buildResourceGroupIdFromSubscriptionAndResourceGroupName=h;t.buildSubscriptionFromId=s;t.buildResourceTypeFromResourceDescriptor=at;t.buildResourceTypeFromResourceId=vt(t.parseResourceDescriptor);t.buildResourceTypeFromResourceManagerId=vt(t.parseResourceManagerDescriptor);t.buildResourceIdFromDescriptor=yt;t.buildTopmostParentResourceIdFromDescriptor=ci;t.buildParentResourceIdFromDescriptor=li;t.isParentResource=ai;t.buildTagName=pt;t.buildRelatedTagName=wt("hidden-related");t.buildLinkTagName=wt("hidden-link");t.compareSubscriptionId=c(t.isSubscriptionId);t.compareResourceGroupId=c(t.isResourceGroupId);t.compareResourceId=c(t.isResourceId);t.compareResourceManagerId=c(o);t.buildLowerCaseResourceGroupId=d(t.parseResourceGroupDescriptor);t.buildLowerCaseSubscriptionId=d(t.parseSubscriptionDescriptor);t.buildLowerCaseResourceId=d(t.parseResourceDescriptor);t.tryBuildResourceManagerKey=vi;t.subscriptionContainsResourceGroup=yi;t.subscriptionContainsResource=pi;t.resourceGroupContainsResource=wi;bt=(function(){function n(){this.refreshPacket=u.observable(null)}return n.prototype.signalResourceGroupRefresh=function(n){this.refreshPacket({resourceGroupId:n})},n.prototype.signalResourceRefresh=function(n){this.refreshPacket({resourceId:n})},n.prototype.signalAssetRefresh=function(n,t,i){this.refreshPacket({assetOwner:n,assetType:t,assetId:i})},n})();t.ResourcePartExtender=bt})(i=t.ResourceTypes||(t.ResourceTypes={}))})(r=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(){function n(){this.assetType=t();this.assetName=t();this.icon=t();this.assetId=t();this.status=t();this.state=t();this.size=t(1)}return n})();n.AssetPart=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=t.Controls.Visualization.Chart.InteractionBehavior,r=ko.observable,u=(function(t){function u(u){var f=t.call(this,u)||this,e,o;return f.size=r(1),f.editButtonText=r(n.Resources.Strings.Part.Chart.editButtonText),e=f.size,o=f.interactionBehavior,e.subscribe(u,(function(n){switch(n){case 2:case 1:case 3:o(i.ChartArea_Off|i.XSlider_Off);break;default:o(i.All)}})),e.notifySubscribers(e()),f}return __extends(u,t),u})(n.ViewModels.Controls.Visualization.Chart.ViewModel);t.ChartPart=u})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function p(n,t,i){var r;switch(n){case 8:case 9:case 7:r=y;break;case 6:r=v;break;case 10:case 5:case 4:r=a;break;case 3:case 2:default:r=l}return r=t?r-1:r,i?r-1:r}function w(n){return n===0||n===1}function b(n){return n===2||n===3}var i=ko.observable,e=ko.observableArray,u=ko.computed,o=n,c=o.ViewModels,s=c.Controls.Lists.Grid,l=3,a=9,v=14,y=20,r,f,h;(function(n){n[n.None=0]="None";n[n.Data=1]="Data";n[n.Rollup=2]="Rollup"})(r=t.GridMode||(t.GridMode={}));f=[];[0,1,2,3,4,10,5,6,11,99,].forEach((function(n){f[n]=!0}));h=(function(){function n(n,t){var f=this,h;this.size=i(2);this.alwaysShowRollupCount=i(!1);this.rollupCount=i();this.rollupCountIconUri=i();this.rollupCountIcon=i();this.rollupCountLabel=i();this._options=null;this._container=null;this._container=n;this._options=t;this.gridMode=i(r.None);this.hasMoreData=i(!1);h=t.selectableRowExtensionOptions?s.Extensions.SelectableRow:null;this.grid=new s.ViewModel(n,e(),h,t.selectableRowExtensionOptions);this.grid.showHeader=!!t.showHeader;this.grid.columns=e();n.registerForDispose(this.grid);this.emptyGrid=i(!0);this.noRowsHtml=t.noRowsHtml?t.noRowsHtml:i(null);t.noRowsMessage&&(this.grid.noRowsMessage||(this.grid.noRowsMessage=i()),u(n,(function(){f.grid.noRowsMessage(t.noRowsMessage())})));this.selectableData=this.grid.selectableData;this._reactToDataChange(n,t.data,(function(n){return n===r.Data}));this._reactToDataChange(n,t.rollupData,(function(n){return n===r.Rollup}));this._reactToSizeChange();this.noRollupCount=u(n,(function(){return o.isNullOrUndefined(f.rollupCount())}))}return n.prototype._reactToDataChange=function(n,t,i){var r=this;t&&(t.items.subscribe(n,(function(n){r.emptyGrid(!n.length);i(r.gridMode())&&r._updateGrid(t)})),u(n,(function(){if(i(r.gridMode())){var n=t.columns();r.grid.columns(n)}})))},n.prototype._reactToSizeChange=function(){var n=this;u(this._container,(function(){var t=n._options,i=n.size();n.alwaysShowRollupCount();!w(i)&&(t.data||t.rollupData)?t.rollupData&&b(i)||t.rollupData&&!t.data?n.gridMode(r.Rollup):t.data&&n.gridMode(r.Data):n.gridMode(r.None);ko.ignoreDependencies((function(){switch(n.gridMode()){case r.Data:n._updateGrid(t.data);break;case r.Rollup:n._updateGrid(t.rollupData)}}))}))},n.prototype._updateGrid=function(n){if(n){var t=n.items(),r=this.size(),o=f[r],u=o?p(r,this._options.showHeader,this.alwaysShowRollupCount()):t.length;this.hasMoreData(t.length>u);var i=t.slice(0,u),e=this.grid.items.peek(),s=e.length!==i.length||ko.utils.compareArrays(e,i,{sparse:!0}).length>0;s&&this.grid.items(i)}},n})();t.ViewModel=h})(i=t.Collection||(t.Collection={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(){function t(){this.resourceCount=i(0);this.countIsMinimum=i(!1);this.description=i("");this.icon=i(n.Base.Images.Shell.DefaultBlade());this.label=i("");this.size=i(2)}return t})();t.CollectionSummary=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(n){function i(){var i=n!==null&&n.apply(this,arguments)||this;return i.createName=t(""),i}return __extends(i,n),i})(n.ButtonPart);n.CreatePart=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){var r=n.call(this,t,0,null,null)||this;return r.size=i(2),r}return __extends(t,n),t})(n.ViewModels.Controls.Documents.DiffEditor.ViewModel);t.ViewModel=r})(i=t.DiffEditor||(t.DiffEditor={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u=(function(){function t(t){this.groupInfos=r();this.itemsDataArray=r();this.itemSetting=i();this.valueInitialized=!1;this.total=i(null);this.startOffset=i(-90);this.totalFormat=i("{0}");this.unitFormat=i("");this.infoFormat=i("");this.numberFormatOptions=i({minimumFractionDigits:0,maximumFractionDigits:1});this.hoveredUnit=i("%");this.hoverInfoFormat=i("{0} {1}{2}");this.selectedInfoFormat=i("{0}/{1}{2}");this.disableSelectOnClick=i(!1);this.ariaLabel=i(null);this.ariaDesc=i(null);this.showLegend=i(!0);this.size=i(2);this._msPortalFxRerenderTrigger=i(0);this.metrics=new n.ViewModels.Controls.Visualization.Metrics.ViewModel(t)}return t.prototype.render=function(){this._msPortalFxRerenderTrigger(this._msPortalFxRerenderTrigger.peek()+1)},t})();t.ViewModel=u})(i=t.Donut||(t.Donut={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.ViewModels.Controls.Documents.Editor,r=ko.observable,u=(function(n){function t(t){var i=n.call(this,t,0,null)||this;return i.size=r(2),i}return __extends(t,n),t})(i.ViewModel);t.ViewModel=u})(i=t.Editor||(t.Editor={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=ko.observableArray,o=ko.isObservable,i=ko.utils.wrap,f="string",r=(function(){function n(n,t){this.text=i(n);typeof t===f||o(t)&&typeof t()===f?this.uri=i(t):this.bladeSelection=i(t)}return n})(),e;t.Link=r;e=(function(){function t(t){this.sections=u();this.bladeLinks=u();this.selection=new n.ViewModels.SelectableSet(this.bladeLinks,function(n,t){return n.bladeSelection().detailBlade===t.detailBlade},function(n){return n.bladeSelection()},t&&t.content&&t.content.selection)}return t.prototype.dispose=function(){this.selection.dispose()},t.prototype.addSection=function(n,t,u,f){var o=this,e;e=Array.isArray(u)?new r("",undefined):new r("",u);this.sections.push({title:i(n),description:i(t),selection:e,links:Array.isArray(u)?u:null,icon:f});(Array.isArray(u)?u:[e]).forEach((function(n){n.bladeSelection&&o.bladeLinks.push(n)}))},t})();t.ViewModel=e})(i=t.InfoList||(t.InfoList={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function u(n){return typeof n=="object"}var o=n,it=o.Base,e=o.ViewModels,a=e.equalDynamicSelections,s=e.SelectableSet,v=ko.computed,y=ko.pureComputed,f=ko.unwrap,i=ko.utils.wrap,p="_msPortalFxPropertiesPartSelectionKey",rt=o.Resources.Strings.Part.PropertiesPart,ut=new it.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.PropertiesPart"),ft=(function(){function t(n){var t=this;this._openBladeProperties=null;this._openBladeAsyncProperties=null;this._moveResourceProperties=null;this.properties=ko.observableArray();this.addProperty=this._addProperty=function(n){t.properties.push(n);switch(n.getType()){case 7:n.bladeLinks().forEach((function(n){t._openBladeProperties.push(n)}));break;case 8:t._openBladeAsyncProperties.push(n);n.editBlade&&n.editBlade.editType===1&&t._moveResourceProperties.push(n);break;default:n.bladeSelection&&t._openBladeProperties.push(n);n.editBlade&&n.editBlade.editType===1&&t._moveResourceProperties.push(n)}};this._openBladeProperties=ko.observableArray();this.selection=new s(this._openBladeProperties,function(n,t){return a(n.bladeSelection(),t)},function(n){return n.bladeSelection()},n&&n.content&&n.content.selection);this._moveResourceProperties=ko.observableArray();this.moveResourceSelection=new s(this._moveResourceProperties,function(n,t){var i=f(n.editBlade.bladeSelection);return a(i,t)},function(n){return f(n.editBlade.bladeSelection)},n&&n.content&&n.content.moveResourceSelection);var i=function(n){return n.label},r=function(n,t){n[p]=i(t)},u=function(n){return n[p]};this._openBladeAsyncProperties=ko.observableArray();this.asyncSelection=new s(this._openBladeAsyncProperties,function(n,t){return u(t)===i(n)},function(){return null},n&&n.content&&n.content.asyncSelection);e.Internal.SelectableSet.setCreateDelayedBladeSelection(this.asyncSelection,(function(n){return{bladeWidth:1,selectedValuePromise:n.resolveBlade().then((function(t){return r(t,n),t}))}}))}return t.prototype.setProperties=function(n){var t=[],r=[],i=[];n.forEach((function(n){switch(n.getType()){case 7:n.bladeLinks().forEach((function(n){t.push(n)}));break;case 8:r.push(n);n.editBlade&&n.editBlade.editType===1&&i.push(n);break;default:n.bladeSelection&&t.push(n);n.editBlade&&n.editBlade.editType===1&&i.push(n)}}));this.properties(n);this._openBladeProperties(t);this._openBladeAsyncProperties(r);this._moveResourceProperties(i)},t.prototype.removeAllProperties=function(){this._openBladeAsyncProperties([]);this._moveResourceProperties([]);n.disposeDisposable(this.properties());this.properties([]);this._openBladeProperties([])},t.prototype.dispose=function(){this.removeAllProperties();this.selection.dispose();this.moveResourceSelection.dispose()},t})(),h,c,r,w,b,k,d,l,g,nt,tt;t.ViewModel=ft,(function(n){n[n.Text=0]="Text";n[n.Link=1]="Link";n[n.CopyField=2]="CopyField";n[n.Callback=3]="Callback";n[n.OpenBlade=4]="OpenBlade";n[n.MultiLinks=5]="MultiLinks";n[n.Image=6]="Image";n[n.MultiOpenBlades=7]="MultiOpenBlades";n[n.OpenBladeAsync=8]="OpenBladeAsync"})(h||(h={}));t.PropertyType=h,(function(n){n[n.Unknown=0]="Unknown";n[n.MoveResource=1]="MoveResource"})(c||(c={}));t.EditType=c;r=(function(){function n(n){var e=this,t,u,f,r;this.displayValue=ko.observable("");this.editBladeText=rt.changeLabel;this.label=n.label;this.value=i(n.value);t=n.blade;u=t&&t.displayValue;this.displayValue=u?i(u):i(n.displayValue);this.copyableValue=i(n.copyableValue);this.visible=i(n.visible===undefined?!0:n.visible);this.wrappable=i(n.wrappable===undefined?!1:n.wrappable);f=t&&t.bladeSelection;this.bladeSelection=f?i(f):null;this.infoBalloon=n.infoBalloon;this.editBlade=n.editBlade;r=n.isLoading;this.isLoading=y((function(){return r&&r()}));this._supportsIsLoading=!!r;this.type=this.getType();var o=this._lifetimeManager=new FxImpl.TriggerableLifetimeManager,s=this.hasValidBladeSelection=v(o,(function(){var n=e.bladeSelection;return!!(n&&n())||e.type===8})),h=s();s.subscribe(o,(function(n){h&&!n&&ut.error("A property's bladeSelection should never be updated from a non-null/non-empty value to a null/empty value.");h=n}))}return Object.defineProperty(n.prototype,"lifetimeManager",{get:function(){return this._lifetimeManager},enumerable:!0,configurable:!0}),n.prototype.getType=function(){throw new Error("Subclass needs to provide the property type.");},n.prototype.dispose=function(){var n=this._lifetimeManager;n&&(n.dispose(),this._lifetimeManager=null)},n})();t.Property=r;w=(function(n){function t(t,r){var e=this,f;return f=u(t)?t:{label:t,value:r},f.copyableValue=f.value,e=n.call(this,f)||this,e.icon=i(f.icon),e}return __extends(t,n),t.prototype.getType=function(){return 0},t})(r);t.TextProperty=w;b=(function(t){function i(i,r,e){var s=this,o;return u(i)?(o=i,o.displayValue||(o.displayValue=o.value)):o={label:i,value:r,displayValue:!e?r:e,target:"_blank"},s=t.call(this,o)||this,s.target=o&&o.target||"_blank",s.copyableValue=y((function(){var t=f(s.displayValue),i=f(s.value);return n.isNullOrWhiteSpace(t)?i:i&&t.toLowerCase()===i.toLowerCase()?t:t+" <"+i+">"})),s}return __extends(i,t),i.prototype.getType=function(){return 1},i})(r);t.LinkProperty=b;k=(function(n){function t(t,i,r){var o=this,s,c=new FxImpl.TriggerableLifetimeManager,h;return s=u(i)?i:{label:i,value:r},h=new e.Controls.Forms.CopyableLabel.ViewModel(c),h.readOnly(!0),s.copyableValue=s.value,o=n.call(this,s)||this,v(c,(function(){var n=f(s.value);h.value(n)})),o.value=h,o.lifetimeManager.registerForDispose(c),t.registerForDispose(o),o}return __extends(t,n),t.prototype.getType=function(){return 2},t})(r);t.CopyFieldProperty=k;d=(function(n){function t(t,r,f,e){var o=this,s;return s=u(t)?t:{label:t,displayValue:r,callback:f,icon:e},s.copyableValue=s.displayValue,o=n.call(this,s)||this,o.callback=s.callback,o.icon=i(s.icon),o.callbackWrapper=function(){return o.callback(),!1},o}return __extends(t,n),t.prototype.getType=function(){return 3},t})(r);t.CallbackProperty=d;l=(function(t){function r(r,f,e){var s=this,o,h;return o=u(r)?r:{label:r,displayValue:f,bladeSelection:e},h=n.extend2({blade:{displayValue:o.displayValue,bladeSelection:o.bladeSelection}},o),s=t.call(this,h)||this,s.copyableValue=i(o.displayValue),s}return __extends(r,t),r.prototype.getType=function(){return 4},r})(r);t.OpenBladeProperty=l;g=(function(n){function t(t,i,r){var f=this,e,o,s;return e=u(i)?i:{label:i,bladeLinks:r},f=n.call(this,e)||this,o=f.lifetimeManager,f.bladeLinks=ko.observableArray(),s=e.bladeLinks.map(o,(function(n,t){return new l({label:"",displayValue:t.displayValue,bladeSelection:t.bladeSelection})})),s.subscribeAndRun(o,f.bladeLinks),t.registerForDispose(f),f}return __extends(t,n),t.prototype.getType=function(){return 7},t})(r);t.MultiOpenBladeProperty=g;nt=(function(n){function t(t,i){var r=this,f;return f=u(t)?t:{label:t,links:i},r=n.call(this,f)||this,r.links=f.links,r}return __extends(t,n),t.prototype.getType=function(){return 5},t})(r);t.MultiLinksProperty=nt;tt=(function(n){function t(t,r){var f=this,e;return e=u(t)?t:{label:t,icon:r},f=n.call(this,e)||this,f.icon=i(e.icon),f}return __extends(t,n),t.prototype.getType=function(){return 6},t})(r);t.ImageProperty=tt})(i=t.Properties||(t.Properties={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=MsPortalFx.ViewModels.Parts.Properties,i=ko.utils.wrap,r=(function(n){function t(t){var r=this,u=MsPortalFx.extend2({blade:{displayValue:t.displayValue,resolveBlade:t.resolveBlade}},t);return r=n.call(this,u)||this,r.resolveBlade=t.resolveBlade,r.copyableValue=i(t.displayValue),r}return __extends(t,n),t.prototype.getType=function(){return 8},t})(t.Property);n.OpenBladeAsyncProperty=r})(t=n.Properties||(n.Properties={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";var r=n.Base.Images,i=ko.observable,u=n.Resources.Strings.Part.Provisioning.description,f=(function(n){function t(t,f,e){var o=n.call(this,t,f,e!==!1,!0)||this;return o._partContainer=null,o.title=i(""),o.description=i(u),o.icon=i(r.Shell.DefaultBlade()),o.errorMessage=i(),o._partContainer=t,o.icon=i(r.Gear()),o}return __extends(t,n),t.prototype.onInputsSet=function(t){return n.prototype.onInputsSet.call(this,t)},t.prototype.mutate=function(n){this._partContainer.mutate({containerModel:n})},t})(n.ViewModels.ParameterCollection.BaseGalleryButtonPartViewModel);t.ContentViewModel=f})(i=t.ProvisioningPart||(t.ProvisioningPart={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=(function(t){function i(){var i=t.call(this)||this;return i.backgroundColor=n.Parts.PartColor.Theme,i.title(n.Resources.Strings.Part.Quickstart.title),i.icon(n.Base.Images.AzureQuickstart()),i}return __extends(i,t),i})(t.ButtonPart);t.QuickStartPart=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observable,r=ko.observableArray,u,i;(function(n){n[n.None=0]="None";n[n.CurrentValue=1]="CurrentValue";n[n.GaugeBackground=2]="GaugeBackground";n[n.TotalValue=3]="TotalValue"})(u=n.MetricColorBarKind||(n.MetricColorBarKind={}));i=(function(){function n(){this.instance=t(0);this.total=t(0);this.instanceQuota=t(100);this.totalQuota=t(100);this.unit=t("");this.hideTotal=t(!1);this.hideQuota=t(!1);this.hideTick=t(!1);this.maximum=t(100);this.startOffset=t(-90);this.totalArc=t(355);this.captionDisplayFormat=t("{2}");this.valueDisplayFormat=t("{0}");this.metrics=r();this.size=t(2)}return n})();n.ViewModel=i})(t=n.QuotaGauge||(n.QuotaGauge={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function u(n,t,i,r){return{key:n,extension:t,name:i,name2:r}}function it(n){return kt.some((function(t){return n.key===t.key}))}function hi(n){var r="<div data-bind='image: {0}' style='height: {1}px; width: {1}px; padding: {2};' alt=''/>",t=function(n,t,r){var u=v.Format.HtmlBindings,f={htmlBindingsTemplate:t};return{itemKey:n,template:t,format:u,formatOptions:f,filterableFormat:u,filterableFormatOptions:f,width:r?i(r):null}},u=[t("icon",r.format("value",15,0),"25px"),t("displayText","<div data-bind='text: value' class='msportalfx-text-small msportalfx-text-ellipsis'/>"),t("",r.format("MsPortalFx.Base.Images.Shell.Chevron()",14,"8px 0 9px 3px"),"30px"),];return n&&u.unshift(t("__placeholder__","","1px")),u}function rt(t){n.isNullOrWhiteSpace(t.group())&&t.group(nt.general)}function dt(n,t){var i=n[ot];ko.reactor(t,(function(){var t=n.displayText()+" "+n.group()+" "+(n.keywords()||[]).join(" ");i(t)}))}var o=n,k=o.Base,ut=k.Constants,l=ut.ExtensionNames,a=o.ViewModels,ft=a.Selectable,v=a.Controls.Lists.Grid,d=v.Extensions,f=a.Services.ResourceTypes,ti=k.Diagnostics.Telemetry,e=k.Images,ii=e.Polychromatic,s=o.isNullOrUndefined,y=ko.utils,i=ko.observable,g=ko.observableArray,ri=ut.ResourceTypes.ResourceGroups,ui=FxImpl.Azure,r=o.Resources.Strings.Part.SettingList,nt=r.Group,h=r.Keywords,et=y.arrayFirst,fi=3,ot="aggregatedKeywords",st="Resource",tt=l.Hubs,c=l.Support,ei=n.isFeatureEnabled("activitylogextension"),oi=n.isFeatureEnabled("linknewquesttosupportblade"),ht=u("__users",l.ActiveDirectory,"UserAssignmentsBlade"),ct=u("__tags",tt,st+"TagsListBlade"),lt=u("__locks",tt,"LocksBlade"),at=u("__exportTemplate",tt,"TemplateViewerBlade"),vt=u("__troubleshoot",c,"TroubleshootBlade"),yt=u("__troubleshootV2",c,"TroubleshootV2Blade"),pt=u("__supportRequest",c,oi?"HelpAndSupportBlade":"NewSupportRequestBlade"),wt=u("__resourceHealth",c,st+"HealthDetailBlade"),bt=ei?u("__eventLogs","Microsoft_Azure_ActivityLog","ActivityLogBlade"):u("__eventLogs",l.AzureMonitoring,"EventsBrowseBlade"),kt=[ht,ct,lt,at,vt,yt,pt,wt,bt],p=n.isFeatureEnabled("hidesupport"),si=n.isFeatureEnabled("hidehealthcheck"),w=(function(){function n(n,t,r,u,f){this.displayText=i("");this.icon=i();this.keywords=g();this.group=i(" ");this.aggregatedKeywords=i("");this._key=n;this._blade=y.wrap(t);this._bladeInputs=r;this._extension=y.wrap(u);this._options=f}return Object.defineProperty(n.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),n.prototype.getOptions=function(){return this._options},n.prototype.toSelection=function(){var n=this._options;return{key:this._key,detailBlade:this._blade.peek(),detailBladeInputs:this._bladeInputs.peek(),extension:this._extension.peek(),isParameterCollector:!!(n&&n.parameterCollector)}},n})(),b,gt,ni;w=__decorate([n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[String,Object,Function,Object,Object])],w);t.Setting=w;b=(function(){function t(t,u,e,o){var c=this,ft=this.resourceId=i(),l,k,p,w,h,a,b;this.searchBoxPlaceholder=i(r.searchBoxPlaceholder);l=y.wrapArray(e);o=o||{};p=function(){c._updateSettings(t,l,o,k);c._processSettings(t)};ft.subscribe(t,(function(t){w=(w||Q()).then((function(){var r=f.isSubscriptionId(t),i=Q();return r&&(i=n.Azure.getSubscriptionInfo(f.parseSubscriptionDescriptor(t).subscription).then((function(n){k=n}),(function(){}))),i.then(p)}))}));var nt=d.SelectableRow|d.Filterable,st=this._searchText=i(""),tt={selectableRow:{selectionMode:1,itemMatchesSelection:function(n,t){return n.key===t.key},createSelection:function(n){return n.toSelection()},activateOnSelected:i(!0),initialSelection:u&&u.content&&u.content.settingList&&u.content.settingList.selectableData},filterable:{searchableColumns:g([ot]),searchBoxCloseButtonVisible:i(!1),searchBoxPlaceholder:this.searchBoxPlaceholder,queryString:st}},ut=o&&!s(o.groupable)?o.groupable:!0;ut&&(nt|=d.Groupable,tt.groupable={groupKey:i("group"),sortFunction:v.SortFunction.SettingListGroupOrder},l().forEach((function(n){rt(n)})));h=new v.ViewModel(t,l,nt,tt);this.settingList=h;h.columns=g(hi(ut));h.showHeader=!1;h.selectableData.activatedItems.subscribe(t,(function(n){if(n&&n.length>0){var t=n[0];c._trace(t)}}));a=h.items;b=[];a.subscribe(t,(function(n){b=n}),null,"beforeChange");a.subscribe(t,(function(n){(w||Q()).then((function(){var t=!s(et(b,it)),i=!s(et(n,it));t&&!i&&p()}))}));a.subscribeArrayChanges(t,(function(n){c._removeSetting(n)||(dt(n,t),rt(n))}),null);this._processSettings(t)}return t.prototype.isPCv3=function(){return!1},t.prototype._updateSettings=function(t,u,c,l){var d=u().slice(),a=this.resourceId();if(o.remove(d,it),!s(a)){var ft=f.isTenantResource(a),k=f.isSubscriptionId(a),g=f.isResourceGroupId(a),tt=f.isResourceId(a),b=k||g||tt&&!ft,st=g?a:tt?f.buildResourceGroupIdFromResourceId(a):null,rt=g?ri:tt?f.buildResourceTypeFromResourceId(a):null,et=rt&&rt.toLowerCase().startsWith("microsoft.classic"),kt=i({scope:a}),ut=i({resourceId:a}),ot=i({assetId:a}),y=!s(c),dt=k&&l&&ui.isZeroCapSubscription(l),v=function(n,t,i,r,u,f,e,o){var s=new w(n.key,n.name,f,n.extension,o);return s.displayText(r),s.icon(i),s.group(t?nt.support:nt.resourceManagement),s.keywords([u]),d[e?"unshift":"push"](s),s};!this.isPCv3()||p||y&&c.enableSupportHelpRequest===!1||v(pt,!0,e.Support(),r.helpRequest,h.helpRequest,ot,!1,{parameterCollector:{supplyInitialData:n.wrap(""),receiveResult:n.wrap({}),supplyProviderConfig:n.wrap({provisioningConfig:{provisioningEnabled:!0,dontDiscardJourney:!0}})}});!p&&!si&&y&&c.enableSupportResourceHealth&&v(wt,!0,e.HeartPulse(),r.resourceHealth,h.resourceHealth,ut,!0);b&&(!y||c.enableSupportEventLogs!==!1)&&v(bt,!0,ii.Log(),r.eventLogs,h.eventLogs,i({queryInputs:{id:a}}),!0);b&&!et&&y&&c.enableTags&&v(ct,!1,e.Tag(),r.tags,"",ut,!1);b&&!dt&&v(lt,!1,e.Lock(),k?r.locksForSubscriptions:r.locks,"",ut,!1);(b||ft)&&(!y||c.enableRbac!==!1)&&v(ht,!1,e.PersonWithFriend({palette:fi}),r.users,r.access,kt,!1);!b||et||k||c.enableExportTemplate===!1||v(at,!1,e.Polychromatic.Download(),r.exportTemplate,h.exportTemplate,i({options:{resourceGroup:st,telemetryId:rt}}),!1);!p&&y&&(c.enableSupportTroubleshoot||c.enableSupportTroubleshootV2)&&v(c.enableSupportTroubleshootV2?yt:vt,!0,e.Tools(),r.troubleshoot,h.troubleshoot,ot,!0);u(d)}},t.prototype._processSettings=function(n){var t=this;this.settingList.items().slice().forEach((function(i){t._removeSetting(i)||(dt(i,n),rt(i))}))},t.prototype._removeSetting=function(n){var f=this,t=n.toSelection(),i=t.extension,r=t.detailBlade,e=t.key,u=!1;return kt.forEach((function(t){var o=f.settingList.items,s=o().some((function(n){return n.key===t.key}));(p&&i===c||i===t.extension&&(r===t.name||r===t.name2)&&e!==t.key&&s)&&(o.remove(n),u=!0)})),u},t.prototype._trace=function(t){var i={extension:t.extension,detailBlade:t.detailBlade},r=this._searchText.peek();n.isNullOrWhiteSpace(r)||(i.searchText=r);ti.trace({source:"MsPortalFx.ViewModels.Parts.SettingList",action:"OpenSetting",name:t.key,data:i})},t})();t.BaseViewModel=b;gt=(function(n){function t(t,i,r,u){return n.call(this,t,i,r,u)||this}return __extends(t,n),t})(b);t.ViewModel=gt;ni=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this,o=f.selectable=new ft,s=f.pcSelectable=new ft,e;return f.settingList.selectableData.selectedItems.subscribe(t,(function(n){var r=f.pcSelectable,u=f.selectable,t,i;n.length<1?(u.isSelected(!1),r.isSelected(!1)):(t=n[0],i=t.isParameterCollector?r:u,i.selectedValue(t),i.isSelected(!0))})),e=function(){var n=f.settingList.selectableData;n.selectedItems([]);n.activatedItems([])},o.isSelected.subscribe(t,(function(n){n||e()})),s.isSelected.subscribe(t,(function(n){n||e()})),f._initParameterCollector(t),f}return __extends(t,n),t.prototype.isPCv3=function(){return!0},t.prototype._initParameterCollector=function(n){var t=this,i=function(n){var i=n.selectedValue.peek();return t.settingList.items.peek().first((function(n){return n.key===i.key}))},r={selectable:this.pcSelectable,supplyInitialData:function(){var n=i(t.pcSelectable);return n.getOptions().parameterCollector.supplyInitialData()},receiveResult:function(n){var r=i(t.pcSelectable);r.getOptions().parameterCollector.receiveResult(n)},supplyProviderConfig:function(){var r=i(t.pcSelectable),n=r.getOptions().parameterCollector;return n.supplyProviderConfig?n.supplyProviderConfig():null}};this.parameterCollector=new a.ParameterCollector(n,r)},t})(b);t.ViewModelV2=ni})(i=t.SettingList||(t.SettingList={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){"use strict";var r=n.ViewModels.ParameterCollection.Internal,f=ko.observable,u=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.SetupPart"),e=n.Services.Gallery.Constants.GalleryOptionsKey,o=(function(i){function o(n,t){var u=i.call(this,n,t,!1)||this;return u._setupPartContainer=null,u._previousCommit=null,u._outputs=null,u._setupPartContainer=n,u.provisioningEntity={enableProvisioning:f(!0),privatePcPrBI:new r.ProvisioningEntityBindingInternals},u}return __extends(o,i),o.prototype.onInputsSet=function(n){return this._loadContent(),i.prototype.onInputsSet.call(this,n)},o.prototype.mutateOnLoad=function(){return null},o.prototype.mutate=function(n,t){this._setupPartContainer.mutate({partName:n,extensionName:t})},o.prototype.onProviderCommit=function(t,i){return this._outputs=i,n.Helpers.resolve(!0)},o.prototype._loadContent=function(){var i=this,n=this._setupPartContainer,r=this.mutateOnLoad(),t=function(){i._commit.subscribe(n,(function(n){i._executeProvisioningIfApplicable(n)}))};r?r.then((function(i){i?typeof i=="string"?n.mutate({partName:i}):n.mutate(i):t()}),(function(){u.error("mutateOnLoad() returned a failed promise");t()})):t()},o.prototype._executeProvisioningIfApplicable=function(i){var l=this,o,f;if(this._outputs&&(o=this._previousCommit,this._previousCommit=i,!n.deepEquals(o,i)&&t.ActionBars.Base.isCompleted(this.stepOutput()))){f=this._setupPartContainer;f.selectable.isSelected(!1);f.contentState(0);var a=new r.Provisioner(this.provisioningEntity),v=this._outputs,s=this.privateFcTpBI.inputs().options,h=a.executeProvisioning(v,s);f.operations.add(h,{blockUi:!0});var y=s[e].uiDefinition,c=y.markup.reference,p=c.partName,w=c.partExtension;h.then((function(){f.mutate({partName:p,extensionName:w})}),(function(){u.error("executeProvisioning callback failed.");f.contentState(3);l.beginExecuteCommand(!1)}))}},o})(t.ProvisioningPart.ContentViewModel);i.Content=o})(i=t.SetupPart||(t.SetupPart={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function r(){return{size:i(5),editButtonText:n.Resources.Strings.Part.Chart.editButtonText}}var i=ko.observable,u=(function(t){function i(n,i){var u=this,f=$.extend(r(),i);return u=t.call(this,n,f)||this,u._initSimpleChartPartOptions(f),u}return __extends(i,t),i.prototype._initSimpleChartPartOptions=function(t){var i=this,r=t;n.shallowCopyFromObject(i,r,["size","editButtonSelectable","editButtonText"])},i})(n.ViewModels.Controls.Visualization.SimpleChart.ViewModel);t.SimpleChartPart=u})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observable,r=ko.observableArray,u,i;(function(n){n[n.None=0]="None";n[n.CurrentValue=1]="CurrentValue";n[n.GaugeBackground=2]="GaugeBackground"})(u=n.MetricColorBarKind||(n.MetricColorBarKind={}));i=(function(){function n(){this.maximum=t(100);this.current=t(0);this.unit=t("");this.metrics=r();this.size=t(2)}return n})();n.ViewModel=i})(t=n.SingleValueGauge||(n.SingleValueGauge={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var s=n.Data,r=ko.observable,u=FxImpl.fromSerializableObject,f=FxImpl.isSerializedObject,e="",h={bothCallbacks:e,alreadySubscribed:e},o=FxImpl.getErrorMap(h),i=(function(){function n(n,t){this.defaultActionBarInput=r({isLastStep:!0,allowToggleProvisioningLocation:!0,status:null});this._configFromCollector=r();this._hasSentResult=!1;this._getResultSubscribers=[];!t.mapIncomingDataForEditScope==!t.mapIncomingDataForEditScopeAsync&&o.bothCallbacks();this._options=t;this._prepareEditScopeWithInitialData(n);this._setUpActionBarWatcher(n)}return Object.defineProperty(n.prototype,"editScope",{get:function(){return this._editScopeView.editScope},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"configFromCollector",{get:function(){return this._configFromCollector},enumerable:!0,configurable:!0}),n.prototype.getResultsBeforeCommit=function(n){var t=this._getResultSubscribers.some((function(t){return t===n}));t&&o.alreadySubscribed();this._getResultSubscribers.push(n)},n.prototype.getResults=function(){var n=this._editScopeView.editScope&&this._editScopeView.editScope(),t;return n&&(t=this._options.mapOutgoingDataForCollector(n.root)),t},n.prototype._prepareEditScopeWithInitialData=function(n){var i=this,e,o,h,r;this.bladeCallable=new t.Internal.BladeCallable(n,{receiveParams:function(n){var t=n.initialData,r=n.providerConfig;f(t)&&(t=u(t));f(r)&&(r=u(r));i._configFromCollector(r);i._options.mapIncomingDataForEditScope?(o=i._options.mapIncomingDataForEditScope(t),e=Q({})):e=i._options.mapIncomingDataForEditScopeAsync(t).then((function(n){o=n}))}});h=this._editScopeCache=s.EditScopeCache.createNew({entityTypeName:this._options.editScopeMetadataType,supplyNewData:function(){return o}});n.registerForDispose(h);this._editScopeView=h.createView(n);n.onInputsSetCallbacks.add((function(t){if(t.editScopeId&&t.editScopeId!==i._editScopeId){i._editScopeId=t.editScopeId;r=e.then((function(){return i._editScopeView.fetchForNewData(i._editScopeId)}));var u=n;typeof u.revealContent=="function"&&(r=r.then((function(){u.revealContent()})))}return r}))},n.prototype._setUpActionBarWatcher=function(n){var t=this,i=function(n){n&&n.status===3&&(t._hasSentResult||(t._hasSentResult=!0,t._discardEditScopeAndSendResult({actionBarOutput:n})))};n.onInputsSetCallbacks.add((function(n){i(n.internal_parameterProviderActionBarOutput);return}));ko.reactor(n,(function(){if(ko.isObservable(n._actionBar)){var t=n._actionBar();t&&i(t.output())}}))},n.prototype._discardEditScopeAndSendResult=function(n){var t=this._editScopeView,i=t.editScope&&t.editScope(),r,u,f;i&&(r=this._options.commitResult,r&&r(i.root),u=this._options.mapOutgoingDataForCollector(i.root,n),this.bladeCallable.sendResult({resultData:FxImpl.toSerializableObject(u)}),this._getResultSubscribers.forEach((function(n){n.receiveResult(u)})),f=this._editScopeCache,f.disposeAndDiscardEdits(this._editScopeId,t))},n})();i=__decorate([n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object])],i);t.ParameterProvider=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){"use strict";var t="",r={missingSelectable:t,bothSelectables:t,fieldAccessorAndCallbacks:t,missingCallbacks:t},i=FxImpl.getErrorMap(r),u=(function(){function t(t,r){var u=r.selectable,f=r.selectableSet?null:u||t.selectable;f||r.selectableSet||i.missingSelectable();u&&r.selectableSet&&i.bothSelectables();r.formFieldValueAccessor?(r.receiveResult||r.supplyInitialData)&&i.fieldAccessorAndCallbacks():r.receiveResult||i.missingCallbacks();this.bladeCaller=new n.Internal.BladeCaller(t,{forceInvocation:r.fxInternalFI,invokeOnSelectable:f,invokeOnSelectableSet:r.selectableSet,supplyParams:function(n){var i=null,u;return r.supplyInitialData?i=r.supplyInitialData(n):r.formFieldValueAccessor&&(u=r.formFieldValueAccessor.getEditableObservable(t),i=u()),{initialData:FxImpl.toSerializableObject(i),providerConfig:r.supplyProviderConfig?r.supplyProviderConfig(n):null}},receiveResult:function(n,i){var u=FxImpl.fromSerializableObject(n.resultData),f;r.receiveResult?r.receiveResult(u,i):(f=r.formFieldValueAccessor.getEditableObservable(t),f(u))}})}return t})();n.ParameterCollector=u})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function e(i,r){return t.getProvisioningOperationEndPoint.acquireObject(r?r:u.client,f.Constants.Shell,i).then((function(t){var r=t&&t.getValue(),u;if(r)return u=r.provisioningPromise,u?(u.finally((function(){t.dispose()})),Q(r)):(t.dispose(),n.QReject("The provisioning operation was invalid.",{data:{refkey:i}}))}))}var f=MsPortalFx.Base,u=n.Rpc,i=n.Constants.RpcMethods,r=u.ProxiedObjectTypeDefinition;t.initiateProvisioningRequestEndPoint=new r(i.initiateProvisioningRequest);t.getProvisioningRequestEndPoint=new r(i.getProvisioningRequest);t.getProvisioningOperationEndPoint=new r(i.getProvisioningOperation);t.getProvisioningOperation=e})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function u(n){return typeof n=="function"}function b(n){n||r.optionsMissing();u(n.supplyProvisioningPromise)||r.supplyProvisioningPromiseMissing();u(n.supplyStartboardInfo)||r.supplyStartboardInfoMissing();var t=n.parameterProvider;(n.actionBar?t:!t)||r.providerAndActionBar()}var h=n.Base,a=FxImpl.ViewModels.ParameterCollectionV3,y=FxImpl.Rpc,p=h.Diagnostics.Telemetry,o=FxImpl.ProvisioningTelemetry,v=o.ActionModifier,c=o.ProvisioningStatus,l=ko.observable,f=undefined,i="",w={optionsMissing:i,supplyProvisioningPromiseMissing:i,supplyStartboardInfoMissing:i,providerAndActionBar:i,automaticProvisioning:i,invalidStarboardInfo:i,badStarboardInfo:i,requestAlreadyExists:i,refKeyDoesntMatch:i,provisionerIdMissing:i,provisionerNotFound:i,refKeyMissing:i,requestNotFound:i},r=FxImpl.getErrorMap(w),e=(function(){function t(i,r){var h=this,f,o,c,a,e,s;this.provisioningConfig=l();this.provisioningPromise=l();this.provisionOnStartboard=l(!1);this._isCustomProvisioning=!0;this._actionBarSupportsForceInProgressStatus=!1;this._actionBarSupportsIsProvisioningBlade=!1;this._actionBarSupportsProvisionOnStartboardPart=!1;this._actionBarSupportsSecondaryLinkDisplayText=!1;this._actionBarSupportsSecondaryLinkValidation=!1;this._actionBarSupportsShowActionBar=!1;b(r);Object.defineProperty(this,"_launchingContext",{get:ko.computed(i,(function(){var n=h.provisioningConfig(),t=n&&n.galleryCreateOptions;return t&&t.launchingContext||{}}))});this._options=r;f=this._actionBar=r&&r.actionBar;o=!1;f&&(o=this._actionBarSupportsIsProvisioningBlade=u(f.isProvisioningBlade),this._actionBarSupportsForceInProgressStatus=u(f.forceInProgressStatus),this._actionBarSupportsProvisionOnStartboardPart=u(f.provisionOnStartboardPart),this._actionBarSupportsSecondaryLinkDisplayText=u(f.secondaryLinkDisplayText),this._actionBarSupportsSecondaryLinkValidation=u(f.secondaryLinkTriggerValidation),this._actionBarSupportsShowActionBar=u(f.showActionBar));c=this._provisionerId=n.getUniqueId();t.provisionersList[c]=this;a=p.Context.getPartContext();e=r.parameterProvider;e&&(e.getResultsBeforeCommit(this),s=function(t){var i=t&&t.provisioningConfig,u,r;i&&(i=n.clone(i,!0),u=i.galleryCreateOptions,r=u&&u.launchingContext,r&&(r.extVersion=n.getEnvironmentValue("version"),r.bladeInstanceId=a.bladeInstanceId),h.provisioningConfig(i),o&&f.isProvisioningBlade(t.provisioningConfig.provisioningEnabled))},s(e.configFromCollector()),e.configFromCollector.subscribe(i,s));t._registerRpcCallbacks()}return Object.defineProperty(t.prototype,"_telemetryId",{get:function(){var n=this._launchingContext;return n&&n.telemetryId},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){delete t.provisionersList[this._provisionerId]},t.prototype.startProvisioning=function(n){this._actionBar&&r.automaticProvisioning();var t=this._options.supplyStartboardInfo(n);return t&&!s.isValid(t)&&r.invalidStarboardInfo(),this.provisionOnStartboard(!!t),this._initiateProvisioningRequest(n,t)},t.prototype.receiveResult=function(n){var t=this.provisioningConfig()||{};t.provisioningEnabled&&this._beginProvisioning(n)},t.prototype._beginProvisioning=function(n){var t,i=this._actionBarSupportsProvisionOnStartboardPart&&this._actionBar.provisionOnStartboardPart();return this.provisionOnStartboard(i),i&&(t=this._options.supplyStartboardInfo(n)||this.provisioningConfig().startboardProvisioningInfo,s.isValid(t)||r.badStarboardInfo()),this._initiateProvisioningRequest(n,t)},t.prototype._initiateProvisioningRequest=function(i,u){var s=this,c=this._launchingContext||{},e,o;return c.telemetryId||(c.telemetryId=n.newGuid()),c.extVersion||(c.extVersion=n.getEnvironmentValue("version")),this._traceProvisioningStarted(this._createEventBase()),e=this._options.supplyProvisioningPromise(i),this.provisioningPromise(e),e?(e.then((function(n){s._traceProvisioningEnded(n,!0,s._createEventBase())}),(function(n){s._traceProvisioningEnded(n,!1,s._createEventBase())})),o=n.getUniqueId(),t.provisioningRequestsLookup[o]&&r.requestAlreadyExists(),t.provisioningRequestsLookup[o]={provisioningConfig:this.provisioningConfig(),provisioningRefKey:o,provisioningPromise:e,startboardInfo:u},a.initiateProvisioningRequestEndPoint.acquireObject(t.rpcClient,h.Constants.Shell,{provisionerId:this._provisionerId,provisioningRefKey:o}).then((function(n){n.getValue().provisioningRefKey!==o&&r.refKeyDoesntMatch();n.dispose()}))):this._traceProvisioningEnded(f,f,this._createEventBase()),e},t._registerRpcCallbacks=function(){t._rpcRegistered||(a.getProvisioningRequestEndPoint.registerObjectFactory(t.rpcClient,{allowedOrigin:[h.Constants.Shell],allowRemoteChanges:!0,handler:function(n){var i=n.provisionerId,u;if(i||r.provisionerIdMissing(),u=t.provisionersList[i],u)return Q(u.getProvisioningRequest(n.provisioningRefKey));r.provisionerNotFound(i)}}),t._rpcRegistered=!0)},t.prototype.getProvisioningRequest=function(n){var i,u;return n||r.refKeyMissing(),i=t.provisioningRequestsLookup[n],i||r.requestNotFound(n),u=i.provisioningPromise,u&&u.finally((function(){delete t.provisioningRequestsLookup[n]})),i},t.prototype._createEventBase=function(){var n=this._launchingContext,t={source:f,action:f,name:n&&n.galleryItemId,data:{isCustomProvisioning:this._isCustomProvisioning,provisionOnStartboard:this.provisionOnStartboard()}};return n&&(t.data.launchingContext=n),t},t.prototype._traceProvisioningStarted=function(n){return o.traceProvisioningStarted(n)},t.prototype._traceProvisioningEnded=function(n,t,i){var r=i||{};return r.actionModifier||(r.actionModifier=t===f||t?v.Succeeded:v.Failed),r.data||(r.data={}),r.data.provisioningStatus||(r.data.provisioningStatus=t===f?c.NoPromise:t?c.Resolved:c.UnknownFailure),o.traceProvisioningEnded(r)},t})(),s;e.rpcClient=y.client;e.provisioningRequestsLookup={};e.provisionersList={};e._rpcRegistered=!1;t.Provisioner=e;s=(function(){function n(){}return n.isValid=function(n){n=n||{};var t=n.provisioningPart||{},i=n.startboardPart||{};return!!t.name&&!!t.extension&&!!i.name&&!!i.extension&&!!n.startboardPartKeyId},n})();t.StartboardInfo=s})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";n.pollingInterval=2e3;n.pollingRetries=10})(t=n.ParameterCollectionV3||(n.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(i){"use strict";function o(n){return typeof n=="function"}function s(n,t){return t===void 0&&(t=u.pollingRetries),u.getProvisioningOperation(n).catch((function(i){return--t?Q.delay(u.pollingInterval).then((function(){return s(n,t)})):Q.reject(i)}))}var u=FxImpl.ViewModels.ParameterCollectionV3,r=ko.observable,h=new n.Base.Diagnostics.Log("MsPortalFx/Azure/BaseResourceDropDown"),e=n.clone,f=(function(i){function u(u,f){var e=i.call(this)||this,h,c,s;return e.description=r(""),e.errorMessage=r(),e.icon=r(n.Base.Images.Shell.DefaultBlade()),e.initialData=r(),e.updatedData=r(),e.provisioningPromise=r(),e.provisioningStarted=r(!1),e.statusUnknown=r(!1),e.title=r(""),e._shouldBlockUiWhenProvisioning=!0,e._provisioningConfig=r(),e._delayPromise=Q.delay(2e3),h=f&&f.container||{},c=h.selectable&&h.selectable.selectedValue||!0,u.selectable=t.Part.createSelectableViewModel(f,c),e._partContainer=u,e.icon=r(n.Base.Images.Gear()),s=f&&f.content||{},e.initialData(s.initialData),e.updatedData(s.updatedData),e.statusUnknown(s.statusUnknown),e.errorMessage(s.errorMessage),e.provisioningPromise.subscribe(u,(function(n){if(n)if(e._shouldBlockUiWhenProvisioning&&u.operations.add(n,{blockUi:!0}),o(e.onProvisioningPromiseAcquired))e.onProvisioningPromiseAcquired(n);else n.then((function(n){e.mutateIntoStartboardPart(n)}),(function(n){if(o(e.onProvisioningPromiseError))e.onProvisioningPromiseError(n);else e.errorMessage(n)}))})),e}return __extends(u,i),Object.defineProperty(u.prototype,"provisioningConfig",{get:function(){if(!this._provisioningConfig()){var n=this.initialData();this._provisioningConfig(e(n&&n.provisioningConfig))}return this._provisioningConfig()},set:function(n){this._provisioningConfig(e(n))},enumerable:!0,configurable:!0}),u.prototype.onInputsSet=function(n){n&&n.initialData&&(this.initialData(n.initialData),this.provisioningPromise()||this.errorMessage()||this.statusUnknown()||(this.provisioningStarted(!0),this._fetchProvisioningPromise()));return},u.prototype.mutateIntoStartboardPart=function(n){var u=this,t=this.initialData(),i,r;if(!t||!t.startboardPart){this.errorMessage("Could not mutate into target part");throw new Error("Initial data was not persisted correctly to the part's viewstate. Make sure the 'initialData' property is added to your Part.ViewStateProperties in your PDL.");}i=t.startboardPart;r={partName:i.name,extensionName:i.extension,containerModel:n};this._delayPromise.then((function(){u._partContainer.mutate(r)}))},u.prototype._fetchProvisioningPromise=function(){var n=this,t=this.initialData().provisioningRefKey;!t||s(t).then((function(t){var i=t.provisioningPromise;if(i)n.updatedData(t.data),n.provisioningPromise(i);else throw new Error("Provisioning operation missing promise");})).catch((function(t){n.statusUnknown(!0);h.warning(t)}))},u})(t.ButtonPart);f=__decorate([n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object])],f);i.ProvisioningPart=f})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function e(n){return typeof n=="function"}var s=n.Base,u=n.ViewModels,c=s.Diagnostics,i=u.Controls.Lists.Grid,r=ko.observable,f=ko.observableArray,h=c.Log.writeEntry,o=(function(t){function o(n,i,f){var o=t.call(this,n)||this,s,h;if(o.showSelectButton=r(!1),o.triggerSelectAction=r(""),o.showInfoBox=r(!1),o._basicTemplate="<div style='height: 40px; margin-top: 10px'><!-- ko if: settings.item.icon --><div style='width: 30px; height: 30px; float: left; margin-right: 10px;' data-bind='image: settings.item.icon'><\/div><!-- /ko --><div><div><div data-bind='text: value()' class='msportalfx-text-header-regular msportalfx-text-ellipsis msportalfx-tooltip-overflow'><\/div><\/div><div><!-- ko if: settings.item.subtitle --><div class='msportalfx-text-regular msportalfx-text-muted-50 msportalfx-text-ellipsis msportalfx-tooltip-overflow' data-bind='text: settings.item.subtitle' style='max-width: 60%; float: left'><\/div><!-- /ko --><!-- ko if: settings.item.detail --><div class='msportalfx-text-regular msportalfx-text-muted-50 msportalfx-text-ellipsis msportalfx-tooltip-overflow' style='max-width: 20%; float: right' data-bind='text: settings.item.detail'><\/div><!-- /ko --><\/div><\/div><\/div>",!f.dataNavigator==!f.items)throw new Error("For PickerBase options, specify dataNavigator or items (not both).");return o.showSelectButton(f.allowMultiSelect||!1),s=f.createNewOptions,o.showCreateAction=r(s&&!!s.title&&!!s.dynamicBladeSelection),o._buildAddNewGrid(n,s),o._buildPickerGrid(n,f),o.pickerGrid.selectableData.selectedItems.subscribe(n,(function(n){var t=o.showSelectButton(),i,r,u;n&&n.length>0?(o.addNewGrid&&o.addNewGrid.selectableData&&o.addNewGrid.selectableData.selectedItems&&o.addNewGrid.selectableData.selectedItems([]),i=void 0,t||(r=n[0],i=o.dataModel&&!f.isItemInDataModel(r,o.dataModel())),(i||t)&&(u=f.mapItemsToDataModel(n),o._saveToEditScope(u))):t&&o._saveToEditScope(null)})),o.pickerGrid.items.subscribeArrayAdds(n,(function(n){n.disabled&&n.disabled()?o._disableGridItem(n):o.dataModel&&f.isItemInDataModel(n,o.dataModel())&&o._selectGridItem(n)})),o.parameterProvider=new u.ParameterProvider(n,{mapIncomingDataForEditScope:function(n){return{pickedItems:r(f.mapIncomingDataToDataModel(n))}},mapOutgoingDataForCollector:function(n){return n.pickedItems()}}),o.addNewItemCollector=new u.ParameterCollector(n,{supplyInitialData:function(){return e(s.supplyInitialData)?s.supplyInitialData():{}},receiveResult:function(n){e(s.receiveResults)&&s.receiveResults(n);o.addNewGrid.selectableData.selectedItems([]);o._saveToEditScope(n)},supplyProviderConfig:function(){if(e(s.supplyProviderConfig))return s.supplyProviderConfig()},selectableSet:o.addNewGrid.selectableData}),o.addNewGrid.selectableData&&o.addNewGrid.selectableData.selectedItems&&o.addNewGrid.selectableData.selectedItems.subscribe(n,(function(n){n&&n.length>0&&o.pickerGrid.selectableData.selectedItems([])})),h=n.createChildLifetime(),ko.computed(h,(function(){if(o.parameterProvider.editScope()){var n=o.parameterProvider.configFromCollector();f.loadPickerItems(n||{},o.dataModel());h.dispose()}})).extend({throttle:50}),o}return __extends(o,t),o.prototype.openCreateNewBlade=function(){var n=this.addNewGrid.items,t=n&&n()||[],i;t.length&&(i=this.addNewGrid.getRowMetadata(t[0]),i.selected(!0))},o.prototype.disableCreateNewOption=function(){var n=this.addNewGrid.items,t=n&&n()||[],i;t.length&&(i=this.addNewGrid.getRowMetadata(t[0]),i.disabled(!0))},o.prototype._saveToEditScope=function(t){this.dataModel(t);this.showSelectButton()||this.triggerSelectAction(n.getUniqueId())},o.prototype._buildPickerGrid=function(t,u){var s=[{name:r(""),itemKey:"title",format:i.Format.HtmlBindings,formatOptions:{htmlBindingsTemplate:this._basicTemplate}},{itemKey:"infoBalloon",format:i.Format.HtmlBindings,width:r("35px"),formatOptions:{htmlBindingsTemplate:"<!-- ko if: value --><div data-bind='pcDockedBalloon:value'><\/div><!-- /ko -->"}},],o={selectionMode:u.allowMultiSelect?2:1},e;e=u.dataNavigator?this.pickerGrid=new i.ViewModel(t,null,i.Extensions.SelectableRow|i.Extensions.Pageable,{selectableRow:o,pageable:{type:i.PageableType.Sequential,dataNavigator:u.dataNavigator}}):this.pickerGrid=new i.ViewModel(t,u.items,i.Extensions.SelectableRow,{selectableRow:o});e.columns=f(s);e.showHeader=!1;e.noRowsMessage(n.Resources.Strings.ViewModels.Controls.noRowsMessage)},o.prototype._buildAddNewGrid=function(t,u){var e,o={activateOnSelected:r(!0),selectionMode:1},c=f(),h;!u||!u.title||!u.dynamicBladeSelection||(e=[{name:r(""),itemKey:"title",format:i.Format.HtmlBindings,formatOptions:{htmlBindingsTemplate:this._basicTemplate}},],c([{title:r(u.title),icon:r(s.Images.AddBoxed()),item:null},]),o=n.extend(o,{itemMatchesSelection:function(){return!0},createSelection:function(){return u.dynamicBladeSelection}}));h=this.addNewGrid=new i.ViewModel(t,c,i.Extensions.SelectableRow,{selectableRow:o});e&&(h.columns=f(e));h.showHeader=!1},Object.defineProperty(o.prototype,"dataModel",{get:function(){var n=this.parameterProvider.editScope();return n&&n.root&&n.root.pickedItems},enumerable:!0,configurable:!0}),o.prototype._selectGridItem=function(n){if(n){var t=this.pickerGrid.getRowMetadata(n);t?t.selected()||t.selected(!0):h(1,"Pickers","Metadata is null. Unable to set selected flag.")}},o.prototype._disableGridItem=function(n){if(n){var t=this.pickerGrid.getRowMetadata(n);t?(t.disabled(!0),t.selected()&&t.selected(!1)):h(1,"Pickers","Metadata is null. Unable to set disabled flag.")}},o})(u.Controls.Loadable.ViewModel);o=__decorate([n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Object])],o);t.PickerBase=o})(i=t.Pickers||(t.Pickers={}))})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";var i=n.Base,f=FxImpl.Rpc,e=new i.Diagnostics.Log("MsPortalFx/Hubs/Notifications"),r="Only one of asset/blade/uri can be specified",o,u;(function(n){n[n.Information=0]="Information";n[n.Warning=1]="Warning";n[n.Error=2]="Error";n[n.InProgress=3]="InProgress";n[n.Success=4]="Success"})(o=t.NotificationStatus||(t.NotificationStatus={}));u=(function(){function t(t){var u=this,i;if(t.asset&&t.linkedBlade)throw new Error(r);["status","title","description","descriptionAsHtml","percentComplete","asset","uri","uriAction","linkedBlade","additionalProperties"].forEach((function(n){u[n]=t[n]}));this.correlationIds=["clientNotification-"+n.getUniqueId()];i=t.correlationIds;i&&i.length&&Array.prototype.push.apply(this.correlationIds,i)}return t.prototype.validate=function(){if((this.title||"").trim()&&(this.description||"").trim())return!0;e.error("Missing title/description")},t.prototype.package=function(){return{timestamp:new Date,status:this.status,title:this.title,description:this.description,descriptionAsHtml:this.descriptionAsHtml||!1,correlationIds:this.correlationIds,percentComplete:this.percentComplete,asset:this.asset,isRecommendation:!1,uri:this.uri,linkedBlade:this.linkedBlade,additionalProperties:this.additionalProperties}},t.prototype.publish=function(){if(this.validate()){if(this.asset&&this.linkedBlade)throw new Error(r);FxImpl.Hubs.Notifications.addClientNotificationDefinition.invoke(f.client,i.Constants.Shell,this.package())}},t.publish=function(n){var i=new t(n);return i.publish(),i},t})();t.ClientNotification=u})(i=t.Notifications||(t.Notifications={}))})(t=n.Hubs||(n.Hubs={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";var e=MsPortalFx.Base,r=n.Rpc,o=MsPortalFx.Hubs.Notifications,u=n.Constants.RpcMethods,i=r.FuncEndPointDefinition,s,f;t.addClientNotificationDefinition=new i(u.addClientNotification);t.addClientNotificationsDefinition=new i(u.addClientNotifications),(function(n){n[n.NavigatePortal=0]="NavigatePortal";n[n.OpenInNewTab=1]="OpenInNewTab";n[n.OpenInCurrentTab=2]="OpenInCurrentTab"})(s=t.ClientNotificationUriAction||(t.ClientNotificationUriAction={}));t.showModalNotification=new i("showModalNotification");f=(function(n){function i(t){var i=n.call(this,t)||this;return i.inlineForm=t.inlineForm,i.toastDuration=t.toastDuration,i.irisNotificationDetails=t.irisNotificationDetails,i}return __extends(i,n),i.prototype.publish=function(){if(this.validate()){var n=this.package();return n.isServerEvent=!1,n.inlineForm=this.inlineForm,n.toastDuration=this.toastDuration,n.irisNotificationDetails=this.irisNotificationDetails,t.addClientNotificationDefinition.invoke(r.client,e.Constants.Shell,n),n.timestamp}},i.internalPublish=function(n){var t=new i(n);return t.publish(),t},i})(o.ClientNotification);t.InternalClientNotification=f})(i=t.Notifications||(t.Notifications={}))})(t=n.Hubs||(n.Hubs={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){"use strict";function t(n){return typeof n=="string"}function r(n){return typeof n=="object"}function e(n){if(n)return MsPortalFx.forEachKey(n,(function(n,i,u){var f=i;try{f=JSON.parse(f)}catch(o){}f&&(u[t(n)&&n.toLowerCase()||n]=r(f)&&e(f)||f)}),{})}function o(n,i,e){var v,y,l;r(n.message)&&!n.details&&(n=n.message.error||n);var h=n.message,p=MsPortalFx.map(n.details||[],(function(n){return[n]})),a=[],s,c;if(h&&(v=h.error||{},s=v.message||h.message,c=v.code||h.code,s||t(h)?s&&!t(s)&&(s=JSON.stringify(s)):s=JSON.stringify(h)),p.length&&(a=p.map((function(n){return o(n,i,e-1)}))),s=s||h,c=c||n.code,y=n.target,l=i?c||"NoCode":c&&(y?u.errorMessageWithTarget:f).format(s,c,y)||s,a.length){if(e>1)return{error:l,details:a};l=l.concat(" "+a.join(", "))}return l}function s(n,t,i){var u;if(n){(i<=0||!i)&&(i=1);var r=e(n),s=t?r.code:r.code&&f.format(r.message,r.code)||r.message,h=$.map(r.details,(function(n){return[n]})),c=(h||[]).map((function(n){return o(n,t,i)}));u={error:s,details:c}}return u}function h(n,t){var i=s(n),r=i.error||t||"";return MsPortalFx.forEachKey(i.details,(function(n,t){r+=" "+t})),r}function c(n,t,i){var r=MsPortalFx.extend({message:t},{name:n.name,stack:n.stack,code:i||n.code,readyState:n.readyState,status:n.status,statusText:n.statusText});return r.readyState!==0||r.status||(r.status=0,r.statusText="ajax readyState was zero"),r}function l(n){var r,f,u=n.responseJSON||n.content,i=u&&(u.error||u.Error||u),e=i&&(i.message||i.Message);if(e)r=h(i),f=i.code;else if(n.message)r=n.message;else{if(n instanceof Error)return n;r=t(n)?n:"Unknown error occurred."}return c(n,r,f)}function i(n){n&&r(n)&&(delete n.message,n.error?i(n.error):n.details||n.code||(n.code="NoCode"),Array.isArray(n.details)?(n.details||[]).forEach(i):i(n.details))}function a(n){var t=MsPortalFx.clone(n,!0,!0);return i(t),t}var u=MsPortalFx.Resources.Strings.Azure,f=u.errorMessageWithCode;n.parseArmError=s;n.parseArmErrorToMessage=h;n.buildSimplifiedError=l;n.scrubError=a})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";function i(n){return typeof n=="function"}var l=MsPortalFx.Base,s=MsPortalFx.ViewModels,p=s.Obsolete.Forms.FilterComboBox,a=MsPortalFx.Resources.Strings.Azure.BaseResourceDropDown,f=ko.computed,e=ko.observable,h=ko.observableArray,v=ko.reactor,c=new l.Diagnostics.Log("MsPortalFx/Azure/BaseResourceDropDown"),o=s.getValidationResultPromise,y=MsPortalFx.localeCompareIgnoreCase,r="",w={optionsUndefined:r,formUndefined:r,accessorUndefined:r,configUndefined:r,fetchItemsUndefined:r,filterObjUndefined:r,mapItemUndefined:r,cannotWriteValidate:r},u=n.getErrorMap(w),b=(function(){function n(n,t,r){var c=this,k,d,y,l,w,nt,b,g,tt;this._itemsObs=h();this._firstLoad=!0;t||u.optionsUndefined();t.form||u.formUndefined();t.accessor||u.accessorUndefined();r||u.configUndefined();i(r.fetchItems)||u.fetchItemsUndefined();i(r.filterObjectByName)||u.filterObjUndefined();i(r.itemToHierarchicalFormOption)||u.mapItemUndefined();this._bContainer=n;this._loadingDeferred=Q.defer();this._loading=e(!0);k={options:h(),filterOptions:{datasetType:0},validations:h()};MsPortalFx.extend(k,t);this._bOptions=k;this._setOptions=k.options;d={allowCreateNew:!1,blockLoadingItems:e(!1),nameForInitialValue:e(),getSortedListForInitialSelection:function(){return c._items},fetchItems:undefined,filterObjectByName:undefined,itemToHierarchicalFormOption:undefined};MsPortalFx.extend(d,r);this._bConfig=d;this._bConfig.allowCreateNew||this._bOptions.validations.push(new s.CustomValidation(a.creatingResourcedDisabledValidationMessage,function(n){var t=!c.getObjectByName(n);return o(t&&a.creatingResourcedDisabledValidationMessage)}));y=i(r.filterComboBoxCreateCallback)?r.filterComboBoxCreateCallback(this._bOptions):{filterComboBox:new p.ViewModel(n,this._bOptions),control:null};l=this._filterCombo=y.filterComboBox;this.control=r.control||y.control||y.filterComboBox;nt=r.optionsFilter;v(n,(function(){var n=c._itemsObs();c._setOptions((nt?nt(n):n).map(r.itemToHierarchicalFormOption));l.value.peek()&&c.triggerValidation()}));b=!1;v(n,(function(){var n=r.createNewOption&&r.createNewOption(),t=n?null:l.value();n=n||c.getObjectByName(t)||d.nullValue;(!t||~l.items.peek().map((function(n){return n.text.peek()})).indexOf(t))&&!b&&w&&w(n)}));this.value=e();this.value.subscribe(n,(function(n){if(b||n!==w()){var i=n&&c._bConfig.itemToHierarchicalFormOption(n),t=i&&i.text(),r=c.getObjectByName(t)||c.getObjectByName(i&&i.value);(t=r&&c._bConfig.itemToHierarchicalFormOption(r).text()||t,l.value()!==t)&&l.value(t)}}));ko.pureComputed((function(){return!!t.form.editScope()&&!c._bConfig.blockLoadingItems()})).fxOnceAndRun(n,(function(){w=t.accessor.getEditableObservable(n);w.subscribe(n,(function(n){try{b=!0;c.value(n)}finally{b=!1}}));c._loadItems()}),(function(n){return n}));i(l.valid)&&(this.valid=f(n,{read:function(){return y.valid?y.valid():l.valid()},write:function(){u.cannotWriteValidate()}}));i(l.enabled)&&(g=e(!0),this.enabled=f(n,{read:function(){return l.enabled()},write:function(n){g(n);g.valueHasMutated()}}),f(n,(function(){l.enabled(g())})),f(n,(function(){l.loading(c._loading())})));i(l.infoBalloonContent)&&(this.infoBalloonContent=f(n,{read:function(){return l.infoBalloonContent()},write:function(n){l.infoBalloonContent(n)}}));tt=function(){return c._loadingDeferred.promise.then((function(){n.onInputsSetCallbacks.remove(tt)}))};n.onInputsSetCallbacks.add(tt)}return Object.defineProperty(n.prototype,"_items",{get:function(){return this._itemsObs.peek()},set:function(n){this._itemsObs(n)},enumerable:!0,configurable:!0}),n.prototype.clearValidation=function(){var n=this._filterCombo;return n&&i(n.clearValidation)?Q(n.clearValidation()):Q()},n.prototype.triggerValidation=function(){var n=this._filterCombo;return!this._firstLoad&&n&&i(n.triggerValidation)?n.triggerValidation():Q(!0)},n.prototype.getObjectByName=function(n){var t=this;return this._items.first((function(i){return t._bConfig.filterObjectByName(i,n)}))},n.prototype._loadItems=function(){var n=this,r=function(t){var r=n._bOptions.validations,u=i(r)&&r()||[],f=u.map((function(n){var r=n.validate;return i(r)&&r(t)||undefined}));return Q.all(f).then((function(n){return n.every((function(n){return!n||n.valid}))}),(function(){return c.warning("Failed to validate '"+t+"'. Assuming valid."),!0}))},t=function(i,u){if(u=u||0,u<i.length){var f=i[u],o=n._bConfig.itemToHierarchicalFormOption(f),e=o.text();return n._filterCombo.items().first((function(n){return n.text()===e}))?r(e).then((function(n){return n?f:t(i,u+1)}),(function(){return undefined})):t(i,u+1)}return Q(undefined)},u=function(t){if(t){var i=n._bOptions.form.editScope();i.isDisposed||i.resetValue(n._bOptions.accessor,{newInputValue:t})}},f=function(){var f,e=n._bConfig,c=e.itemToHierarchicalFormOption,l=n._filterCombo,o=e.createNewOption,k=o&&o(),a=!1,d,v,w,nt,h,b;if(n._firstLoad?(d=n._bOptions.form.editScope(),d.isDisposed||(v=n._bOptions.accessor.getEditableObservable(n._bContainer),f=v&&v()),MsPortalFx.keysLength(f)||(f=undefined)):f=n.value(),f){var s=c(f),p=s&&s.text(),g=s&&s.value;f=(p||g)&&l.items().first((function(n){return!y(n.value,g)||!y(n.text(),p)}))&&n.getObjectByName(p)||k?(a=!0)&&f:undefined}return!n._firstLoad&&f?Q():(n._firstLoad&&!f&&(w=i(e.nameForInitialValue)?e.nameForInitialValue():undefined,f=!!w&&n.getObjectByName(w)||undefined),!f&&!f&&e.allowCreateNew&&i(o))?(l.value(""),n._firstLoad&&Q.nextTick((function(){u(f=k)})),Q()):(nt=f,b=n._items,Q().then((function(){if(!a)return f?(h=c(f),r(h.text()).then((function(n){n||(f=undefined)}))):void 0})).then((function(){if(!f&&b.length)return t(e.getSortedListForInitialSelection()).then((function(n){f=n}))})).finally((function(){f||(f=nt||b[0]);u(f);f&&(a?o&&o(f):(h=c(f),l.value(h.text())))})))};this._loading(!0);this._bConfig.fetchItems().catch((function(n){return c.warning("Failed to fetch items: "+n.message),[]})).then((function(t){t===void 0&&(t=[]);n._items=t;var i=n._bOptions.form.editScope();i.isDisposed||f().finally((function(){n._firstLoad=!1;n._loading(!1);n._loadingDeferred.resolve();n.triggerValidation()}))}))},n.prototype._hasPermission=function(n,t,r){var f=i(t)&&t(),u=f&&f.actions||[];return u.length<1?o():l.Security.hasPermission(n,u).then((function(n){return o(!n&&(f.message||r||"{0}").format(u.toString()))}),(function(){return c.warning("Failed to get permissions on ["+u.toString()+"] over scope '"+n+"'."),o()}))},n})();t.BaseResourceDropDown=b})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";function o(n,r){return t.getLocationsForCreateEndPoint.invoke(n,i,r)}function s(n){return t.getLocationDisplayNamesEndPoint.invoke(n,i,null)}function h(n){return t.ResourceManager.readUserSettingsEndPoint.invoke(n,i,[t.lastUsedLocationsKey]).then((function(n){var i=n[t.lastUsedLocationsKey]||{};return Object.keys(i).sort((function(n,t){var r=i[n],u=i[t];return r<u?1:r>u?-1:0}))}))}function c(n,t){return n.displayName.toLowerCase().localeCompare(t.displayName.toLowerCase())}var f=MsPortalFx.Base,e=n.Rpc,r=n.Constants.RpcMethods,u=e.FuncEndPointDefinition,i=f.Constants.ExtensionNames.Hubs;t.getLocationDisplayNamesEndPoint=new u(r.getLocationDisplayNames);t.getLocationsForCreateEndPoint=new u(r.getLocationsForCreate);t.lastUsedLocationsKey="deployments_lastUsed_locations";t.getLocationsForCreate=o;t.getLocationDisplayNames=s;t.getLastUsedLocations=h;t.locationsComparer=c})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";function h(n){return n.toLowerCase()}function p(){return i.getLocationDisplayNames(l.client)}var l=FxImpl.Rpc,i=FxImpl.Azure,a=n.ViewModels,v=FxImpl.Azure,c="function",u=undefined,r=ko.observable,f=ko.unwrap,e=a.getValidationResultPromise,o="",y={subsIdObsMissing:o,bothfilters:o,subIdMissing:o},s=FxImpl.getErrorMap(y),w;t.getLocations=p,(function(t){function b(n){typeof n.subscriptionIdObservable!==c&&s.subsIdObsMissing();var t=f(n.filter);t&&!t.allowedLocations==!t.disallowedLocations&&s.bothfilters()}function k(n,t){return!y(n.displayName,t)||!y(n.name,t)}function d(n){if(n)return{text:r(n.displayName||n.name),value:n.name}}function g(n,t){return i.getLocationsForCreate(l.client,{subscriptionId:n,resourceTypes:t}).then((function(n){return(n||[]).map((function(n){return{displayName:n.displayName,name:n.name}}))}))}var p=v.BaseResourceDropDown,w=n.ViewModels,l=FxImpl.Rpc,a=n.Resources.Strings.Azure,o=a.Locations.DropDown,y=n.localeCompareIgnoreCase,nt=(function(n){function t(t,v){var y=this,p,nt,tt,ft,et,st,ut,it,rt,ot;return b(v),v.label||(v.label=r(o.defaultLabel)),p=v.filter,ft=[null],p&&(v.validations||(v.validations=ko.observableArray()),et=function(n){var t,i;nt=tt=u;n&&(t=n.allowedLocations,t?nt=t.locationNames.map(h):(i=n.disallowedLocations||[],tt=i.map((function(n){return{name:h(n.name)}}))))},et(f(p)),st=p,ko.isSubscribable(p)&&st.subscribe(t,(function(n){et(n)})),v.validations.push(new w.CustomValidation(o.emptyMessage,function(n){if(!ft.length)return e(o.emptyMessage);var t=y._items.first((function(t){return t.displayName===n}));return(n=t&&t.name,nt&&!~nt.indexOf(n)||tt&&~tt.map((function(n){return n.name})).indexOf(n))?e(a.BaseResourceDropDown.searchingValidationMessage.format(n)):e()}))),it={optionsFilter:function(n){return f(p),ft=n.filter((function(n){var t=h(n.name);return(!nt||!!~nt.indexOf(t))&&(!tt||!~tt.map((function(n){return n.name})).indexOf(t))}))},blockLoadingItems:r(!0),nameForInitialValue:r(),getSortedListForInitialSelection:function(){return ut},fetchItems:function(){var n=y._subId,t=y._resourceTypes||[];return n||s.subIdMissing(),g(n,t).then((function(n){return i.getLastUsedLocations(l.client).then((function(t){var r=n.map((function(n){return n.name})),u=r.map((function(){return!1}));return ut=[],t.forEach((function(t){var i=r.indexOf(t);i>-1&&(u[i]=!0,ut.push(n[i]))})),u.reduce((function(t,i,r){return i||t.push(n[r]),t}),ut),n.sort(i.locationsComparer)}))}))},filterObjectByName:k,itemToHierarchicalFormOption:d},y=n.call(this,t,v,it)||this,y._subId=null,rt=u,v.subscriptionIdObservable.subscribe(t,(function(n){if(n){if(typeof rt=="boolean"&&(y.enabled(rt),rt=u),y._subId!==n){var t=!!y._subId;y._subId=n;it.blockLoadingItems(!1);t&&y._loadItems()}}else rt=y.enabled(),y.enabled(!1)})),ko.reactor(t,(function(){y._resourceTypes=typeof v.resourceTypesObservable===c?v.resourceTypesObservable():[];y._subId&&y._loadItems()})),ot=function(n){var u=n.internal_bladeCallerParams||{},r=u.providerConfig||{},i;FxImpl.isSerializedObject(r)&&(r=FxImpl.fromSerializableObject(r));it.nameForInitialValue()||(i=(r.provisioningConfig||{}).galleryCreateOptions||{},i.resourceGroupLocationDisplayName&&(it.nameForInitialValue(i.resourceGroupLocationDisplayName),!y._subId&&i.subscriptionId&&(y._subId=i.subscriptionId,it.blockLoadingItems(!1))),t.onInputsSetCallbacks.remove(ot));return},t.onInputsSetCallbacks.add(ot),y}return __extends(t,n),t})(p);t.DropDown=nt})(w=t.Locations||(t.Locations={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function o(n,i,u){return t.getResourceGroupsFromSubscriptionEndPoint.invoke(n,r,{subscriptionIds:i,uniqueResourceGroups:u})}function s(n,i){return t.isResourceLockedEndpoint.invoke(n,r,{lockLevel:"ReadOnly",resourceId:i})}var u=MsPortalFx.Base,f=n.Rpc,i=n.Constants.RpcMethods,e=f.FuncEndPointDefinition,r=u.Constants.ExtensionNames.Hubs;t.getResourceGroupsFromSubscriptionEndPoint=new e(i.hubsGetResourceGroupsFromSubscription);t.isResourceLockedEndpoint=new n.Rpc.FuncEndPointDefinition(i.getLockValidation);t.getResourceGroupsFromSubscription=o;t.getIsReadOnly=s})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";var o=n.ViewModels,f=o.CustomValidation,s=n.Resources.Strings.ViewModels.Controls.ResourceGroups,u=undefined,r=ko.observable,e=ko.observableArray,h=ko.reactor,i=o.getValidationResult,c;(function(t){function pt(n,t,i,r){return a.validateResourceGroupName(n,t,i,r)}function wt(n,t){var r,u,i;return n?(r=et(n),!r.valid)?void 0:t.length<1?n:(u=1,i=function(r){var f=t.some((function(n){return n.toLocaleLowerCase()===this}),r.toLocaleLowerCase());return f&&i(n+"_"+u++)||r},i(n)):n}function et(n){return(n=n||"",n.length>t.NameMaxLength)?i(o.lengthValidationMessage):n&&!at.test(n)?i(o.invalidMessage):i()}var p=n.Azure,w=n.Base,v=FxImpl.ViewModels.Forms.CreatorAndComboBox,st=w.Constants,b=w.Diagnostics,c=n.ViewModels,ht=c.Forms,k=c.Controls.Balloon.Link,ct=c.Services.ResourceTypes,y=FxImpl.Azure,lt=y.BaseResourceDropDown,d=c.Forms.LabelPosition,ot;t.AllowedMode=v.AllowedMode;t.Mode=v.Mode;var g=n.Resources.Strings.Azure,nt=g.ResourceGroups,o=n.Resources.Strings.ResourceGroup.Validation,l=nt.DropDown,tt=nt.InfoBalloon,it=l.ProvisioningStateValidation;t.NameMaxLength=90;var rt="\\s~!@#$%^&*+=<>,\\?/\\\\\\:;'\"\\[\\]\\{\\}\\|",at=new RegExp("^[^"+rt+"]*[^."+rt+"]$","i"),ut=FxImpl.Rpc.client,vt=g.BaseResourceDropDown,yt=st.ResourceTypes.ResourceGroups,ft=1,a;(function(n){function t(n){return y.getResourceGroupsFromSubscription(ut,[n.subscriptionIdObservable()]).then((function(n){return n.map((function(n){return{createNew:!1,value:n}}))}))}function r(n,t,r,u){if(!n)return Q(i());var f=et(n);return f.valid?t?Q(p.getSubscriptionInfo(t)).then((function(n){return n&&n.uniqueDisplayName||t})).then((function(f){var s=FxImpl.Security.hasPermission("/subscriptions/"+t,["Microsoft.Resources/subscriptions/resourcegroups/write"]).then((function(n){return n?i():i(o.subscriptionHasNoPermissionsMessage.format(f))}),(function(){return b.Log.writeEntry(ft,"ResourceGroupValidation","Error checking resource group create permissions. Defaulting to true."),i()})),e;return e=r?~r.map((function(n){return n.toLocaleLowerCase()})).indexOf((n||"").toLocaleLowerCase())?i(o.alreadyExistsMessage.format(f)):i():u?u():i(),Q.all([s,e]).spread((function(n,t){return n.valid?t:n}))})):c.getValidationResultPromise():Q(f)}n.fetchItems=t;n.validateResourceGroupName=r})(a=t.Internal||(t.Internal={}));t.validateResourceGroupName=pt;ot=(function(w){function g(g,nt){var rt=this,st,ii,at,ri,dt,bt,gt,ui;nt.label||(nt.label=r(l.defaultLabel));var fi=u,ni=r(nt.defaultNewValue),ei=r(new k("","")),et,lt={filterComboOptions:n.extend({options:e(),defaultValue:r(""),infoBalloonLinkContent:nt.infoBalloonLinkContent||nt.infoBalloonContent?u:ei,infoBalloonContent:nt.infoBalloonContent||nt.infoBalloonLinkContent?u:ko.observable(tt.text)},nt)};n.Settings.getSharedSettings().then((function(n){ei(new k(tt.linkText,n.links.resourceGroupOverview))}));var ti=nt.subscriptionIdObservable,hi={label:r(s.createNew),defaultValue:r(""),validations:e([new f(o.invalidMessage,function(n){return a.validateResourceGroupName(n,ti(),lt.filterComboOptions.options().map((function(n){return n.value})))}),new f(o.invalidMessage,function(n){return rt._reservedResourceNameValidator||(rt._reservedResourceNameValidator=new p.ReservedResourceNameValidator(yt,u,u)),rt._reservedResourceNameValidator.validate(n)}),new c.RequiredValidation,]),showValidationMessagesBelowControl:nt.showValidationMessagesBelowControl,labelPosition:r(d.Hidden)},ot=new ht.TextBox.ViewModel(g,hi);lt.children=e([ot]);nt.options=lt.filterComboOptions.options;nt.validations=nt.validations||e();nt.validations.push(new f("",function(n){return bt.fxAwait(g).timeout(10).catch((function(){return bt()})).then((function(t){return t.createNew||n!==t.value.name||!n?i():(n=ct.buildResourceGroupIdFromSubscriptionAndResourceGroupName(nt.subscriptionIdObservable(),n),y.getIsReadOnly(ut,n).then((function(n){return i(n&&l.lockedValidationMessage)})))})).catch((function(){return b.Log.writeEntry(ft,"ResourceGroupValidation","Error checking read permissions. Defaulting to false."),i()}))}));st=r(null);st.extend({notify:"always"});nt.validations.push(new f(o.invalidMessage,function(n){return bt.fxAwait(g).timeout(10).catch((function(){return bt()})).then((function(){var r,t,u,f,e,o;return n?(r=st(),t=rt.getObjectByName(n),!t&&!r&&rt._validated)?i(vt.searchingValidationMessage.format(n)):(rt._validated=!0,r)?i():(u=t&&t.value,f=u&&(u.provisioningState||"").toLowerCase(),f&&(e=it[f],e))?i(it.baseMessage.format(e)):(o=rt._options,rt._hasPermission("/subscriptions/"+o.subscriptionIdObservable()+"/resourcegroups/"+n,o.requiredPermissions,l.requiredPermissionsValidationMessage)):i()}))}));var kt=r(!0),oi=function(n){n&&(kt()?kt(!1):(et.enabled(!!n),fi!==n&&(fi=n,kt()||rt._loadItems())))},si=r(""),pt=null;return ti.subscribe(g,(function(n){oi(n);pt=ot.value();var i;rt.toggleNewOrExisting(i=si()?t.Mode.UseExisting:t.Mode.CreateNew);i===t.Mode.CreateNew&&ot.value()&&(ri||Q()).then((function(){return ot.triggerValidation()}))})),ii=nt.requiredPermissions,ko.isSubscribable(ii)&&ii.subscribe(g,(function(){rt.triggerValidation()})),dt={filterComboBoxCreateCallback:function(t){delete t.options;n.extend(lt.filterComboOptions,t);lt.allowedMode=nt.allowedMode;lt.style=r(6);at=rt._dropDown=new v.ViewModel(g,lt);var i=at.control;return i.label(s.selectExisting),i.labelPosition(d.Hidden),rt._optionsGroup=at.createOrSelectControl,rt.allowedMode=at.allowedMode,i.items.subscribeAndRun(g,(function(n){return i.emptyValueText(n.length?"":l.noOptions)})),{control:at,filterComboBox:et=i,valid:ko.computed(g,(function(){return rt._optionsGroup.value()?ot.valid():et.valid()}))}},allowCreateNew:!0,fetchItems:function(){return ri=a.fetchItems(nt).then((function(n){var t=wt(nt.defaultNewValue,n.map((function(n){return n.value.name})));return ni(t),t&&ni.valueHasMutated(),n}))},filterObjectByName:function(t,i){return!n.localeCompareIgnoreCase(t.value.name,i)},itemToHierarchicalFormOption:function(n){var t=n.value?n.value.name:"";return{text:r(t),value:t}},blockLoadingItems:kt,createNewOption:st,nameForInitialValue:si,nullValue:{createNew:!1,value:{name:"",location:"",provisioningState:""}}},rt=w.call(this,g,nt,dt)||this,rt._createNewText=ni,bt=ko.pureComputed((function(){return rt.value()})).extend({rateLimit:{timeout:1,method:"notifyWhenChangesStop"}}),rt._validated=!1,rt._options=nt,oi(ti()),gt=null,rt._createNewText.subscribe(g,(function(n){ot.value(pt||n||"")})),h(g,(function(){var i=ot.value(),t=rt._createNewText()||"",n;at.createOrSelectControl.value()?st({createNew:!0,value:{name:i||pt||t,location:gt,provisioningState:""}}):(n=st.peek(),n&&(n=n.value)&&(gt=n.location,pt=n.createNew&&n.name||pt||t),st(null));et.value()})),rt._itemsObs.subscribe(g,(function(){et.filterText("");et.clearValidation()})),rt.value.subscribe(g,(function(n){if(n){var i=n.value;rt.toggleNewOrExisting(n.createNew?t.Mode.CreateNew:t.Mode.UseExisting);n.createNew&&(ot.value(i.name||""),gt=i.location)}n===st()&&st.valueHasMutated()})),rt._optionsGroup.value.subscribe(g,(function(n){if(!n){var t=et.items.peek().map((function(n){return n.text.peek()})),i=void 0;~t.indexOf(et.value())||~t.indexOf(i=ot.value())&&et.value(i)||et.value("")&&et.filterText("")}})),ui=function(n){var e=n.internal_bladeCallerParams,i=e&&e.providerConfig,r,u,f;FxImpl.isSerializedObject(i)&&(i=FxImpl.fromSerializableObject(i));r=i&&i.provisioningConfig;u=r&&r.galleryCreateOptions;dt.nameForInitialValue()||(f=u&&u.resourceGroupName,f&&(rt.toggleNewOrExisting(t.Mode.UseExisting),dt.nameForInitialValue(f)),g.onInputsSetCallbacks.remove(ui));return},g.onInputsSetCallbacks.add(ui),rt}return __extends(g,w),g.prototype.toggleNewOrExisting=function(n){this._dropDown.toggleNewOrExisting(n)},g})(lt);t.DropDown=ot})(c=t.ResourceGroups||(t.ResourceGroups={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var u=MsPortalFx.Base,t=n.Rpc,f=window,i,r;(function(i){i.getSasUriForQueueEndPoint=new t.FuncEndPointDefinition(n.Constants.RpcMethods.getSasUriForQueue)})(i=n.InternalAzure||(n.InternalAzure={})),(function(n){var r;(function(n){"use strict";function r(n){return i.getSasUriForQueueEndPoint.invoke(t.client,u.Constants.Shell,n)}n.getSasUriForQueue=r})(r=n.Storage||(n.Storage={}))})(r=n.Azure||(n.Azure={}));f.define("MsPortalFx/Azure/Storage",[],(function(){return r.Storage}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";function o(n,i,r){return r===void 0&&(r=[]),t.canRegisterSubWithRPsEndPoint.invoke(n,e,{subscriptionId:i,resourceProviders:r})}function r(n,t,i){var r=(n&&n.subscriptionPolicies&&n.subscriptionPolicies.quotaId||"").toLowerCase();return i?r.startsWith(t):t===r}var f=n.Rpc,u=n.Constants.RpcMethods,i=f.FuncEndPointDefinition,e=n.Extension.getHubsWindowId();t.getSubscriptionInfoEndPoint=new i(u.getSubscriptionInfo);t.getAllSubscriptionsEndPoint=new i(u.getAllSubscriptions);t.getSelectedSubscriptionsEndPoint=new i(u.getSelectedSubscriptions);t.canRegisterSubWithRPsEndPoint=new i("Hubs.canRegisterSubWithRPs");t.canRegisterSubWithRPs=o;t.isFreeTrialSubscription=function(n){return r(n,"freetrial_",!0)};t.isDreamSparkSubscription=function(n){return r(n,"dreamspark_",!0)};t.isBizSparkSubscription=function(n){return r(n,"bizspark_",!0)};t.isZeroCapSubscription=function(n){return r(n,"aad_2015-09-01",!1)}})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";function v(n,t){return l.Rpc.invokeCallback(c.getWindowId({name:e.ExtensionNames.Marketplace}),"validateSubscriptions",{galleryItem:t,subscriptions:n})}function p(n){return Q(r.getSubscriptionInfoEndPoint.invoke(u,o,n))}function w(){return Q(r.getSelectedSubscriptionsEndPoint.invoke(u,e.Shell,null))}function b(){return Q(r.getAllSubscriptionsEndPoint.invoke(u,o,null))}var e=n.Base.Constants,h=FxImpl.Rpc,c=FxImpl.Extension,l=n.Services,r=FxImpl.Azure,u=h.client,o=FxImpl.Extension.getHubsWindowId(),f=ko.observable,a=ko.observableArray,s=n.localeCompareIgnoreCase,i=n.ViewModels.getValidationResultPromise,y;(function(t){function o(n,t){return!s(n.subscriptionId,t)||!s(n.uniqueDisplayName,t)}function h(n){return{text:f(n.uniqueDisplayName),value:n.subscriptionId}}var l=r.BaseResourceDropDown,y=n.ViewModels,w=n.Hubs.Notifications,p=["enabled","active"],e=n.Resources.Strings.Azure.Subscriptions.DropDown,c;t.filterObjectByName=o;t.itemToHierarchicalFormOption=h;c=(function(t){function s(s,c){var l=this,g=function(n){return!p.includes((n.status||n.state||"").toLowerCase())},nt=function(n){if(l._marketplaceValidation&&l._marketplaceValidation.invalidSubscriptions&&l._marketplaceValidation.invalidSubscriptions.length)return l._marketplaceValidation.invalidSubscriptions.first((function(t){return t.subscriptionId===n.subscriptionId}))},tt=function(){var t=n.isFeatureEnabled("mgsubs")?n.Azure.getSelectedSubscriptions:n.Azure.getAllSubscriptions;return t().then((function(t){var i=c.filterByGalleryItem&&c.filterByGalleryItem();return v(t,i).catch(n.noop).then((function(n){return l._marketplaceValidation=n,t}))}))},b,w,k,d;return c.label||(c.label=f(e.defaultLabel)),b=c.requiredPermissions,ko.isSubscribable(b)&&b.subscribe(s,(function(){l.triggerValidation()})),ko.isSubscribable(c.resourceProviders)&&c.resourceProviders.subscribe(s,(function(){l.triggerValidation()})),c.allowSelectingDisabledSubscriptions||(c.validations||(c.validations=a()),c.validations.push(new y.CustomValidation(e.disabledSubscriptionValidationMessage,function(n){var t=l.getObjectByName(n),f;return t?g(t)?i(e.disabledSubscriptionValidationMessage):(f=nt(t),f)?i(f.displayText||e.subscriptionNotAllowedForGalleryItemValidationMessage):Q(r.canRegisterSubWithRPs(u,t.subscriptionId,ko.unwrap(c.resourceProviders))).then((function(n){if(!n.success){var r=t.uniqueDisplayName||t.subscriptionId,u=n.disallowedRPs||[];return u.length?i(e.subDisallowedRP.format(r,u.join(", "))):i(e.subCantRegisterWithRP.format(r,n.failedRPs.join(", ")))}})).then((function(n){return n?n:l._hasPermission("/subscriptions/"+t.subscriptionId,b,e.requiredPermissionsValidationMessage)})).catch((function(){return i()})):i()}))),w={blockLoadingItems:f(!0),nameForInitialValue:f(),fetchItems:function(){return tt()},filterObjectByName:o,itemToHierarchicalFormOption:h},l=t.call(this,s,c,w)||this,l._marketplaceValidation=null,k=s.onInputsSetCallbacks,d=function(n){var f=n.internal_bladeCallerParams,t=f&&f.providerConfig,i,r,u;FxImpl.isSerializedObject(t)&&(t=FxImpl.fromSerializableObject(t));i=t&&t.provisioningConfig;r=i&&i.galleryCreateOptions;w.nameForInitialValue()||(u=r&&r.subscriptionId,u&&w.nameForInitialValue(u),k.remove(d));w.blockLoadingItems(!1);return},k.add(d),l.subscriptionId=ko.computed(s,(function(){var n=l.value&&l.value();return n&&n.subscriptionId})),l}return __extends(s,t),s})(l);t.DropDown=c})(y=t.Subscriptions||(t.Subscriptions={}));t.getSubscriptionInfo=p;t.getSelectedSubscriptions=w;t.getAllSubscriptions=b})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var r=n.ViewModels,i=ko.observable,u;(function(n){var t=(function(n){function t(t,r){var u=n.call(this,t)||this;return u.subscriptionsFiltered=i(!1),u.selectedTypes=i([]),u.selectedSubscriptions=i([]),u.selectedResourceGroups=i([]),u.invertResourceGroupFilter=i(),u.selectedLocations=i([]),u.filterText=i(""),r=r||{},u.controlType=114,u.showTextFilter=r.showTextFilter||i(!1),u.showTypeFilter=r.showTypeFilter||i(!1),u.showSubscriptionFilter=r.showSubscriptionFilter||i(!1),u.showResourceGroupFilter=r.showResourceGroupFilter||i(!1),u.showLocationFilter=r.showLocationFilter||i(!1),u.showSubscriptionSummary=r.showSubscriptionSummary||i(!0),u.showTenantLevelSubscriptionSummary=r.showTenantLevelSubscriptionSummary||i(!1),u.selectedSubscriptionId=r.selectedSubscriptionId||i(),u.textFilterPlaceholder=r.textFilterPlaceholder||i(),u.assetTypes=r.assetTypes||ko.observableArray([]),u.actionHandler=r.actionHandler,u.context=r.context||i(),u._msPortalFxSectionOptions=r.sectionOptions,u.isPersistentSubscriptionFilter=!!ko.unwrap(r.isPersistentSubscriptionFilter),u.showAllSubscriptions=!!r.showAllSubscriptions,u.subscriptionsLoaded=i(!1),u}return __extends(t,n),t})(r.Controls.Base.ViewModel);n.ViewModel=t})(u=t.ResourceFilter||(t.ResourceFilter={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var r=n,u=r.Base,f=r.ViewModels,e=f.Validation,c=FxImpl.Extension,o=r.Resources.Strings.Azure.Validators,s=21,i=f.getValidationResult,l=(function(n){function t(t){var r=n.call(this,s)||this;return r.validate=function(n){return Q(t(n)).then((function(n){if(!n)return i();var t=Q.defer(),r;return u.Security.hasPermission(n.entityId,n.actions).then((function(t){t||(r=i((n.message||o.RequiredPermission.message).format(n.actions.toString())))})).finally((function(){t.resolve(r||i())})),t.promise}))},r}return __extends(t,n),t})(e),h;t.RequiredPermissionsValidator=l;h=(function(n){function t(t,f,e){var h=n.call(this,s)||this;return h.validate=function(n){if(!n)return Q(i());var s=Q.defer(),h;return Q(e||c.getArmEndpointEndPoint.invoke(FxImpl.Rpc.client,u.Constants.ExtensionNames.Hubs,null)).then((function(e){return u.Net2.postJSON({uri:r.ensureSuffix(e,"/")+"providers/microsoft.resources/checkresourcename?api-version=2015-01-01",setAuthorizationHeader:!0},{name:n,type:t}).then((function(t){t&&(t.status||"").toLowerCase()==="reserved"&&(h=i((f||t.error&&t.error.message||o.ReservedResourceName.message).format(n)))}))})).finally((function(){s.resolve(h||i())})),s.promise},h}return __extends(t,n),t})(e);t.ReservedResourceNameValidator=h})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t,i;(function(n){n[n.Windows=0]="Windows";n[n.Linux=1]="Linux"})(t=n.FirstPartyOperatingSystem||(n.FirstPartyOperatingSystem={})),(function(n){n[n.Default=0]="Default";n[n.TemplateDeployment=1]="TemplateDeployment";n[n.RequestPricingInformation=2]="RequestPricingInformation";n[n.ProgrammaticAccess=3]="ProgrammaticAccess"})(i=n.LegalTermsLanguageEnum||(n.LegalTermsLanguageEnum={}))})(t=n.Legal||(n.Legal={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function u(n,t){if(!n)throw new Error("Can't move resource without resource id.");return{bladeSelection:f(n,t),displayValue:t===1?r.changeResourceGroupLabel:r.changeSubscriptionLabel,editType:1}}function f(t,r){return i.getBladeSelection(n.Base.Constants.ExtensionNames.Hubs,"MoveResourceBlade",{resourceId:t,moveType:r})}var i=n.ViewModels,o=i.Parts.Properties,r=n.Resources.Strings.Part.PropertiesPart,e;t.getMoveResourceBlade=u,(function(n){var t;(function(n){n[n.NotSet=0]="NotSet";n[n.Allowed=1]="Allowed";n[n.NotAllowed=2]="NotAllowed"})(t=n.GalleryItemAccess||(n.GalleryItemAccess={}))})(e=t.Internal||(t.Internal={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function f(n,t,i,r){return Q.promise((function(u,f,e){return n.acquireObject(t,h,i).then((function(n){var t=s(n&&n.getValue());t?t.progress(e).then(u).catch(f).finally((function(){n.dispose()})):r()})).catch(f)}))}function l(n,t){return typeof t.validateTemplate=="undefined"&&(t.validateTemplate=!1),f(n,i.azureResourceManagerDeployTemplate,t,u.deployTemplateFailure)}function a(n,t){return f(n,i.azureResourceManagerPollForDeployment,t,u.pollForDeploymentFailure)}function v(n,t){return f(n,i.validateArmTemplate,t,u.validateTemplateFailure)}var e=MsPortalFx.Base,o=n.Rpc,i=n.Constants.RpcMethods,s=ko.unwrap,h=e.Constants.ExtensionNames.Hubs,r="",c={deployTemplateFailure:r,pollForDeploymentFailure:r,validateTemplateFailure:r},u=n.getErrorMap(c);t.lastDeployedGalleryItemsMaxCount=10;t.lastUsedLocationsMaxCount=5;t.readUserSettingsEndPoint=new o.FuncEndPointDefinition("HubsExtension.readUserSettings");t.deployTemplate=l;t.pollForDeployment=a;t.validateTemplate=v})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";function u(n){return n.deploymentStatusCode===r.Success?Q(n):FxImpl.QReject("Deploy failed with deploymentStatusCode ("+r[n.deploymentStatusCode]+")",{data:n})}function o(n){return t.deployTemplate(i.client,n).then(u)}function s(n){return t.pollForDeployment(i.client,n).then(u)}var t=FxImpl.Azure.ResourceManager,i=FxImpl.Rpc,f,e,r,h;(function(n){n[n.InitialSetup=0]="InitialSetup";n[n.SanityCheck=1]="SanityCheck";n[n.FulfillPrerequisites=2]="FulfillPrerequisites";n[n.ProvisionResourceGroup=3]="ProvisionResourceGroup";n[n.RegisterResourceProviders=4]="RegisterResourceProviders";n[n.GetDeploymentName=5]="GetDeploymentName";n[n.ValidateTemplate=6]="ValidateTemplate";n[n.SubmitDeploymentRequest=7]="SubmitDeploymentRequest";n[n.GetDeploymentStatus=8]="GetDeploymentStatus"})(f=n.DeploymentStages||(n.DeploymentStages={})),(function(n){n.Accepted="accepted";n.Succeeded="succeeded";n.Failed="failed";n.Canceled="canceled";n.Running="running";n.Deploying="deploying";n.Waiting="waiting";n.Deleting="deleting";n.Deleted="deleted"})(e=n.DeploymentStates||(n.DeploymentStates={})),(function(n){n[n.Failure=-1]="Failure";n[n.Success=0]="Success";n[n.DeploymentRequestFailed=1]="DeploymentRequestFailed";n[n.DeploymentFailed=2]="DeploymentFailed";n[n.DeploymentStatusUnknown=3]="DeploymentStatusUnknown";n[n.ErrorProvisioningResourceGroup=4]="ErrorProvisioningResourceGroup";n[n.ErrorSubmittingDeploymentRequest=5]="ErrorSubmittingDeploymentRequest";n[n.ErrorGettingDeploymentStatus=6]="ErrorGettingDeploymentStatus";n[n.InvalidArgs=7]="InvalidArgs";n[n.ErrorRegisteringResourceProviders=8]="ErrorRegisteringResourceProviders";n[n.DeploymentCanceled=9]="DeploymentCanceled";n[n.UnknownError=10]="UnknownError"})(r=n.DeploymentStatusCode||(n.DeploymentStatusCode={}));n.deployTemplate=o;n.pollForDeployment=s,(function(n){function r(n){return t.deployTemplate(i.client,n)}function u(n){return t.pollForDeployment(i.client,n)}function f(n){return t.validateTemplate(i.client,n)}n.deployTemplate=r;n.pollForDeployment=u;n.validateTemplate=f})(h=n.Deployments||(n.Deployments={}))})(t=n.ResourceManager||(n.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=MsPortalFx.ViewModels,i=(function(){function n(n,i,r,u){var f=this;this.collector=new t.ParameterCollector(n,{supplyInitialData:function(){var n=u.supplyInitialData(),i=r(),t;return i&&(t=i.selectedSpecId,n.selectedSpecId=t,n.selectedSpecIds=[t]),n.originControl=f.controlType,{fromCollectorToProvider:n,fromProviderToCollector:null}},receiveResult:function(n){var t=n.fromProviderToCollector;r(t);typeof u.receiveResult=="function"&&u.receiveResult(t)},selectable:i})}return n})();n.CollectorControl=i})(t=n.Specs||(n.Specs={}))})(t=n.Pickers||(n.Pickers={}))})(t=n.ResourceManager||(n.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=FxImpl.Azure.ResourceManager.Pickers.Specs,r=n.ViewModels,u=r.Forms,f=ko.observable,e=ko.observableArray,o=(function(t){function i(i,r){var s=this,o;return r=n.extend({label:f(n.Resources.Strings.Pickers.Specs.pricingTier),validations:e(),displayText:ko.pureComputed((function(){var n=o.value();return n?n.selectedSpecIds&&n.selectedSpecIds.join(", ")||n.selectedSpecId:""}))},r),o=new u.Selector.ViewModel(i,r.form,r.pathOrAccessor,r),s=t.call(this,i,o.selectable,o.value,r)||this,s.controlType=2,s.control=o,s}return __extends(i,t),i})(i.CollectorControl);t.Selector=o})(i=t.Specs||(t.Specs={}))})(i=t.Pickers||(t.Pickers={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.ViewModels.Controls,r=FxImpl.Azure.ResourceManager.Pickers.Specs,u=ko.observable,f=(function(t){function r(r,f){var e=this,s=u(),o=new i.InfoBox.ViewModel(r,{},!1,f);return o.selectable=n.ViewModels.Part.createSelectableViewModel(),e=t.call(this,r,o.selectable,s,f)||this,e.controlType=3,e.value=s,e.control=o,e}return __extends(r,t),r})(r.CollectorControl);t.InfoBox=f})(i=t.Specs||(t.Specs={}))})(i=t.Pickers||(t.Pickers={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function f(n){return typeof n=="function"}function ut(n,t){t===void 0&&(t={});var i=new e.Internal.Selectable({allowUnselect:!1,selectedValue:t.selectedValue,isSelected:t.isSelected,isActivated:t.isActivated});return n.registerForDispose(i),i}function at(n){n||u.optionsUndefined();f(n.supplyTemplateDeploymentOptions)||u.supplyTemplateUndefined();n.createFeatures&&(n.createFeatures&1||n.createFeatures&2)&&!f(n.supplyPricingConfig)&&u.supplyPricingUndefined()}var i=n,w=i.Base,e=i.ViewModels,ft=e.ActionBars.Base,et=e.ParameterCollectionV3,ot=HubsExtension.Azure.Pricing,b=FxImpl.ProvisioningTelemetry,o=w.Diagnostics.Telemetry,a=b.ProvisioningStatus,k=b.ActionModifier,st=undefined,d=ko.observable,g=ko.isObservable,c=i.Resources.Strings.Azure.ResourceManager.Provisioner,nt=c.ArmValidation,s=e.getValidationResult,h,l;t.armValidateFeatureForced=i.isFeatureEnabled("validatearmtemplates");var ht=["microsoft_azure_datacatalog","microsoft_azure_mobileengagement",],v=k.Succeeded,y=k.Failed,tt=ot.Constants,it=tt.PricingSummaryBlade,rt=tt.LegalTermsBlade,p=w.Constants.ExtensionNames.Hubs,ct=1,r="",lt={canNotProvision:r,invalidGalleryOptions:r,launchPricingBladeFailure:r,legalTermsUnsupported:r,optionsUndefined:r,secondaryLinksUnsupported:r,supplyPricingUndefined:r,supplyTemplateUndefined:r},u=FxImpl.getErrorMap(lt);h=l=(function(r){function h(n,t,e){var o=this,l=!1,s,h,c;return arguments.length===2&&(e=t,t=st,l=!0),at(e),s=e.actionBar,o=r.call(this,n,{supplyProvisioningPromise:function(n){return o._supplyProvisioningPromise(n)},supplyStartboardInfo:function(n){return o._supplyStartboardInfo(n)},actionBar:s,parameterProvider:e.parameterProvider})||this,o._armOptions=e,o._showPricingSummary=d(!1),o._showAutomationOptions=d(!1),o._legalTermsBladeShown=o._purchaseInProgress=o._isCustomProvisioning=!1,h=t&&t.content||{},o.pricingSelectable=ut(n,h.pricingSelectable),o.errorsSelectable=ut(n,h.errorsSelectable),o.pricingSelectable.isSelected.subscribe(n,(function(n){n||o._purchaseInProgress||o._setActionBarProgress(!1)})),s&&(o._setUpActionBarWatcher(n),o._setUpActionBarValidation(n,e)),c=function(){var n=e.createFeatures,t=!!(n&1),r=!!(n&2),f=n&8,h=!!(n&4)||!f&&i.isFeatureEnabled("seetemplate");s&&(o._actionBarSupportsSecondaryLinkDisplayText?(o._showPricingSummary(t),o._showAutomationOptions(h)):t&&u.secondaryLinksUnsupported(),o._actionBarSupportsForceInProgressStatus?s.forceInProgressStatus(r):r&&u.legalTermsUnsupported())},o._parameterProvider=e.parameterProvider,e.parameterProvider&&e.parameterProvider.configFromCollector.subscribe(n,c),c(),f(n.registerSelectable)&&(n.registerSelectable(n.createChildLifetime(),i.newGuid(),o.pricingSelectable),n.registerSelectable(n.createChildLifetime(),i.newGuid(),o.errorsSelectable,{openInContextPane:!0,persistentContextPane:!0})),o}return __extends(h,r),Object.defineProperty(h.prototype,"armProvisioningConfig",{get:function(){return this.provisioningConfig()},enumerable:!0,configurable:!0}),h.prototype.startProvisioning=function(n){f(this._armOptions.supplyGalleryCreateOptions)||u.canNotProvision();var t=this._armOptions.supplyGalleryCreateOptions(),e=i.clone(this.provisioningConfig())||{},o=t&&t.galleryItem;return o&&o.itemDisplayName?(i.extend(e,{galleryCreateOptions:t}),this.provisioningConfig(e)):u.invalidGalleryOptions(),r.prototype.startProvisioning.call(this,n)},h.prototype._deployTemplate=function(n){return t.Deployments.deployTemplate(n)},h.prototype._validateTemplate=function(n){return t.Deployments.validateTemplate(n)},h.prototype._supplyProvisioningPromise=function(n){var t=this;return Q.promise((function(i,r){requirejs(["FxInternal/ResourceManagement/ArmProvisioner"],(function(u){return l.prototype._supplyProvisioningPromise=u.supplyProvisioning,t._supplyProvisioningPromise(n).then(i).catch(r)}))}))},h.prototype._supplyStartboardInfo=function(n){var t=this._armOptions.supplyStartboardInfo;if(f(t))return t(n)},h.prototype._setUpActionBarValidation=function(r,u){var e=this,h=u.actionBar,c=!!(u.createFeatures&16),a=!!(u.createFeatures&32),w=g(h.showActionBar),b=n.getEnvironmentValue("extensionName"),k=ht.some((function(n){return b===n})),d=!c&&(a||t.armValidateFeatureForced||!k),tt={delayExecution:!0,validate:function(t){if(!(e.armProvisioningConfig||{}).provisioningEnabled||w&&!h.showActionBar())return Q(s());var c=e._launchingContext,u={telemetryId:c.telemetryId,bladeInstanceId:c.bladeInstanceId,galleryItemId:c.galleryItemId,createBlade:c.createBlade},b=o.startTrace({source:"ArmProvisioner",action:"ValidateArmTemplate",data:u}),k=function(n){o.endTrace(b,y,i.extend2(u,{error:FxImpl.Azure.scrubError(n)}));var t=n.error||n;return t.status===0||n.status===0?s(nt.networkFailure):{valid:!1,message:nt.validationFailed,blade:{extension:p,detailBlade:"ArmErrorsBlade",detailBladeInputs:{errors:i.extend2(u,n.details||n)}}}},a,d,g,tt=Q().then((function(){return h.infoBoxSelectable.isSelected(!1),e._armOptions.supplyTemplateDeploymentOptions(g=e._parameterProvider.getResults(),2)})).then((function(n){d=n.suppressDefaultNotifications;n.suppressDefaultNotifications=!0;n.launchingContext=c;var t=e._validateTemplate(n).then((function(n){return(f(e._armOptions.postValidationCallback)?e._armOptions.postValidationCallback(n.validationResult||n):Q(s())).then((function(t){return a=i.clone(n),o.endTrace(b,v,u),t}))})).catch(k);return Q.timeout(t,l.armValidationTimeout).catch((function(n){return i.extend(u,{error:{message:n.message,code:n.code}}),o.endTrace(b,y,u),s()}))})).then((function(n){if(!a||t!==0)return n;var r=e._getPinToDashboardArgs(g,a);return i.extend(a,{suppressDefaultNotifications:!0,skipPreflight:!0,submitDeployment:!0,validateTemplate:!1,pollForUpdates:!1,notifications:{pinToDashboard:r}}),e._deployTemplate(a).then((function(t){return e._deploymentOptions=i.clone(t),e._deploymentOptions.suppressDefaultNotifications=d,n})).catch(k)})).catch((function(t){return o.cancelTrace(b,n.extend2(u,{error:t.message})),s()}));return r.operations&&r.operations.add(tt,{blockUi:!0,shieldType:ct}),tt}};d&&(h.infoBoxSelectable=this.errorsSelectable,h.asyncValidations.push(tt))},h.prototype._setActionBarProgress=function(n){g(this._actionBar.actionInProgress)&&this._actionBar.actionInProgress(n)},h.prototype._getPinToDashboardArgs=function(n,t){var i,r=this._supplyStartboardInfo(n)||(i=this.provisioningConfig()).startboardProvisioningInfo,u=i&&i.supplyDashboardPartReference&&i.supplyDashboardPartReference(t.resourceId),f;return u?{name:u.partName,extension:u.options.extensionName,parameters:u.parameters}:r?{name:r.startboardPart.name,extension:r.startboardPart.extension,parameters:(f={},f[r.startboardPartKeyId]=t.resourceId,f)}:void 0},h.prototype._setUpActionBarWatcher=function(t){var i=this,u=this._armOptions.supplyPricingConfig,f=u&&u(),e=f&&f.showPricingSummaryLink,r=this._actionBar;ko.computed(t,(function(){if(i._actionBarSupportsSecondaryLinkDisplayText){var u=i._showPricingSummary()&&(e?ko.unwrap(e):!0),n=null,t=!1;u?n=c.pricingSummaryLinkLabel:i._showAutomationOptions()&&(n=c.seeTemplateLink,t=!0);r.secondaryLinkDisplayText(n);i._actionBarSupportsSecondaryLinkValidation&&r.secondaryLinkTriggerValidation(t)}}));ko.reactor(t,(function(){var n=r.output(),e=n&&i._actionBarSupportsForceInProgressStatus&&r.forceInProgressStatus()&&n.status===1&&n.action===4,t=n&&n.commitId;if(e&&i._legalTermsCommitId!==t)return i._legalTermsCommitId=t,i._legalTermsBladeShown=!0,i._setActionBarProgress(!0),i._launchPricingSelectable(rt.bladeExtension,rt.bladeName),null;var u=r.secondaryLinkDisplayText(),f=n&&n.secondaryLinkClicked,o=n&&i._actionBarSupportsSecondaryLinkDisplayText&&!!f&&f===u;o&&i._pricingSummaryCommitId!==t&&(i._pricingSummaryCommitId=t,i._setActionBarProgress(!1),u===c.seeTemplateLink?i._launchTemplateViewerBlade():i._launchPricingSelectable(it.bladeExtension,it.bladeName))}));t.onInputsSetCallbacks.add((function(t){if(i.pricingSelectable.isSelected()&&ft.isCompleted(t.pricingOutput)&&t.pricingOutput.actionButtonClicked){if(i._legalTermsBladeShown){i._legalTermsBladeShown=!1;i._purchaseInProgress=!0;var u=t.pricingOutput.pinToStartboard;i._actionBarSupportsShowActionBar&&!r.showActionBar()&&typeof u=="boolean"&&r.provisionOnStartboardPart(u);r.forceInProgressStatus(!1);r.triggerSelectAction(n.getUniqueId())}i.pricingSelectable.isSelected(!1)}return}))},h.prototype._launchTemplateViewerBlade=function(){var r=this,t=this._parameterProvider.getResults(),i,n;t&&(i=this._armOptions.supplyTemplateDeploymentOptions(t,1).then((function(n){var i=r.armProvisioningConfig.galleryCreateOptions,t=i.galleryItem;return e.getBladeSelection(p,"TemplateViewerBlade",{options:{templateLink:n.templateLinkUri,templateJson:n.templateJson,parameters:n.parameters,telemetryId:t&&t.id}})})),n=this.pricingSelectable,n.delayedBladeSelection({bladeWidth:2,selectedValuePromise:i}),n.isSelected(!0))},h.prototype._launchPricingSelectable=function(n,t){this.pricingSelectable.selectedValue(e.getBladeSelection(n,t,this._getPricingBladeInputs()));this.pricingSelectable.isSelected(!0)},h.prototype._getPricingBladeInputs=function(){var o=this._armOptions.supplyPricingConfig(),t=o&&o.supplyPricingInfo(),n,r,e;return t||u.launchPricingBladeFailure(),n=(this.armProvisioningConfig.galleryCreateOptions||{}).galleryItem,r=this._armOptions.supplyGalleryCreateOptions,!n&&f(r)&&(e=r(),n=e&&e.galleryItem),n=n&&i.clone(n)||{categoryIds:[],products:[],productsWithNoPricing:[]},n.products=n.products.concat(t.products||[]),n.productsWithNoPricing=n.productsWithNoPricing.concat(t.productsWithNoPricing||[]),{galleryPricingInfo:t,galleryItem:n}},h.prototype._traceProvisioningStarted=function(){return r.prototype._traceProvisioningStarted.call(this,this._createEventBase())},h.prototype._traceProvisioningEnded=function(n,i){var e=this._createEventBase(),o=y,f=a.UnknownFailure,u;return i&&(n?(u=n.deploymentStatusCode,u&&u!==t.DeploymentStatusCode.Success?f=t.DeploymentStatusCode[u]:(o=v,f=u===t.DeploymentStatusCode.Success?t.DeploymentStatusCode[u]:a.Resolved)):(o=v,f=a.Resolved)),e.actionModifier=o,e.data.provisioningStatus=f,r.prototype._traceProvisioningEnded.call(this,n,i,e)},h})(et.Provisioner);h=l=__decorate([i.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Object])],h);t.Provisioner=h,(function(n){var t,i;n.armValidationTimeout=1e4;n.azureResourceManagerProvisioningPart={name:"AzureResourceManagerProvisioningPart",extension:p},(function(n){n[n.Create=0]="Create";n[n.ExportTemplate=1]="ExportTemplate";n[n.Validate=2]="Validate"})(t||(t={}));n.GetTemplateDeploymentOptionsMode=t,(function(n){n[n.None=0]="None";n[n.ShowPricingSummary=1]="ShowPricingSummary";n[n.ShowLegalTerms=2]="ShowLegalTerms";n[n.ShowAutomationOptions=4]="ShowAutomationOptions";n[n.HideExportTemplate=8]="HideExportTemplate";n[n.DisableArmValidation=16]="DisableArmValidation";n[n.EnableArmValidation=32]="EnableArmValidation"})(i||(i={}));n.CreateFeatures=i})(h=t.Provisioner||(t.Provisioner={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var r;(function(i){"use strict";function ut(t,r){if(!h.isResourceGroupId(t))try{var e=h.buildResourceTypeFromResourceId(t),f=i.includedResourceTypes[e.toLowerCase()];return f?f===r||f===3:n.isFeatureEnabled("autoenablemove")}catch(o){return u.error("Failed to get resource type from the resource id '"+h.sanitizeId(t)+"'."),!1}return!0}function dt(n){var t={resourceGroup:null,resourceGroupId:null,success:!1},i;try{i=h.parseResourceManagerDescriptor(n);t.resourceGroup=i.resourceGroup;t.resourceGroupId=h.buildResourceGroupIdFromResourceDescriptor(i);t.success=!0}catch(r){u.error("Error getting RG name from resource id '"+n+"'.")}return t}function c(n,i){return new t.Selectable({isSelected:!!(n&&n[i]&&n[i].isSelected)})}function ft(n,t){n.builtInPropertyKind=t}function y(n,t,i){ft(i,t);n[t]=i}function ot(n){return et.includes(n.getType())?!0:(u.error("Only Callback, Link, OpenBlade and Text properties are allowed on resource summary."),!1)}var l=n.ViewModels,p=n.Base.Constants,d=p.ExtensionNames,ht=p.BladeNames.Hubs,ct=p.AssetNames,s=l.Parts.Properties,lt=FxImpl.ViewModels,at=lt.Parts.Properties,vt=n.Base,h=l.Services.ResourceTypes,yt=n.Assets,pt=FxImpl.Extension,wt=FxImpl,bt=n.Azure,g=n.Azure.ResourceManager,r=ko.observable,a=ko.reactor,nt=ko.computed,tt=n.Resources.Strings.Part,u=new vt.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.ResourceSummaryPart"),o=tt.ResourceSummary,w=new s.TextProperty("",""),it=tt.PropertiesPart,rt=d.Hubs,v="MsPortalFx.Parts.ResourceSummary.ViewModel2",et,b,k,st;i.includedResourceTypes={};["microsoft.classiccompute/domainnames","microsoft.compute/availabilitysets","microsoft.containerservice/containerservices","microsoft.devices/iothubs","microsoft.network/dnszones","microsoft.network/trafficmanagerprofiles","microsoft.servicefabric/clusters","microsoft.classicnetwork/networksecuritygroups","microsoft.classicnetwork/reservedips","microsoft.classicnetwork/virtualnetworks","microsoft.certificateregistration/certificateorders","microsoft.compute/disks","microsoft.compute/virtualmachinescalesets","microsoft.db.mysql/servers","microsoft.db.postgresql/servers","microsoft.insights/components","microsoft.insights/eventdetail","microsoft.insights/webtests","microsoft.network/applicationgateways","microsoft.network/connections","microsoft.network/expressroutecircuits","microsoft.network/localnetworkgateways","microsoft.network/networkwatchers","microsoft.network/virtualnetworkgateways","microsoft.recoveryservices/vaults","microsoft.servermanagement/gateways","microsoft.servermanagement/nodes",].forEach((function(n){i.includedResourceTypes[n]=3}));var f="",kt={onlyStatic:f,propertyReused:f,setPropertiesNotAvail:f,noResourceGroupWithLayout:f,statusMissing:f,noSubId:f,maxColumns:f,missingProperties:f,maxProperties:f},e=FxImpl.getErrorMap(kt);et=[3,1,4,8,0,];b=(function(t){function i(n,i,f){var e=t.call(this,n)||this,l,o,s,h;return e._editRg=r(),e._currentResourceId=r(),e._partContainer=f,e._options=i,e.collapsed=r(undefined),e.tagsVisible=r(!0),e.hasQuickStart=r(!!i.getQuickStartSelection),e.hasKeys=r(!!i.getKeysSelection),e.hasSettings=r(!!i.getSettingsSelection),e.noTags=r(!!i.noTags),e.noRbac=r(!!i.noRbac),l=i.supportsResourceMove,e._editRg(l===1||l===3),e.title=r(""),e.settingsLabel=r(""),o="Selectable",e.resourceGroupSelectable=c(n,"resourceGroup"+o),e.quickStartSelectable=c(n,"quickStart"+o),e.settingsSelectable=c(n,"settings"+o),e.accessSelectable=c(n,"access"+o),e.tagsSelectable=c(n,"tags"+o),e.keysSelectable=c(n,"keys"+o),f?(s=f,e.collapsed.subscribe(s,(function(n){e._updateDataLoading(f,n)}))):s=new wt.TriggerableLifetimeManager,e._ensureRGProperty=function(){return h||(h=e._createResourceGroupProperty(s),ft(h,0)),h},i.noResourceGroup||t.prototype.setProperties.call(e,[e._ensureRGProperty()]),i.hasOwnProperty("staticProperties")||u.warning("MsPortalFx.ViewModels.Parts.ResourceSummary.ViewModel is deprecated.  Please use MsPortalFx.ViewModels.Parts.ResourceSummary.ViewModel2."),e}return __extends(i,t),i.prototype.onInputsSet=function(t){var i=this._options,s,r,f,h,e,o;return(arguments.length<2&&(s="OnInputsSet method of resource summary viewmodel requires the second *settings* argument.",u.error(s)),t.actionBarOutput)?(this.moveResourceSelection.activatedItems([]),Q()):(this._inputs=t,r=t.resourceId,r!==this._currentResourceId()&&this._startRebind(r),i.noRbac||this.accessSelectable.selectedValue(l.getBladeSelection("Microsoft_Azure_AD","UserAssignmentsBlade",{scope:r})),i.noTags||this.tagsSelectable.selectedValue(l.getBladeSelection(rt,"ResourceTagsListBlade",{resourceId:r})),i.getSettingsSelection&&this.settingsSelectable.selectedValue(i.getSettingsSelection(t)),i.getQuickStartSelection&&this.quickStartSelectable.selectedValue(i.getQuickStartSelection(t)),i.getKeysSelection&&this.keysSelectable.selectedValue(i.getKeysSelection(t)),f=this.collapsed,h=f.peek(),n.isNullOrUndefined(f())&&f(i.collapsed),e=this._partContainer,o=f.peek(),e&&h===o&&this._updateDataLoading(e,o),Q())},i.prototype.onExpanded=function(){return Q()},i.prototype.setProperties=function(n){var f=!this._options.noResourceGroup,r=10-(f?1:0),i;n.length>r&&u.error("Resource summary cannot have more than "+r+" properties");i=[];f&&i.push(this._ensureRGProperty());n.slice(0,r).forEach((function(n){ot(n)&&i.push(n)}));t.prototype.setProperties.call(this,i)},i.prototype._setProperties=function(n){t.prototype.setProperties.call(this,n)},i.prototype._startRebind=function(n){this._currentResourceId(n)},i.prototype._updateDataLoading=function(n,t){var i,u,r;this._resetLoadingState(n);i=this._inputs;!t&&i&&(u=this._loadingLM=n.createChildLifetime(),r=this._loadingPromise=this.onExpanded(u,i),r&&n.operations.add(r,{blockUi:!0}))},i.prototype._resetLoadingState=function(n){var i=this._loadingPromise,t;i&&(n.operations.remove(i),this._loadingPromise=null);t=this._loadingLM;t&&(t.dispose(),this._loadingLM=null)},i.prototype._createResourceGroupProperty=function(n){var t=this,u=r(),f=r(),e=r(),i;return a(n,(function(){var n=t._currentResourceId(),r,i,o;n&&(r=t._editRg(),t._editRg(r?r:ut(n,1)),i=dt(n),i.success&&(u(i.resourceGroup),f(l.getBladeSelection(rt,ht.ResourceMenuBlade,{id:i.resourceGroupId})),t._editRg()&&(o=g.getMoveResourceBlade(n,1).bladeSelection,e(o))))})),i={label:o.resourceGroupPropertyLabel,displayValue:u,bladeSelection:f},i.editBlade={bladeSelection:e,editType:1,displayValue:it.changeResourceGroupLabel,showLink:!0},new s.OpenBladeProperty(i)},i})(s.ViewModel);i.ViewModel=b,(function(n){n[n.ResourceGroup=0]="ResourceGroup";n[n.Status=1]="Status";n[n.Location=2]="Location";n[n.SubscriptionName=3]="SubscriptionName";n[n.SubscriptionId=4]="SubscriptionId"})(k||(k={}));i.BuiltInPropertyKind=k;st=(function(t){function i(n,i,u){var f=t.call(this,n,i,u)||this,s,o,h,c;return f._dynamicProperties=r([]),f._editSub=r(),f._dependencies={getLocation:function(n){var t=pt.getRuntime();return t.getResource(n,"resourcesummarypartviewmodel").then((function(n){return n.locationString}))},getSubscriptionName:function(n){return bt.getSubscriptionInfo(n).then((function(n){return n.displayName}))},getSubscriptionBlade:function(n){var t={extensionName:d.Billing,assetType:ct.SubscriptionDetail,assetId:n};return yt.mapAssetIdToDynamicSelection(t,!0)}},s=f._options.supportsResourceMove,f._editSub(s===0||s===3),o=f._createBuiltInProperties(u,i),h=i.staticProperties||[],h.forEach((function(n){if(!n._supportsIsLoading)e.onlyStatic(v)})),c=u,a(c,(function(){var n=f._dynamicProperties(),t=f._layoutProperties(o,h,n,i.layout);f._setProperties(t)})),a(c,(function(){var t=o[4],i=o[0],r=(!i||i.displayValue())&&(!t||t.value()),n;r&&(n=f._loadingPromise,n?u.operations.update(n,{blockUi:!1}):u.revealContent())})),f}return __extends(i,t),i.prototype.setDynamicProperties=function(n){var i=n||[],r=this._dynamicProperties(),t=[];i.forEach((function(n){!n._supportsIsLoading&&r.includes(n)?e.propertyReused(v):ot(n)&&t.push(n)}));this._dynamicProperties(t)},i.prototype.setProperties=function(){e.setPropertiesNotAvail(v)},i.prototype._createBuiltInProperties=function(t,i){var f=this,c,ot,p,l,w,b,k,st,d;if(i.layout?(i.noResourceGroup&&e.noResourceGroupWithLayout(v),ot=[i.layout.left||[],i.layout.right||[]],c=n.mapMany(ot,(function(n){return n.filter((function(n){return typeof n=="number"}))})).unique()):(c=[],i.noResourceGroup||c.push(0),i.status&&c.push(1),c.push(2),c.push(3),c.push(4)),p=function(n){return c.includes(n)},l={},p(0)&&y(l,0,this._ensureRGProperty()),p(1)&&(i.status||e.statusMissing(v),y(l,1,new s.TextProperty({label:o.statusPropertyLabel,value:i.status.value,isLoading:i.status.isLoading}))),p(2)&&(w=r(),b=r(),a(t,(function(){var t,n;f.collapsed()||(t=f._currentResourceId(),t)&&(b(!0),n=k=f._dependencies.getLocation(t),n.then((function(t){n===k&&w(t)})).catch((function(i){n===k&&(u.warning("Failed to get location for resource id '"+t+"'. '"+i+"'"),w(o.notAvailable))})).finally((function(){n===k&&b(!1)})))})),st=nt(t,(function(){return i.location&&i.location()||w()})),y(l,2,new s.TextProperty({label:o.locationPropertyLabel,value:st,isLoading:b}))),d=nt(t,(function(){var n=f._currentResourceId(),t;if(!n)return"";try{t=h.parseResourceManagerDescriptor(n).subscription}catch(i){u.error("Failed to get subscription name from the resource id '"+n+"'.")}return t})),p(4)&&y(l,4,new s.TextProperty(o.subscriptionIdPropertyLabel,d)),p(3)){var rt=r(),ft=r(),tt,ht=r(),ct=this._currentResourceId(),et=void 0;a(t,(function(){var n,t,r,e,i;f.collapsed()||(n=f._currentResourceId(),n&&n!==ct)&&(ct=n,t=d(),t)&&(r=f._editSub(),f._editSub(r?r:ut(n,0)),f._editSub()&&(e=g.getMoveResourceBlade(n,0).bladeSelection,ht(e)),ft(!0),i=tt=f._dependencies.getSubscriptionName(t).then((function(n){i===tt&&rt(n)})).catch((function(){i===tt&&(u.error("Failed to get the subscription name for the subscription id '"+t+"'."),rt(o.notAvailable))})).finally((function(){i===tt&&ft(!1)})))}));et={label:o.subscriptionNamePropertyLabel,displayValue:rt,resolveBlade:function(){var n=d(),t;return n||(t=f._currentResourceId(),e.noSubId(t)),f._dependencies.getSubscriptionBlade(n)},isLoading:ft};et.editBlade={bladeSelection:ht,editType:1,displayValue:it.changeSubscriptionLabel,showLink:!0};y(l,3,new at.OpenBladeAsyncProperty(et))}return l},i.prototype._layoutProperties=function(n,t,i,r){var u=[],f=0,h,c,s,o,v;if(r){h=r.left||[];c=r.right||[];(h.length>5||c.length+i.length>5)&&e.maxColumns(5);for(var l=0,a=0,y=function(r){var o,v=r?h:c,s;(r?l:a)<v.length?(s=v[r?l++:a++],typeof s=="number"?o=n[s]:(o=s,t.includes(o)||e.missingProperties())):o=!r&&f<i.length?i[f++]:w;u.push(o)},p=0;p++<5&&(l<h.length||a<c.length||f<i.length);)y(!0),y(!1)}else for(t.length+i.length>5&&e.maxProperties(5),s=0,o=function(){var n;n=s<t.length?t[s++]:f<i.length?i[f++]:w;u.push(n)},this._options.noResourceGroup||(u.push(n[0]),o()),v=n[1],v&&(u.push(v),o()),u.push(n[2]),o(),u.push(n[3]),o(),u.push(n[4]),o();s+f<5&&(s<t.length||f<i.length);)u.push(w),o();return u},i.prototype._startRebind=function(n){t.prototype._startRebind.call(this,n);this._dynamicProperties([])},i})(b);i.ViewModel2=st})(r=i.ResourceSummary||(i.ResourceSummary={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n,t){var i=n._dependencies;t.getLocation&&(i.getLocation=t.getLocation);t.getSubscriptionName&&(i.getSubscriptionName=t.getSubscriptionName);t.getSubscriptionBlade&&(i.getSubscriptionBlade=t.getSubscriptionBlade)}n.setDependencies=t})(t=n.ResourceSummary||(n.ResourceSummary={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var e=n.Services,i=ko.observable,r=ko.observableArray,o=(function(){function n(){var n=this;this.initialized=i(!1);this.results=r();this.canceled=i(!1);this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;this.canceled.subscribe(this._lifetimeManager,(function(t){t&&(n.results([]),n._releaseDataSub())}))}return n.prototype.dispose=function(){var n=this._lifetimeManager;n&&(n.dispose(),this._lifetimeManager=null)},n.prototype.onInputsSet=function(){return this._releaseDataSub(),this.initialized(!1),this.canceled(!1),this.results([]),null},n.prototype.connectDataSource=function(n,t){this._releaseDataSub();var i=this._dataLifetime=this._lifetimeManager.createChildLifetime();e.DataSetAssetExpansionMapper.connectDataSet(i,n,this.results,t);this.initialized(!0)},n.prototype._releaseDataSub=function(){var n=this._dataLifetime;n&&(n.dispose(),this._dataLifetime=null)},n})(),u,f;t.Service=o;u=(function(){function n(){}return n.serialize=function(n,t,i){t===void 0&&(t=!1);i===void 0&&(i=null);var r={browseCriteria:n,newBrowse:t,useBrowseKey:i};return JSON.stringify(r)},n.deserialize=function(n){var t=JSON.parse(n);return{browseCriteria:t.browseCriteria,newBrowse:t.newBrowse,useBrowseKey:t.useBrowseKey}},n})();t.BrowseSerializer=u;f=(function(){function n(n,t){this.initialized=i(!1);this.results=r();this.browseCriteria=n;this.results(t)}return n})();t.ResultsViewModel=f})(i=t.Browse||(t.Browse={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function f(n,t,r,u){var e=function(){return i.getAssetSelection(r,u,{id:t})},o=function(){var u=n.bladeName();return u?i.getBladeSelection(n.extensionName()||r,u,{id:t}):e()},f;return n&&(f=void 0,typeof n.onInputsSet=="function"&&(f=n.onInputsSet({assetId:t})),f)?f.then((function(){return o()})):Q(e())}var i=n.ViewModels,r=ko.observable,u=(function(){function n(){this.extensionName=r(null);this.bladeName=r(null)}return n})();t.Service=u;t.prepareDynamicSelection=f})(i=t.DynamicBlade||(t.DynamicBlade={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.Services.AssetExpansion,u=n.Resources.Strings.Services.AssetHandler,i=ko.observable,e=(function(){function n(){}return Object.defineProperty(n,"base",{get:function(){return[{id:"title",name:i(u.titleGridColumn),itemKey:r.titlePropertyName},{id:"assetType",name:i(u.assetTypeGridColumn),itemKey:r.assetTypeStringPropertyName},]},enumerable:!0,configurable:!0}),n})(),o,f;t.BaseColumns=e,(function(n){n[n.Default=0]="Default"})(o=t.Usage||(t.Usage={}));f=(function(){function n(){this.includeAssetIcon=i(!0);this.columns=i([])}return n})();t.Service=f})(i=t.GridColumns||(t.GridColumns={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observableArray,i=(function(){function n(){this.properties=t()}return n.prototype.setProperty=function(n,t){var i=this.properties,r=i().some((function(i){return i.property===n?(i.value=t,!0):!1}));r||i.push({property:n,value:t})},n})();n.Service=i})(t=n.PropertyProvider||(n.PropertyProvider={}))})(t=n.Services||(n.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observableArray,i=(function(){function n(){this.actions=t()}return n})();n.Service=i})(t=n.Security||(n.Security={}))})(t=n.Services||(n.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";function e(n,i,r){t.notifyAssetDeletedBulk([{assetId:i,assetType:n,extensionName:r}])}function o(n){var i=(Array.isArray(n)?n:[n]).map((function(n){return{assetId:n,assetType:t.resourceAssetType,extensionName:undefined}}));t.notifyAssetDeletedBulk(i)}var i=n.Rpc.ActionEndPointDefinition,r=n.Rpc.client,f=MsPortalFx.Base.Constants.ExtensionNames.Hubs,u;t.resourceAssetType="*Impl_Resource*";u=function(n){t.notifyAssetDeletedDefinition.invoke(r,"fx",n);t.createResourceDeletedEventInHubsDefinition.invoke(r,f,n)};t.notifyAssetDeletedBulk=u;t.notifyAssetDeleted=e;t.notifyResourceDeleted=o;t.notifyAssetDeletedDefinition=new i("MsPortalFx.UI.AssetManager.NotifyAssetDeleted");t.createResourceDeletedEventInHubsDefinition=new i("MsPortalFx.UI.AssetManager.CreateResourceDeletedEvent");t.hubsNotifyAssetDeletedDefinition=new i("MsPortalFx.UI.AssetManager.Hubs.NotifyAssetDeleted")})(t=n.AssetManager||(n.AssetManager={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";function i(n,i,r){t.notifyAssetDeleted(n,i,r)}function r(n){t.notifyAssetDeletedBulk(n)}function u(n){t.notifyResourceDeleted(n)}var t=FxImpl.AssetManager;n.notifyAssetDeleted=i;n.notifyAssetDeletedBulk=r;n.notifyResourceDeleted=u})(t=n.AssetManager||(n.AssetManager={}))})(t=n.UI||(n.UI={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";var t=new n.Rpc.ActionEndPointDefinition("OpenFeedbackPane");n.feedbackEndPoint=t})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){"use strict";var u=n.Rpc,r="MsPortalFx.UI.NotificationManager",i=u.ActionEndPointDefinition;t.addNotificationsEndPoint=new i(r+".AddNotifications");t.addNotification2EndPoint=new i(r+".AddNotifications2");t.updateNotificationEndPoint=new i(r+".UpdateNotification");t.addServerEventsEndPoint=new i("addServerEvents")})(t=n.NotificationManager||(n.NotificationManager={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function u(n,t,r){i.updateNotificationEndPoint.invoke(i.rpcClient,"fx",{id:n,propertyName:t,propertyValue:r})}function s(n){return new r(n)}function c(n){e([n])}function e(n){n&&n.length&&i.addNotificationsEndPoint.invoke(i.rpcClient,"fx",{notifications:n})}var o=FxImpl.Rpc,i=FxImpl.NotificationManager,r,h,f;i.rpcClient=o.client;r=(function(){function t(t){this._id=n.getUniqueId();this._name=t}return t.prototype.raise=function(n,t,r){i.addNotification2EndPoint.invoke(i.rpcClient,"fx",{id:this._id,name:this._name,status:n.status,subStatus:n.subStatus,assetId:t,properties:r})},t.prototype.updateCorrelationId=function(n){u(this._id,"correlationId",n)},t.prototype.reportProgress=function(n){u(this._id,"percentComplete",n)},t})();t.Notification2=r;t.create=s,(function(n){n[n.Information=0]="Information";n[n.Warning=1]="Warning";n[n.Error=2]="Error";n[n.InProgress=3]="InProgress";n[n.Success=4]="Success"})(h=t.NotificationState||(t.NotificationState={}));f=(function(){function n(n,t,i,r,u,f,e,o){if(i===undefined)throw new Error("Invalid state arg.");if(f&&!u)throw new Error("Sub id must be specified when operation id is specified.");this.source=n;this.eventType=t;this.state=i;this.timestamp=new Date;this.descriptionArgs=r;this.subscriptionId=u;this.operationId=f;this.percentOperationComplete=e;this.assetId=o}return n})();t.Notification=f;t.addNotification=c;t.addNotifications=e})(i=t.NotificationManager||(t.NotificationManager={}))})(t=n.UI||(n.UI={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var f=n.ViewModels,r=n.Base,i=ko.observable,u=(function(){function n(){this.title=i();this.subtitle=i();this.description=i();this.helpUri=i();this.icon=i(r.Images.Shell.DefaultBlade());this.titleImageUri=i();this.statusBar=null;this.contentState=i(0);this.contentStateDisplayText=i()}return n})();t.Blade=u})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){"use strict";function f(n){return n.startsWith("internal_bladeCall")}var u=1,t=ko,i,r;n.isBladeCallerInput=f;i=(function(){function n(n,i){var e=this,r,f;if(this.internal_bladeCallId=t.observable(),this.internal_bladeCallerParams=t.observable(),r=i.invokeOnSelectable,f=i.invokeOnSelectableSet,!!r==!!f)throw new Error("Specify 'invokeOnSelectable' or 'invokeOnSelectableSet', but not both.");var o=undefined,s=function(n){if(o=(function(){if(r)return r.value();if(f){var n=f.activatedItems();return n?n[0]:null}return null})(),n){e.internal_bladeCallId(undefined);var t=i.supplyParams(o);e.internal_bladeCallerParams(t)}e.internal_bladeCallId(u++)},h=!1;n.onInputsSetCallbacks.add((function(t){var c,l,u;return h||(h=!0,c=function(){if(r)return r.isSelected();if(f){var n=f.activatedItems().length;if(n>1)throw new Error("Multiselection is not supported with parameter collectors.");return n>0}},c()&&s(i.forceInvocation),l=function(){c()&&s(!0)},r?r.isSelected.subscribe(n,l):f&&f.activatedItems.subscribe(n,l)),t&&(u=t.internal_bladeCallerResult,u&&u.bladeCallId===e.internal_bladeCallId()&&(e.internal_bladeCallId(undefined),i.receiveResult(u.result,o),r?r.isSelected(!1):f&&f.activatedItems([]))),null}),!0)}return n})();n.BladeCaller=i;r=(function(){function n(n,i){var r=this,u;this.internal_bladeCallerResult=t.observable();n.onInputsSetCallbacks.add((function(n){if(r._bladeCallId||(r._bladeCallId=n.internal_bladeCallId),n.internal_bladeCallerParams!==undefined){var f=t.toJSON(n.internal_bladeCallerParams);f!==u&&r._bladeCallId&&r._bladeCallId===n.internal_bladeCallId&&(u=f,i.receiveParams(n.internal_bladeCallerParams))}return null}))}return n.prototype.sendResult=function(n){this.internal_bladeCallerResult({bladeCallId:this._bladeCallId,result:n})},n})();n.BladeCallable=r})(t=n.Internal||(n.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";var i=n.ViewModels,u=i.Controls.Internal.IFrameV2,f=n.Base,e=(function(){function n(n,t){this.signature="FxAppBlade";this.kind=n;this.data=t}return n})(),r;t.Message=e;r=(function(n){function t(t,i){var r=n.call(this)||this,f;return r._handlers={},r._queue=[],f=r.iFrame=new u.ViewModel(t,{src:i.source}),f.controlIsReady.subscribe(t,(function(n){n&&r._queue.forEach((function(n){r.iFrame.postMessage(n)}))})),f.receiveMessage.subscribe(t,(function(n){var t=r._handlers[n.kind];t&&t.fire(n.data)})),r}return __extends(t,n),t.prototype.postMessage=function(n){var t=this.iFrame;t.controlIsReady()?t.postMessage(n):this._queue.push(n)},t.prototype.on=function(n,t){var r=this._handlers,i=r[n];i||(i=r[n]=new f.Callbacks);i.add(t)},t.prototype.off=function(n,t){var i=this._handlers[n];i&&i.remove(t)},t})(i.Blade);t.ViewModel=r})(i=t.AppBlade||(t.AppBlade={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";var u=n.UI,f=u.NotificationManager,r=n.ViewModels,s=r.Controls,i=ko,h=n.Resources.Strings,c=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.data=i.observable(),t}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=n.data;return this.data(t),this.title(this._onGetTitle(t)),Q.resolve(null)},t.prototype._onGetTitle=function(n){return h.DeleteAssetConfirmation.bladeTitle.format(n.assetName)},t})(r.Blade),e,o;t.BladeViewModel=c;e=(function(t){function r(r,e){var o=t.call(this,r)||this;return o.data=i.observable(),o.result=i.observable(0),o._container=null,o._assetType=null,o._data=null,o._selectedItems=null,o._previousUserActionId="",o._container=r,o._assetType=e,i.computed(r,(function(){var n=o.data();o.enabled(o._onValidateCommand(n))})),o.result.subscribe(r,(function(n){if(n===1)u.AssetManager.notifyAssetDeleted(o._assetType,o._data.assetId);else if(n===2){var t=o._onSendErrorNotification(o._data,o._selectedItems);t.state=f.NotificationState.Error;f.addNotification(t)}})),o.enabled(!1),o.icon(n.Base.Images.Delete()),o}return __extends(r,t),r.prototype.onInputsSet=function(n){var i=n.data,r=n.selectedItems,t=n.actionBarOutput;return this.data(i),t&&((t.action===4||t.action===5)&&this._container.selectable.isSelected(!1),t.action===4&&t.userActionId&&this._previousUserActionId!==t.userActionId&&(this._previousUserActionId=t.userActionId,this._data=i,this._selectedItems=r,this._onDelete(i,r))),Q.resolve(null)},r.prototype._onValidateCommand=function(t){return!n.isNullOrUndefined(t)},r})(r.OpenBladeCommand);t.CommandViewModel=e;o=(function(t){function r(r,u){var f=t.call(this,r,u)||this;return f.data=i.observable(),f._data=null,f.data.subscribe(f.lifetimeManager,(function(t){!n.deepEquals(f._data,t)&&f._options.grid&&(f._onPopulateGrid(t),f._selectAll());f._data=t})),f}return __extends(r,t),r.prototype.onInputsSet=function(t){var i=t.data;return this._assetName(i.assetName),n.isNullOrWhiteSpace(i.assetTypeDisplayName)||this._assetTypeDisplayName(i.assetTypeDisplayName),this.data(i),Q.resolve(null)},r})(s.DeleteAssetConfirmation.ViewModel);t.PartViewModel=o})(i=t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=n,u=i.UI.NotificationManager,f=i.ViewModels,e=f.Dialogs,r=ko,c=window,o=i.Resources.Strings.DeleteCommand,s=o.Confirmation,h=o.Failure,l=(function(n){function t(t,f){var o=n.call(this)||this;return o._assetType=null,o._confirmationDialog=null,o._errorDialog=null,o._data=null,o._assetType=f,o.data=r.observable(),o.result=r.observable(0),r.computed(t,(function(){var n=o.data(),t=o._onValidateCommand(n);o.enabled(t)})),o.result.subscribe(t,(function(n){var r=o._data,t;n===1?(i.UI.AssetManager.notifyAssetDeleted(o._assetType,o._onGetAssetId(r)),o.status(0)):n===2&&(t=o._onSendErrorNotification(r),t&&(t.state=u.NotificationState.Error,u.addNotification(t)),c.setTimeout((function(){var n=o._onShowError(r);o._errorDialog=new e.MessageBox(n.title,n.message,3);o.dialog(o._errorDialog)}),100))})),o.icon(i.Base.Images.Delete()),o}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.data(n.data),Q.resolve(null)},t.prototype.execute=function(){this._data=this.data();var n=this._onShowConfirmation(this._data);this._confirmationDialog=new e.MessageBox(n.title,n.message,4);this.dialog(this._confirmationDialog)},t.prototype.dialogClick=function(n){var t=this.dialog();t===this._confirmationDialog&&n===6||t===this._errorDialog&&n===5?(this.result(0),this._onDelete(this._data)):this.status(0)},t.prototype._onShowConfirmation=function(){return{title:s.title,message:s.message}},t.prototype._onShowError=function(){return{title:h.title,message:h.message}},t.prototype._onValidateCommand=function(n){return!i.isNullOrUndefined(n)},t})(f.Command);t.DeleteAssetCommand=l})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";var t={},i,r;n.forEachKey(n,(function(n,i){typeof i!="object"&&(t[n]=i)}));t.toNiceFixed=function(t,i){return i===void 0&&(i=0),String(n.round(t,i))};t.isIFrame=function(){return n.isIFrame};t.extend=n.jqueryExtend;i=t.Internal=t.Internal||{};i.JQuery=t;i.Serialization=FxImpl,(function(n){n.Utilities=t;var i;(function(n){n.Internal=FxImpl.Rpc})(i=n.Rpc||(n.Rpc={}))})(r=n.Base||(n.Base={}));n.Util=t;n.Polyfill=t;n.Polyfills=t})(MsPortalFx||(MsPortalFx={})),
(function(n){"use strict";n.RequireMetadata={"HubsExtension/_generated/Parts/BladeLauncher":["MsPortalImpl/UI/UI.BladeLauncher",],"MsPortalImpl/UI/UI.BladeLauncher":["MsPortalImpl/UI/Compositions/UI.Composition.BladeInvocationHandler",],"Fx/Composition/Pdl/MenuBlade":["MsPortalImpl.Controls/Controls/Lists/Menu",]}})(FxImpl||(FxImpl={})),
(function(n){"use strict";function o(n){return t.isPreorder?n.profile=MsPortalFx.isFeatureEnabled("nativeperf")&&MsPortalFx.getEnvironmentValue("extensionName"):(n.paths=n.paths||{},n.bundles=n.bundles||{},MsPortalFx.forEachKey(n.dependencyTree,(function(t,i){n.paths[t]=[t].concat((n.fallbacks||{})[t]||[]);n.bundles[t]=Object.keys(i)}))),n}function s(i,r){var c=i.initUrls||[],e,h,s,f;c.length?(e="require_init_urls",h=i.deps,i.deps=[e],s=i.paths||(i.paths=Object.create(null)),s[e]=["data:text/javascript,define();"],f=[],c.forEach((function(n){if(!s[n]){var t="**Shim_require_init_dependency"+f.length;s[t]=[n];f.push(t)}})),(i.shim||(i.shim=Object.create(null)))[e]=f,h.forEach((function(n){var t=i.shim[n];t&&t.length&&f.push.apply(f,t)})),t.config(o(i))([e],(function(){u.resolve();t(h);t.configureMetadata&&t.configureMetadata(n.RequireMetadata,r)}),u.reject)):(t.config(o(i)),t.configureMetadata&&t.configureMetadata(n.RequireMetadata,r),u.resolve())}function h(){var i,t;n.setEnvironment();i=MsPortalFx.getEnvironmentValue("typesMetadata");i&&MsPortalFx.Data.Metadata.setTypesMetadata(i);t=MsPortalFx.clone(MsPortalFx.getEnvironmentValue("requireConfig"));n.cleanUpRequire(t);MsPortalFx.isInWebWorker&&n.toAbsoluteUrisRequire(t);r.fx.bootstrapTelemetry.fxScriptsEnd=r.fx.getTimestamp();e.mark("MsPortalFxEnd");MsPortalFx.extend(t,n.internalEnv.fxRequireConfig,!0);e.mark("ManifestStart");s(t,n.shellRequireConfig)}var r=window,i=new MsPortalFx.Base.Diagnostics.Log("MsPortalFx/MsPortalFxEnd"),e=r.performance,t,u,f;n.onEnvironmentSet((function(t){var r=t("requireConfig"),o=MsPortalFx.isDevelopmentMode||n.internalEnv.crossOriginTraces,u=r.ignoreErrorsForModule={},f,e;r.onNodeCreated=function(t,i,r,f){o&&t.setAttribute("crossorigin","anonymous");u[r]||n.Diagnostics.addScriptErrorListener(6,t,f,r)};f="retryAttempt";r.getPathFallback=function(n,t){var r,e,o;if(t){if(r=new MsPortalFx.Base.UriBuilder(t),e=r.query.getParameter(f),!e)return i.warning("Retrying download",0,n,t),Object.keys(r.query.getParameters()).length===0&&(r.path+=".js"),r.query.setParameter(f,1),r.toString();o=u[n]?i.warning:i.error;o.call(i,"Download failed even after retry: "+n,0,n,t)}};e=/^require \d+$/;r.logError=function(n,t,r){var f=r||u[n]||e.test(n);return f?i.warning(t):i.error(t)}}));t=r.requirejs;MsPortalFx.forEachKey({MsPortalFx:MsPortalFx,f:MsPortalFx,i:n,u:undefined,o:Object,a:Array,ko:ko,$:jQuery},(function(n,t){r.define(n,[],MsPortalFx.wrap(t))}));u=Q.defer();n.requireReady=u.promise;n.requireExtension=h;n.internalEnv.isShell&&(f=MsPortalFx.getEnvironmentValue("requireConfig"),MsPortalFx.extend(f,n.internalEnv.fxRequireConfig,!0),s(f,f));ko.tasks.scheduler=Q.nextTick})(FxImpl||(FxImpl={}))