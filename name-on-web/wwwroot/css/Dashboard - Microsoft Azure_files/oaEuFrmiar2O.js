define("FxInternal/Controls/Button",["require","exports","f","o","ko","FxInternal/Controls/Base/Base"],(function(n,t,i,r,u,f){"use strict";r.defineProperty(t,"__esModule",{value:!0});var e=(function(n){function t(t,r){var f=n.call(this,t)||this,e;return f.controlType=100,f.style=i.initObservable(r.style,0),e=u.computed(t,(function(){return f.style()!==1})),f.onClick=r.onClick,f.text=i.initObservable(r.text,""),f.disabled=i.initObservable(r.disabled,!1),f.primary=e,f.ariaLabel=i.initObservable(r.ariaLabel,""),f.visible=i.initObservable(r.visible,!0),f.loading=i.initObservable(r.loading,!1),f.icon=i.initObservable(r.icon),f}return __extends(t,n),t})(f.ViewModel);t.ViewModel=e}));
define("Fx/Controls/Button",["require","exports","o","FxInternal/Controls/Button"],(function(n,t,i,r){"use strict";function u(n,t){return new r.ViewModel(n,t)}i.defineProperty(t,"__esModule",{value:!0});t.create=u}));
define("FxInternal/Controls/InfoBox",["require","exports","f","o","ko","FxInternal/Controls/Base/Base"],(function(n,t,i,r,u,f){"use strict";function o(n){return n&&!!n.uri}r.defineProperty(t,"__esModule",{value:!0});var e=(function(n){function t(t,r){var f=n.call(this,t)||this;return f.loading=u.observable(!1),f.controlType=78,r=r||{},f.image=i.initObservable(r.image),f.text=i.initObservable(r.text),f.size=i.initObservable(r.size,1),f.disabled=i.initObservable(r.disabled),f.canClose=!!r.canClose,f.onCloseClickCallback=r.onCloseClickCallback,f.visible=i.initObservable(r.visible,!0),o(r.onClick)?f.clickableLink=i.initObservable(r.onClick):f.onClickCallback=r.onClick,f}return __extends(t,n),t})(f.ViewModel);t.ViewModel=e}));
define("Fx/Controls/InfoBox",["require","exports","o","ko","FxInternal/Controls/InfoBox"],(function(n,t,i,r,u){"use strict";function f(n,t){var i;return r.ignoreDependencies((function(){i=new u.ViewModel(n,t)})),i}i.defineProperty(t,"__esModule",{value:!0});t.create=f}));
define("FxInternal/Controls/OptionsGroup",["require","exports","f","o","FxInternal/Controls/Base/FormsBase"],(function(n,t,i,r,u){"use strict";r.defineProperty(t,"__esModule",{value:!0});var f=(function(n){function t(t,r){var u=n.call(this,t,r)||this;return r=r||{},u.controlType=4,u.items=i.initObservableArray(r.items,[]),u.singleItemPerLine=!!r.singleItemPerLine,u.sizeToContent=!(r.uniformItemWidth===!0),u.radioButtonStyle=!!r.radioButtonStyle,u.options=u.items,u}return __extends(t,n),t})(u.ViewModel);t.ViewModel=f}));
define("Fx/Controls/RadioButtons",["require","exports","f","o","ko","FxInternal/Controls/OptionsGroup"],(function(n,t,i,r,u,f){"use strict";function e(n,t){var r;return u.ignoreDependencies((function(){t=i.extend2(t,{radioButtonStyle:!0});r=new f.ViewModel(n,t)})),r}r.defineProperty(t,"__esModule",{value:!0});t.create=e}));
define("FxInternal/Controls/TextBox",["require","exports","f","o","ko","FxInternal/Controls/Base/TypableBase"],(function(n,t,i,r,u,f){"use strict";r.defineProperty(t,"__esModule",{value:!0});var e=(function(n){function t(t,r){var f=n.call(this,t,r)||this;return f.actionsEnabled=u.observable(!1),r=r||{},f.controlType=2,f.onEnterPressed=r.onEnterPressed,f.readonly=i.initObservable(r.readonly,!1),f.showValidationsAsPopup=!!r.showValidationsAsPopup,f.spellcheck=i.initObservable(r.spellcheck,!1),f.showValidationsAsPopup&&(f.showValidationMessagesBelowControl=!0,f.valueUpdateTrigger=4),f}return __extends(t,n),t})(f.ViewModel);t.ViewModel=e}));
define("Fx/Controls/TextBox",["require","exports","o","ko","FxInternal/Controls/TextBox"],(function(n,t,i,r,u){"use strict";function f(n,t){var i;return r.ignoreDependencies((function(){i=new u.ViewModel(n,t)})),i}i.defineProperty(t,"__esModule",{value:!0});t.create=f}));
define("FxInternal/Controls/ResourceGroupDropDown",["require","exports","f","i","o","ko","Fx/Controls/RadioButtons","Fx/Controls/TextBox","Fx/Controls/Validations","FxInternal/Controls/BaseResourceDropDown"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function tt(n,t){return n===t}function ot(n,t){var i=!~[undefined,null].indexOf(n),r=!~[undefined,null].indexOf(t);return n=i?n:"",t=r?t:"",n===t}function y(n,t){return u.defineProperty(t,"resourceId",{get:function(){return b.buildResourceGroupIdFromSubscriptionAndResourceGroupName(n(),t.name)}}),t}var p=i.Base,it=p.Constants,t=i.ViewModels,w=p.Diagnostics,b=t.Services.ResourceTypes,l=i.Resources.Strings,rt=r.Rpc,k=r.Azure,a=i.Azure,ut=a.ResourceGroups.Internal,c=t.getValidationResult,ft=rt.client,et=r.Rpc.client,d=l.Azure.ResourceGroups.DropDown,g=l.ViewModels.Controls.CreatorAndComboBox,v=l.ResourceGroup.Validation,nt=Q(c()),st=(function(n){function h(h,l){var p=this,rt=i.extend({label:d.defaultLabel,sort:function(n,t){return i.compare(n.value.name,t.value.name)},filter:!0,allowedMode:f.observable(2),subscriptionId:null},l),wt={name:"",location:"",provisioningState:""},at={mode:1,value:wt},si={mode:0,value:{name:"",location:""}},vt=f.isWritableObservable(l.value)?l.value:f.observable(l.value),ct=vt(),yt=f.observable(ct&&ct.mode||!ct?{mode:0,value:{name:""}}:ct),ft,st,ht,ri,ei,oi,lt,gt,ni;rt.value=yt;yt.equalityComparer=tt;var ai=f.unwrap(rt.allowedMode),pt=ct&&ct.mode,vi=pt&&ct.value&&ct.value.name;ai===1&&(pt=1);pt!==0&&(pt=1);ft=f.observable(vi||"");st=f.observable(pt);ft.equalityComparer=ot;u.defineProperty(wt,"name",{get:ft,set:ft});u.defineProperty(at,"mode",{get:st,set:st});y(l.subscriptionId,wt);var bt={text:g.createNew,value:1},kt={text:g.useExisting,value:0},hi=[bt,kt],dt=f.observableArray(hi),ti=l.validations,ii=f.observable(),ci=f.observableArray([]),yi=new s.Required;f.computed(h,(function(){return(f.unwrap(ti)||[]).filter((function(n){return n.type===1})).length?[yi]:[]})).subscribeAndRun(h,ci);ht=e.create(h,{label:rt.label,items:dt,value:st,infoBalloonContent:rt.infoBalloonContent,ariaLabel:rt.ariaLabel,validations:ci,visible:ii});rt.ariaLabel=f.computed(h,(function(){return kt.text+" "+(f.unwrap(ht.ariaLabel)||f.unwrap(ht.label))}));ri=rt.label=f.observable();rt.infoBalloonContent=null;var ui,pi=[new t.CustomValidationV(v.invalidMessage,function(n){return ut.validateResourceGroupName(n,l.subscriptionId(),p.fetchedValues().map((function(n){return n.value.name})))}),new t.CustomValidationV(v.invalidMessage,function(n){return p._loadPromise.then((function(){return ui||(ui=new a.ReservedResourceNameValidator(it.ResourceTypes.ResourceGroups,undefined,undefined)),ui.validate(n)}))})],li=f.observableArray(),fi=f.observable();f.computed(h,(function(){return(f.unwrap(ti)||[]).map((function(n){if(n.type===21){var t=n;return new s.CustomV(t.message,function(){return t.validate(lt())})}return n})).concat(pi)})).subscribeAndRun(h,li);ei=o.create(h,{value:ft,validations:li,ariaLabel:f.computed(h,(function(){return bt.text+" "+(f.unwrap(ht.ariaLabel)||f.unwrap(ht.label))})),placeHolderText:rt.createNewPlaceholder,label:fi});oi='<div style="display: inline-flex;flex-direction: column;"><div>{0}<\/div> <div>{1}<\/div><\/div>';f.computed(h,(function(){if(~[2,null,undefined].indexOf(f.unwrap(rt.allowedMode))){fi(null);ri(null);ii(!0);return}ri(oi.format(ht.label(),kt.text));fi(oi.format(ht.label(),bt.text));ii(!1)}));var wi=l.requiredPermissions,bi=new t.CustomValidation("",function(n){if(!n)return nt;var t=b.buildResourceGroupIdFromSubscriptionAndResourceGroupName(rt.subscriptionId(),n.value.name);return p._loadPromise.then((function(){return k.getIsReadOnly(et,t).then((function(n){return c(n&&d.lockedValidationMessage)})).catch((function(){return w.Log.writeEntry(1,"ResourceGroupValidation","Error checking read permissions. Defaulting to false."),c()}))}))}),ki=new t.CustomValidation("",function(n){return n.mode===0?nt:p._loadPromise.then((function(){return Q.all([r.Security.hasPermission("/subscriptions/"+l.subscriptionId(),["Microsoft.Resources/subscriptions/resourcegroups/write"]),a.getSubscriptionInfo(l.subscriptionId()).then((function(n){return n.displayName})),]).spread((function(n,t){return n?c():c(v.subscriptionHasNoPermissionsMessage.format(t))})).catch((function(){return w.Log.writeEntry(1,"ResourceGroupValidation","Error checking resource group create permissions. Defaulting to true."),c()}))}))});return f.computed(h,(function(){return(f.unwrap(ti)||[]).concat([bi,ki]).map((function(n){return n.type!==21&&(n.map=n.map||function(){return lt().value.name}),n}))})).subscribeAndRun(h,rt.validations=f.observableArray()),lt=f.observable(i.clone(at,!0)),lt.equalityComparer=tt,p=n.call(this,h,rt,(function(n){return{text:n.value.name,value:n}}),(function(n){var t=n.pop();return n.concat([ht,st()?ei:t])}))||this,p._emptyControlValue=at,p._negotiatedValue=lt,p._exposedValue=vt,p._baseOptions=rt,p._radioButtons=ht,p._textBox=ei,gt=rt.initialResourceGroupName,p._initialPromise=f.isObservable(gt)?gt.fxAwaitAndRun(h):Q(gt),l.subscriptionId.fxAwaitAndRun(h).then((function(){return f.computed(h,(function(){return[f.unwrap(wi),f.unwrap(l.subscriptionId),]})).extend({deferred:!0}).subscribe(h,(function(){var n=p._negotiatedValue();n&&(n.mode===0||n.value.name)&&p.triggerValidation()}))})),f.computed(h,(function(){switch(f.unwrap(rt.allowedMode)){case 1:dt([bt]);p.switchMode();break;case 0:dt([kt]);p.switchMode();break;default:dt(hi)}})),p._loadPromise.then((function(){f.computed(h,(function(){return[f.unwrap(l.subscriptionId)]})).subscribeAndRun(h,(function(n){return n[0]&&p._fetchItems(l)}))})),ni=vt.subscribe(h,(function(n){n=n||{mode:st(),value:{name:ft(),location:"",provisioningState:""}};p.switchMode(n.mode);n.mode?ft(n.value.name):yt(n||si)})),f.computed(h,(function(){var n=lt(),t;n=n||{mode:st(),value:{name:ft(),location:"",provisioningState:""}};p.switchMode(n.mode);n.mode?(at.value=wt)&&ft(n.value.name):yt(n||si);ni.dispose();t=i.clone(n,!0);y(l.subscriptionId,t.value);vt(t);ni=vt.subscribe(h,ni.callback)})),f.computed(h,(function(){var n=st();lt(n?i.clone(at,!0):yt())})),p._valid=f.computed(h,(function(){return st()?p._textBox.valid():p._fxDropDown.valid()})),p}return __extends(h,n),u.defineProperty(h.prototype,"value",{get:function(){return this._exposedValue},enumerable:!0,configurable:!0}),u.defineProperty(h.prototype,"valid",{get:function(){return this._valid},enumerable:!0,configurable:!0}),h.prototype.triggerValidation=function(){return this._radioButtons.value()?this._textBox.triggerValidation():this._fxDropDown.triggerValidation()},h.prototype.switchMode=function(n){var t=this._radioButtons.value,i=f.unwrap(this._baseOptions.allowedMode),r;if(i!==2&&i!==undefined)return t(i);r=n===undefined?!t():!!n;n=r?1:0;t(n)},h.prototype._fetchItems=function(n){var t=this,r;return this._fetching(!0),r=n.customFetch||function(){return Q(k.getResourceGroupsFromSubscription(ft,[n.subscriptionId()]))},Q(r()).then((function(n){return t.selectInitialOrCurrent(n.map((function(n){return{mode:0,value:y(t._baseOptions.subscriptionId,n)}})),(function(n){return n.mode===1?"":n.value.name}),i.clone(t._emptyControlValue,!0),!t._negotiatedValue().mode)})).finally((function(){return t._fetching(!1)}))},h})(h.ViewModel);n.ViewModel=st})(c||(c={})),c}))