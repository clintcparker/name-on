define("Shared/UnitHelper",["require","exports","f","o","Shared/DateUtils"],(function(n,t,i,r,u){"use strict";function o(n){switch(n){case 2:return u.TimeUnits.days;case 1:return u.TimeUnits.hours;case 0:return u.TimeUnits.minutes;case 4:return u.TimeUnits.months;case 3:return u.TimeUnits.weeks;case 5:return u.TimeUnits.years;default:return null}}function s(n){switch(n){case u.TimeUnits.milliseconds:return i.UnitConversion.Unit.MilliSeconds;case u.TimeUnits.seconds:return i.UnitConversion.Unit.Seconds;case u.TimeUnits.minutes:return i.UnitConversion.Unit.Minutes;case u.TimeUnits.hours:return i.UnitConversion.Unit.Hours;case u.TimeUnits.days:return i.UnitConversion.Unit.Days;default:return null}}function h(n){var t=f[n];switch(t){case f.bytes:return i.UnitConversion.Unit.Bytes;case f.bytesPerSec:return i.UnitConversion.Unit.BytesPerSecond;case f.count:return i.UnitConversion.Unit.Count;case f.hours:return i.UnitConversion.Unit.Hours;case f.mb:return i.UnitConversion.Unit.Megabytes;case f.minutes:return i.UnitConversion.Unit.Minutes;case f.ms:return i.UnitConversion.Unit.MilliSeconds;case f.percent:return i.UnitConversion.Unit.Percentage;case f.perSec:return i.UnitConversion.Unit.CountPerSecond;case f.seconds:return i.UnitConversion.Unit.Seconds;default:return null}}function e(n){var t=f[n];return t===f.hours||t===f.minutes||t===f.seconds||t===f.ms}function c(n,t){return n===t||e(n)&&e(t)}r.defineProperty(t,"__esModule",{value:!0});t.convertConfigurationTimeUnit=o;t.convertTimeUnitToIbizaUnit=s;t.convertMDMUnitToIbizaUnit=h;var f;(function(n){n[n.bytes=0]="bytes";n[n.bytesPerSec=1]="bytesPerSec";n[n.count=2]="count";n[n.hours=3]="hours";n[n.mb=4]="mb";n[n.minutes=5]="minutes";n[n.ms=6]="ms";n[n.percent=7]="percent";n[n.perSec=8]="perSec";n[n.seconds=9]="seconds"})(f=t.MDMUnit||(t.MDMUnit={}));t.isTimeBasedUnit=e;t.isCompatiableUnit=c}));
define("Shared/TimeContext",["require","exports","o","Shared/DateUtils","Shared/Enumerations","Shared/InsightsTelemetry","Shared/UnitHelper"],(function(n,t,i,r,u,f,e){"use strict";function v(n){if(n){var t=undefined;return n.endTime&&(t=new Date(n.endTime)),new o(n.durationMs,t,n.createdTime,n.isInitialTime,n.grain,n.useDashboardTimeRange)}return undefined}function y(n,t){var i=null;return isNaN(t.getFullYear())?f.logError("createdTime {0} is invalid date".format(t),4,"TimeContext.copy",undefined):i=t.toISOString(),new o(n.durationMs,n.endTime,i,n.isInitialTime,n.grain,n.useDashboardTimeRange)}function s(n){return!!n.endTime||n.grain!==u.Grain.Automatic}function h(n){var t=n.endTime?n.endTime:new Date;return{startTime:r.addMilliseconds(t,-n.durationMs),endTime:t}}function p(n){if(n){if(n.endTime)return{absolute:{from:r.addMilliseconds(n.endTime,-n.durationMs),to:n.endTime}};var t=r.TimeUnits.convert(n.durationMs,r.TimeUnits.milliseconds,r.TimeUnits.minutes);return{relative:{duration:t,timeUnit:0}}}return undefined}function w(n,t,i){return new o(t.getTime()-n.getTime(),t,null,null,i)}function b(n){var t,i,u,f;if(n){if(n.absolute)return t=n.absolute.from,i=n.absolute.to,typeof t=="string"&&(t=r.ToDate(t)),typeof i=="string"&&(i=r.ToDate(i)),t&&i?c(t,i):null;if(n.relative)return u=e.convertConfigurationTimeUnit(n.relative.timeUnit),f=r.TimeUnits.convert(n.relative.duration,u,r.TimeUnits.milliseconds),new o(f)}return undefined}function c(n,t,i,u){u===void 0&&(u=!1);var f=r.compare(t,n);return new o(f,t,null,null,i,u)}function k(n,t,i,r){if(!n&&!t)return!0;if(!n||!t)return!1;var u=n.durationMs===t.durationMs&&t.grain===n.grain;return i||(u=u&&a(n.endTime,t.endTime)),r&&(u=u&&n.useDashboardTimeRange===t.useDashboardTimeRange),u}function d(n){if(n){var t=l(n.endTime);n=new o(n.durationMs,t,(new Date).toString(),n.isInitialTime,n.grain,n.useDashboardTimeRange)}return n}function l(n){return typeof n=="string"&&(n=new Date(n)),n}function a(n,t){return!n&&!t?!0:!n||!t?!1:n.getTime()===t.getTime()}function g(n,t){t===void 0&&(t=5);var i=n.endTime;return i||(i=r.roundDate(new Date,r.TimeUnits.minutes,!0,!1,t)),"timeContext={startTime={0};endTime={1}}".format(r.addMilliseconds(i,-n.durationMs).toISOString(),i.toISOString())}function nt(n){var t=new Date,i=r.addDays(t,-n);return{startTime:i,endTime:t}}i.defineProperty(t,"__esModule",{value:!0});var o=(function(){function n(n,t,i,r,f,e){this.durationMs=n;this.endTime=t;this.createdTime=i||(new Date).toISOString();this.isInitialTime=r||!1;this.grain=f||u.Grain.Automatic;this.useDashboardTimeRange=e||!1}return n.prototype._toDataObject=function(){return{durationMs:this.durationMs,endTime:this.endTime&&this.endTime.toISOString(),createdTime:this.createdTime,isInitialTime:this.isInitialTime,grain:this.grain,useDashboardTimeRange:this.useDashboardTimeRange}},n.prototype._toString=function(){var t=s(this),n=h(this);return"{0} TimeRange {1} - {2}".format(t?"Custom":"Dynamic",n.startTime.toISOString(),n.endTime.toISOString())},n})();t.TimeContext=o;t.fromDataObject=v;t.copy=y;t.isCustom=s;t.toTimeRange=h;t.toDashBoardTimeRange=p;t.fromTimeRange=w;t.fromDashboardTimeRange=b;t.createFixedTimeContext=c;t.equals=k;t.fromAny=d;t.convertSerializedDate=l;t._isSameDate=a;t.getKey=g;t.getTimeRangeForLastDays=nt}))