define("_generated/Less/MsPortalImpl/Parts/Parts.Frame.css",["require","exports","o","module"],(function(n,t,i,r){"use strict";i.defineProperty(t,"__esModule",{value:!0});window.fx.injectCss(r,".fxs-part.fxs-part-framepart{padding:0;overflow:hidden!important}.fxs-part.fxs-part-framepart.fxs-part-part-title-visible .fxs-part-title{padding:15px 15px 0}.fxs-part-frame{width:100%;height:100%;border:0;overflow:auto}")}));
define("MsPortalImpl/Parts/Parts.Frame",["require","exports","f","i","Fx/Composition/FramePart","MsPortalImpl/Parts/Parts","FxInternal/Composition/ViewModel","_generated/Less/MsPortalImpl/Parts/Parts.Frame.css"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){function h(n){var u=new i.Base.UriBuilder(n);return u.query.setParameter("clientOptimizations",t.clientOptimizations),u.query.setParameter("l",t.effectiveLocale),u.query.setParameter("shellVersion",t.shellVersion),u.query.setParameter("trustedAuthority",r.trustedParentOrigin),t.cdn.forceDisable&&u.query.setParameter(t.cdn.disableParameter,!0),u.fragment=i.sessionId,u}function c(n){var t=n.getSchemeAndAuthority();return i.startsWith(t,"//")&&(t=location.protocol+t),t}var o=window,t=o.fx.environment,s=r.internalEnv.bootMessageSignature,l=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.template="<iframe />",t._contentRevealed=Q.defer(),t._initializationComplete=Q.defer(),t}return __extends(t,n),t.prototype.awaitContentRevealed=function(){return this._contentRevealed.promise},t.prototype.awaitInitializationComplete=function(){return this._initializationComplete.promise},t.prototype._bindContent=function(n,t){var v=this,f,y,b;i.disposeDisposable(this._childLifetime);f=$(t).addClass("fxs-part-frame").attr("sandbox","allow-same-origin allow-scripts allow-popups allow-modals allow-forms")[0];y=$(n);y.append(f);y.closest(".fxs-part").addClass("fxs-part-framepart");var l,p=this._viewModel.content,k=e.isV2(p)?p.viewModel:p,d=h(k.src),w=c(d),g=this._childLifetime=this._lifetime.createChildLifetime(),a=k._msPortalFxData,r=[];a.postMessage.subscribeAndRun(g,(function(n){r?r.push(n):l.postMessage(n,w)}));b=function(n){if(n.source===l){var t=n.data;if(t.signature===s){v.dispose();throw new Error("Boot message received from iframe, disposing to prevent XSS.");}if(n.origin===w&&t&&t.signature===a.signature){switch(t.kind){case"ready":r&&r.forEach((function(n){l.postMessage(n,w)}));r=null;break;case u.revealContentMessageKind:v._contentRevealed.resolve(!0);break;case u.initializationCompleteMessageKind:v._initializationComplete.resolve()}a.receiveMessage(t)}}};o.addEventListener("message",b,!1);g.registerForDispose((function(){o.removeEventListener("message",b,!1)}));f.src=d.toString();l=f.contentWindow;a.isFrameReady(!0)},t})(f.PartImpl);n.Part=l})(o||(o={})),o}))