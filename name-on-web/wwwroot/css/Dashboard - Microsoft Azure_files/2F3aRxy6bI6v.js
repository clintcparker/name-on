define("MsPortalImpl/Services/BrowseCuration/default",["require","exports","f","MsPortalImpl/Services/Services.BrowseCuration"],(function(n,t,i,r){"use strict";var u;return (function(n){function a(){return Q({favorites:t([f,"BrowseAllResources"],[f,"ResourceGroups"],i.isFeatureEnabled("quickstart")&&["Microsoft_Azure_Resources","Quickstart"],[u,"Website"],[u,"AppService"],["SqlAzureExtension","Database"],["Microsoft_Azure_DocumentDB","DocumentDBDatabaseAccount"],["Microsoft_Azure_Compute","VirtualMachine"],["Microsoft_Azure_Network","LoadBalancer"],["Microsoft_Azure_Storage","StorageAccount"],["Microsoft_Azure_Network","VirtualNetwork"],["Microsoft_AAD_IAM","AzureActiveDirectory"],["Microsoft_Azure_Monitoring","AzureMonitoring"],["Microsoft_Azure_Expert","AzureAdvisor"],["Microsoft_Azure_Security","SecurityDashboard"],["Microsoft_Azure_Billing","Billing"],["Microsoft_Azure_Support","HelpAndSupport"]),categories:[{id:"General",items:t([f,e.Dashboard],[f,e.BrowseAllResources],[f,e.BrowseRecentResources],["Microsoft_Azure_ManagementGroups","ManagementGroups"],["Microsoft_Azure_Billing","SubscriptionDetail"],[f,e.ResourceGroups],["Microsoft_Azure_Billing","Billing"],["Microsoft_Azure_Reservations","ReservationsBrowse"],[l,"Gallery"],["Microsoft_Azure_Support","HelpAndSupport"],["Microsoft_Azure_Health","AzureHealth"],[l,"GalleryRpItem"],[f,"Tag"],[f,"WhatsNew"],[f,"Settings",!1])},{id:"Compute",items:t(["Microsoft_Azure_Compute","VirtualMachine"],["Microsoft_Azure_Classic_Compute","VirtualMachine"],["Microsoft_Azure_Compute","VirtualMachineScaleSet"],["Microsoft_Azure_Compute","AzureContainerService"],[u,"AppService"],[u,"Website"],["Microsoft_Azure_Compute","ContainerGroup"],["Microsoft_Azure_Batch","BatchAccount"],["Microsoft_Azure_ServiceFabric","ServiceFabricCluster"],["Microsoft_Azure_CloudServices","CloudService"],["Microsoft_Azure_Compute","ManagedClusters"],["Microsoft_Azure_Compute","AvailabilitySet"],["Microsoft_Azure_Compute","Disk"],["Microsoft_Azure_Classic_Compute","Disks"],["Microsoft_Azure_Compute","Snapshot"],["Microsoft_Azure_Compute","Image"],["Microsoft_Azure_Classic_Compute","UserImages"],["Microsoft_Azure_Classic_Compute","OsUserImages"],["Microsoft_Azure_Classic_Compute","VmUserImages"],["Citrix_XenDesktop_Essentials","XenDesktopEssentials"],["Citrix_XenApp_Essentials","XenAppEssentials"])},{id:"Networking",items:t(["Microsoft_Azure_Network","VirtualNetwork"],["Microsoft_Azure_Classic_Network","VirtualNetwork"],["Microsoft_Azure_Network","LoadBalancer"],["Microsoft_Azure_Network","ApplicationGateway"],["Microsoft_Azure_Network","VirtualNetworkGateway"],["Microsoft_Azure_Network","LocalNetworkGateway"],["Microsoft_Azure_Network","DnsZone"],["Microsoft_Azure_Cdn","CdnProfile"],["Microsoft_Azure_Network","TrafficManager"],["Microsoft_Azure_Network","ExpressRoute"],["Microsoft_Azure_Network","NetworkWatcher"],["Microsoft_Azure_Network","NetworkSecurityGroup"],["Microsoft_Azure_Classic_Network","NetworkSecurityGroup"],["Microsoft_Azure_Network","NetworkInterface"],["Microsoft_Azure_Network","PublicIpAddress"],["Microsoft_Azure_Classic_Network","ReservedIPAddress"],["Microsoft_Azure_Network","Connection"],["Microsoft_Azure_ODG","ConnectionGateway"],["Microsoft_Azure_Network","RouteTable"],["Microsoft_Azure_Network","RouteFilter"])},{id:"Storage",items:t(["Microsoft_Azure_Storage","StorageAccount"],["MicrosoftAzureClassicStorageExtension","ClassicStorageAccount"],["Microsoft_Azure_RecoveryServices","RecoveryServicesResource"],["Microsoft_Azure_StorSimple","StorSimpleManager"],["Microsoft_Azure_DataLakeStore","CaboAccount"],["Microsoft_Azure_HybridData","HybridData"],["Microsoft_Azure_Kailani","SyncServiceAsset"],["Microsoft_Azure_Storage","ImportExportJob"])},{id:"Web",items:t([u,"Website"],["Microsoft_Azure_ApiManagement","Service"],["Microsoft_Azure_Cdn","CdnProfile"],["Microsoft_Azure_Search","SearchService"],["Microsoft_Azure_NotificationHubs","NotificationHub"],["Microsoft_Azure_NotificationHubs","Namespace"],[u,"WebHostingPlan"],[u,"AppServiceEnvironment"],[u,"ApiHubConnection"],[u,"SslCertificate"],[u,"AppServiceDomain"],["Microsoft_Azure_Media","MediaServiceAccount"])},{id:"Mobile",items:t([u,"Website"],["Microsoft_Azure_NotificationHubs","NotificationHub"],["Microsoft_Azure_LocationServices","LocationBasedServices"])},{id:"Containers",items:t(["Microsoft_Azure_Compute","AzureContainerService"],["Microsoft_Azure_Compute","ContainerGroup"],["Microsoft_Azure_ContainerRegistries","RegistryResource"],["Microsoft_Azure_Batch","BatchAccount"],["Microsoft_Azure_ServiceFabric","ServiceFabricCluster"],[u,"Website"])},{id:"Databases",items:t(["Microsoft_Azure_DocumentDB","DocumentDBDatabaseAccount"],["SqlAzureExtension","Database"],["SqlAzureExtension","MySqlServer"],["SqlAzureExtension","PostgreSqlServer"],["SqlAzureExtension","Server"],["SqlAzureExtension","Database","v12.0,user,datawarehouse"],["Microsoft_Azure_DMS","Dms"],["AzureCacheExtension","CacheAsset"],["SqlAzureExtension","Database","v12.0,user,stretch"],["Microsoft_Azure_DataFactory","DataFactory"],["SqlAzureExtension","ElasticPool"],["SqlAzureExtension","VirtualCluster"],["SqlAzureExtension","ManagedDatabase"],["SqlAzureExtension","JobAgent"],["SqlAzureExtension","ManagedInstance"],["SqlAzureExtension","TargetGroup"],["SqlAzureExtension","Credential"],["SqlAzureExtension","Job"])},{id:"Analytics",items:t(["SqlAzureExtension","Database","v12.0,user,datawarehouse"],["Microsoft_Azure_Databricks","Workspace"],["Microsoft_Azure_HDInsight","HDInsightCluster"],["Microsoft_Azure_DataFactory","DataFactory"],["Microsoft_Azure_PowerBIDedicated","PowerBIDedicated"],["Microsoft_PowerBI_Embedded","WorkspaceCollection"],["Microsoft_Azure_StreamAnalytics","StreamAnalyticsJob"],["Microsoft_Azure_DataLakeAnalytics","KonaAccount"],["Microsoft_Azure_AnalysisServices","AnalysisServices"],["Microsoft_Azure_EventHub","EventHub"],["Microsoft_Azure_EventHub","EventHubCluster"],["Microsoft_OperationsManagementSuite_Workspace","Workspace"],["Microsoft_Azure_DataLakeStore","CaboAccount"],["Microsoft_Azure_CustomerInsights","CustomerInsights"])},{id:"AI + Machine Learning",items:t(["Microsoft_Azure_BatchAI","BatchAI"],["Microsoft_Azure_BotService","BotService"],["Microsoft_Azure_ProjectOxford","CognitiveServicesAccount"],["Microsoft_Azure_MLWebservices","MachineLearningWebService"],["Microsoft_Azure_MLWorkspaces","MachineLearningWorkspace"],["Microsoft_Research_Genomics","GenomicsAccountAsset"],["Microsoft_Azure_MLCommitmentPlans","MachineLearningCommitmentPlan"],["Microsoft_Azure_MLTeamAccounts","MachineLearningExperimentationAccount"],["Microsoft_Azure_MLHostingAccounts","MachineLearningModelManagementAccount"])},{id:"Internet of things",items:t(["Microsoft_Azure_IotHub","IotHubs"],["Microsoft_Azure_IotHub","DeviceProvisioning"],["Microsoft_Azure_LocationServices","LocationBasedServices"],[u,"AppService"],["Microsoft_Azure_EventGrid","EventGrid"],["Microsoft_Azure_TimeSeriesInsights","TimeSeriesInsightsEnvironment"],["Microsoft_Azure_TimeSeriesInsights","TimeSeriesInsightsEventSource"],["Microsoft_Azure_TimeSeriesInsights","TimeSeriesInsightsReferenceDataSet"],["Microsoft_Azure_StreamAnalytics","StreamAnalyticsJob"],["Microsoft_Azure_DocumentDB","DocumentDBDatabaseAccount"],["Microsoft_Azure_EMA","Workflow"],["Microsoft_Azure_MLWorkspaces","MachineLearningWorkspace"],["Microsoft_Azure_MLWebservices","MachineLearningWebService"],["Microsoft_Azure_MLCommitmentPlans","MachineLearningCommitmentPlan"],["Microsoft_Azure_MLTeamAccounts","MachineLearningExperimentationAccount"],["Microsoft_Azure_MLHostingAccounts","MachineLearningModelManagementAccount"],["Microsoft_Azure_EventHub","EventHub"],["Microsoft_Azure_EventHub","EventHubCluster"],["Microsoft_Azure_NotificationHubs","NotificationHub"],["Microsoft_Azure_NotificationHubs","Namespace"])},{id:"Integration",items:t(["Microsoft_Azure_EMA","Workflow"],["Microsoft_Azure_ServiceBus","ServiceBus"],["Microsoft_Azure_ApiManagement","Service"],["Microsoft_Azure_EventGrid","EventGrid"],["Microsoft_Azure_EventGrid","Topic"],["Microsoft_Azure_DataFactory","DataFactory"],["Microsoft_Azure_DataCatalog","CatalogResource"],["SqlAzureExtension","Database","v12.0,user,stretch"],["Microsoft_Azure_StorSimple","StorSimpleManager"],["Microsoft_Azure_Relay","Relay"],["Microsoft_Azure_EMA","IntegrationAccount"],["Microsoft_Azure_EMA","CustomConnector"],["Microsoft_Azure_Appliance","ArmAppliance"],["Microsoft_Azure_ApplianceDefinition","ApplianceDefinition"])},{id:"Identity",items:t(["Microsoft_AAD_IAM","AzureActiveDirectory"],["Microsoft_AAD_B2CAdmin","RootAsset"],["Microsoft_AAD_DomainServices","AADDomainService"],["Microsoft_Azure_InformationProtection","PrimaryDataClassGroup"],["Microsoft_AAD_IAM","GroupsManagement"],["Microsoft_AAD_IAM","UserManagement"],["Microsoft_Azure_ADHybridHealth","RootAsset"],["Microsoft_Azure_PIM","RootAsset"],["Microsoft_AAD_ProtectionCenter","RootAsset"],["Microsoft_AAD_IAM","Application"],["Microsoft_AAD_IAM","RegisteredApplication"],["Microsoft_AAD_ERM","RootAsset"])},{id:"Security",items:t(["Microsoft_Azure_Security","SecurityDashboard"],["Microsoft_Azure_KeyVault","KeyVault"],["Microsoft_Azure_Network","ApplicationGateway"],["Microsoft_Azure_InformationProtection","PrimaryDataClassGroup"],["Microsoft_Azure_Network","VirtualNetworkGateway"],["Microsoft_AAD_IAM","AzureActiveDirectory"])},{id:"DevOps",items:t(["AzureTfsExtension","Account"],["AzureTfsExtension","TeamProject"],["AzureTfsExtension","DevOpsProject"],["AppInsightsExtension","ApplicationInsights"],["Microsoft_Azure_DevTestLab","DevTestLab"],["Microsoft_Azure_ApiManagement","Service"])},{id:"Migrate",items:t(["Microsoft_Azure_Migrate","MigrationProject"],["Microsoft_Azure_RecoveryServices","RecoveryServicesResource"],["Microsoft_Azure_DMS","Dms"],["Microsoft_Azure_Billing","Billing"])},{id:"Management tools",items:t(["Microsoft_Azure_Expert","AzureAdvisor"],["Microsoft_Azure_RecoveryServices","RecoveryServicesResource"],["Microsoft_Azure_Billing","Billing"],["Microsoft_Azure_Policy","PolicyHub"],["Microsoft_Azure_Monitoring","AzureMonitoring"],["Microsoft_Azure_Monitoring","MonitoringEvents"],["Microsoft_Azure_Monitoring","AzureMonitoringMetrics"],["Microsoft_Azure_Monitoring","AzureMonitoringDiagnostics"],["Microsoft_Azure_Monitoring","AzureMonitoringAlerts"],["Microsoft_OperationsManagementSuite_Workspace","Workspace"],["Microsoft_OperationsManagementSuite_Workspace","Solution"],["Microsoft_Azure_Scheduler","JobCollection"],["Microsoft_Azure_Automation","Account"],["Microsoft_Azure_Network","NetworkWatcher"],["AppInsightsExtension","ApplicationInsights"],["Microsoft_Azure_Migrate","MigrationProject"],["Microsoft_Azure_RSMT","ComputerConnection"],["Microsoft_Azure_RSMT","Gateway"],["Microsoft_Azure_Billing","FreeServices"],["Microsoft_Azure_Resources","OperationLog"])},{id:"Intune",items:t(["Microsoft_Intune_DeviceSettings","Intune"],["Microsoft_Intune_Apps","IntuneAppProtectionLanding"],["Microsoft_Intune","Intune"],["Microsoft_Intune_Apps","BookMainMenuAsset"],["Microsoft_Intune_Apps","AppsMainMenu"],["Microsoft_Intune_Enrollment","OverviewBladeMenuAsset"],["Microsoft_Intune_Devices","DeviceEntryBladeAsset"],["Microsoft_Intune_DeviceSettings","ExtensionMenu"],["Microsoft_Intune_DeviceSettings","DeviceConfigMainMenuViewModelAsset"],["Microsoft_Intune_DeviceSettings","DeviceComplianceMainMenuViewModelAsset"],["Microsoft_Intune_DeviceSettings","ConnectorMenuAsset"],["Microsoft_Intune_DeviceSettings","ManageOnPremisesAccessAsset"],["Microsoft_Intune_DeviceSettings","RolesLandingMenuAsset"],["Microsoft_Intune_DeviceSettings","SoftwareUpdatesMenuAsset"],["Microsoft_Intune_DeviceSettings","TroubleshootBladeAsset"])},],search:[{id:"AccountPortal",icon:c.BillingHub(),link:"{accountPortal}subscriptions"},{id:"TemplateDeployment",icon:c.Module(),link:"#create/Microsoft.Template"},],resourceTypesExcludedFromBrowse:[{types:["microsoft.compute/virtualmachines/extensions","microsoft.insights/alertrules","microsoft.insights/autoscalesettings","microsoft.web/certificates",{resourceType:"microsoft.sql/servers/databases",kinds:{system:!0,"v2.0,system":!0,"v12.0,system":!0}},]},],mergedAssetTypes:[s(["Microsoft_Azure_Compute","VirtualMachine"],["Microsoft_Azure_Classic_Compute","VirtualMachine"]),s(["Microsoft_Azure_Storage","StorageAccount"],["MicrosoftAzureClassicStorageExtension","ClassicStorageAccount"]),s(["Microsoft_Azure_DataFactory","DataFactory"],["Microsoft_Azure_DataFactory","DataFactoryv2"]),].filter((function(n){return!!n}))})}var h=i.Base.Constants,e=h.AssetNames,o=h.ExtensionNames,c=i.Base.Images.Polychromatic,t=r.getAssetTypes,s=r.getMergedAssetType,f=o.Hubs,l=o.Marketplace,u=o.Websites;n.getCuration=a})(u||(u={})),u}));
define("MsPortalImpl/Widgets/Widgets.SharedOptionsInit",["require","exports","f","i","o","ko","FxHubs/RpcEndPoints","MsPortalImpl/Base/Base.EventTypes","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.Router","MsPortalImpl/Base/Telemetry","MsPortalImpl/Services/Services.SelectedSubscriptions"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";function ut(){k&&(clearTimeout(k),k=null)}function ft(n,t,i){var f,e,o,h;if(!y.isResourceManagerId(i,!0))return"";var r=y.parseResourceManagerDescriptor(i),c=t.filter((function(n){return y.compareSubscriptionId(n.subscriptionId,r.subscription)})).map((function(n){return n.uniqueDisplayName})).first(),u=[];if(u.push({name:c||r.subscription,type:s.Search.subscriptionsType}),r.resourceGroup&&(u.push({name:r.resourceGroup,type:s.Search.resourceGroupType}),f=r.resourceMap,y.isResourceId(i)&&f))for(e in f)o=n.getAssetTypeByResourceType(e),u.push({name:f[e],type:!o?e:o.compositeDisplayName.singular});return h=u.pop(),"{0}\n{1}\n\n{2}".format(h.name,h.type,u.map((function(n){return n.type+": "+n.name})).reverse().join("\n"))}function nt(){return!d?i.Azure.getAllSubscriptions().then((function(n){return d=n,n})):Q(d)}function et(n){nt().then((function(t){l.getSelectedSubscriptions().then((function(i){t=t||[];i=i||[];var r="",f=!1,u=!1;t.length>0&&(t.length===i.length?(r=s.Search.searchingAllSubs,u=!0):(r=s.Search.searchingSelectedSubsFmt.format(i.length,t.length),t.length>20?u=!0:f=!0));n.subscriptionSummary(r);n.showChangeSubscriptions(u);n.showAllSubscriptionsSearch(f)}))}))}function st(n,r,u){function st(n,t,r,u){ct({source:c.Source.TopBar,action:t,data:i.sanitizeMessage(n)});a.action=r;ht.route(u)}var ct=v.trace,lt=parseInt(i.getFeatureValue("search")),d=r.options,ht;et(d);l.selectedSubsUpdateTriggered.subscribe(n,(function(){d.showResults(!1);et(d)}));d.showMenu.subscribe(n,(function(n){ut();n?(!w||v.cancelTrace(w),a={version:it,correlationId:++rt,action:""},w=v.start({source:c.Source.Search,action:c.Action.SearchSession}),d.showResults()||d.filter.valueHasMutated()):(a.action||(a.action=d.showResults()?"AbandonedResult":"AbandonedRecent"),v.completeTrace(w,a),w=null,k=setTimeout((function(){d.filter("");d.results([]);ut()}),t.searchClearTimeInMillies))}));d.results.subscribe(n,(function(n){d.showExternalColumn(n.some((function(n){return n.results.some((function(n){return n.isExternal}))})))}));d.openSettingsPane=function(){r.element.trigger(o.default.fxsettingsbuttonclick);a.action="Settings"};d.searchAllSubscriptions=function(){l.setSelectedSubscriptions(null);d.filter.valueHasMutated()};d.openFeedbackPane=function(){u.getService("FeedbackPane").then((function(n){var t=n.widget;t.isVisible()||(a.action="Feedback",t.toggle({title:s.Search.feedbackTitle,action:c.Action.SearchFeedback},{correlationId:a.correlationId}))}))};ht=u.router;d.openAllResourcesBlade=function(n){st(n,c.Action.SearchAllResourcesExecuted,"AllResources","#blade/"+p+"/Resources/resourceType/Microsoft.Resources%2Fresources/filter/"+n)};d.openAllResourceGroupsBlade=function(n){st(n,c.Action.SearchResourceGroupsExecuted,"AllResourceGroups","#blade/"+p+"/Resources/resourceType/Microsoft.Resources%2Fsubscriptions%2FresourceGroups/filter/"+n)};d.openMarketplaceBlade=function(n){st(n,c.Action.SearchMarketplaceExecuted,"Marketplace","#blade/"+ot+"/GalleryFeaturedMenuItemBlade/selectedMenuItemId/home/searchQuery/"+n)};d.openRecentsBlade=function(){st("",c.Action.SearchAllRecentsExecuted,"AllRecents","#blade/"+p+"/Resources/resourceType/Microsoft.Resources%2Frecent")};d.openResultItemBlade=function(n,t,i){ct({source:c.Source.TopBar,action:c.Action.SearchResultOpened,data:{id:i.id,resultType:i.resultType,type:i.origAssetType,deepLink:i.deepLink}});d.showResults()?a.action="Result":(a.query="",a.action="Recent");var r="BrowseItem",u=i.id;y.isResourceId(u)?r="Resource":y.isResourceGroupId(u)?r="ResourceGroup":y.isSubscriptionId(u)&&(r="Subscription");a.item={id:u,displayName:i.origDisplayName||i.displayName,subName:i.origSubName||i.subName,resultType:r,assetType:i.origAssetType||i.typeName,position:t};i.isExternal?window.open(i.deepLink):ht.route(i.deepLink)};d.performSearch=function(n){n=(n||"").trim();a.query=n;a.queryCount=(a.queryCount||0)+1;var t=v.start({source:c.Source.TopBar,action:c.Action.SearchExecuted}),r={criteria:n,resultCount:lt};return nt().then((function(f){return e.Search.searchEndpoint.invoke(tt.client,p,r).then((function(r){v.completeTrace(t,{filter:i.sanitizeMessage(n),result:r.map((function(n){return(n.results||[]).length})).reduce((function(n,t){return n+t}),0)});var e=[];return r.forEach((function(n){var t=(n.results||[]).map((function(n){var i,e,t,l,o,c;if(n.details)if(n.detailsType===0)t=n.details,e=t.extensionName+g+t.assetType,l={name:t.extensionName},i=h.getAssetDeepLink(u.diContainer,l,t.assetType,t.assetId);else if(n.detailsType===1){var a=u.assetTypeService,r=n.details,v=a.getAssetType(r.extensionName,r.assetType);e=r.extensionName+g+r.assetType;v&&(i=a.getAssetTypeDeepLink(v))}else i=n.details;return o=n.isPreview?s.Search.previewLabelFmt.format(n.displayName):n.displayName,c=n.subName,{id:n.id,displayName:o,subName:c,subNameFmt:n.subNameFmt,resultType:n.resultType,typeName:n.typeName,icon:n.icon,toolTip:ft(u.assetTypeService,f,n.id),isExternal:n.detailsType===3,filteredSubName:n.filteredSubName,deepLink:i,detailsType:n.detailsType,origDisplayName:o,origSubName:c,origAssetType:e}})),r=t.length,i;i=r<=0?s.Search.zeroResults:s.Search.seeAllResults;e.push({displayName:n.displayName,results:t,totalResultsCount:n.totalResultsCount||0,moreResultsLinkText:i,moreLinkType:n.moreLinkType,moreLinkDetails:n.moreLinkDetails})})),e})).catch((function(n){v.cancelTrace(t,{error:n});throw n;}))}))};r.isDropdownInitialized().then((function(){f.computed(n,(function(){var t=d.filter(),n;t||(n=e.AssetTypes.getRecentResourcesEndPoint.invoke(tt.client,p,{limit:10}).then((function(n){return n.map((function(n){return nt().then((function(t){var i=n.assetTypeInformation,e=(n.resourceKind||i.defaultKind||"").toLowerCase(),r=i.kindMap&&i.kindMap[e],o=r&&r.icon||i.icon||b.Images.Polychromatic.ResourceDefault(),c=r&&r.singularDisplayName||i.compositeDisplayName&&i.compositeDisplayName.singular||i.resourceType,l={name:i.extensionName},f=n.assetTypeInformation.isPreview?s.Search.previewLabelFmt.format(n.name):n.name;return{id:n.resourceId,displayName:f,resultType:0,typeName:c,icon:o,toolTip:ft(u.assetTypeService,t,n.resourceId),deepLink:h.getAssetDeepLink(u.diContainer,l,i.assetType,n.resourceId),detailsType:0,origDisplayName:f,origAssetType:i.extensionName+g+i.assetType}}))}))})),n.then((function(n){return Q.allSettled(n).then((function(n){d.mruItems(n.filter((function(n){return n.state==="fulfilled"&&n.value})).slice(0,5).map((function(n){return n.value})))}))})))}))}))}function ht(n,t,i){var r=t.options;r.openFeedbackPane=function(){i.getService("FeedbackPane").then((function(n){var t=n.widget;t.isVisible()||t.toggle({title:s.SideBar.feedbackPaneTitle,action:c.Action.BrowseFeedback},{})}))}}u.defineProperty(t,"__esModule",{value:!0});var b=i.Base,v=b.Diagnostics.Telemetry,tt=r.Rpc,p=b.Constants.ExtensionNames.Hubs,ot=b.Constants.ExtensionNames.Marketplace,y=i.ViewModels.Services.ResourceTypes,d,g=".";t.searchClearTimeInMillies=3e5;var k,it=1,w,rt=0,a={version:it,correlationId:rt,action:""};t.initSearchWidgetOptions=st;t.initSideBarWidgetOptions=ht}));
define("_generated/Less/MsPortalImpl/Widgets/Widgets.SideBarFlyout.css",["require","exports","o","module"],(function(n,t,i,r){"use strict";i.defineProperty(t,"__esModule",{value:!0});window.fx.injectCss(r,'.fxs-sidebar-category-old-label,.fxs-sidebar-hint-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fxs-sidebar-category-label,.fxs-sidebar-category-old-label,.fxs-sidebar-flyout .fxs-sidebar-item .fxs-sidebar-matches-prefix{font-family:az_ea_font,"Segoe UI",wf_segoe-ui_semibold,"Segoe UI Semibold","Segoe WP Semibold","Segoe WP",Tahoma,Arial,sans-serif;font-weight:600}.fxs-sidebar-flyout{position:absolute;top:0;bottom:0;left:100%;width:400px}.fxs-sidebar-flyout .fxs-popup-feedback{text-align:right}.fxs-sidebar-flyout .fxs-popup-feedback .fxs-sidebar-feedback-link{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:35px;text-decoration:underline;margin:0 20px}.fxs-sidebar-flyout .fxs-popup-feedback .fxs-sidebar-feedback-link .fxs-sidebar-feedback-link-disabled{text-decoration:none}.fxs-sidebar-improvedflyout.fxs-sidebar-flyout{max-width:calc(100vw - 250px);min-width:475px;position:absolute;top:0;bottom:0;left:100%;box-shadow:5px 0 15px -2px rgba(0,0,0,.3)}.fxs-sidebar-hint-text{text-align:right;font-size:11px}.fxs-sidebar-hide{display:none!important}.fxs-sidebar-browse-flyout{height:100%}.fxs-sidebar-flyout-header{height:20px;margin:0 0 10px;text-align:right}.fxs-sidebar-category-old-label{font-size:10px;text-align:left;text-transform:uppercase;border-bottom-width:1px;border-bottom-style:solid;margin:25px 5px 0 20px!important}.fxs-sidebar-flyout-close{height:30px;width:30px;border:none;margin-bottom:20px!important;margin-top:0!important;transition:background .2s ease-out}.fxs-sidebar-flyout-close>svg{height:16px;width:16px;padding-top:3px;transition:fill .2s ease-out}.fxs-sidebar-flyout-close:hover{background:#ba141a;fill:#fff}.fxs-sidebar-possible-favorites{height:calc(100% - 135px);overflow-y:auto;overflow-x:hidden}.fxs-sidebar-possible-favorites .fxs-sidebar-label{width:auto;padding-right:10px}.fxs-sidebar-possible-favorites .fxs-sidebar-item-link{padding-left:20px;width:160px}.fxs-sidebar-improvedflyout .fxs-sidebar-possible-favorites{height:calc(100% - 95px);overflow-y:auto;overflow-x:hidden}.fxs-sidebar-category-label,.fxs-sidebar-flyout-link{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fxs-sidebar-improvedflyout .fxs-sidebar-possible-favorites .fxs-sidebar-label{width:auto;padding-right:5px}.fxs-sidebar-improvedflyout .fxs-sidebar-possible-favorites .fxs-sidebar-item-link{padding-left:10px;width:160px;max-height:70px}.fxs-sidebar-item-category{margin-bottom:20px}.fxs-sidebar-improvedflyout .fxs-sidebar-item-category{margin:25px 5px 0 20px}.fxs-sidebar-improvedflyout .fxs-sidebar-item-category:first-child{margin:0 5px 0 20px}.fxs-sidebar-flyout .fxs-sidebar-item{-webkit-align-items:flex-start;align-items:flex-start;min-height:35px;max-width:400px}.fxs-sidebar-flyout .fxs-sidebar-item .fxs-sidebar-item-content{display:-webkit-flex;display:flex;-webkit-flex:1 1 auto;flex:1 1 auto;-webkit-align-items:center;align-items:center;width:400px}.fxs-sidebar-flyout .fxs-sidebar-item .fxs-sidebar-item-content .fxs-sidebar-item-icon svg{opacity:.6}.fxs-sidebar-flyout .fxs-sidebar-item .fxs-sidebar-item-content .fxs-sidebar-item-icon.fxs-is-favorite svg,.fxs-sidebar-flyout .fxs-sidebar-item .fxs-sidebar-item-content.fxs-is-selected .fxs-sidebar-item-icon svg,.fxs-sidebar-flyout .fxs-sidebar-item .fxs-sidebar-item-content:hover .fxs-sidebar-item-icon svg{opacity:1}.fxs-sidebar-flyout .fxs-sidebar-item .fxs-sidebar-matches{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:10px;text-align:left;display:block}.fxs-sidebar-improvedflyout .fxs-sidebar-item{margin-right:40px}.fxs-sidebar-category-label-wrapper{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center}.fxs-sidebar-category-label-wrapper:hover{cursor:pointer}.fxs-sidebar-category-label-divider{-webkit-flex:1 1 auto;flex:1 1 auto;border-bottom-width:1px;border-bottom-style:solid;height:0;margin:0 5px}.fxs-sidebar-category-label{text-transform:uppercase;font-size:10px;text-align:left;padding-right:5px;-webkit-flex:0 0 auto!important;flex:0 0 auto!important}.fxs-sidebar-category-button{-webkit-flex:0 0 auto;flex:0 0 auto;height:25px!important;width:25px!important;border:0}.fxs-sidebar-category-button>svg{height:10;width:10}.fxs-sidebar-category-button-transform{transform:scale(-1,-1);background-color:rgba(255,255,255,.3)}.fxs-sidebar-category{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;-webkit-align-content:flex-end;align-content:flex-end;padding-bottom:25px}.fxs-sidebar-filter-input{width:100%;margin:5px 0 21px}.fxs-sidebar-improvedflyout .fxs-sidebar-filter-input{width:40%;min-width:185px;margin:0 15px;-webkit-flex:0 0 auto;flex:0 0 auto}.fxs-sidebar-filter-categories{margin:5px 0 0}.fxs-sidebar-dropdown-container{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:left;justify-content:left;margin-bottom:25px}.fxs-sidebar-dropdown{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center}.fxs-sidebar-dropdown-title{width:auto;margin:2px 0;font-size:12px}.fxs-sidebar-dropdown-button-container{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;margin-top:3px}.fxs-sidebar-dropdown-button{margin:4px 5px 0;padding:4px 5px;opacity:.7;border:none}.fxs-sidebar-dropdown-button-text{font-size:8px}.fxs-sidebar-dropdown-button-icon{height:8px;width:8px;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}.fxs-sidebar-dropdown-button-icon>svg{-webkit-flex:0 0 8px;flex:0 0 8px}.fxs-sidebar-dropdown-item a{display:-webkit-flex;display:flex}.fxs-sidebar-improvedflyout .fxs-sidebar-content{display:-webkit-flex;display:flex;height:50px;padding:10px 0 0 25px;-webkit-flex:1 1 auto;flex:1 1 auto;-webkit-flex-wrap:wrap;flex-wrap:wrap}.fxs-sidebar-flyout-title-text{font-size:18px;-webkit-flex:0 0 auto;flex:0 0 auto}.fxs-sidebar-improvedflyout .fxs-sidebar-dropdown-container{-webkit-flex:1 1 auto;flex:1 1 auto}.fxs-sidebar-flyout-link{font-size:12px;padding-right:10px;padding-left:10px}.fxs-sidebar-flyout-link:hover{text-decoration:underline}.fxs-sidebar-flyout-state{padding-right:10px;padding-left:5px;margin-left:auto;display:-webkit-flex;display:flex;-webkit-flex:0 1 auto;flex:0 1 auto;-webkit-flex-wrap:wrap;flex-wrap:wrap;align-self:center;margin-bottom:25px}.fxs-sidebar-flyout-noresults{margin:auto;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;flex-direction:column}.fxs-sidebar-flyout-noresultsicon{height:120px;width:120px;padding-top:100px;opacity:.4;align-self:center}.fxs-sidebar-flyout-noresultstext{text-align:center;font-size:15px;margin-top:12px}.fxs-sidebar-flyout-info{display:-webkit-flex;display:flex}.fxs-sidebar-flyout-actions{display:-webkit-flex;display:flex;-webkit-flex:0 0 auto;flex:0 0 auto}.fxs-sidebar-content-wrapper{display:-webkit-flex;display:flex;padding-bottom:20px}.fxs-sidebar-count-label{font-size:10px}.fxs-sidebar-flyout-searchview{margin-left:20px!important}@media all and (max-width:1010px){.fxs-sidebar-is-collapsed .fxs-sidebar-improvedflyout.fxs-sidebar-flyout{width:475px}}@media all and (max-width:1445px) and (min-width:1011px){.fxs-sidebar-is-collapsed .fxs-sidebar-improvedflyout.fxs-sidebar-flyout{width:calc(475px * 2)}}@media all and (max-width:1900px) and (min-width:1446px){.fxs-sidebar-is-collapsed .fxs-sidebar-improvedflyout.fxs-sidebar-flyout{width:calc(475px * 3)}}@media all and (min-width:1901px){.fxs-sidebar-is-collapsed .fxs-sidebar-improvedflyout.fxs-sidebar-flyout{width:calc(475px * 4)}}@media all and (max-width:1170px){.fxs-sidebar-improvedflyout.fxs-sidebar-flyout{width:475px}}@media all and (max-width:1612px) and (min-width:1172px){.fxs-sidebar-improvedflyout.fxs-sidebar-flyout{width:calc(475px * 2)}}@media all and (max-width:1980px) and (min-width:1613px){.fxs-sidebar-improvedflyout.fxs-sidebar-flyout{width:calc(475px * 3)}}@media all and (min-width:1981px){.fxs-sidebar-improvedflyout.fxs-sidebar-flyout{width:calc(475px * 4)}}')}));
define("_generated/Templates/WidgetsSideBarFlyoutAlphabeticalView",["require","exports"],(function(){"use strict";return function(){return' <ul data-bind="attr: { \'aria-label\': $root.data.text.listByNameAria}"> <!-- ko foreach: func._alphabeticalCategories --> <li class="fxs-sidebar-item-category" aria-level="1" data-bind="css: { \'fxs-sidebar-hide\': $data.isHidden() }"> <div tabindex="0" class="fxs-sidebar-category-label-wrapper fxs-portal-hover"> <span class="fxs-sidebar-category-label" data-bind="text: label, attr: { title: label }"><\/span> (<span class="fxs-sidebar-count-label" data-bind="text: count"><\/span>) <div class="fxs-sidebar-category-label-divider fxs-portal-border"><\/div> <button tabindex="-1" class="fxs-sidebar-category-button fxs-portal-svg" data-bind="image: $root.data.icons.caretUp"><\/button> <\/div> <ul class="fxs-sidebar-category"> <!-- ko template: { name: \'sidebarFlyoutList\', foreach: possibleFavorites } --> <!-- /ko --> <\/ul> <\/li> <!-- /ko --> <\/ul> '}}));
define("_generated/Templates/WidgetsSideBarFlyoutCategoryView",["require","exports"],(function(){"use strict";return function(){return'<ul data-bind="attr: { \'aria-label\': $root.data.text.listByCategoryAria}"> <!-- ko foreach: func._visibleCategories --> <li class="fxs-sidebar-item-category" aria-level="1" data-bind="css: { \'fxs-sidebar-hide\': $data.isFilteredOut() || $data.isHidden() }"> <div class="fxs-sidebar-category-old-label fxs-sidebar-label fxs-portal-border" data-bind="text: label, attr: { title: label }, css: { \'fxs-sidebar-hide\': $root.data.improvedFlyout }"><\/div> <div tabindex="0" class="fxs-sidebar-category-label-wrapper fxs-portal-hover" data-bind="css: { \'fxs-sidebar-hide\': !$root.data.improvedFlyout }"> <span class="fxs-sidebar-category-label fxs-sidebar-label" data-bind="text: label, attr: { title: label }"><\/span> (<span class="fxs-sidebar-count-label" data-bind="text: count"><\/span>) <div class="fxs-sidebar-category-label-divider fxs-portal-border"><\/div> <button tabindex="-1" class="fxs-sidebar-category-button fxs-portal-svg" data-bind="image: $root.data.icons.caretUp"><\/button> <\/div> <ul data-bind="css: { \'fxs-sidebar-category\': $root.data.improvedFlyout }"> <!-- ko template: { name: \'sidebarFlyoutList\', foreach: possibleFavorites } --> <!-- /ko --> <\/ul> <\/li> <!-- /ko --> <\/ul>'}}));
define("_generated/Templates/WidgetsSideBarFlyoutDropMenu",["require","exports"],(function(){"use strict";return function(){return'<div class="fx-dropmenu-dropdown"> <ul class="fx-dropmenu-list-system" role="presentation"> <!-- ko foreach: data.displayModes --> <li class="fxs-sidebar-dropdown-item fxs-portal-hover" role="presentation" data-bind="attr: { \'data-display-mode\': displayMode }"> <a href="" class="fxs-portal-text" role="menuitem" data-bind="attr: { title: title, id: displayMode, \'aria-label\': ariaLabel, tabindex: $index() ? \'-1\' : \'0\' }"> <div class="fxs-sidebar-dropdown-item-title fxs-portal-text" data-bind="text: title"><\/div> <\/a> <\/li> <!-- /ko --> <\/ul> <\/div>'}}));
define("_generated/Templates/WidgetsSideBarFlyoutDropMenuButton",["require","exports"],(function(){"use strict";return function(){return'<div class="fxs-sidebar-dropdown-title fxs-portal-text-primary" data-bind="text:data.displayModeTitle, attr: { title: data.displayModeTitle }"><\/div> <button type="button" tabindex="-1" class="fxs-sidebar-dropdown-button fxs-portal-svg"> <div class="fxs-sidebar-dropdown-button-container"> <div class="fxs-sidebar-dropdown-button-icon" data-bind="image: data.icons.caretDown"><\/div> <\/div> <\/button>'}}));
define("_generated/Templates/WidgetsSideBarFlyoutList",["require","exports"],(function(){"use strict";return function(){return'<li class="fxs-sidebar-item fxs-portal-hover" aria-level="2" data-bind="css: { \'fxs-sidebar-hide\': $data.isFilteredOut() || $data.isHidden() }, attr: { id: labelId, \'aria-describedby\': $data.isFavorite() ? \'isFavoriteDescriptionId toggleHintTextId\' : \'notFavoriteDescriptionId toggleHintTextId\' }"> <div class="fxs-sidebar-item-content"> <a tabindex="-1" class="fxs-sidebar-item-link fxs-portal-text" data-bind="attr: { href: uri}"> <div class="fxs-sidebar-icon fxs-portal-svg" data-bind="image: image"><\/div> <div class="fxs-sidebar-label"> <div data-bind="text: label, attr: { title: label }"><\/div> <!-- ko if: matches --> <div class="fxs-sidebar-matches"> <span class="fxs-sidebar-matches-prefix" data-bind="text: $root.data.matchesPrefix"><\/span> <span data-bind="text: matches, attr: { title: matches }"><\/span> <\/div> <!-- /ko --> <\/div> <!-- ko if: $data.isPreview --> <span class="fxc-preview" data-bind="text: $root.data.previewText, attr: { title: $root.data.previewText }"><\/span> <!-- /ko --> <!-- ko if: opensExternal --> <div class="fxs-sidebar-external"> <div class="fxs-fill-secondary" data-bind="image: $root.data.icons.hyperlink"><\/div> <\/div> <!-- /ko --> <\/a> <div class="fxs-sidebar-item-icon fxs-sidebar-star fxs-portal-svg" data-bind="image: $root.data.icons.star, css: {\'fxs-is-favorite\': isFavorite}"><\/div> <\/div> <\/li>'}}));
define("_generated/Templates/WidgetsSideBarFlyoutNameView",["require","exports"],(function(){"use strict";return function(){return' <ul class="fxs-sidebar-flyout-searchview" data-bind="attr: { \'aria-label\': $root.data.text.listByNameAria}, css: { \'fxs-sidebar-category\':  data.improvedFlyout }"> <!-- ko template: { name: \'sidebarFlyoutList\', foreach: data.possibleFavorites() } --> <!-- /ko --> <li class="fxs-sidebar-flyout-noresults" data-bind="visible: data.noResults()"> <div class="fxs-sidebar-flyout-noresultsicon msportalfx-svg-disabled" data-bind="image: data.icons.allServices"><\/div> <div class="fxs-sidebar-flyout-noresultstext msportalfx-font-semilight" data-bind="text: data.noResultsText"><\/div> <\/li> <\/ul>'}}));
define("MsPortalImpl/Widgets/Widgets.SideBarFlyout",["require","exports","f","a","ko","$","MsPortalImpl/Base/Base.EventTypes","MsPortalImpl/Interactions/Interactions.DismissHandler","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.KeyboardHelper","MsPortalImpl/Services/Services.GeneralSettings","MsPortalImpl/UI/Hubs/UI.FavoritesManager","MsPortalImpl/Base/Telemetry","MsPortalImpl/Widgets/Widgets.WidgetBase","_generated/Templates/WidgetsSideBarFlyoutList","_generated/Templates/WidgetsSideBarFlyoutCategoryView","_generated/Templates/WidgetsSideBarFlyoutNameView","_generated/Templates/WidgetsSideBarFlyoutAlphabeticalView","_generated/Templates/WidgetsSideBarFlyoutDropMenu","_generated/Templates/WidgetsSideBarFlyoutDropMenuButton","MsPortalImpl/Widgets/Widgets.DropMenu","MsPortalImpl/Widgets/Widgets.Common","MsPortalImpl/Base/JQueryHelper","MsPortalImpl/Interactions/Interactions.PortalReader","MsPortalImpl/Widgets/Widgets.Common","_generated/Less/MsPortalImpl/Widgets/Widgets.SideBarFlyout.css","MsPortalImpl/Widgets/Widgets.SharedOptionsInit","MsPortalImpl/Services/BrowseCuration/default"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt){"use strict";var ut;return (function(n){function gt(n,t,i){ur.trace({source:a.Source.SideBar,name:t,action:n,data:i})}function ni(n,t,i,r){gt(n,i,lr({view:t===0?"category":"name"},r||{}))}function bi(n,t,i,r,u){n.removeClass(et);(n.length===0||t.length===0)&&(t=i);var f=t.attr("id");r.attr(bt,f);u.attr(bt,f);t.addClass(et);t.get(0).scrollIntoView(!1)}function ti(n,t){var i=n.id,r=t.favorites,e=r().firstIndex((function(n){return n.id===i})),u,f,o;n.isFavorite()?e!==-1&&(n.isFavorite(!1),r.splice(e,1),u=vt.SideBarUnFavorite,f=t.remove):e===-1&&(n.isFavorite(!0),o=t.possibleFavorites().first((function(n){return n.id===i})),r.push(o),u=vt.SideBarFavorite,f=t.add);u&&gt(u,i,{totalFavorites:r().length});i&&f&&f(i)}function gr(n){return(dr.test(n)&&ki.test(n)||di.test(n))&&(n+=" "+n.replace(ki,"$1 ").replace(di,"")),n.toLowerCase()}function gi(n,t,r,u){t&&(t=t.trim().toLocaleLowerCase(),gr(t).split(" ").concat([t,t.replace(/\s/g,""),]).forEach((function(t){var f=n.get(t);f||(f=new i.Map,n.set(t,f));u&&f.has(r)||f.set(r,u||ii)})))}function nr(n,t){var i=0;return n.token<t.token?i=-1:n.token>t.token&&(i=1),i}function nu(n,t){n.forEach((function(n,i){t.has(i)||t.set(i,n)}))}function tu(n,t){for(var e={token:t,favorites:null},r=0,u=ct.length-1,i,f;r<=u;)if(i=u+r>>1,f=nr(e,ct[i]),f>0)r=i+1;else if(f<0)u=i-1;else return i;return r}function iu(n,t){var u,f,r;ct||(u=new i.Map,n.forEach((function(n){gi(u,n.label,n);var t=(n.keywords||"").split(",");t.forEach((function(t){gi(u,t,n,t)}))})),f=[],u.forEach((function(n,t){f.push({token:t,favorites:n})})),ct=f.stableSort(nr));r=new i.Map;t.toLocaleLowerCase().split(" ").every((function(n,t){if(!n)return!0;for(var e=tu(ct,n),u=new i.Map,f=e;ct[f]&&ct[f].token.startsWith(n);)nu(ct[f].favorites,u),f++;return u.size?(t?r.forEach((function(n,t){u.has(t)||r.delete(t)})):u.forEach((function(n,t){r.set(t,n)})),!!r.size):(r.clear(),!1)}));n.forEach((function(n){var i=r.get(n);n.isFilteredOut(t&&!i);n.matches(i===ii?"":i)}))}function ru(n,i){if(i.possibleFavorites().length){var r=!!n.length;i.isFiltered(r);iu(i.possibleFavorites(),n,r);it.read(t.listFiltered,0,"SideBarFlyout")}}function kt(n){var t=n.findByClassName(et);t.removeClass(et)}function tr(n,t){var u=n.find("."+ut+":not("+r+")").first(),i;u.addClass(et);i=u.attr("id");t.attr(bt,i);n.findByClassName(pt).attr(bt,i)}function ir(n,i){n.displayModeTitle(i===0?t.showByCategory:t.showByName)}var ri=i.Base,ur=ri.Diagnostics.Telemetry,at=ri.Images,fr=window,er=fr.fx.environment,ui=".fxs-sidebar-browse",or="fxs-sidebar-flyout-close",et="fxs-portal-selected",fi="fxs-trim-selected",ut="fxs-sidebar-item",sr=".fxs-sidebar-item a",ei="fxs-sidebar-filter-input",hr=".fxs-sidebar-flyout",oi="fxs-sidebar-flyout-is-hidden",si="fxs-sidebar-flyout-is-open",hi="fxs-sidebar-browse-shown",r=".fxs-sidebar-hide",cr="fxs-sidebar-feedback-link",pt="fxs-sidebar-possible-favorites",ci="fxs-sidebar-improvedflyout",st="fxs-sidebar-category-button-transform",yt="fxs-sidebar-item-category",ht="fxs-sidebar-category-label-wrapper",vt=a.Action,t=s.SideBar,lt=u.observable,wt=u.observableArray,lr=i.extend,li=38,ai=40,ot=e.default.click,ar=e.default.keyup,dt=e.default.keydown,vi=c.settings,bt="aria-activedescendant",yi="."+ei+",."+pt,vr={deferred:!0},ft=i.isFeatureEnabled("improvedFlyout"),pi='<input class="fxs-sidebar-filter-input fxs-input fxs-portal-border fxs-portal-background fxs-portal-text" role= "combobox" aria-describedby="filterInputDescriptionId" data-bind="attr: { placeholder: data.placeholder, title: data.text.filterInputDescription, \'aria-label\': data.text.search }, css: { \'fxs-sidebar-filter-categories\': data.showDisplayModePicker() }, valueUpdate: \'input\', value: data.filterInputValue" type= "text" />',wi='<div class="fxs-sidebar-dropdown-container" data-bind="css: { \'fxs-sidebar-hide\': !data.showDisplayModePicker() }" ><div class="fxs-sidebar-dropdown"> <\/div><\/div>',yr='<div class="fxs-sidebar-content-wrapper"><div class="fxs-sidebar-content"><div class="fxs-sidebar-flyout-info"><span class="fxs-sidebar-flyout-title-text" data-bind="attr: { title: data.moreServicesLabel }, text: data.moreServicesLabel"><\/span>'+pi+"<\/div>"+(""+wi)+'<div class="fxs-sidebar-flyout-actions"><div class="fxs-sidebar-flyout-state" data-bind="visible: data.templateToUse() !== \'showByName\'"><a href=\'#\' class="fxs-sidebar-flyout-collapse-all fxs-sidebar-flyout-link fxs-portal-text-primary" data-bind="attr: { title: data.text.flyoutCollapseAll }, text: data.text.flyoutCollapseAll"><\/a>|<a href=\'#\' class="fxs-sidebar-flyout-expand-all fxs-sidebar-flyout-link fxs-portal-text-primary" data-bind="attr: { title: data.text.flyoutExpandAll }, text: data.text.flyoutExpandAll"><\/a><\/div><\/div><\/div><button class="fxs-sidebar-flyout-close fxs-portal-svg-secondary" data-bind="image: data.icons.close, attr: { title: data.text.close }"><\/button><\/div><div class="fxs-sidebar-possible-favorites" data-bind="template: { name: data.templateToUse }"><\/div>',pr='<div class="fxs-sidebar-flyout-header"><button class="fxs-sidebar-flyout-close fxs-portal-svg-secondary" data-bind="image: data.icons.close, attr: { title: data.text.close }"><\/button><\/div><div class="fxs-sidebar-content"><div class="fxs-sidebar-hint-text" id="toggleHintTextId" data-bind="attr: { title: data.toggleShortcutHintText }, text: data.toggleShortcutHintText"> <\/div>'+pi+(""+wi)+'<\/div><div tabindex= "0" class="fxs-sidebar-possible-favorites" data-bind="template: { name: data.templateToUse }"><\/div><!-- ko if: data.feedbackLabel --><div class="fxs-popup-feedback fxs-portal-background-secondary"><a href=\'#\' class=\'fxs-sidebar-feedback-link fxs-portal-text-primary\' data-bind="text: data.feedbackLabel, attr: { title: data.feedbackLabel }"> <\/a><\/div><!-- /ko -->',wr=ft?""+yr:""+pr,br='<div class="fxs-sidebar-browse-flyout" aria-describedby="browseFlyoutDescriptionId" data-bind="attr: { \'aria-label\': data.text.flyoutAria }"><div class="fxs-hide-accessible-label" id= "browseFlyoutDescriptionId" data-bind="attr: { title: data.text.description, \'aria-hidden\': true }, text: data.text.description" /><div class="fxs-hide-accessible-label" id= "isFavoriteDescriptionId" data-bind="attr: { title: data.text.markedFavoriteDescription, \'aria-hidden\': true }, text: data.text.markedFavoriteDescription" /><div class="fxs-hide-accessible-label" id= "notFavoriteDescriptionId" data- bind="attr: { title: data.text.notFavoriteDescription, \'aria-hidden\': true }, text: data.text.notFavoriteDescription" /><div class="fxs-hide-accessible-label" id= "filterInputDescriptionId" data- bind="attr: { title: data.text.filterInputDescription, \'aria-hidden\': true }, text: data.text.filterInputDescription" />'+wr+"<\/div>",kr=(function(n){function r(){var r=n.call(this)||this;return r.isFlyoutOpen=lt(!1),r.text=t,r.isFiltered=lt(!1),r.possibleFavorites=wt(),r.visibleCategories=wt(),r.showDisplayModePicker=lt(!1),r.moreServicesLabel=i.isFeatureEnabled("brandingsidebar")?er.branding.browseLabel:t.allServices,r.previewText=t.preview,r.icons={hyperlink:at.Hyperlink(),star:at.Star({isLogo:!0}),caretUp:at.CaretUp(),caretDown:at.CaretDown(),close:at.Shell.Close(),allServices:at.AllServices()},r.placeholder=t.search,r.displayModeTitle=lt(),r.displayModes=wt(),r.filterInputValue=lt().extend({rateLimit:{timeout:300,method:"notifyWhenChangesStop"}}),r.feedbackLabel=lt(t.feedbackTitle),r.matchesPrefix=lt(t.keywords),r.toggleShortcutHintText=t.toggleShortcutHint,r.improvedFlyout=ft,r.noResultsText=t.noResultsText,r.noResults=u.observable(),r}return __extends(r,n),r.prototype.openExternal=function(n){window.open(n,"_blank")},r})(v.ViewModel),ct,ii,rr;n.ViewModel=kr;n.toggleFavorite=ti;var ki=/([a-z](?=[A-Z][^ ]))/g,di=/(\(|\)|:|_)/g,dr=/[a-zA-Z0-9]/gi;ii="__LABEL__";rr=(function(n){function e(r,e,o){var s=n.call(this,r,e)||this,tt,it,h,a,ut,v,ot,c,st,lt,et;s._alphabeticalCategories=wt();s._sidebarBrowse=i.memoize((function(){return s.element.closest(".fxs-sidebar-bar").find(ui)}));r.html(br);tt=r.findByClassName(pt);nt.registerKoTemplate("showByName",w());nt.registerKoTemplate("showByCategory",p());nt.registerKoTemplate("showByAlphabetical",b());nt.registerKoTemplate("sidebarFlyoutList",y());ft&&(r.addClass(ci),tt.addClass(ci));s._filterInput=r.findByClassName(ei);s._sideBarFlyoutElement=f(hr);s._browseLink=f(ui);s._feedbackLink=r.findByClassName(cr);it=i.getUniqueId();tt.attr({id:it,"aria-label":s._browseLink.attr("aria-label")});s._filterInput.attr("aria-owns",it);h=s.ltm;s._favoritesManager=o;s._bindingPromise=rt.waitForBindings(r[0]);l.connectDebouncedObservable(h,s._favoritesManager.possibleFavorites,s.options.possibleFavorites,!0);a=s._displayMode=vi.sideBarBrowseDisplayModeKey();a!==0&&a!==1&&(a=s._displayMode=0);ir(e,a);ni(vt.SideBarBrowseMenuViewInitialized,a);e.templateToUse=u.computed(h,(function(){var i=s.options.filterInputValue(),n="";return ft?i?n="showByName":e.displayModeTitle()===t.showByName?n="showByAlphabetical":e.displayModeTitle()===t.showByCategory&&(n="showByCategory"):n=e.displayModeTitle()===t.showByName||i?"showByName":"showByCategory",n}));ut=e.isFiltered;v=function(){var n=s._favoritesManager.showCategories()&&!ut(),t;e.showDisplayModePicker(n);n=n&&s._displayMode!==1;t=s._filterInput;t.focus();kt(s.element);s.options.visibleCategories().forEach((function(t){t.isFilteredOut(!n)}));s._initiateSelection(!0)};s._favoritesManager.showCategories.subscribe(h,v);ut.subscribeAndRun(h,v);ot="fxs-sidebar-dropdown";c=new g.ViewModel(d(),k(),"a");c.setItemFocusWhenOpen=!0;c.alignMenu=0;st=r.findByClassName(ot);s.ltm.registerForDispose(new g.Widget(st,c));e.displayModes([{displayMode:0,title:t.showByCategory,ariaLabel:t.sortItemShowByCategoryAria},{displayMode:1,title:t.showByName,ariaLabel:t.sortItemShowByNameAria},]);c.buttonLabel(e.displayModeTitle()===t.showByName?t.sortSelectionShowByNameAria:t.sortSelectionShowByCategoryAria);s._dropMenuHandler=function(n){n.preventDefault();n.stopPropagation();var r=f(n.target),u=r.closest("[data-display-mode]").data("displayMode"),i=s._displayMode=u;ir(s.options,i);c.buttonLabel(e.displayModeTitle()===t.showByName?t.sortSelectionShowByNameAria:t.sortSelectionShowByCategoryAria);v();c.close();vi.sideBarBrowseDisplayModeKey(i);ni(vt.SideBarBrowseMenuViewChanged,i)};s._attachEventHandlers();var ht=e.visibleCategories,at=i.thunkArray(h,ht),ct=at.map(h,(function(n,t){var r=i.clone(t);return r.possibleFavorites=t.possibleFavorites.filter(n,(function(n){return!t.isHidden()&&!n.isHidden()})),r}));return ct.extend(vr),lt=i.thunkArray(h,ct),s._visibleCategories=lt.filter(h,(function(n){return!n.isHidden()})),o.initializeCategories().then((function(){u.reactor(s.ltm,(function(){ht(s._favoritesManager.categories());ft&&s.options.possibleFavorites().forEach((function(n){var i=n.label[0],t=s._alphabeticalCategories().first((function(n){return n&&n.id===i})),r,f;t||n.isHidden()?(r=t&&t.possibleFavorites().first((function(t){return t&&t.id===n.id})),!r&&t&&(f=t.count(),t.possibleFavorites.push(n),n.isHidden()||t.count(++f))):(t={id:i,label:i,isHidden:u.pureComputed((function(){return!t.possibleFavorites().some((function(n){return!n.isHidden()&&!n.isFilteredOut()}))})),possibleFavorites:u.observableArray([n]),count:u.observable(1)},s._alphabeticalCategories.push(t))}));s._initiateSelection(!0)}))})).finally((function(){s._bindDescendants()})),et=function(n,t){return n===t||f.contains(n,t)},s._dismissHandle={dismissFn:function(){s.toggle(!1)},shouldDismissOnMouseDownFn:function(n){return[s.element[0],s._sidebarBrowse()[0]].some((function(t){return et(t,n)}))?0:2},shouldDismissOnMouseWheelFn:function(n){return et(s.element[0],n)?0:2},restoreFocus:function(){s._sidebarBrowse().focus()},logName:"sideBarFlyout"},s}return __extends(e,n),e.prototype.dispose=function(){n.prototype.dispose.call(this);this._cleanElement();var t=this._dismissHandle;t&&o.unregister(t);this._dismissHandle=null;this._sidebarBrowse.clear()},e.prototype.showFlyout=function(){var n=this._sideBarFlyoutElement,t=this._filterInput;n.addClass(si);n.removeClass(oi);this._browseLink.addClass(fi).attr("aria-expanded","true");n.addClass(hi);t.focus();this.options.isFlyoutOpen(!0);this._initiateSelection();gt(vt.SideBarBrowseMenuOpened);o.register(this._dismissHandle)},e.prototype.hideFlyout=function(){var n=this._sideBarFlyoutElement,t;n.removeClass(hi);this._browseLink.removeClass(fi).attr("aria-expanded","false");n.removeClass(si);n.addClass(oi);t=this.options;t.filterInputValue("");t.isFlyoutOpen(!1);kt(this.element);o.unregister(this._dismissHandle)},e.prototype.toggle=function(n){var t=this;n?this._bindingPromise.then((function(){t.showFlyout()})):this.hideFlyout()},e.prototype._initiateSelection=function(n){var t=this.element,i=this._filterInput,r=ft&&this.options.templateToUse()!=="showByName";n?this._bindingPromise.then((function(){tr(t,i,r)})):tr(t,i,r)},e.prototype._attachEventHandlers=function(){var n=this,i=this._filterInput,t=this.element,e=h.getModifierKeys;this.ltm.registerForDispose(this.element.setEvents([ot,"."+or,function(t){n.toggle(!1);var i=n._dismissHandle;i&&i.restoreFocus();t.stopPropagation();t.preventDefault()},],[ot+" "+dt,".fxs-sidebar-category-label-wrapper",function(n){if(n.type===ot||n.type===dt&&n.keyCode===13||n.keyCode===32){var i=f(n.currentTarget),r=i.parent().find(".fxs-sidebar-category"),t=i.findByClassName("fxs-sidebar-category-button");return t.hasClass(st)?(t.removeClass(st),tt.unhide(r)):(t.addClass(st),tt.hide(r)),n.stopPropagation(),n.preventDefault(),!1}},],[ot,".fxs-sidebar-flyout-collapse-all",function(t){return n.element.findByClassName("fxs-sidebar-category-button").toArray().forEach((function(n){f(n).addClass(st)})),n.element.findByClassName("fxs-sidebar-category").toArray().forEach((function(n){tt.hide(f(n))})),t.stopPropagation(),t.preventDefault(),!1},],[ot,".fxs-sidebar-flyout-expand-all",function(t){return n.element.findByClassName("fxs-sidebar-category-button").toArray().forEach((function(n){f(n).removeClass(st)})),n.element.findByClassName("fxs-sidebar-category").toArray().forEach((function(n){tt.unhide(f(n))})),t.stopPropagation(),t.preventDefault(),!1},],[ot,".fxs-sidebar-dropdown-item",this._dropMenuHandler,],[ot,".fxs-sidebar-item-icon",function(r){var o=u.dataFor(r.target),e=f(r.currentTarget);e.hasClass("fxs-sidebar-star")&&ti(o,n._favoritesManager);kt(t);e.closest("li").addClass(et);i.focus()},],[dt,yi,function(i){var c=e(i),r=t.findByClassName(et),o,h,s;if(r.length>0&&(o=u.dataFor(r[0])),(i.keyCode===li||i.keyCode===ai)&&i.preventDefault(),i.keyCode===32&&c===4)return ti(o,n._favoritesManager),i.stopPropagation(),!1;if(i.keyCode===13&&c===0){if(f(i.target).is("input")&&f(r[0]).hasClass(ht))return h=f(r[0]).parent().find(".fxs-sidebar-category"),s=f(r[0]).findByClassName("fxs-sidebar-category-button"),s.hasClass(st)?(s.removeClass(st),tt.unhide(h)):(s.addClass(st),tt.hide(h)),i.stopPropagation(),i.preventDefault(),!1;o&&(n.hideFlyout(),n.options.openFavorite(o));i.stopPropagation()}},],[ot,sr,function(t){var i=u.dataFor(t.target);n.hideFlyout();ni(vt.SideBarItemOpened,n._displayMode,i.id,{isFavorite:i.isFavorite()});n.options.openFavorite(i)&&(t.preventDefault(),t.stopPropagation())},],[ar,yi,function(u){var h;if(f(u.target).is("input")){var e=t.findByClassName(et),v=t.findByClassName(pt),y=ft&&n.options.templateToUse()!=="showByName",s=void 0,c=void 0,l=void 0,a=void 0,o=void 0;ft&&y?(c=t.findByClassName(yt).not(r),s=c.findByClassName(ut).not(r),h=e.hasClass(ht)&&(e.next().hasClass("fxs-display-none")?e.parent().next().findByClassName(ht):e.next().findByClassName(ut).not(r)),l=h?h.first():e.hasClass(yt)?e.findByClassName(ut).not(r):e.nextAll().not(r),a=!l.length&&(e.hasClass(yt)?e.siblings().not(r):e.parent().parent().nextAll().not(r).first())):(s=t.findByClassName(ut).not(r).first(),l=e.nextAll().not(r));switch(u.keyCode){case ai:ft&&y?(s=e.hasClass(yt)?c.first():c.findByClassName(ut).not(r).last(),o=a.length?a.findByClassName(ht).first():l.first()):(o=l.first(),o=o.length?o:e.parent().parent().next().findByClassName(ut).not(r).first());bi(e,o,s,i,v);u.stopPropagation();break;case li:ft?(h=e.hasClass(ht)&&(e.parent().prev().findByClassName(yt).hasClass("fxs-display-none")?e.parent().prev().findByClassName(ht):e.parent().prev().findByClassName(ut).not(r)),o=h?h.last():e[0]===s[0]?c.first().findByClassName(ht).first():e.prevAll().not(r).first(),o=o.length?o:e.parent().parent().findByClassName(ht).first()):(o=e[0]===s[0]?e.parent().parent().siblings().not(r).last().findByClassName(ut).not(r).last():e.prevAll().not(r).first(),o=o.length?o:e.parent().parent().prev().findByClassName(ut).not(r).last());bi(e,o,s,i,v);u.stopPropagation()}}},],[ot,".fxs-sidebar-feedback-link",function(t){t.preventDefault();n.options.openFeedbackPane()},]));u.computed(this.ltm,this.options.filterInputValue,(function(i){ru(i||"",n.options);tt.isVisible(n.element)&&n.options.noResults(n.element.find("."+ut+":not("+r+")").length===0);tt.isVisible(t.findByClassName(et))||(kt(n.element),n._initiateSelection())}))},e})(v.Widget);n.Widget=rr})(ut||(ut={})),ut}))