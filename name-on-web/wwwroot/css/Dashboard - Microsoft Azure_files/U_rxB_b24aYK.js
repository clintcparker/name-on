define("HubsExtension/ResourceMap/ViewModels/ResourceGroupMapBladeCommandViewModels",["require","exports","f","o","ko","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/ResourceMap/ResourceMapCommon","HubsExtension/ResourceMap/ViewModels/ResourceProviderHelpers"],(function(n,t,i,r,u,f,e,o){"use strict";var a,v;r.defineProperty(t,"__esModule",{value:!0});var y=i.Base,c=y.Images,s=i.ViewModels,l=s.Services.ResourceTypes,p={accepted:!0,deleting:!0,deleted:!0,failed:!0,movingresources:!0},h=(function(n){function t(t,i,r){var u=n.call(this,t)||this,f,o;return u._container=t,u._dataContext=r,u._container.selectable=s.OpenBladeCommand.createSelectableViewModel(null),u.enabled(!1),f=function(n){return l.compareResourceGroupId(n,u._resourceGroup)},o=e.registerResourceGroupDeleteWatcher({resourceGroupDeleteStarted:function(n){f(n)&&u.enabled(!1)},resourceGroupDeleteFailed:function(n){f(n)&&u._runPopulate()}}),u._container.registerForDispose({dispose:function(){e.unregisterResourceGroupDeleteWatcher(o)}}),u}return __extends(t,n),t.prototype._runPopulate=function(){var n=this,t,i;return this.enabled(!1),t=this._resourceGroup,i=f.makeResourceManagerTelemetry("ResourceGroupOpenBladeCommand"),e.ResourceGroupClient.getResourceGroupWithStrings(t,i).then((function(i){l.compareResourceGroupId(t,n._resourceGroup)&&(n._onSetResourceGroup(i,n._container.selectable),n.enabled(!p[(i.provisioningState||"").toLowerCase()]))}))},t.prototype._processResourceGroup=function(n){return this._resourceGroup=n,this._runPopulate()},t})(s.OpenBladeCommand);t.ResourceGroupOpenBladeCommand=h;a=(function(n){function t(t,i,r){var f=n.call(this,t,i,r)||this;return f.resourceGroup=u.observable(),f.icon(c.Delete()),f._onSetResourceGroup=function(n){f.resourceGroup(n.id);f._resourceGroupName=n.name},f}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=n.actionBarOutput,i;return t&&t.status===3&&(this._container.selectable.isSelected(!1),t.action===4&&(i=new o.ResourceGroupDeleteOperation(this.resourceGroup(),this._resourceGroupName),i.execute())),this._processResourceGroup(n.resourceGroup)},t})(h);t.OldDeleteResourceGroupCommandViewModel=a;v=(function(n){function t(t,i,r){var f=n.call(this,t,i,r)||this;return f.id=u.observable(),f.icon(c.Delete()),f._onSetResourceGroup=function(n){f.id(n.id)},f}return __extends(t,n),t.prototype.onInputsSet=function(n){return this._processResourceGroup(n.id)},t})(h);t.DeleteResourceGroupCommandViewModel=v}))