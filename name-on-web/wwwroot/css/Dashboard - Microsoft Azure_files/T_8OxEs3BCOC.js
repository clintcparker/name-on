define("WebsitesExtension/TypeScript/Common/Validation/AppInsightValidators",["require","exports","o","Websites/ClientResources/GeneralResources"],(function(n,t,i,r){"use strict";i.defineProperty(t,"__esModule",{value:!0});var u=(function(){function n(){this._maxLength=255;this._invalidCharsPattern=/[*;/?:@&=+$,<>#%\"{}|^'`\\\[\]]/g}return n.prototype.validate=function(n){var f=Q.defer(),t=!0,i="",u,e;return n.value.length>this._maxLength?(i=r.Ai.Validation.maxLength,t=!1):n.value.charAt(n.value.length-1)==="."?(i=r.Ai.Validation.endWithPeriod,t=!1):n.value.charAt(n.value.length-1)===" "||n.value.charAt(0)===" "?(i=r.Ai.Validation.spaceCharacter,t=!1):(u=n.value.match(this._invalidCharsPattern),u&&(e=u.unique().join("', '"),i=r.Ai.Validation.invalidCharacters.format(e),t=!1)),f.resolve({valid:t,message:i}),f.promise},n})();t.AppInsightValidator=u}));define("WebsitesExtension/TypeScript/Common/Validation/RedisValidators",["require","exports","f","o","WebsitesExtension/TypeScript/Helpers/ArmHelpers",
"Websites/ClientResources/GeneralResources","WebsitesExtension/TypeScript/ExtensionAssets/Constants"],(function(n,t,i,r,u,f,e){"use strict";r.defineProperty(t,"__esModule",{value:!0});var o=(function(){function n(){this._minLength=1;this._maxLength=63;this._hostNamePattern=/^[a-zA-Z0-9]((-|[a-zA-Z0-9])*[a-zA-Z0-9])?$/}return n.prototype.validate=function(n){if(n.value.length<this._minLength)return Q({valid:!1,message:f.Redis.Validation.length});if(n.value.length>this._maxLength)return Q({valid:!1,message:f.Redis.Validation.length});if(this._hostNamePattern.test(n.value)){if(n.value.indexOf("--")>-1)return Q({valid:!1,message:f.Redis.Validation.invalidCharacters})}else return Q({valid:!1,message:f.Redis.Validation.invalidCharacters});return this._validateName(n.subscriptionId,n.value)},n.prototype._validateName=function(n,t){var r=Q.defer(),o={name:t,type:e.ResourceTypes.RedisCacheProvider},s=u.getArmUri(e.Asset.checkNameAvailability.format(n,e.ResourceTypes.CacheProvider),e.Asset.redisApiVersion);
return i.Base.Net.ajax({uri:s,type:"POST",data:o,setAuthorizationHeader:!0,dataType:"text",cache:!1}).then((function(){r.resolve({valid:!0,message:""})}),(function(){r.resolve({valid:!1,message:f.notAvailable})})),r.promise},n})();t.RedisCacheNameValidator=o}));define("WebsitesExtension/TypeScript/Common/Validation/SiteValidators",["require","exports","o","WebsitesExtension/TypeScript/Helpers/ArmHelpers","Websites/ClientResources/GeneralResources","Websites/ClientResources/GeneralResources","WebsitesExtension/TypeScript/ExtensionAssets/Constants","WebsitesExtension/TypeScript/Utility/Utility.Website"],(function(n,t,i,r,u,f,e,o){"use strict";i.defineProperty(t,"__esModule",{value:!0});var s=(function(){function n(){}return n.prototype.validate=function(n){var t=this;return n.value.length<e.Validations.websiteNameMinLength?Q({valid:!1,message:f.websiteNameMinLength}):n.value.length>e.Validations.websiteNameMaxLength?Q({valid:!1,message:f.websiteNameMaxLength}):o.validateEntityName(n.value).then(
(function(i){return i.valid?n.skipNameUniquenessCheck?Q({valid:!0,message:""}):t._validateSiteName(n.subscriptionId,n.value,n.dnsSuffix):i}))},n.prototype._validateSiteName=function(n,t,i){var f=Q.defer(),o=null,c;i===e.DNSSuffix.AppPublicSuffix&&(o=this._validateSiteName(n,t,e.DNSSuffix.classicMobileSuffix));var s=t,l=e.Asset.resourceNameAvailableUriTemplate,h=!1;return!i||(s=""+t+i,h=!0),c={name:s,isFQDN:h,type:"Site"},r.callArm(l.format(n),"POST",JSON.stringify(c),e.Asset.AntaresApiVersion).then((function(n){var r=n&&n.nameAvailable;i===e.DNSSuffix.AppPublicSuffix&&r?o.then((function(n){f.resolve(n)})):f.resolve({valid:r,message:u.websiteNameInvalid.format(t)})})).catch((function(){f.resolve({valid:!1,message:u.websiteNameValidationFailed})})),f.promise},n})();t.SiteNameValidator=s}));define("WebsitesExtension/TypeScript/SiteCore/Create/SqlLocationResolver",["require","exports","o","WebsitesExtension/TypeScript/Helpers/ArmHelpers","WebsitesExtension/TypeScript/ExtensionAssets/Constants"],(function(
n,t,i,r,u){"use strict";i.defineProperty(t,"__esModule",{value:!0});var f=(function(){function n(n,t,i,r,u,f){this._subscriptionId=n;this._serverVersion=t;this._edition=i;this._sku=r;this._maxSize=u;this._maxSizeUnit=f;this._locations=null}return n.prototype.init=function(){var n=this;return r.callArm(u.Asset.locationsApi.format(this._subscriptionId,"Microsoft.Sql",u.Asset.SqlApiVersion)).then((function(t){var i,r;if(!t||!t.resourceTypes)return Q.reject("Failed to find locations!");if(i=t.resourceTypes.first((function(n){return n.resourceType==="servers"})),!i)return Q.reject("Failed to find resourceType!");for(r=0;r<i.locations.length;r++)i.locations[r]=i.locations[r].replace(/\s+/g,"").toLowerCase();n._locations=i.locations}))},n.prototype.getFilteredLocations=function(){for(var f,n=this,i=[],t=[],r=0;r<this._locations.length;r++)f=u.Asset.sqlLocationCapabilities.format(this._subscriptionId,this._locations[r],u.Asset.SqlApiVersion),t.push({httpMethod:"GET",relativeUrl:f}),t.length===u.ArmHelper.
MaxRequestsInBatch&&(i.push(this._callBatch(t)),t=[]);return t.length>0&&i.push(this._callBatch(t)),Q.all(i).then((function(t){var i=[];return t.forEach((function(t){t.responses.forEach((function(t){if(t.httpStatusCode===200){var r=void 0,u=void 0,f=void 0,e=void 0;t.content&&t.content.supportedServerVersions&&(r=n._getSupportedValue(n._serverVersion,t.content.supportedServerVersions));r&&(u=n._getSupportedValue(n._edition,r.supportedEditions));u&&(f=n._getSupportedValue(n._sku,u.supportedServiceLevelObjectives));f&&(e=f.supportedMaxSizes.first((function(t){return t.limit===n._maxSize&&t.unit===n._maxSizeUnit&&n._isAvailable(t.status)})));e&&i.push(t.content.name.replace(/\s+/g,"").toLowerCase())}}))})),i}))},n.prototype._callBatch=function(n){var t=JSON.stringify({requests:n});return r.callArmJhr("/batch","POST",t,u.Asset.ArmApiVersion)},n.prototype._isAvailable=function(n){return n==="Available"||n==="Default"},n.prototype._getSupportedValue=function(n,t){var i=this;if(t)return t.first((function(
t){return t.name===n&&i._isAvailable(t.status)}))},n})();t.SqlLocationResolver=f}));var __extends=this&&this.__extends||(function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}})();define("WebsitesExtension/TypeScript/SiteCore/Create/ViewModels/CreateSiteCoreBlade",["require","exports","f","o","ko","WebsitesExtension/TypeScript/ExtensionAssets/Constants","Websites/ClientResources/GeneralResources","Websites/ClientResources/CreateResources","WebsitesExtension/TypeScript/_generated/ExtensionDefinition","WebsitesExtension/TypeScript/Utility/Utility.Website","WebsitesExtension/TypeScript/Common/Telemetry","WebsitesExtension/TypeScript/Common/Validation/SiteValidators","WebsitesExtension/TypeScript/Common/Validation/SearchValidators","WebsitesExtension/TypeScript/Common/Validation/ServerFarmValidators",
"WebsitesExtension/TypeScript/Common/Validation/SqlValidators","WebsitesExtension/TypeScript/Common/Validation/RedisValidators","WebsitesExtension/TypeScript/Common/Validation/AppInsightValidators","WebsitesExtension/TypeScript/NugetReferences/Legal","WebsitesExtension/TypeScript/SiteCore/Create/SqlLocationResolver","Fx/Controls/SubscriptionDropDown"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){"use strict";var nt=i.ViewModels.Forms,tt=i.Azure.ResourceGroups,it=i.Azure.ResourceManager,rt=i.Azure.Locations.DropDown,g;return (function(n){var t=(function(n){function t(t,r,e){var h=n.call(this,t)||this;return h._container=t,h._dataContext=e,h._providers=[f.ResourceTypes.WebProvider,f.ResourceTypes.SQLProvider,f.ResourceTypes.SearchProvider,f.ResourceTypes.CacheProvider,f.ResourceTypes.InsightsProvider],h._availableSqlLocations=u.observable(null),h._nameFormat="{0}-{1}-{2}",h._nameSalt="",h._cmPlanSuffix="cm-hp",h._cdPlanSuffix="cd-hp",h._cmAppSuffix="cm",h._cdAppSuffix="cd",h._sqlServerSuffix=
"sql",h._sqlWebServerSuffix="web-sql",h._sqlCoreDbSuffix="core-db",h._sqlMasterDbSuffix="master-db",h._sqlWebDbSuffix="web-db",h._searchSuffix="as",h._redisSuffix="redis",h._aiSuffix="ai",h._telemetry=new c.Telemetry(s.BladeNames.createSiteCoreBlade),h.title=u.observable(o.Sitecore.bladeTitle),h.subtitle=u.observable(""),h.actionBar=new i.ViewModels.ActionBars.CreateActionBar.ViewModel(t),h.valid.subscribe(t,h.actionBar.valid),h._subscriptionId=u.observable(""),h._galleryItem=u.observable(),h.parameterProvider=new i.ViewModels.ParameterProvider(t,{mapIncomingDataForEditScopeAsync:h._mapIncomingDataForEditScopeAsync.bind(h),mapOutgoingDataForCollector:h._mapOutgoingDataForCollector.bind(h)}),h.editScope=h.parameterProvider.editScope,h.armProvisioner=new it.Provisioner(t,r,{supplyTemplateDeploymentOptions:h._supplyProvisioningPromise.bind(h),actionBar:h.actionBar,parameterProvider:h.parameterProvider,createFeatures:32}),h._initForm(t),h}return __extends(t,n),t.prototype._getName=function(
n,t){return t?"{0}-{1}-{2}".format(n,this._nameSalt,t):"{0}-{1}".format(n,this._nameSalt)},t.prototype._getValidation=function(n,t){return n.validate(t).then((function(n){return n.message=e.Sitecore.Validation.invalid,n}))},t.prototype._initForm=function(n){var t=this,s=new l.SiteNameValidator,ut=new a.SearchNameValidator,h=new v.ServerFarmNameValidator,ft=new y.SqlServerNameValidator,r=new y.SqlDatabaseNameValidator,et=new p.RedisCacheNameValidator,ot=new w.AppInsightValidator,c,g,it;this.nameTextBox=new i.ViewModels.Forms.TextBox.ViewModel(n,this,"name",{label:u.observable(o.appName),validations:u.observableArray([new i.ViewModels.RequiredValidation(e.validationRequired),new i.ViewModels.CustomValidation("",function(n){return Q(t._getValidation(s,{value:t._getName(n,t._cmAppSuffix),subscriptionId:t.subscriptionDropDown.value().subscriptionId}))}),new i.ViewModels.CustomValidation("",function(n){return Q(t._getValidation(s,{value:t._getName(n,t._cdAppSuffix),subscriptionId:t.subscriptionDropDown.
value().subscriptionId}))}),new i.ViewModels.CustomValidation("",function(n){return Q(t._getValidation(h,{value:t._getName(n,t._cmPlanSuffix)}))}),new i.ViewModels.CustomValidation("",function(n){return Q(t._getValidation(h,{value:t._getName(n,t._cdPlanSuffix)}))}),new i.ViewModels.CustomValidation("",function(n){return Q(t._getValidation(ft,{value:t._getName(n,t._sqlServerSuffix),sqlData:t._dataContext.sql,subscriptionId:t.subscriptionDropDown.value().subscriptionId}))}),new i.ViewModels.CustomValidation("",function(n){return Q(t._getValidation(r,{value:t._getName(n,t._sqlCoreDbSuffix)}))}),new i.ViewModels.CustomValidation("",function(n){return Q(t._getValidation(r,{value:t._getName(n,t._sqlMasterDbSuffix)}))}),new i.ViewModels.CustomValidation("",function(n){return Q(t._getValidation(r,{value:t._getName(n,t._sqlWebDbSuffix)}))}),new i.ViewModels.CustomValidation("",function(n){return Q(t._getValidation(ut,{value:t._getName(n,t._searchSuffix)}))}),new i.ViewModels.CustomValidation("",
function(n){return Q(t._getValidation(et,{value:t._getName(n,t._redisSuffix),subscriptionId:t.subscriptionDropDown.value().subscriptionId}))}),new i.ViewModels.CustomValidation("",function(n){return Q(t._getValidation(ot,{value:t._getName(n,t._aiSuffix),subscriptionId:t.subscriptionDropDown.value().subscriptionId}))})])});this.nameTextBox.delayValidationTimeout(f.Validations.validationTimeout);this.nameTextBox.valueUpdateTrigger=4;this.subscriptionDropDown=d.create(n,{initialSubscriptionId:u.observableArray(),validations:u.observableArray([new i.ViewModels.RequiredValidation(e.validationRequired)]),resourceProviders:u.observableArray(this._providers),filterByGalleryItem:this._galleryItem});c={options:u.observableArray([]),form:this,accessor:this.createEditScopeAccessor((function(n){return n.resourceGroup})),label:u.observable(e.rGLabel),subscriptionIdObservable:u.pureComputed((function(){var n=t.subscriptionDropDown.value();return n&&n.subscriptionId})),validations:u.observableArray([new i.
ViewModels.RequiredValidation(e.validationRequired)])};this.resourceGroupDropdown=new tt.DropDown(n,c);g={options:u.observableArray([]),form:this,accessor:this.createEditScopeAccessor((function(n){return n.location})),subscriptionIdObservable:this._subscriptionId,resourceTypesObservable:u.observable([f.ResourceTypes.AppResourceType,f.ResourceTypes.SQLServerProvider,f.ResourceTypes.SearchServiceProvider,f.ResourceTypes.RedisCacheProvider]),validations:u.observableArray([new i.ViewModels.RequiredValidation(e.validationRequired)]),filter:this._availableSqlLocations};this.locationsDropDown=new rt(this._container,g);this.sqlSelector=new i.ViewModels.Forms.Selector.ViewModel(this._container,this,"sql",{label:u.observable(o.sqlDatabase),displayText:u.pureComputed((function(){return t.dataModel&&t.dataModel.sql()?o.Sitecore.configured:null})),validations:u.observableArray([new i.ViewModels.RequiredValidation(e.validationRequired),])});this.sqlCollector=new i.ViewModels.ParameterCollector(this._container,
{supplyInitialData:function(){return t.dataModel.sql()?t.dataModel.sql():{username:u.observable(""),password:u.observable(""),confirmPassword:u.observable("")}},supplyProviderConfig:function(){return{}},receiveResult:function(n){t.dataModel.sql(n)},selectable:this.sqlSelector.selectable});this.siteCoreSettingsSelector=new i.ViewModels.Forms.Selector.ViewModel(this._container,this,"siteCoreSettings",{label:u.observable(o.Sitecore.settings),displayText:u.pureComputed((function(){return t.dataModel&&t.dataModel.siteCoreSettings()?o.Sitecore.configured:null})),validations:u.observableArray([new i.ViewModels.RequiredValidation(e.validationRequired),])});this.siteCoreSettingsCollector=new i.ViewModels.ParameterCollector(this._container,{supplyInitialData:function(){return t.dataModel.siteCoreSettings()?t.dataModel.siteCoreSettings():{license:u.observable(""),password:u.observable(""),confirmPassword:u.observable("")}},supplyProviderConfig:function(){return{}},receiveResult:function(n){t.dataModel.
siteCoreSettings(n)},selectable:this.siteCoreSettingsSelector.selectable});this.legalTermsSelector=new b.Selector(n,this,"legalTermsAccepted",{legalTermsConfig:u.pureComputed((function(){var n=t.armProvisioner.armProvisioningConfig&&t.armProvisioner.armProvisioningConfig.galleryCreateOptions;return t.dataModel&&t.dataModel.location()&&t.dataModel.name()&&t.dataModel.resourceGroup().value.name&&t.dataModel.siteCoreSettings()&&t.dataModel.sql()&&t._subscriptionId()?{legalTermsLanguage:b.LegalTermsLanguageEnum.TemplateWithProducts,subscriptionId:t._subscriptionId(),galleryItem:n&&n.galleryItem,firstPartyPurchases:t._getFirstPartySpecs()}:null}))});it={children:u.observableArray([this.nameTextBox,this.subscriptionDropDown,this.resourceGroupDropdown.control,this.locationsDropDown.control,this.sqlSelector,this.siteCoreSettingsSelector,this.legalTermsSelector.control])};this.staticSection=new nt.Section.ViewModel(n,it);this.sections([this.staticSection]);this.subscriptionDropDown.value.subscribe(
n,(function(n){t._subscriptionId()&&t.nameTextBox.triggerValidation();t._subscriptionId(n.subscriptionId);var r=new k.SqlLocationResolver(t._subscriptionId(),"12.0","Standard","S1",10,"Gigabytes");Q(r.init()).then((function(){return r.getFilteredLocations()})).then((function(n){t._availableSqlLocations({allowedLocations:{locationNames:n,disabledMessage:o.Sitecore.locationNotAvailableForSql}})})).catch((function(n){i.Base.Diagnostics.Log.writeEntry(2,"CreateSiteCoreBlade","Failed to filter locations for SQL Server 12: "+JSON.stringify(n))}))}))},t.prototype._getFirstPartySpecs=function(){return[{quantity:2,displayName:o.Billing.aspStandardFormat.format("S1"),hourlyCost:{resourceId:"y8fx4nayq13i4wrk59xwj8ccnxywsaq6h8ax4nayrti71j3x5pdwtc7y4imyqeyy6a",quantity:1}},{quantity:3,displayName:o.Billing.sqlDbStandardFormat.format("S1"),hourlyCost:{resourceId:"y8fx4nay6q7hcibmgjswbbytnyphjqkr8max4nayrti71j3x5pdwtc7y4imyqeyy6a",quantity:.04}},{quantity:1,displayName:o.Billing.azureSearchStandardFormat.format(
"S1"),hourlyCost:{resourceId:"y8fx4nayfbw14ojkczsrjn7548xkcwizw5ax4nayrti71j3x5pdwtc7y4imyqeyy6a",quantity:1}},{quantity:1,displayName:o.Billing.redisCacheBasicFormat.format("C0"),hourlyCost:{resourceId:"y8fx4nayai6tbt73epbr5g7enajwmkmswxax4nayrti71j3x5pdwtc7y4imyqeyy6a",quantity:1}}]},t.prototype._mapIncomingDataForEditScopeAsync=function(){var n=Q.defer(),r=this.parameterProvider.configFromCollector(),i=this.armProvisioner.armProvisioningConfig&&this.armProvisioner.armProvisioningConfig.galleryCreateOptions,t;return this._galleryItem(i.galleryItem),this._nameSalt=h.Guid.newTinyGuid(),t={name:u.observable(""),subscription:u.observable(null),resourceGroup:u.observable(null),location:u.observable(""),sql:u.observable(null),mongoDb:u.observable(null),siteCoreSettings:u.observable(null),legalTerms:u.observable(null),legalTermsAccepted:u.observable(!1)},n.resolve(t),n.promise},t.prototype._mapOutgoingDataForCollector=function(n){return n},r.defineProperty(t.prototype,"dataModel",{get:function(
){return this.editScope()?this.editScope().root:null},enumerable:!0,configurable:!0}),t.prototype._supplyProvisioningPromise=function(n,t){var s;t===void 0&&(t=0);var i=Q.defer(),r,u=this.subscriptionDropDown.value().subscriptionId,e=this.resourceGroupDropdown.value().value.name,o="";return o=this.resourceGroupDropdown.value().createNew?this.locationsDropDown.value().name:this.resourceGroupDropdown.value().value.location,s=f.Asset.WebsiteResourceUriTemplate.format(u,e,this._getName(this.nameTextBox.value(),this._cmAppSuffix)),r={subscriptionId:u,resourceGroupName:e,resourceGroupLocation:o,parameters:this._getParameterValues(),deploymentName:"Sitecore-"+h.Guid.newShortGuid(),resourceProviders:this._providers,resourceId:s,templateJson:this._getTemplate()},i.resolve(r),i.promise},t.prototype._getParameterValues=function(){return{deploymentId:this._getName(this.dataModel.name()),"sqlserver.login":this.dataModel.sql().username(),"sqlserver.password":this.dataModel.sql().password(),"cm.msdeploy.packageurl":
"https://auxmktplceprod.blob.core.windows.net/packages/Sitecore%208.2%20rev.%20170407_xm_cm.scwdp.zip","cd.msdeploy.packageurl":"https://auxmktplceprod.blob.core.windows.net/packages/Sitecore%208.2%20rev.%20170407_xm_cd.scwdp.zip",location:this.dataModel.location().name,licenseXml:this.dataModel.siteCoreSettings().license(),"sitecore.admin.password":this.dataModel.siteCoreSettings().password()}},t.prototype._getTemplate=function(){return{$schema:"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",contentVersion:"1.0.0",variables:{webApiVersion:"2015-08-01",dbApiVersion:"2014-04-01-preview",searchApiVersion:"2015-02-28",searchPreviewApiVersion:"2015-02-28-preview",redisApiVersion:"2016-04-01",appInsightsApiVersion:"2014-08-01",cmHostingPlanNameTidy:"[toLower(trim(parameters('cm.hostingplan.name')))]",cdHostingPlanNameTidy:"[toLower(trim(parameters('cd.hostingplan.name')))]",cmWebAppNameTidy:"[toLower(trim(parameters('cm.webapp.name')))]",cdWebAppNameTidy:"[toLower(trim(parameters('cd.webapp.name')))]",
dbServerNameTidy:"[toLower(trim(parameters('sqlserver.name')))]",coreDbNameTidy:"[toLower(trim(parameters('core.sqldatabase.name')))]",webDbNameTidy:"[toLower(trim(parameters('web.sqldatabase.name')))]",webDbServerNameTidy:"[toLower(trim(parameters('web.sqlserver.name')))]",masterDbNameTidy:"[toLower(trim(parameters('master.sqldatabase.name')))]",searchServiceNameTidy:"[toLower(trim(parameters('searchservice.name')))]",redisCacheNameTidy:"[toLower(trim(parameters('rediscache.name')))]",appInsightsNameTidy:"[toLower(trim(parameters('applicationinsights.name')))]",licenseXml:"[parameters('licenseXml')]"},parameters:{deploymentId:{type:"string",defaultValue:"[resourceGroup().name]"},location:{type:"string",defaultValue:"[resourceGroup().location]"},"cm.hostingplan.name":{type:"string",defaultValue:"[concat(parameters('deploymentId'), '-cm-hp')]"},"cd.hostingplan.name":{type:"string",defaultValue:"[concat(parameters('deploymentId'), '-cd-hp')]"},"cm.webapp.name":{type:"string",defaultValue:
"[concat(parameters('deploymentId'), '-cm')]"},"cd.webapp.name":{type:"string",defaultValue:"[concat(parameters('deploymentId'), '-cd')]"},"cm.msdeploy.packageurl":{type:"securestring"},"cd.msdeploy.packageurl":{type:"securestring"},"sqlserver.name":{type:"string",defaultValue:"[concat(parameters('deploymentId'), '-sql')]"},"sqlserver.login":{type:"string",minLength:1},"sqlserver.password":{type:"securestring",minLength:8},"web.sqlserver.name":{type:"string",defaultValue:"[concat(parameters('deploymentId'), '-web-sql')]"},"web.sqlserver.login":{type:"string",minLength:1,defaultValue:"[parameters('sqlserver.login')]"},"web.sqlserver.password":{type:"securestring",minLength:8,defaultValue:"[parameters('sqlserver.password')]"},"core.sqldatabase.name":{type:"string",defaultValue:"[concat(parameters('deploymentId'), '-core-db')]"},"master.sqldatabase.name":{type:"string",defaultValue:"[concat(parameters('deploymentId'), '-master-db')]"},"web.sqldatabase.name":{type:"string",defaultValue:"[concat(parameters('deploymentId'), '-web-db')]"},
"cm.core.sqldatabase.username":{type:"string",minLength:1,defaultValue:"[concat('cm-core-', deployment().name, '-user')]"},"cm.core.sqldatabase.password":{type:"securestring",minLength:8,defaultValue:"[concat(toUpper(uniqueString('cm-core')), '@', uniqueString(parameters('sqlserver.password')))]"},"cm.master.sqldatabase.username":{type:"string",minLength:1,defaultValue:"[concat('cm-master-', deployment().name, '-user')]"},"cm.master.sqldatabase.password":{type:"securestring",minLength:8,defaultValue:"[concat(toUpper(uniqueString('cm-master')), '@', uniqueString(parameters('sqlserver.password')))]"},"cm.web.sqldatabase.username":{type:"string",minLength:1,defaultValue:"[concat('cm-web-', deployment().name, '-user')]"},"cm.web.sqldatabase.password":{type:"securestring",minLength:8,defaultValue:"[concat(toUpper(uniqueString('cm-web')), '@', uniqueString(parameters('sqlserver.password')))]"},"cd.core.sqldatabase.username":{type:"string",minLength:1,defaultValue:"[concat('cd-core-', deployment().name, '-user')]"},
"cd.core.sqldatabase.password":{type:"securestring",minLength:8,defaultValue:"[concat(toUpper(uniqueString('cd-core')), '@', uniqueString(parameters('sqlserver.password')))]"},"cd.web.sqldatabase.username":{type:"string",minLength:1,defaultValue:"[concat('cd-web-', deployment().name, '-user')]"},"cd.web.sqldatabase.password":{type:"securestring",minLength:8,defaultValue:"[concat(toUpper(uniqueString('cd-web')), '@', uniqueString(parameters('sqlserver.password')))]"},"searchservice.name":{type:"string",defaultValue:"[concat(parameters('deploymentId'), '-as')]"},"rediscache.name":{type:"string",defaultValue:"[concat(parameters('deploymentId'), '-redis')]"},"applicationinsights.name":{type:"string",defaultValue:"[concat(parameters('deploymentId'), '-ai')]"},"applicationinsights.location":{type:"string",defaultValue:"East US",allowedValues:["East US","South Central US","North Europe","West Europe"]},"cm.hostingplan.skuname":{type:"string",defaultValue:"B2"},"cm.hostingplan.skucapacity":{type:
"int",defaultValue:1},"cd.hostingplan.skuname":{type:"string",defaultValue:"B2"},"cd.hostingplan.skucapacity":{type:"int",defaultValue:1},"searchservice.skuname":{type:"string",defaultValue:"Standard"},"sqlserver.version":{type:"string",defaultValue:"12.0"},"sqldatabase.collation":{type:"string",defaultValue:"SQL_Latin1_General_CP1_CI_AS"},"sqldatabase.edition":{type:"string",defaultValue:"Standard"},"sqldatabase.maxsize":{type:"string",defaultValue:"268435456000"},"sqldatabase.serviceobjectivelevel":{type:"string",defaultValue:"S1"},"searchservice.replicacount":{type:"int",defaultValue:1},"searchservice.partitioncount":{type:"int",defaultValue:1},"rediscache.skuname":{type:"string",defaultValue:"Standard"},"rediscache.skufamily":{type:"string",defaultValue:"C"},"rediscache.skucapacity":{type:"string",defaultValue:"1"},sitecoreTags:{type:"object",defaultValue:{provider:"b51535c2-ab3e-4a68-95f8-e2e3c9a19299"}},licenseXml:{type:"securestring"},"security.clientIp":{type:"string",defaultValue:
"0.0.0.0"},"security.clientIpMask":{type:"string",defaultValue:"0.0.0.0"},"sitecore.admin.password":{type:"securestring",minLength:8,maxLength:128},sitecoreSKU:{type:"string",defaultValue:"xM1",allowedValues:["xM1","xM2","xM3","xM4","xM5"],metadata:{description:"Sitecore SKU controls the sizes and service levels of the provisioned resources"}},skuMap:{type:"secureObject",defaultValue:{xM1:{CmHostingPlan:{SkuName:"[parameters('cm.hostingplan.skuname')]",SkuCapacity:"[parameters('cm.hostingplan.skucapacity')]"},CdHostingPlan:{SkuName:"[parameters('cd.hostingplan.skuname')]",SkuCapacity:"[parameters('cd.hostingplan.skucapacity')]"},CoreSqlDatabase:{Edition:"[parameters('sqldatabase.edition')]",MaxSize:"[parameters('sqldatabase.maxsize')]",ServiceObjectiveLevel:"[parameters('sqldatabase.serviceobjectivelevel')]"},MasterSqlDatabase:{Edition:"[parameters('sqldatabase.edition')]",MaxSize:"[parameters('sqldatabase.maxsize')]",ServiceObjectiveLevel:"[parameters('sqldatabase.serviceobjectivelevel')]"},
WebSqlDatabase:{Edition:"[parameters('sqldatabase.edition')]",MaxSize:"[parameters('sqldatabase.maxsize')]",ServiceObjectiveLevel:"[parameters('sqldatabase.serviceobjectivelevel')]"},Searchservice:{SkuName:"[parameters('searchservice.skuname')]",Partitions:"[parameters('searchservice.partitioncount')]",Replicas:"[parameters('searchservice.replicacount')]"},RedisCache:{SkuName:"[parameters('rediscache.skuname')]",SkuFamily:"[parameters('rediscache.skufamily')]",SkuCapacity:"[int(parameters('rediscache.skucapacity'))]"}},xM2:{CmHostingPlan:{SkuName:"B2",SkuCapacity:1},CdHostingPlan:{SkuName:"B2",SkuCapacity:2},CoreSqlDatabase:{Edition:"Standard",MaxSize:"268435456000",ServiceObjectiveLevel:"S1"},MasterSqlDatabase:{Edition:"Standard",MaxSize:"268435456000",ServiceObjectiveLevel:"S1"},WebSqlDatabase:{Edition:"Standard",MaxSize:"268435456000",ServiceObjectiveLevel:"S1"},Searchservice:{SkuName:"Standard",Partitions:1,Replicas:1},RedisCache:{SkuName:"Standard",SkuFamily:"C",SkuCapacity:1}},xM3:
{CmHostingPlan:{SkuName:"B2",SkuCapacity:1},CdHostingPlan:{SkuName:"B2",SkuCapacity:3},CoreSqlDatabase:{Edition:"Standard",MaxSize:"268435456000",ServiceObjectiveLevel:"S1"},MasterSqlDatabase:{Edition:"Standard",MaxSize:"268435456000",ServiceObjectiveLevel:"S1"},WebSqlDatabase:{Edition:"Standard",MaxSize:"268435456000",ServiceObjectiveLevel:"S1"},Searchservice:{SkuName:"Standard",Partitions:1,Replicas:1},RedisCache:{SkuName:"Standard",SkuFamily:"C",SkuCapacity:1}},xM4:{CmHostingPlan:{SkuName:"B2",SkuCapacity:1},CdHostingPlan:{SkuName:"S3",SkuCapacity:4},CoreSqlDatabase:{Edition:"Standard",MaxSize:"268435456000",ServiceObjectiveLevel:"S1"},MasterSqlDatabase:{Edition:"Standard",MaxSize:"268435456000",ServiceObjectiveLevel:"S1"},WebSqlDatabase:{Edition:"Standard",MaxSize:"268435456000",ServiceObjectiveLevel:"S2"},Searchservice:{SkuName:"Standard",Partitions:1,Replicas:1},RedisCache:{SkuName:"Standard",SkuFamily:"C",SkuCapacity:1}},xM5:{CmHostingPlan:{SkuName:"B2",SkuCapacity:1},CdHostingPlan:
{SkuName:"S3",SkuCapacity:8},CoreSqlDatabase:{Edition:"Standard",MaxSize:"268435456000",ServiceObjectiveLevel:"S1"},MasterSqlDatabase:{Edition:"Standard",MaxSize:"268435456000",ServiceObjectiveLevel:"S1"},WebSqlDatabase:{Edition:"Standard",MaxSize:"268435456000",ServiceObjectiveLevel:"S3"},Searchservice:{SkuName:"Standard",Partitions:1,Replicas:1},RedisCache:{SkuName:"Standard",SkuFamily:"C",SkuCapacity:1}}}},resourceSizes:{type:"object",defaultValue:"[parameters('skuMap')[parameters('sitecoreSKU')]]"}},resources:[{type:"Microsoft.Web/serverfarms",name:"[variables('cmHostingPlanNameTidy')]",apiVersion:"[variables('webApiVersion')]",sku:{name:"[parameters('resourceSizes').CmHostingPlan.SkuName]",capacity:"[parameters('resourceSizes').CmHostingPlan.SkuCapacity]"},properties:{name:"[variables('cmHostingPlanNameTidy')]"},location:"[parameters('location')]",tags:{provider:"[parameters('sitecoreTags').provider]"}},{type:"Microsoft.Web/serverfarms",name:"[variables('cdHostingPlanNameTidy')]",
apiVersion:"[variables('webApiVersion')]",sku:{name:"[parameters('resourceSizes').CdHostingPlan.SkuName]",capacity:"[parameters('resourceSizes').CdHostingPlan.SkuCapacity]"},properties:{name:"[variables('cdHostingPlanNameTidy')]"},location:"[parameters('location')]",dependsOn:["[resourceId('Microsoft.Web/serverfarms', variables('cmHostingPlanNameTidy'))]"],tags:{provider:"[parameters('sitecoreTags').provider]"}},{type:"Microsoft.Web/sites",name:"[variables('cmWebAppNameTidy')]",apiVersion:"[variables('webApiVersion')]",properties:{serverFarmId:"[resourceId('Microsoft.Web/serverfarms', variables('cmHostingPlanNameTidy'))]",siteConfig:{use32BitWorkerProcess:!1,alwaysOn:!0,phpVersion:"",defaultDocuments:["index.html"],appSettings:[{name:"WEBSITE_DYNAMIC_CACHE",value:0}]}},location:"[parameters('location')]",dependsOn:["[resourceId('Microsoft.Web/serverfarms', variables('cmHostingPlanNameTidy'))]"],tags:{provider:"[parameters('sitecoreTags').provider]"},resources:[{name:"MSDeploy",type:"extensions",
location:"[parameters('location')]",apiVersion:"[variables('webApiVersion')]",dependsOn:["[concat('Microsoft.Web/sites/', variables('cmWebAppNameTidy'))]","[resourceId('Microsoft.Search/searchServices', variables('searchServiceNameTidy'))]","[resourceId('Microsoft.Insights/Components', variables('appInsightsNameTidy'))]","[concat('Microsoft.Sql/servers/', variables('dbServerNameTidy'), '/databases/', variables('coreDbNameTidy'))]","[concat('Microsoft.Sql/servers/', variables('dbServerNameTidy'), '/databases/', variables('masterDbNameTidy'))]","[concat('Microsoft.Sql/servers/', variables('webDbServerNameTidy'), '/databases/', variables('webDbNameTidy'))]"],properties:{packageUri:"[parameters('cm.msdeploy.packageurl')]",dbType:"SQL",connectionString:"[concat('Data Source=tcp:', reference(concat('Microsoft.Sql/servers/', variables('dbServerNameTidy'))).fullyQualifiedDomainName, ',1433;Initial Catalog=master;User Id=', parameters('sqlserver.login'), '@', variables('dbServerNameTidy'), ';Password=', parameters('sqlserver.password'), ';')]",
setParameters:{"Application Path":"[variables('cmWebAppNameTidy')]","Sitecore Admin New Password":"[parameters('sitecore.admin.password')]","Core DB User Name":"[parameters('cm.core.sqldatabase.username')]","Core DB Password":"[parameters('cm.core.sqldatabase.password')]","Core Admin Connection String":"[concat('Encrypt=True;TrustServerCertificate=False;Data Source=', reference(concat('Microsoft.Sql/servers/', variables('dbServerNameTidy'))).fullyQualifiedDomainName, ',1433;Initial Catalog=',variables('coreDbNameTidy'),';User Id=', parameters('sqlserver.login'), ';Password=', parameters('sqlserver.password'), ';')]","Core Connection String":"[concat('Encrypt=True;TrustServerCertificate=False;Data Source=', reference(concat('Microsoft.Sql/servers/', variables('dbServerNameTidy'))).fullyQualifiedDomainName, ',1433;Initial Catalog=',variables('coreDbNameTidy'),';User Id=', parameters('cm.core.sqldatabase.username'), ';Password=', parameters('cm.core.sqldatabase.password'), ';')]","Master DB User Name":
"[parameters('cm.master.sqldatabase.username')]","Master DB Password":"[parameters('cm.master.sqldatabase.password')]","Master Admin Connection String":"[concat('Encrypt=True;TrustServerCertificate=False;Data Source=', reference(concat('Microsoft.Sql/servers/', variables('dbServerNameTidy'))).fullyQualifiedDomainName, ',1433;Initial Catalog=',variables('masterDbNameTidy'),';User Id=', parameters('sqlserver.login'), ';Password=', parameters('sqlserver.password'), ';')]","Master Connection String":"[concat('Encrypt=True;TrustServerCertificate=False;Data Source=', reference(concat('Microsoft.Sql/servers/', variables('dbServerNameTidy'))).fullyQualifiedDomainName, ',1433;Initial Catalog=',variables('masterDbNameTidy'),';User Id=', parameters('cm.master.sqldatabase.username'), ';Password=', parameters('cm.master.sqldatabase.password'), ';')]","Web DB User Name":"[parameters('cm.web.sqldatabase.username')]","Web DB Password":"[parameters('cm.web.sqldatabase.password')]","Web Admin Connection String":
"[concat('Encrypt=True;TrustServerCertificate=False;Data Source=', reference(concat('Microsoft.Sql/servers/', variables('webDbServerNameTidy'))).fullyQualifiedDomainName, ',1433;Initial Catalog=',variables('webDbNameTidy'),';User Id=', parameters('web.sqlserver.login'), ';Password=', parameters('web.sqlserver.password'), ';')]","Web Connection String":"[concat('Encrypt=True;TrustServerCertificate=False;Data Source=', reference(concat('Microsoft.Sql/servers/', variables('webDbServerNameTidy'))).fullyQualifiedDomainName, ',1433;Initial Catalog=',variables('webDbNameTidy'),';User Id=', parameters('cm.web.sqldatabase.username'), ';Password=', parameters('cm.web.sqldatabase.password'), ';')]","Cloud Search Connection String":"[concat('serviceUrl=https://', variables('searchServiceNameTidy'), '.search.windows.net;apiVersion=', variables('searchPreviewApiVersion'), ';apiKey=', listAdminKeys(resourceId('Microsoft.Search/searchServices', variables('searchServiceNameTidy')), variables('searchApiVersion')).primaryKey)]",
"Application Insights Instrumentation Key":"[reference(resourceId('Microsoft.Insights/Components', variables('appInsightsNameTidy'))).InstrumentationKey]","Application Insights Role":"CM","KeepAlive Url":"[concat('https://', reference(resourceId('Microsoft.Web/sites', variables('cmWebAppNameTidy'))).hostNames[0], '/sitecore/service/keepalive.aspx')]","License Xml":"[variables('licenseXml')]","IP Security Client IP":"[parameters('security.clientIp')]","IP Security Client IP Mask":"[parameters('security.clientIpMask')]"}}}]},{type:"Microsoft.Web/sites",name:"[variables('cdWebAppNameTidy')]",apiVersion:"[variables('webApiVersion')]",properties:{serverFarmId:"[resourceId('Microsoft.Web/serverfarms', variables('cdHostingPlanNameTidy'))]",siteConfig:{use32BitWorkerProcess:!1,alwaysOn:!0,phpVersion:"",defaultDocuments:["index.html"],appSettings:[{name:"WEBSITE_DYNAMIC_CACHE",value:0}]}},location:"[parameters('location')]",dependsOn:["[resourceId('Microsoft.Web/serverfarms', variables('cdHostingPlanNameTidy'))]"],
tags:{provider:"[parameters('sitecoreTags').provider]"},resources:[{name:"MSDeploy",type:"extensions",location:"[parameters('location')]",apiVersion:"[variables('webApiVersion')]",dependsOn:["[concat('Microsoft.Web/sites/', variables('cdWebAppNameTidy'))]","[concat('Microsoft.Web/sites/', variables('cmWebAppNameTidy'), '/Extensions/MSDeploy')]","[resourceId('Microsoft.Cache/Redis', variables('redisCacheNameTidy'))]","[resourceId('Microsoft.Search/searchServices', variables('searchServiceNameTidy'))]","[resourceId('Microsoft.Insights/Components', variables('appInsightsNameTidy'))]","[concat('Microsoft.Sql/servers/', variables('dbServerNameTidy'), '/databases/', variables('coreDbNameTidy'))]","[concat('Microsoft.Sql/servers/', variables('webDbServerNameTidy'), '/databases/', variables('webDbNameTidy'))]"],properties:{packageUri:"[parameters('cd.msdeploy.packageurl')]",dbType:"SQL",connectionString:"[concat('Data Source=tcp:', reference(concat('Microsoft.Sql/servers/', variables('dbServerNameTidy'))).fullyQualifiedDomainName, ',1433;Initial Catalog=master;User Id=', parameters('sqlserver.login'), '@', variables('dbServerNameTidy'), ';Password=', parameters('sqlserver.password'), ';')]",
setParameters:{"Application Path":"[variables('cdWebAppNameTidy')]","Sitecore Admin New Password":"[parameters('sitecore.admin.password')]","Core DB User Name":"[parameters('cd.core.sqldatabase.username')]","Core DB Password":"[parameters('cd.core.sqldatabase.password')]","Core Admin Connection String":"[concat('Encrypt=True;TrustServerCertificate=False;Data Source=', reference(concat('Microsoft.Sql/servers/', variables('dbServerNameTidy'))).fullyQualifiedDomainName, ',1433;Initial Catalog=',variables('coreDbNameTidy'),';User Id=', parameters('sqlserver.login'), ';Password=', parameters('sqlserver.password'), ';')]","Core Connection String":"[concat('Encrypt=True;TrustServerCertificate=False;Data Source=', reference(concat('Microsoft.Sql/servers/', variables('dbServerNameTidy'))).fullyQualifiedDomainName, ',1433;Initial Catalog=',variables('coreDbNameTidy'),';User Id=', parameters('cd.core.sqldatabase.username'), ';Password=', parameters('cd.core.sqldatabase.password'), ';')]","Web DB User Name":
"[parameters('cd.web.sqldatabase.username')]","Web DB Password":"[parameters('cd.web.sqldatabase.password')]","Web Admin Connection String":"[concat('Encrypt=True;TrustServerCertificate=False;Data Source=', reference(concat('Microsoft.Sql/servers/', variables('webDbServerNameTidy'))).fullyQualifiedDomainName, ',1433;Initial Catalog=',variables('webDbNameTidy'),';User Id=', parameters('web.sqlserver.login'), ';Password=', parameters('web.sqlserver.password'), ';')]","Web Connection String":"[concat('Encrypt=True;TrustServerCertificate=False;Data Source=', reference(concat('Microsoft.Sql/servers/', variables('webDbServerNameTidy'))).fullyQualifiedDomainName, ',1433;Initial Catalog=',variables('webDbNameTidy'),';User Id=', parameters('cd.web.sqldatabase.username'), ';Password=', parameters('cd.web.sqldatabase.password'), ';')]","Cloud Search Connection String":"[concat('serviceUrl=https://', variables('searchServiceNameTidy'), '.search.windows.net;apiVersion=', variables('searchPreviewApiVersion'), ';apiKey=', listAdminKeys(resourceId('Microsoft.Search/searchServices', variables('searchServiceNameTidy')), variables('searchApiVersion')).primaryKey)]",
"Application Insights Instrumentation Key":"[reference(resourceId('Microsoft.Insights/Components', variables('appInsightsNameTidy'))).InstrumentationKey]","Application Insights Role":"CD","KeepAlive Url":"[concat('https://', reference(resourceId('Microsoft.Web/sites', variables('cdWebAppNameTidy'))).hostNames[0], '/sitecore/service/keepalive.aspx')]","Redis Connection String":"[concat(reference(variables('redisCacheNameTidy')).hostName, ':', reference(variables('redisCacheNameTidy')).sslPort, ',password=', listKeys(resourceId('Microsoft.Cache/Redis', variables('redisCacheNameTidy')), variables('redisApiVersion')).primaryKey, ',ssl=True,abortConnect=False')]","License Xml":"[variables('licenseXml')]"}}}]},{type:"Microsoft.Sql/servers",apiVersion:"[variables('dbApiVersion')]",properties:{administratorLogin:"[parameters('sqlserver.login')]",administratorLoginPassword:"[parameters('sqlserver.password')]",version:"[parameters('sqlserver.version')]"},name:"[variables('dbServerNameTidy')]",location:
"[parameters('location')]",tags:{provider:"[parameters('sitecoreTags').provider]"},resources:[{type:"firewallrules",apiVersion:"[variables('dbApiVersion')]",properties:{endIpAddress:"0.0.0.0",startIpAddress:"0.0.0.0"},name:"AllowAllWindowsAzureIps",dependsOn:["[resourceId('Microsoft.Sql/servers', variables('dbServerNameTidy'))]"]},{type:"databases",apiVersion:"[variables('dbApiVersion')]",properties:{edition:"[parameters('resourceSizes').CoreSqlDatabase.Edition]",collation:"[parameters('sqldatabase.collation')]",maxSizeBytes:"[parameters('resourceSizes').CoreSqlDatabase.MaxSize]",requestedServiceObjectiveName:"[parameters('resourceSizes').CoreSqlDatabase.ServiceObjectiveLevel]"},name:"[variables('coreDbNameTidy')]",location:"[parameters('location')]",dependsOn:["[resourceId('Microsoft.Sql/servers', variables('dbServerNameTidy'))]"],tags:{provider:"[parameters('sitecoreTags').provider]"}},{type:"databases",apiVersion:"[variables('dbApiVersion')]",properties:{edition:"[parameters('resourceSizes').MasterSqlDatabase.Edition]",
collation:"[parameters('sqldatabase.collation')]",maxSizeBytes:"[parameters('resourceSizes').MasterSqlDatabase.MaxSize]",requestedServiceObjectiveName:"[parameters('resourceSizes').MasterSqlDatabase.ServiceObjectiveLevel]"},name:"[variables('masterDbNameTidy')]",location:"[parameters('location')]",dependsOn:["[resourceId('Microsoft.Sql/servers', variables('dbServerNameTidy'))]"],tags:{provider:"[parameters('sitecoreTags').provider]"}}]},{type:"Microsoft.Sql/servers",apiVersion:"[variables('dbApiVersion')]",properties:{administratorLogin:"[parameters('web.sqlserver.login')]",administratorLoginPassword:"[parameters('web.sqlserver.password')]",version:"[parameters('sqlserver.version')]"},name:"[variables('webDbServerNameTidy')]",location:"[parameters('location')]",dependsOn:["[resourceId('Microsoft.Sql/servers', variables('dbServerNameTidy'))]"],tags:{provider:"[parameters('sitecoreTags').provider]"},resources:[{type:"firewallrules",apiVersion:"[variables('dbApiVersion')]",properties:{endIpAddress:
"0.0.0.0",startIpAddress:"0.0.0.0"},name:"AllowAllWindowsAzureIps",dependsOn:["[resourceId('Microsoft.Sql/servers', variables('webDbServerNameTidy'))]"]},{type:"databases",apiVersion:"[variables('dbApiVersion')]",properties:{edition:"[parameters('resourceSizes').WebSqlDatabase.Edition]",collation:"[parameters('sqldatabase.collation')]",maxSizeBytes:"[parameters('resourceSizes').WebSqlDatabase.MaxSize]",requestedServiceObjectiveName:"[parameters('resourceSizes').WebSqlDatabase.ServiceObjectiveLevel]"},name:"[variables('webDbNameTidy')]",location:"[parameters('location')]",dependsOn:["[resourceId('Microsoft.Sql/servers', variables('webDbServerNameTidy'))]"],tags:{provider:"[parameters('sitecoreTags').provider]"}}]},{type:"Microsoft.Search/searchServices",apiVersion:"[variables('searchApiVersion')]",name:"[variables('searchServiceNameTidy')]",location:"[parameters('location')]",properties:{sku:{name:"[toLower(parameters('resourceSizes').SearchService.SkuName)]"},replicaCount:"[parameters('resourceSizes').SearchService.Replicas]",
partitionCount:"[parameters('resourceSizes').SearchService.Partitions]"},tags:{provider:"[parameters('sitecoreTags').provider]"}},{type:"Microsoft.Cache/Redis",name:"[variables('redisCacheNameTidy')]",apiVersion:"[variables('redisApiVersion')]",location:"[parameters('location')]",properties:{sku:{name:"[parameters('resourceSizes').RedisCache.SkuName]",family:"[parameters('resourceSizes').RedisCache.SkuFamily]",capacity:"[parameters('resourceSizes').RedisCache.SkuCapacity]"},enableNonSslPort:!1},dependsOn:["[resourceId('Microsoft.Web/sites', variables('cdWebAppNameTidy'))]"],tags:{provider:"[parameters('sitecoreTags').provider]"}},{type:"Microsoft.Insights/Components",name:"[variables('appInsightsNameTidy')]",apiVersion:"[variables('appInsightsApiVersion')]",location:"[parameters('applicationinsights.location')]",properties:{ApplicationId:"[variables('appInsightsNameTidy')]",Application_Type:"web"},tags:{provider:"[parameters('sitecoreTags').provider]"}}]}},t})(nt.Form.ViewModel);n.CreateSiteCoreBlade=
t})(g||(g={})),g}))