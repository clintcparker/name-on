define("Project/TypeScript/Data/ProcessTemplatesWebApi",["require","exports","o","$","Core/TypeScript/TFS.Core.Ajax","Core/TypeScript/TFS.Diag"],(function(n,t,i,r,u,f){"use strict";function e(n){var t=r.Deferred(),i=n+"/_api/_project/ProcessTemplates?__v=5";return u.getMSJSON(i,null,(function(n){t.resolve(n.Templates)}),(function(i){t.reject();f.logError("Failed to get the custom process templates for account: "+n+" Error: "+i)})),t.promise()}i.defineProperty(t,"__esModule",{value:!0});t.getAccountProcessTemplates=e}));
define("Project/TypeScript/Models/ProcessTemplate",["require","exports","o","ko"],(function(n,t,i,r){"use strict";var u,f;i.defineProperty(t,"__esModule",{value:!0});u=(function(){function n(){}return n})();t.ProcessTemplate=u;f=(function(){function n(n,t){this.header=r.observable(n);this.summary=r.observable(t)}return n})();t.ProcessTemplateItem=f}));
define("Project/TypeScript/Data/ProcessTemplateData",["require","exports","f","o","ko","$","Project/TypeScript/Models/ProcessTemplate","Project/TypeScript/Resources/TFS.Resources.Project","Core/TypeScript/TFS.Azure","Project/TypeScript/Data/ProcessTemplatesWebApi"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";r.defineProperty(t,"__esModule",{value:!0});var c=(function(){function n(){this.defaultProcessTemplateMap={};this.customProcessTemplates={};this.customProcessTemplateMap={};var r=u.observableArray(),n=new e.ProcessTemplate,t=new e.ProcessTemplate,i=new e.ProcessTemplate;n.item=new e.ProcessTemplateItem(o.processTemplateScrumHeader,o.processTemplateScrumSummary);n.id=u.observable("6B724908-EF14-45CF-84F8-768B5384DA45");n.name=u.observable(o.processTemplateScrumHeader);r.push(n);this.defaultProcessTemplateMap[n.id()]=n.name();t.item=new e.ProcessTemplateItem(o.processTemplateAgileHeader,o.processTemplateAgileSummary);t.id=u.observable("ADCC42AB-9882-485E-A3ED-7678F01F66BC");t.name=u.observable(o.processTemplateAgileHeader);r.push(t);this.defaultProcessTemplateMap[t.id()]=t.name();i.item=new e.ProcessTemplateItem(o.processTemplateCMMIHeader,o.processTemplateCMMISummary);i.id=u.observable("27450541-8E31-4150-9947-DC59F998FC01");i.name=u.observable(o.processTemplateCMMIHeader);r.push(i);this.defaultProcessTemplateMap[i.id()]=i.name();this.defaultProcessTemplates=r}return n.prototype.setAccountIdSubscriber=function(n,t){this.accountId=n;this.accountId.subscribe(t,f.proxy(this.getCustomTemplates,this))},n.prototype.getProcessTemplateItems=function(){var n;return this.customProcessTemplates[this.accountId()]&&this.customProcessTemplates[this.accountId()]().length>0?(n=u.observableArray(),n.push.apply(n,this.defaultProcessTemplates()),n.push.apply(n,this.customProcessTemplates[this.accountId()]())):n=this.defaultProcessTemplates,n},n.prototype.getProcessTemplateName=function(n){var t=null;return this.customProcessTemplateMap[this.accountId()]&&(t=n?this.customProcessTemplateMap[this.accountId()][n]:null),i.isNullOrUndefined(t)&&(t=n?this.defaultProcessTemplateMap[n]:null),t},n.prototype.getCustomTemplates=function(n){var r,t;if(n&&n!==""&&!this.customProcessTemplates[n]){if(r=s.getAccountMapping(n),i.isNullOrUndefined(r))return;t=this;h.getAccountProcessTemplates(r.tfsAccountUrl).done((function(r){var f=u.observableArray(),o={};r.forEach((function(n){if(i.isNullOrUndefined(t.defaultProcessTemplateMap[n.TypeId.toUpperCase()])){var r=new e.ProcessTemplate;r.item=new e.ProcessTemplateItem(n.Name,n.Description);r.name=u.observable(n.Name);r.id=u.observable(n.TypeId);f.push(r);o[r.id()]=r.name()}}));t.customProcessTemplates[n]=f;t.customProcessTemplateMap[n]=o}))}},n})();t.ProcessTemplateData=c}));
define("Project/TypeScript/Models/VersionControlProjectData",["require","exports","o","ko"],(function(n,t,i,r){"use strict";var u,f;i.defineProperty(t,"__esModule",{value:!0});u=(function(){function n(){}return n})();t.VersionControl=u;f=(function(){function n(n,t,i){this.header=r.observable(n);this.summary=r.observable(t);this.icon=r.observable(i)}return n})();t.VersionControlItem=f}));
define("Project/TypeScript/Data/VersionControlData",["require","exports","f","o","ko","Project/TypeScript/Models/VersionControlProjectData","Project/TypeScript/Resources/TFS.Resources.Project","_generated/Svg"],(function(n,t,i,r,u,f,e,o){"use strict";r.defineProperty(t,"__esModule",{value:!0});var s=(function(){function n(){this.versionControlMap={};var r=u.observableArray(),t=new f.VersionControl,n=new f.VersionControl;n.item=new f.VersionControlItem(e.versionControlTFSHeader,e.versionControlTFSSummary,i.Base.Images.Blank());n.item.icon(o.Content.Icons.vSTS);n.id=u.observable("Tfvc");n.name=u.observable(e.versionControlTFSHeader);r.push(n);this.versionControlMap[n.id()]=n.name();t.item=new f.VersionControlItem(e.versionControlGitHeader,e.versionControlGitSummary,i.Base.Images.GitLogo());t.id=u.observable("Git");t.name=u.observable(e.versionControlGitHeader);r.push(t);this.versionControlMap[t.id()]=t.name();this.versionControls=r}return n.prototype.getVersionControlItems=function(){return this.versionControls},n.prototype.getVersionControlName=function(n){return n?this.versionControlMap[n]:null},n})();t.VersionControlData=s}));
define("Project/ProjectArea",["require","exports","o","a","$","Core/TypeScript/Models/TFS.CsmResource.Models","Project/TypeScript/Data/ProcessTemplateData","Project/TypeScript/Data/VersionControlData","Core/TypeScript/TFS.Azure","Core/TypeScript/TFS.Azure.Context","Core/TypeScript/TFS.Data","Core/TypeScript/TFS.CSM.Data","Core/TypeScript/TFS.Core.Ajax"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a){"use strict";i.defineProperty(t,"__esModule",{value:!0});var v=(function(){function n(){this.versionControlData=new o.VersionControlData;this.processTemplateData=new e.ProcessTemplateData}return n.prototype.beginGetCsmResourcesForSubscription=function(n,t,i,r){var e=u.Deferred();return s.ready().done((function(){var u=r?c.LoadBehavior.ForceRefresh:c.LoadBehavior.AcceptCached;l.getCsmResources(n,t,i,u).done((function(n){var t=n().map((function(n){return f.unwrapCsmResource(n)}));e.resolve(t)})).fail(e.reject)})).fail(e.reject),e.promise()},n.prototype.beginGetCsmResourcesForAllSubscriptions=function(n,t,i){var e=this,f=u.Deferred();return s.ready().done((function(){var o=[];s.activeSubscriptions()().forEach((function(r){o.push(e.beginGetCsmResourcesForSubscription(n,r,t,i))}));u.when.apply(u,o).done((function(){var t=r.prototype.slice.call(arguments),n=[];t.forEach((function(t){t&&t.length&&r.prototype.push.apply(n,t)}));f.resolve(n)})).fail(f.reject)})).fail(f.reject),f.promise()},n.prototype.beginGetCsmResourcesForResourceGroup=function(n,t,i,r,e,o){var h=u.Deferred();return s.ready().done((function(){var u=o?c.LoadBehavior.ForceRefresh:c.LoadBehavior.AcceptCached;l.getCsmResourcesInResourceGroup(n,t,i,r,e,u).done((function(n){var t=n().map((function(n){return f.unwrapCsmResource(n)}));h.resolve(t)})).fail(h.reject)})).fail(h.reject),h.promise()},n.prototype.beginGetAccountRegions=function(){var n=u.Deferred(),t=this;return a.getMSJSON(this.getSpsApiUrl("commerce","regions"),{},(function(t){t&&t.value?n.resolve(t.value):n.reject([])}),(function(){a.getMSJSON(t.getSpsAccountUrl("GetAccountRegions"),{},(function(t){t&&t.regions?n.resolve(t.regions):n.reject([])}),(function(){n.reject([])}))})),n.promise()},n.prototype.getSpsAccountUrl=function(n){var t=h.getAzureTfsContext().spsLocation;return t[t.length-1]!=="/"&&(t+="/"),t+"AzureSpsAccount/"+n},n.prototype.getSpsApiUrl=function(n,t){var i=h.getAzureTfsContext().spsLocation;return i[i.length-1]!=="/"&&(i+="/"),i+"_apis/"+n+"/"+t},n.prototype.getCsmResourceGroup=function(n,t){var i=u.Deferred();return s.ready().done((function(){var r=s.getExtensionHttpClient();r.beginGetCsmResourceGroup(t,n).done((function(n){i.resolve(n)})).fail(i.reject)})).fail((function(){i.reject()})),i.promise()},n})();t.DataContext=v}))