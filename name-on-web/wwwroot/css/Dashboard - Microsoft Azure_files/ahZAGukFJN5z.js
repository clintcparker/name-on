define("MsPortalImpl/UI/Compositions/UI.Composition.BladeOpener.Helpers",["require","exports","f","o","MsPortalImpl/Extension/Extension.Definition.Locator","MsPortalImpl/UI/Compositions/UI.Composition","MsPortalImpl/UI/Compositions/UI.Composition.PropertyBinding","MsPortalImpl/UI/Compositions/UI.Composition.PropertyTransformers","MsPortalImpl/UI/UI.DesktopManager"],(function(n,t,i,r,u,f,e,o){"use strict";function w(n){var t={master:{part:n.masterPartId,property:n.masterInvocationProperty,command:n.masterCommandName}};return i.toSortedString(t)}function c(n,t){var i=n.services.desktop.getActiveJourney();return t.every((function(n){var r;if(!n.isInitialized)return!0;if(n.shouldAlertOnClose())if(r=!!n.bladeDefinition.actionBar,r){var u=n.getViewModel(2),t=u&&u.content,f=t&&t.output&&t.output(),e=f&&f.status;if(e!==3)return!1}else return!1;return i.ambientSettings.getItemsInPath(n.journeyPath).every((function(n){return n&&n.value&&n.value.type===a.Blade?!n.value.editScope||n.value.editScope.disposeOnSelectionChange:!1}))}))}function b(n,t,r,u,e){var v=n.services.desktop,w=n.referenceComposition.getPartsContainer().detailContainers||[],b=function(t){return n.isBladeOpenedByMaster(t)&&t.masterInvocationProperty===r.source.property},o,s,h=!0,k=!1,y,p,a,l;if(o=w.filter((function(n){var r=!1,t=n.bladeDefinition,o=e.length===1?!!(e[0].flags&2):!1,h=!!(n.flags&2);return n.isDisposed()||o!==h||(r=i.isFeatureEnabled("disablerebind")||!b(n)||t&&(t.attributes&1||t.name==="CreateBlade"&&n.extension.name==="WebsitesExtension")?!0:!e.some((function(t){var e=n.locator.equals(t.locator),i,r;return e&&(r=nt(t.model,u),i=f.deepSubset(n.getBindableContainer().getViewModel(),r),s=s||n),i}))),r})),y=c(n,o),e.length===1&&o.length===w.length&&s&&g(s,e[0])&&(o.remove(s),p=v.discardEditsOfBlade(s,{includeSelf:!1,includeDescendants:!0,force:y}),o=o.concat(s.detailContainers),h=p.successful,k=h&&p.confirmationRequired),h&&!k&&(h=y||v.confirmBladesCanClose(o.map((function(n){return n.id})))),h)for(a=o.length-1;a>=0;a--)l=o[a],b(l)&&(n.removeOutputBindings(l),t.detailBladesTracker.untrack(l)),v.forceCloseBlade(l.id,1,{openBlade:!0});return h}function k(n,t,i){var u={},r=new e.PropertyTransformerArgs(n,t,null,u,null);return r.propertyChanges.push(e.ObservableChangeArgs.forObject(i.targetProperty,t)),i.opensDynamicBlades&&p(r),i.targetProperty||y(r),r.propertyChanges.forEach((function(n){var t=n.propertyName;t&&(u[t]=n.propertyValue)})),u}function d(n,t,i,r){var f=t,o=t.getExtensionLocator(),c=u.Locator.forExtensionManifest(o.name).withBladeRedirect(t.name),s={},e;return n.finder.tryLocate(c,s)?(e=s.value,e.type===3?f=u.Locator.forExtension(h.ExtensionNames.Hubs).withBlade(h.BladeNames.Hubs.ResourceMenuBlade):e.type===2&&(f=u.Locator.forExtension(e.toExtension||o.name).withBlade(e.toBlade))):f=n.assetTypeService.getMappedBladeLocator(t),f&&r.matchesLocatorAndModel(f,i)&&(f=t),f}function g(n,t){var i=[],r=n.widget;r&&(i=r.options.commandBar.menuItems(),n.children.forEach((function(n){n.children.forEach((function(n){var t=n.widget;t&&(i=i.concat(t.options.commands))}))})));var u=t.masterDetailsDefinition,f=u&&!!u.parameterCollector,e=n.bladeDefinition&&n.bladeDefinition.attributes&1,o=!n.isDisabled&&n.bladeDefinition&&!n.bladeDefinition.waitForInputsSet&&!e&&!f&&i.every((function(n){return n.canRebind}));return o||e||f||v.warning("Unable to rebind Blade '"+n.id+"', it was either disabled, cleared, or one of its commands was executing. Will close and reopen blade instead."),o}function nt(n,t){var u=n,r;return n&&t&&t.length&&(r={},t.forEach((function(n){r[n.targetProperty]=!0})),u=i.forEachKey(n,(function(n,t,i){r[n]||(i[n]=t)}),{})),u}r.defineProperty(t,"__esModule",{value:!0});var s=i.Base,l=s.Diagnostics,tt=i.Extension,a=u.LocatorType,h=s.Constants,v=l.createLog(n),y=o.PropertyTransformers.getModelToPropertyMapper(),p=o.PropertyTransformers.getDynamicSelectionMapper();t.getBladeOpenerJourneyPathSegment=w;t.shouldSkipPromptForBladesWithEdits=c;t.tryCloseOtherDetailBlades=b;t.mapMasterModelToBladeModel=k;t.getMappedBladeLocator=d}));
define("_generated/Less/MsPortalImpl/Widgets/Widgets.BreadCrumb.css",["require","exports","o","module"],(function(n,t,i,r){"use strict";i.defineProperty(t,"__esModule",{value:!0});window.fx.injectCss(r,'.fxs-breadcrumb-wrapper{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;height:100%}.fxs-breadcrumb-crumb,.fxs-breadcrumb-divider{display:-webkit-flex;height:100%;padding:0 3px}.fxs-breadcrumb-wrapper>.fxs-breadcrumb-crumb{color:#bbb;font-size:11px;cursor:default}.fxs-breadcrumb-wrapper>.fxs-breadcrumb-crumb-active{color:#55b3ff;cursor:pointer}.fxs-breadcrumb-wrapper>.fxs-breadcrumb-crumb-active:hover{text-decoration:underline}.fxs-breadcrumb-crumb{-webkit-flex:0 0 auto;flex:0 0 auto;display:flex;-webkit-align-items:center;align-items:center;box-sizing:border-box}.fxs-breadcrumb-divider{-webkit-flex:0 0 auto;flex:0 0 auto;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;text-align:center}.fxs-breadcrumb-divider svg{-webkit-transform:rotate(90deg);transform:rotate(90deg);height:8px;width:8px;margin-top:1px}.fxs-breadcrumb-overflow-btn{-webkit-flex:0 0 auto;flex:0 0 auto;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;font-family:az_ea_font,"Segoe UI",wf_segoe-ui_light,"Segoe UI Light","Segoe WP Light","Segoe WP",Tahoma,Arial,sans-serif;font-weight:200;font-size:24px;box-sizing:border-box;height:18px;padding-bottom:12px;color:#55b3ff}.fxs-breadcrumb-dropmenu{-webkit-flex:0 0 auto;flex:0 0 auto}.fxs-breadcrumb-overflow .fxs-breadcrumb-crumb{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fxs-breadcrumb-container{display:-webkit-flex;display:flex;padding-left:22px;height:100%}')}));
define("_generated/Templates/WidgetsBreadCrumb",["require","exports"],(function(){"use strict";return function(){return'<div class="fxs-breadcrumb-container"> <nav class="fxs-breadcrumb-wrapper" data-bind="attr: { \'aria-label\': navLabel }"> <div class="fxs-breadcrumb-dropmenu"><\/div> <!-- ko foreach: breadCrumbsVisibleUI --> <!-- ko if: $index() || $parent.firstDividerVisible() --> <div class="fxs-breadcrumb-divider fxs-trim-svg" data-bind="image: $data.caretUp, css: { \'fxs-display-none\': !$data.visible() }"><\/div> <!-- /ko --> <a class="fxs-breadcrumb-crumb" data-bind="css: { \'fxs-trim-hover fxs-breadcrumb-crumb-active\': $data.visible() && $index() < $parent.lastVisibleIdx(), \'fxs-display-none\': !$data.visible()  }, attr: { \'data-blade-id\': $data.bladeId, href: $data.visible() && $index() < $parent.lastVisibleIdx() ? \'#\' : null }, text: $data.bladeTitle" tabindex="-1"><\/a> <!-- /ko --> <\/nav> <\/div>'}}));
define("_generated/Templates/WidgetsBreadCrumbOverFlow",["require","exports"],(function(){"use strict";return function(){return'<ul class="fxs-breadcrumb-overflow"> <!-- ko foreach: breadCrumbsOverFlow --> <li class="fxs-portal-hover" data-bind="css: { \'fxs-display-none\': !$data.visible() }"> <a href="#" class="fxs-breadcrumb-crumb" data-bind="css: { \' fxs-breadcrumb-crumb-active\': $data.visible() }, attr: { \'data-blade-id\': $data.bladeId, title: $data.bladeTitle }, text: $data.bladeTitle" tabindex="-1"><\/a> <\/li> <!-- /ko --> <\/ul>'}}));
define("MsPortalImpl/Widgets/Widgets.BreadCrumb",["require","exports","f","o","a","ko","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/JQueryHelper","MsPortalImpl/Base/Telemetry","MsPortalImpl/Base/Base.Timers","MsPortalImpl/Widgets/Widgets.WidgetBase","_generated/Templates/WidgetsBreadCrumb","_generated/Templates/WidgetsBreadCrumbOverFlow","MsPortalImpl/Widgets/Widgets.DropMenu","MsPortalImpl/Base/Base.EventTypes","Viva.Controls/Util/Viva.Resize","MsPortalImpl/Interactions/Interactions.KeyboardNavigation","_generated/Less/MsPortalImpl/Widgets/Widgets.BreadCrumb.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){"use strict";function g(n,t,i,r){var u;f.computed(n,t,(function(t){var c=r?t.reverse():t,l=c.length,o,s,h,a,v,e;if(u&&u.dispose(),u=n.createChildLifetime(),o=i(),s=l-o.length,s>0){for(h=[],e=0,a=Math.max(s,5);e<a;e++)h.push({bladeId:f.observable(),bladeTitle:f.observable(),visible:f.observable(!0),caretUp:ft});i.push.apply(i,h)}for(v=function(n){var t=o[n],i;n<l?(i=c[n],i.bladeId.subscribeAndRun(u,(function(n){t.bladeId(n)})),i.bladeTitle.subscribeAndRun(u,(function(n){t.bladeTitle(n)})),t.visible(!0)):t.visible(!1)},e=0;e<o.length;e++)v(e)}))}function k(n,t,i){var u=i().first(),r;u&&(r=t.width(),r&&n.width()>=r&&(u.visible(!1),k(n,t,i)))}var nt;r.defineProperty(t,"__esModule",{value:!0});var tt=i.Base,it="<div class='fxs-breadcrumb-overflow-btn fxs-trim-hover' role='presentation'>...<\/div>",b={deferred:!0},d="homelink",rt="> .fxs-breadcrumb-crumb-active, .fxs-dropmenu-button:not(.fxs-display-none)",ut=".fxs-breadcrumb-crumb-active",ft=i.Base.Images.CaretUp({isLogo:!0});nt=(function(n){function t(t,r){var c=n.call(this,t,r)||this,ft=c.element,gt=c.options,u=c.ltm,ni=[{bladeId:d,bladeTitle:e.Breadcrumb.home}],nt=f.observableArray([]),ot,ct,kt,dt;f.computed(u,[gt.breadCrumbs],(function(n){nt.valueWillMutate();var t=nt(),i=ni.concat(n);i.forEach((function(n,i){var r=t[i]||(t[i]={bladeId:f.observable(),bladeTitle:f.observable(),visible:f.observable(!0)});r.bladeId(n.bladeId);r.bladeTitle(n.bladeTitle)}));t.splice(i.length);nt.valueHasMutated()})).extend(b);ot=nt.filter(u,(function(n){return!n.visible()}));ot.extend(b);var st=c.breadCrumbsVisible=nt.filter(u,(function(n){return n.visible()})),vt=f.observableArray([]),yt=f.observableArray([]),pt=f.observable(),wt=f.observable();g(u,st,vt,!1);g(u,ot,yt,!0);ft.html(l());c._bindDescendants({breadCrumbsVisibleUI:vt,navLabel:e.Breadcrumb.navlabel,lastVisibleIdx:pt,firstDividerVisible:wt});var lt=ft.findByClassName("fxs-breadcrumb-container"),ht=ft.findByClassName("fxs-breadcrumb-wrapper"),at=c._dropMenuElement=ft.findByClassName("fxs-breadcrumb-dropmenu"),et,bt=f.computed(u,ot,(function(){return ot().length>0}));return bt.extend(b),bt.subscribeAndRun(u,(function(n){n&&(et||(et=new v.ViewModel(it,a(),ut,!0),et.setItemFocusWhenOpen=!0,et.buttonTooltip(e.Breadcrumb.navhistory),et.alignMenu=0,u.registerForDispose(new v.Widget(at,et)),f.applyBindings({breadCrumbsOverFlow:yt},at[0])));o.toggle(at,n);wt(n)})),f.computed(u,(function(){var t=nt(),n=i.last(t);n&&n.bladeTitle();ct||(ct=h.throttleByAnimationFrame((function(){var n=nt();n.forEach((function(n){n.visible(!0)}));k(ht,lt,st);kt||(kt=!0,p.track(u,ft,(function(){if(c.options.breadCrumbs().length){var n=lt.width();ht.width()>=n?k(ht,lt,st):ct()}})))})));ct()})).extend(b),dt=new w.KeyboardNavigation(u,{element:ht,tabTriggers:12,itemSelector:rt}),u.registerForDispose([ft.setEvents([y.default.click+" "+y.default.keydown,".fxs-breadcrumb-crumb",function(n){var t,u;if((n.type===y.default.click||n.which===13||n.which===32)&&(t=$(n.currentTarget),t.hasClass("fxs-breadcrumb-crumb-active"))){n.preventDefault();n.stopPropagation();var e=f.dataFor(t[0]),i=e&&f.unwrap(e.bladeId),r=i===d;i&&(u=r?undefined:{bladeId:i},tt.Diagnostics.Telemetry.trace({source:s.Source.Desktop,action:r?s.Action.BreadCrumbHomeClicked:s.Action.BreadCrumbClicked,data:u}),t.trigger(r?y.default.fxhomebuttonclick:y.default.fxbreadcrumbclick,u))}},]),]),f.computed(u,st,(function(n){pt(n.length-1);dt.correctState()})).extend(b),c}return __extends(t,n),t})(c.Widget);t.Widget=nt}));
define("MsPortalImpl/Widgets/Widgets.BreadCrumbViewModel",["require","exports","o","ko","MsPortalImpl/Widgets/Widgets.WidgetBase"],(function(n,t,i,r,u){"use strict";i.defineProperty(t,"__esModule",{value:!0});var f=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.breadCrumbs=r.observableArray(),t}return __extends(t,n),t})(u.ViewModel);t.ViewModel=f}));
define("_generated/Less/MsPortalImpl/Widgets/Widgets.Journey.css",["require","exports","o","module"],(function(n,t,i,r){"use strict";i.defineProperty(t,"__esModule",{value:!0});window.fx.injectCss(r,".fxs-journey{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.fxs-journey-layout{-webkit-flex:1 1 auto;flex:1 1 auto;overflow-x:auto;overflow-y:hidden;z-index:0}.fxs-journey-layout>.fxs-blade{display:none}.fxs-journey-layout>.fxs-blade.fxs-blade-display-in-journey,.fxs-portal-peekmode .fxs-journey-layout>.fxs-blade{display:-webkit-flex;display:flex}.fxs-portal-peekmode .fxs-blade-maximized.fxs-blade{-webkit-flex-shrink:0;flex-shrink:0}.fxs-journey-breadcrumb{display:none;height:18px;color:#bbb;background-color:rgba(255,255,255,.05);z-index:1}.fxs-show-journey .fxs-journey-breadcrumb{display:block}.fxs-journey-placeholder:last-child{-webkit-flex:0 0 auto;flex:0 0 auto}.fxs-journey-dockleft{transform:rotate(-90deg)}.fxs-journey-dockright{transform:rotate(90deg);margin-left:10px}")}));
define("MsPortalImpl/Widgets/Widgets.Journey",["require","exports","f","o","a","ko","MsPortalImpl/Widgets/Widgets.WidgetBase","MsPortalImpl/Widgets/Widgets.Blade","MsPortalImpl/Widgets/Widgets.LayoutBase","MsPortalImpl/Widgets/Widgets.StackLayout","MsPortalImpl/Widgets/Widgets.UIElementBase","MsPortalImpl/Base/Base.EventTypes","MsPortalImpl/Widgets/Widgets.BreadCrumb","Viva.Controls/Util/Viva.Resize","MsPortalImpl/Base/Base.BrowserDetection","MsPortalImpl/Base/Base.Timers","MsPortalImpl/Base/Telemetry","MsPortalImpl/Widgets/Widgets.BreadCrumbViewModel","_generated/Less/MsPortalImpl/Widgets/Widgets.Journey.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){"use strict";function gt(n,t){var i=n.length,r=n[i-1],u=n[i-2];i>0&&(r.visibleInJourney?nt(n,t)&&(u.visibleInJourney=!0):vt(n,t,!0))}function ni(n,t){var r=n.length,i,u;if(n[r-1].subjourney)for(i=r-2;i>=0&&n[i].visibleInJourney;--i)n[i].visibleInJourney=!1;else u=g(n,t),u.freespace<0&&yt(n,r-(nt(n,t)?3:2))}function vt(n,t,i){i===void 0&&(i=!1);var r=g(n,t,i);yt(n,r.unfitIdx)}function yt(n,t){for(var i=t+1;i<n.length&&!n[i].visibleInJourney;)n[i++].visibleInJourney=!0;while(t>=0&&n[t].visibleInJourney)n[t--].visibleInJourney=!1}function g(n,t,i){var f;i===void 0&&(i=!1);for(var e=t,u=n.length,r=u-1;r>=0&&(i||n[r].visibleInJourney)&&t>=0&&(r===u-1||!n[r+1].subjourney);)f=n[r],f.maximized?t=-1:t-=f.idealWidth,(t>=0||r===u-1)&&--r;return r===u-2&&nt(n,e)&&--r,{freespace:t,unfitIdx:r}}function nt(n,t){var r=n.length,i=n[r-1],u=n[r-2];return r>1&&u.actStyle&&!i.appblade&&!i.subjourney&&t>=i.idealWidth+u.idealWidth&&(!i.widget.options.fullWidthExtensionOptOut||!i.widget.element.hasClass(dt))}function ti(n,t,i){var r=n.length;return n.map((function(n,u){var f=n.options,e=n.getContentWidget().options.bladeStyle()===12,o=!e&&f.useActivationStyle&&(u!==r-1||t&&n.element.hasClass(ot)),s=e||f.displayState()===2&&!o;return{widget:n,idealWidth:n.idealWidth(o),actStyle:o,maximized:s,subjourney:f.asSubJourney,visibleInJourney:i||n.element.hasClass(st)||!n.element[0].style.width,appblade:e}}))}function ii(n,t){n.forEach((function(i,r){var u=n[r-1];!i.appblade&&u&&u.actStyle&&!i.subjourney&&(i.actStyleCanFit=u.displayWidth+i.idealWidth<=t);i.displayWidth=i.maximized?i.actStyleCanFit?t-u.displayWidth:Math.max(i.idealWidth,t):i.idealWidth}))}function pt(n,t){var u=i.isFeatureEnabled("reservehozscroll"),e=n.widget.element,r={},f;u&&ht?r.width=n.displayWidth+"px":(f=n.maximized?"100%":n.idealWidth+"px",n.maximized&&t&&t.actStyle&&(n.actStyleCanFit||!u)&&!n.subjourney&&!n.appblade&&(f="calc(100% - "+t.idealWidth+"px)"),r.width=f,u&&(r["min-width"]=n.maximized?n.idealWidth+"px":""));e.css(r).toggleClass(ot,n.actStyle).toggleClass("fxs-blade-maximized",n.maximized).toggleClass("fxs-blade-appblade",n.appblade)}function wt(n,t,i){for(var r=-1,u;n>0&&r<i.length-1;)n-=i[++r];for(u=n===0?r+1:r,n+=t;n>0&&r<i.length-1;)n-=i[++r];return{firstIdx:u,lastIdx:r}}var lt,at;r.defineProperty(t,"__esModule",{value:!0});var bt=i.Base.Diagnostics.Telemetry,k=window,tt="fxs-journey",it="fxs-journey-layout",rt="fxs-journey-breadcrumb",ut=".fxs-blade",kt="<div class='fxs-trim'><div class='"+rt+"'><\/div><\/div><div class='"+it+"'><\/div>",d="fxs-blade-firstblade",ft="fxs-blade-lastblade",et="fxs-journey-placeholder",dt="fxs-menublade",ot="fxs-blade-has-activation",st="fxs-blade-display-in-journey",ht=y.isIe&&!y.isEdge,ct=2e3;t.scrollLogDebounce=1e3;t.EventNames={addingChild:"addingChild",removingChild:"removingChild"};lt=(function(n){function t(t,i){var r=n.call(this,t)||this,u=new h.ViewModel("fxs-journey-stacklayout-instanceid");return u.orientation(s.Orientation.Horizontal),r.stackLayoutOptions=u,r.applyViewSettings(i),r}return __extends(t,n),t.prototype.getViewSettings=function(){return{NormalState:{layoutSettings:this.stackLayoutOptions.getViewSettings()}}},t.prototype.applyViewSettings=function(n){var t=n&&n.NormalState&&n.NormalState.layoutSettings;t&&this.stackLayoutOptions.applyViewSettings(t)},t})(c.ViewModel);t.ViewModel=lt;at=(function(n){function r(r,y){var nt=n.call(this,r,y)||this,ut,lt,at,yt,dt;nt._childElementCount=f.observable();nt._prevHasLoadingBlades=!1;nt._rePosArgs=[];nt._scrollLeft=0;nt._lastBladeCalcInfo=[];nt._scheduleFocusOnLastChild=p.throttleByAnimationFrame((function(n){if(nt.ltm&&!nt.ltm.isDisposed()&&n&&nt._childElementCount()>0){var t=nt.options.stackLayoutOptions.childElements(),i=t[t.length-1],r=e.Widget.getWidget(i,o.Widget);r.setFocus()}}));nt._loadingBladeIdList=[];r.addClass(tt).html(kt);ut=nt._layoutElem=r.findByClassName(it);nt._layout=new h.Widget(ut,y.stackLayoutOptions);nt._childElementCount(0);lt=new b.ViewModel;at=p.throttleByAnimationFrame((function(){if(nt.ltm&&!nt.ltm.isDisposed()){var n=nt.getBlades();lt.breadCrumbs(u.prototype.concat.apply([],n.map((function(n){return n.getBreadCrumbs()}))))}}));nt.ltm.registerForDispose([nt._layout,new a.Widget(r.findByClassName(rt),lt),function(){nt._cleanElement(tt)},nt.element.setEvents([l.default.fxbladerepos,function(n,t){nt._rePosArgs.push(t);nt._rePositionBlades()},],[s.Widget.layoutUpdatedEventName,function(n){r.trigger(c.Widget.viewSettingsChanged,nt.saveViewSettings());n.stopPropagation()},],[l.default.fxbreadcrumbclick,function(n,t){for(var u,f=t.bladeId,r=nt.getBlades(),i=0;i<r.length;++i)if(u=r[i],u.options.id===f){i<r.length-1&&r[i+1].close(!1);u.goToFirstDetailContent();break}else if(u.goToDetailContent(f)){i<r.length-1&&r[i+1].close(!1);break}},],[l.default.fxbreadcrumbupdate,at,]),]);var ri=r.parent(".fxs-panorama"),ot=i.isFeatureEnabled("reservehozscroll"),ui=p.throttleByAnimationFrame((function(){nt._lastClientHeight=ut[0].clientHeight}));return nt._rePositionBlades=p.throttleByAnimationFrame((function(){var r,f,c,o,y,u,p;if(nt.ltm&&!nt.ltm.isDisposed()){var t=ri.width(),b=nt._rePosArgs.length&&nt._rePosArgs.every((function(n){return n&&n.noExitPeekMode})),tt=nt._rePosArgs.length&&nt._rePosArgs.every((function(n){return n&&n.noScroll}));nt._rePosArgs=[];var it=nt.getBlades(),e=nt._loadingBladeIdList.length>0,rt=it.filter((function(n){var t=n.isMenuBladeLoadingDetailBlade();return e=e||t,n.bladeDefinitionLoaded&&!t})),lt=k.fx.getTimestamp(),at=nt._loadingBladeIdList.some((function(n){return n.ts+ct>lt})),n=ti(rt,at,ot);if(ot&&ii(n,t),r=n.length,f=nt._lastBladeCalcInfo.length,nt._lastBladeCalcInfo=n,r&&n[r-1].actStyle&&k.setTimeout((function(){nt._rePosArgs.push({noExitPeekMode:!0,noScroll:!0});nt._rePositionBlades()}),ct),b&&nt._peekMode)n.forEach((function(n){return pt(n)}));else{if(ot||(f>r?gt(n,t):f===r?vt(n,t):ni(n,t)),c=!1,o=-1,n.forEach((function(t,r){var u=t.widget,f=u.element;pt(t,n[r-1]);f.toggleClass(d,t.visibleInJourney&&!c).removeClass(ft);i.isFeatureEnabled("collapseblade")&&t.widget.options.collapseVisible(t.actStyle);t.actStyle||t.widget.options.collapsed(!1);t.visibleInJourney&&(c=!0,o=r);t.widget.element.toggleClass(st,t.visibleInJourney)})),o>=0&&n[o].widget.element.addClass(ft),(f!==r||nt._prevHasLoadingBlades!==e)&&(r&&!f?nt.trigger(l.default.fxshowjourney):r||e||nt.trigger(l.default.fxshowstartboard),nt._prevHasLoadingBlades=e),nt.trigger(l.default.fxpeekmode,null,{enter:!1}),ot){var a=0,s=0,h=0;if(r){var yt=g(n,t),w=yt.unfitIdx+1,v=n[w];h=n.reduce((function(n,t){return n+t.displayWidth}),0);s=v.idealWidth<t&&!v.subjourney?h-t:n.reduce((function(n,t,i){return n+(i<w?t.displayWidth:0)}),0);v.subjourney&&(y=h-s,y<t&&(a=t-y))}u=ut.findByClassName(et);a>0?(u.length||(u=$("<div class='"+et+"' />"),ut.append(u)),u.css("width",a+"px")):u.remove();r===f&&tt||(Math.max(0,s)!==nt._scrollLeft?(ut.scrollLeft(s),nt._scrollLeftBasis=ut.scrollLeft()):nt._scrollLeftBasis=nt._scrollLeft);ht&&(p=t<h?ut[0].clientHeight+"px":"",n.forEach((function(n){return n.widget.element.css("height",p)})),u.css("height",p))}ui()}}})),v.track(nt.ltm,nt.element,(function(){nt._scrollLeftBasis=ut.scrollLeft();nt._rePosArgs.push({noExitPeekMode:!0,noScroll:!0});nt._rePositionBlades()})),yt=p.throttleByAnimationFrame((function(){var n,t;if(nt.ltm&&!nt.ltm.isDisposed()&&i.isFeatureEnabled("scrollinglogs")&&(n=ut.scrollLeft(),t=ut.width(),n!==nt._scrollLeftBasis)){var r=nt._lastBladeCalcInfo.map((function(n){return{bladeName:n.widget.options.bladeName.name,extensionName:n.widget.options.bladeName.extensionName,width:n.displayWidth}})),u=r.map((function(n){return n.width})),f=wt(nt._scrollLeftBasis,t,u),e=wt(n,t,u);bt.trace({source:w.Source.Shell,action:w.Action.JourneyScroll,data:{blades:r,beforeScroll:f,afterScroll:e,scrollFrom:nt._scrollLeftBasis,scrollTo:n}});nt._scrollLeftBasis=n}})),dt=p.debounce(nt.ltm,yt,t.scrollLogDebounce),nt.ltm.registerForDispose([ut.setEvents([l.default.scroll,function(){nt._scrollLeft=ut.scrollLeft();dt()},]),]),nt}return __extends(r,n),r.prototype.hasChildren=function(){return this._childElementCount()>0},r.prototype.addChild=function(n){this.insertChild(n,undefined)},r.prototype.insertChild=function(n,i){var r=n.element?n.element:n,u=c.Widget.getId(r);this.trigger(t.EventNames.addingChild,null,u);this._scheduleFocusOnLastChild(!1);i>=0?this._layout.insertChild(n,i):this._layout.addChild(n);this._childElementCount(this._childElementCount()+1);this.trigger(l.default.fxbladerepos);this.trigger(l.default.fxbreadcrumbupdate)},r.prototype.removeChild=function(n){var i=this._layout.removeChild(n);return i&&(this.trigger(t.EventNames.removingChild,null,n),this._childElementCount(this._childElementCount.peek()-1),this._scheduleFocusOnLastChild(!0),this.trigger(l.default.fxbladerepos),this.trigger(l.default.fxbreadcrumbupdate)),i},r.prototype.removeChildren=function(n){var r=this,t=this.options,i=t&&t.stackLayoutOptions&&t.stackLayoutOptions.childElements();i&&i.slice(0).forEach((function(t){var i=c.Widget.getId(t);n&&n(i);r.removeChild(i)}))},r.prototype.saveViewSettings=function(){return this.options.getViewSettings()},r.prototype.setFocus=function(){if(this._childElementCount()>0){var t=this.options.stackLayoutOptions.childElements(),i=t[0],n=e.Widget.getWidget(i,o.Widget);n&&n.setFocus()}},r.prototype.getBlades=function(){var n=[];return this._childElementCount()>0&&(n=this.options.stackLayoutOptions.childElements().map((function(n){return e.Widget.getWidget(n,o.Widget)}))),n},r.prototype.close=function(){var n=this.getBlades()[0];n&&n.close(!1)},r.prototype.getFocusedBlade=function(){var n=$(document.activeElement).closest(ut)[0],t=null;return n&&(t=this.getBlades().first((function(t){return t.element[0]===n}))),t},r.prototype.peekMode=function(n){this._peekMode=n;n?this.element.find(ut).removeClass(d).first().addClass(d):(this._rePosArgs.push({noExitPeekMode:!1,noScroll:!0}),this._rePositionBlades())},r.prototype.loadingHint=function(n,t){var r=this._loadingBladeIdList.firstIndex((function(t){return t.id===n})),i=this._loadingBladeIdList[r],u=k.fx.getTimestamp();t?i?i.ts=u:this._loadingBladeIdList.push({id:n,ts:u}):i&&this._loadingBladeIdList.splice(r,1)},r})(c.Widget);t.Widget=at}));
define("MsPortalImpl/UI/Compositions/UI.Composition.DelayedBladeManager",["require","exports","f","i","o","a","ko","MsPortalImpl/UI/UI.DesktopManager","MsPortalImpl/Base/Base.ImplUtils","MsPortalImpl/Widgets/Widgets.Journey","MsPortalImpl/Base/Base.EventTypes"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";function l(n,t){n&&n.enableTrace&&y.verbose(t+" Debug Id: '"+n.debugId+"'.")}var a;u.defineProperty(t,"__esModule",{value:!0});var v=i.Base,y=v.Diagnostics.createLog(n),p=i.getUniqueIdGenerator("DBS");a=(function(){function t(n,t,i){var r,u,f,e;this._journeyEventAttached=!1;this._loadingVisible=!1;this._config=i;this._portalWidget=i.services.desktop.portalWidget;i&&i.enableTrace===undefined&&(i.enableTrace=o.isTraceEnabled);this._loadingHintId=p();t&&(r=void 0,u=void 0,t.delayedBladeSelection?(f=t,r=f.delayedBladeSelection,u=function(n){f.selectedValue(n);f.isSelected(!0)}):t._msPortalFxDelayedBladeSelection&&(e=t,r=e._msPortalFxDelayedBladeSelection,u=function(n){e.selectedItems.splice(0,0,n);e.activateAllSelectedItems()}),r&&this._processDelayedBladeSelection(n,r,u,i.extension))}return t.prototype._loadingHintSignal=function(n){this._loadingVisible!==n&&(this._loadingVisible=n,this._portalWidget.trigger(c.default.fxloadingontopbar,null,{id:this._loadingHintId,cancel:!n}))},t.prototype._processDelayedBladeSelection=function(n,t,i,r){var u=this;t.subscribeAndRun(n,(function(t){t&&(u._journeyEventAttached||(u._journeyEventAttached=!0,n.registerForDispose([u._portalWidget.element.setEvents([h.EventNames.addingChild,function(){return u._abort()},]),function(){u._loadingHintSignal(!1)},])),u._processDelayedBladeSelectionChange(t,i,r))}))},t.prototype._abort=function(){this._currentBladeSelectionPromise=null;this._loadingHintSignal(!1)},t.prototype._processDelayedBladeSelectionChange=function(t,u,o){var c=this,h=this._config,b=h.services.desktop,a=h.getSelectableContainerComposition(),y=a&&(a.detailContainers||[]).filter((function(n){return!(n.flags&1)})),p=f.isArray(y)&&y.map((function(n){return n.id})),w,v;if(p.length>0)if(b.confirmBladesCanClose(p))w=y[0].widget,w&&w.options.loaded(!1),l(h,"Closing all detail blades except the first one."),p.forEach((function(n,t){t&&b.forceCloseBlade(n)}));else{l(h,"Closing of detail blade(s) was cancelled by user, aborting delayed blade selection operation.");this._abort();return}else this._currentBladeSelectionPromise||this._loadingHintSignal(!0);v=this._currentBladeSelectionPromise=Q(t.selectedValuePromise);i.tryImmediateResolve(v,(function(n){v===c._currentBladeSelectionPromise?(c._loadingHintSignal(!1),l(h,"Activate master selectable. Value: {0}.".format(e.toJSON(n))),u(n)):l(h,"Another delayed operation is underway, selected value will be ignored. Value: {0}.".format(e.toJSON(n)))}),(function(t){v===c._currentBladeSelectionPromise&&c._loadingHintSignal(!1);var i=a&&a.toString()||"N/A",u=r.createError("Promise provided to Selectable.delayedBladeSelection/SelectableSet.setCreateDelayedBladeSelection has been rejected. PartId:"+i,{innerErrors:t});s.logToExtension(n,o,2,u)}))},t})();t.DelayedBladeManager=a}));
define("MsPortalImpl/UI/Compositions/UI.Composition.SelectableSetBinder",["require","exports","f","i","o","ko","MsPortalImpl/UI/Compositions/UI.Composition.PropertyBinding","MsPortalImpl/UI/Compositions/UI.Composition.CompositionBinder"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){function a(n,i,r){return n.selectableItems().first((function(n){return t(i,n.data,r)}))}function s(n,i,r){return n().first((function(n){return t(i,r,n)}))}function t(n,t,r){return u.getOwnPropertyNames(n).reduce((function(u,f){var o,s;return u?(o=e.getModelValue(r,f,!0),o.exists)?(s=e.getModelValue(t,n[f],!0),i.deepEquals(o.value,s.value,!0)):!1:u}),!0)}function w(n,t,i,r,u,f){var e=t.itemsWithChildEdits;v(n,e,i,(function(n,t){return n.editScopeId===t.editScopeId&&u(n.item,t.item)}),(function(n){return{editScopeId:n.editScopeId,item:r(n.item)}}),(function(){}),(function(n){f(n.item)}));v(n,i,e,(function(n,t){return t.editScopeId===n.editScopeId&&u(t.item,n.item)}),(function(n){var i=t.selectableItems().first((function(t){return u(t.data,n.item)}));return i?{editScopeId:n.editScopeId,item:i.data}:undefined}),(function(n){f(n.item)}),(function(){}))}function v(n,t,i,r,u,e,o){var s=[];f.reactor(n,(function(){var n=f.utils.compareArrays(s,t());n.forEach((function(n){switch(n.status){case"added":case"retained":if(!i().some((function(t){return r(n.value,t)}))){var t=u(n.value);t&&i.push(t)}break;case"deleted":i.remove((function(t){return r(n.value,t)?(o(t),!0):!1}));e(n.value)}}));s=t.slice(0)}))}var y=r.TriggerableLifetimeManager,h=o.CompositionBinder,p=" - [SelectableSetElement]",c=(function(n){function t(t,i,r,u,f){var e=n.call(this)||this;return e._bindings=[],e._selectablePath=t,e._modelId=i,e._modelIdPostFix=r,e._inputs=u,e._referenceComposition=f,e.registerForDispose((function(){e._bindings.forEach((function(n){n.unbind()}));e._bindings=[]})),e}return __extends(t,n),u.defineProperty(t.prototype,"selectablePath",{get:function(){return this._selectablePath},enumerable:!0,configurable:!0}),t.prototype.createTargetForSelectedItem=function(n){var t=this._bindElement(n,this._inputs,this._referenceComposition);return this._deleteBindings(t),t},t.prototype._bindElement=function(n,t,i,r){var l=[],o=[];t.forEach((function(n){n.valuesFrom[0].referenceType===6?l.push(n):o.push(n)}));var u=r?r:{},a=this._modelId+this._modelIdPostFix,s=new e.PropertyBindings(a,u),c;return this._bindings.push(s),o.length>0&&(c=h.mapInputBindingDefinitions(o,i),c.forEach((function(n){e.setModelValue(u,n.targetProperty,f.observable())})),h.setupPropertyBindings(i,s,c)),l.forEach((function(t){e.getModelValue(u,t.property).exists||e.setModelValue(u,t.property,f.observable());s.mapProperty(t.valuesFrom[0].property,t.property).bind(a,n,!0)})),u},t.prototype._deleteBindings=function(n){var t=this._findBindings(n);t&&(t.unbind(),this._bindings.remove(t))},t.prototype._findBindings=function(n){return this._bindings.first((function(t){return t.targetModel===n}))},t})(y),l;n.SelectableSetBinderBase=c;l=(function(n){function i(i,r,u,f,e,o){var h=n.call(this,i,r,p,e,o)||this,v=!1,y=!1,l=e.reduce((function(n,t){var i=t.valuesFrom;return i&&i.length&&i[0].referenceType===6&&(n[t.property]=i[0].property),n}),{}),c=f.activatedItems,b;return c().forEach((function(n){var t=a(u,l,n);t&&(t.isActivated(!0),t.isSelected(!0),h._bindElement(t.data,e,o,n))})),u.activatedItems().forEach((function(n){var t=s(c,l,n);t||c.push(h._bindElement(n,e,o))})),c().length>h._bindings.length&&(b=h.createChildLifetime(),u.selectableItems.subscribeArrayAdds(b,(function(n){var t=s(c,l,n.data);t===null||h._findBindings(t)||(n.isSelected(!0),n.isActivated(!0),h._bindElement(n.data,e,o,t),h._bindings.length>=c().length&&b.dispose())}))),u.activatedItems.subscribeArrayChanges(h,(function(n){if(!y){var t=s(c,l,n);try{v=!0;t||c.splice(0,0,h._bindElement(n,e,o))}finally{v=!1}}}),(function(n){if(!y)try{v=!0;c.remove((function(i){return t(l,n,i)?(h._deleteBindings(i),!0):!1}))}finally{v=!0}})),c.subscribeArrayChanges(h,(function(n){var t=a(u,l,n);if(t){if(!v)try{y=!0;t.isSelected(!0);t.isActivated(!0)}finally{y=!1}h._findBindings(n)||h._bindElement(t.data,e,o,n)}}),(function(n){if(!v)try{y=!0;u.activatedItems.remove((function(i){return t(l,i,n)?(h._deleteBindings(n),!0):!1}))}finally{y=!1}})),w(h,u,f.itemsWithChildEdits,(function(n){return h._bindElement(n,e,o)}),(function(n,i){return t(l,n,i)}),(function(n){h._deleteBindings(n)})),h}return __extends(i,n),i})(c);n.SelectableSetBinder=l})(s||(s={})),s}));
define("MsPortalImpl/UI/Compositions/UI.Composition.SelectableSet2Binder",["require","exports","f","o","ko","MsPortalImpl/UI/Compositions/UI.Composition.SelectableSetBinder"],(function(n,t,i,r,u,f){"use strict";r.defineProperty(t,"__esModule",{value:!0});var e=i.ViewModels.Internal.Selection2.compareIds,o=" - [SelectableSetElement]",s=(function(n){function t(t,i,r,f,s,h){var c=n.call(this,t,i,o,s,h)||this,l=f.activatedItems,a;return r.activatedItems.subscribeArrayAdds(c,(function(n){var t=l.peek().first((function(t){return e(t._id,n.id)}));t?c._findBindings(t)||c._bindElement(n.data,s,h,t):(t=c._bindElement(n.data,s,h),t._id=u.utils.peekObservable(n.id),l.unshift(t))})),r.activatedIds.subscribeArrayDeletes(c,(function(n){var t=l.peek().firstIndex((function(t){return e(t._id,n)}));t>=0&&l.splice(t,1)[0]})),l.subscribeArrayChanges(c,(function(n){r.activateId(n._id)}),(function(n){c._deleteBindings(n);r.deactivateId(n._id)})),a=f.activatedItems.peek().map((function(n){return n._id})),r.activateIds(a),c}return __extends(t,n),t})(f.SelectableSetBinderBase);t.SelectableSetBinder=s}));
define("MsPortalImpl/UI/Compositions/UI.Composition.BladeOpener",["require","exports","f","o","a","ko","$","MsPortalImpl/Base/Base.Pipeline","MsPortalImpl/Base/Base.Selectable2","MsPortalImpl/Base/Base.SelectableSet2","MsPortalImpl/Extension/Extension.Definition.Locator","MsPortalImpl/UI/Compositions/UI.Composition","MsPortalImpl/UI/Compositions/UI.Composition.BladeOpenerBase","MsPortalImpl/UI/Compositions/UI.Composition.BladeOpener.Helpers","MsPortalImpl/UI/Compositions/UI.Composition.CompositionBinder","MsPortalImpl/UI/Compositions/UI.Composition.DelayedBladeManager","MsPortalImpl/UI/Compositions/UI.Composition.PropertyBinding","MsPortalImpl/UI/Compositions/UI.Composition.SelectableSet2Binder","MsPortalImpl/UI/Compositions/UI.Composition.SelectableSetBinder"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){"use strict";var d;return (function(t){function ct(n){return!!(n.value&&n.value.flags&16)}function ci(){return a.DefaultConfiguration}function lt(n,t,i,r,u){return y.CompositionBinder.mapInputBindingDefinitions(n,t,(function(n){n.source.scope=i;n.opensMultipleBlades=u!==undefined?u:r&&r.isMultiple;n.opensDynamicBlades=r&&!r.blade}))}function li(n,t,i,r){var e,f,o,u=n.referenceComposition;return e=lt(i.additionalInputArguments,u,w.ReferenceScope.MasterContainer),f=lt(r.invocationInputArguments,u,w.ReferenceScope.MasterContainer,i,r.isMultiple)[0],o=y.CompositionBinder.mapInputBindingDefinitions(i.outputArguments,u,(function(n){n.source.scope=w.ReferenceScope.DetailsContainer})),new p.DelayedBladeManager(t,at(n,f),{services:n.services,debugId:n.masterModelId,extension:n.referenceExtension.name,getSelectableContainerComposition:function(){return u&&u.getPartsContainer()}}),{additionalInputs:e,invocationInput:f,invocationOutputs:o,detailsDefinition:i}}function gt(n,t){var i=n.referenceExtension;return t.blade&&t.bladeExtension?ut(t.bladeExtension).withBlade(t.blade):t.blade&&i?ut(i.name).withBlade(t.blade):null}function at(n,t){var i=t.source.property.lastIndexOf("."),r=i>0?t.source.property.substring(0,i):"";return w.getModelValue(n.masterModel,r).value}function vt(){return 0}function nt(n,t,i){var r=hi(i?w.getModelValue(t,i).value:t);return n(r)}function ai(n,t){return nt(rt.isSelectable2,n,t)}function vi(n,t){return nt(s.getOrCreate,n,t)}function yi(n,t){return!!nt(rt.tryGetSelectableViewModelContract,n,t)}function pi(n,t){return nt(rt.tryGetSelectableViewModelContract,n,t)}function ni(n,t){return nt(h.isSelectableSet2,n,t)}function wi(n,t){return nt(h.getSelectableSet2,n,t)}function ti(n,t,i,r,u){var h;if(u){var e=y.CompositionBinder.mapInputBindingDefinitions(i.selectableBindings,t.referenceComposition),c=ki(r,t.initialViewModelState),o=c?c:{},s=new w.PropertyBindings(t.masterModelId+"-[Selection]",o),l=w.getModelValue(t.masterModel,r).value,f=di(l,t.masterModelId);h=function(){f&&f.setInternalSelectedValue(!0)};e.length>0&&(t.configureBindings&&t.configureBindings(e),n.registerForDispose((function(){s.unbind()})),e.forEach((function(n){var t=w.getModelValue(o,n.targetProperty).value;w.setModelValue(o,n.targetProperty,it(t))})),y.CompositionBinder.setupPropertyBindings(t.referenceComposition,s,e),h=function(){f&&(f.lock(),f.setInternalSelectedValue(s.targetModel),e.forEach((function(t){o[t.targetProperty].subscribe(n,(function(){l.isSelected()&&f.setInternalSelectedValue(s.targetModel)}))})))})}return{invocationInputArguments:[{valuesFrom:[{property:r+".value",referenceType:vt(t.referenceComposition)}]}],updateSelectedValue:h||d,isMultiple:!1,viewStatePropertyRemovals:[],success:!0}}function bi(n,t,i,r,u){var f,h,nt=t.masterModel,c,v=ii(r.selectablePath,t.initialViewModelState),y=r.selectablePath+".activatedItems",p,b=bt,l="",it="",s="",g=[],a=!0,o;return f=w.getModelValue(t.masterModel,r.selectablePath).value,f&&f.activatedItems&&(p=f.activatedItems),c=tt(nt,t.initialViewModelState),o=r.selectablePath,u?(s=b+"._sets."+c._sets().length.toString(),l=s+".activatedItems",it=s+".itemsWithChildEdits",c._sets.push(v),g.push(y,o+".selectedItems",o+".itemsWithChildEdits"),f&&p?(h=new k.SelectableSetBinder(o,t.masterModelId,f,v,r.selectableBindings,t.referenceComposition),i.push(h),n.registerForDispose((function(){h.dispose();i.remove(h)}))):(e.error("The view model for '"+t.masterModelId+"' is missing the required property '"+y+"' needed to open the child blade(s) '"+r.blade+"'"),a=!1)):(c._sets().some((function(n,t){return n.path()===o?(s=b+"._sets."+t.toString(),l=s+".activatedItems",!0):!1})),l===""&&(e.error("Failed to find a selectable set reflection for view model '"+t.masterModelId+"'. Selectable set path is '"+o+"'"),a=!1)),{invocationInputArguments:[{valuesFrom:[{property:l,referenceType:vt(t.referenceComposition)}]}],updateSelectedValue:d,isMultiple:!0,viewStatePropertyRemovals:g,success:a}}function ii(n,t){var i=t&&t.internal?t.internal.selectable:null,f,e,o;return i&&i._sets&&(f=r.keys(i._sets).filter((function(n){return!!i._sets[n].path&&!!i._sets[n].activatedItems})).map((function(n){return i._sets[n]})).first((function(t){return t.path===n}))),f&&(u.isArray(f.activatedItems)&&(e=f.activatedItems.slice(0),e.forEach((function(n,t){e[t]=y.CompositionBinder.createObservableModel(n)}))),u.isArray(f.itemsWithChildEdits)&&(o=f.itemsWithChildEdits.slice(0),o.forEach((function(n,t){o[t].item=y.CompositionBinder.createObservableModel(n.item)})))),{path:it(n),activatedItems:g(e),itemsWithChildEdits:g(o)}}function ki(n,t){var u=t&&t.internal?t.internal.selectable:null,f;return u&&u._selectables&&(f=r.keys(u._selectables).filter((function(n){return!!u._selectables[n].path&&!!u._selectables[n].selectedValue})).map((function(n){return u._selectables[n]})).first((function(t){return t.path===n}))),f?i.clone(f.selectedValue,!0):undefined}function tt(n){var t=n.internal.selectable();return t||(t={_sets:g(),_selectables:g(),_dynamicSelections:g(),_selectable2Invocations:{},_contextMenu2Selectables:it({}),commandBar2Selectables:it({}),callbacks:g()},n.internal.selectable(t)),t}function di(n,t){var i=n;return n?(i.lock&&i.setInternalSelectedValue&&i.isLocked||(e.error("selectable is not a framework implementation, view model = '"+t+"'"),i={lock:d,setInternalSelectedValue:function(t){n.selectedValue(t)},isLocked:d}),i):undefined}function gi(n,t,r,u,f){var a=function(t,i,r,u){t.forEach((function(t,f){var o=st(n,t,r),e=i.first((function(n){return pt(o,n.invocationModel)}));u(t,f,e&&e.editScopeId)}))},s,h;if(u.length===0)s=t.itemsWithChildEdits,h=s().length,h>0&&s.splice(0,h);else{var c=i.mapMany(u,(function(n){var o,t,u,f;if(n.path.length-r.length>2)return[];o=n.path[r.length];try{t=i.parseSortedString(o)}catch(s){e.error("Failed to parse journey path segment. Path: '"+JSON.stringify(n.path)+"'. Error: '"+s.message+"'.")}return u=t&&t.model,f=n&&n.value&&n.value.editScope&&n.value.editScope.editScopeId,u&&f?[{invocationModel:u,editScopeId:f}]:[]})),o=t.itemsWithChildEdits().slice(),l=!1;a(t.activatedItems(),c,f,(function(n,t,i){if(i){var r=o.some((function(t){return pt(t.item,n)}));r||(l=!0,o.push({item:n,editScopeId:i}))}}));o.length>c.length&&a(o.map((function(n){return n.item})),c,f,(function(n,t,i){i||(l=!0,o.splice(t,1))}));l&&t.itemsWithChildEdits(o.slice())}}function ri(n,t,i,r){var u=t.getBlades().filter((function(t){return!t.isDisposed()&&t.masterInvocationProperty===i.source.property&&n.isBladeOpenedByMaster(t)})),s=r||v.shouldSkipPromptForBladesWithEdits(n,u),o=s||n.services.desktop.confirmBladesCanClose(u.map((function(n){return n.id}))),f,e;if(o)for(f=u.length-1;f>=0;f--)e=u[f],n.removeOutputBindings(e),t.untrack(e),n.services.desktop.forceCloseBlade(e.id);return o}function nr(){var n=[],t={},i=wt.Callbacks();return{bladeOpenedCallbacks:i,getBlades:function(){return n.slice(0)},track:function(t){(t||[]).forEach((function(t){t&&!n.some((function(n){return n===t}))&&(n.push(t),i.fire(t))}))},wasClosedByMaster:function(n){return t.hasOwnProperty(n&&n.id)},isTracked:function(t){return n.some((function(n){return n===t}))},untrack:function(i){i&&(n.remove(i),t[i.id]=!0)},closed:function(i){i&&(n.remove(i),delete t[i.id])},dispose:function(){n=[];t={};i.empty()}}}function tr(n,t,i,r){return ti(n,t,i,"container.selectable",r)}function ir(n,t,i){tt(n.masterModel,n.initialViewModelState);var r=pi(n.masterModel,i);return r._msPortalFxSelectable2?ui(n,t,i+"._msPortalFxSelectable2"):(i=i+"._msPortalFxSelectable",t[0].valuesFrom[0].property=i+".value",{success:!0,isMultiple:!1,invocationInputArguments:t,viewStatePropertyRemovals:[],updateSelectedValue:d})}function ui(n,t,i){var u=n.masterModel,f=tt(u,n.initialViewModelState),r=vi(u,i),e=i.replace(/\./g,"_");return f._selectable2Invocations[e]=r.value,f.callbacks.push(r.callbacks),t[0].valuesFrom[0].property="internal.selectable._selectable2Invocations."+e,{success:!0,isMultiple:!1,invocationInputArguments:t,viewStatePropertyRemovals:[],updateSelectedValue:d,selectable2:r}}function rr(n,t,i,r,u){var e=wi(t.masterModel,r),s,f,o;return e&&e.dynamicSelectionProvider&&(s=tt(t.masterModel,t.initialViewModelState),u[0].valuesFrom[0].property="internal.selectable._dynamicSelections."+s._dynamicSelections().length,f=g(),s._dynamicSelections.push(f),f.subscribeArrayBulkChanges(n,(function(n,t){t.length&&e.deactivateIds(t.map((function(n){return n._id})))})),o=new ot.CancelationToken,e.activatedItems.subscribe(n,(function(n){var i=f.peek(),r=n.filter((function(n){return!i.some((function(t){return et.compareIds(n.id,t._id)}))})),t=i.filter((function(t){return n.some((function(n){return et.compareIds(n.id,t._id)}))})),u;o.cancel();r.length?(u=r.map((function(n){var t=dt(n.id);return Q(e.dynamicSelectionProvider(t,dt(n.data))).then((function(n){return wt.extend({_id:t},n)}))})),o=new ot.CancelationToken,ot.makeCancelable(Q.all(u),o).then((function(n){n.reverse().forEach((function(n){var i=t.firstIndex((function(t){return et.compareIds(t._id,n._id)}));i>=0?t.splice(i,1,n):t.unshift(n)}));f(t)}))):t.length<i.length&&f(t)}))),{success:!0,isMultiple:!0,invocationInputArguments:u,viewStatePropertyRemovals:[],updateSelectedValue:d}}function ur(n,t,i,r,u){var l,f,g=t.masterModel,a,o,y=ii(i.selectablePath,t.initialViewModelState),p="activatedItems",k=bt,s="",c="",v=!0;return l=w.getModelValue(t.masterModel,i.selectablePath).value,l&&(a=h.getSelectableSet2(l)),o=tt(g,t.initialViewModelState),r?(c=k+"._sets."+o._sets().length.toString(),s=c+".activatedItems",o._sets.push(y),a?(f=new b.SelectableSetBinder(p,t.masterModelId,a,y,i.selectableBindings,t.referenceComposition),u.push(f),n.registerForDispose((function(){f.dispose();u.remove(f)}))):(e.error("The view model for '"+t.masterModelId+"' is missing the required property '"+p+"' needed to open the child blade(s) '"+i.blade+"'"),v=!1)):(o._sets().some((function(n,t){return n.path()===i.selectablePath?(c=k+"._sets."+t.toString(),s=c+".activatedItems",!0):!1})),s===""&&(e.error("Failed to find a selectable set reflection for view model '"+t.masterModelId+"'. Selectable set path is '"+i.selectablePath+"'"),v=!1)),{invocationInputArguments:[{valuesFrom:[{property:s,referenceType:vt(t.referenceComposition)}]}],updateSelectedValue:d,isMultiple:!0,viewStatePropertyRemovals:[],success:v}}function fr(n,t,i,r){var u=at(n,i);if(u&&u.isSelected&&u.isCommandSelected){var f=u.isSelected,o=u.isCommandSelected,e=t.getBlades().filter((function(t){return t.masterInvocationProperty===i.source.property&&n.isBladeOpenedByMaster(t)}));o()&&e.length===0&&o(!1);f()&&e.length===0?(f(!1),r()):!f()&&e.length>0?(r(),f(!0)):r()}}function fi(n,t,i,r,u){var f=t,e=t,o=n.referenceComposition.getPartsContainer().journeyPath.concat([r]),s=i.ambientSettings.getItemsUnderPath(o);f&&f.selectedValue?f.hasChildEdits(s.length>0):e&&e.itemsWithChildEdits&&gi(n.masterModelId,e,o,s,u)}function er(n,t,i,r){var f=t.services.desktop.getActiveJourney(),u,e=t.referenceComposition.getPartsContainer()===t.services.desktop.startBoard,o=null,s=function(r){if(r&&r.originTile){if(e&&r.originTile.id!==t.referenceComposition.id)return;if(u=n.createChildLifetime(),or(t,u,r,i),e)r.onDispose((function(){u&&(u.dispose(),u=null)}))}else return};s(f);e&&(o=function(){u||(f=t.services.desktop.getActiveJourney(),s(f))},r.bladeOpenedCallbacks.add(o),n.registerForDispose((function(){r.bladeOpenedCallbacks.remove(o)})))}function or(n,t,i,r){var f,u,e;if(!i)throw new Error("Journey is required.");f=at(n,r);u={locator:null,masterInvocationProperty:r.source.property};n.configureBindings&&u.bindings&&u.bindings.length&&n.configureBindings(u.bindings);n.configureBladeDescriptor(u);e=v.getBladeOpenerJourneyPathSegment(u);fi(n,f,i,e,r);i.ambientSettings.getObservable().subscribe(t,(function(){fi(n,f,i,e,r)}))}function sr(n,t,i){var r=w.getModelValue(n.masterModel,i.source.property).value,f=ht(r),e;u.isArray(f)?i.opensMultipleBlades?(e=f.firstIndex((function(r){var s=t.getBindableContainer().getViewModel(),f=st(n.masterModelId,r,i),u=l.deepSubset(s,f),e,o;return u&&i.opensDynamicBlades&&(e=a.mapDynamicSelectionToBladeLocator(n.services,r,ut(n.referenceExtension.name),n.masterModelId),o=v.getMappedBladeLocator(n.services,e,f,t.masterContainer),u=t.locator.equals(o)),u})),e>=0&&r.splice(e,1)):r.splice(0,f.length):w.setModelValue(n.masterModel,i.source.property,undefined)}function hr(n,t,i){var r=n.referenceComposition.getPartsContainer();r&&r.detailContainers&&i.track(r.detailContainers.filter((function(i){return n.isBladeOpenedByMaster(i)&&i.masterInvocationProperty===t.source.property})))}function cr(n,t){var u=!n.length,r;i.remove(n,(function(n){return n.id===t.id}),1);n.push(t);r=function(t){t.pipeline.startTask(t.taskArgs).finally((function(){n.shift();n.length&&r(n[0])}))};u&&r(n[0])}function ei(n,t,r,u,f,e){var o,s,c,l=function(n){return n.map((function(n){return i.clone(n,!0,!1)}))},h;if(r.invocationInputArguments&&r.invocationInputArguments.length>0){if(s=r.invocationInputArguments,c=r.isMultiple,s=l(r.invocationInputArguments),!r.blade&&r.invocationInputArguments[0].valuesFrom&&r.invocationInputArguments[0].valuesFrom.length>0){if(o=r.invocationInputArguments[0].valuesFrom[0].property,h=n.masterModel,o=o==="container.selectable"?"container":o,yi(h,o))return ir(n,s,o);if(ai(h,o))return ui(n,s,o);if(ni(h,o))return rr(t,n,r,o,s);a.isSelectableSet(h,o)?(c=!0,s[0].valuesFrom[0].property=o+".activatedItems"):a.isSelectable(h,o)&&(c=!1,s[0].valuesFrom[0].property=o+".value")}return{success:!0,isMultiple:c,invocationInputArguments:s,viewStatePropertyRemovals:[],updateSelectedValue:d}}return lr(n,t,r,u,f,e)}function lr(n,t,i,r,u,f){var o={success:!0,isMultiple:!1,invocationInputArguments:null,viewStatePropertyRemovals:[],updateSelectedValue:d};if(i.selectablePath)if(ni(n.masterModel,i.selectablePath)){if(!i.selectableBindings||!i.selectableBindings.some((function(n){return n.valuesFrom&&n.valuesFrom.length>0?n.valuesFrom[0].referenceType===6:!1})))return o.success=!1,e.error("The view model '"+n.masterModelId+"' has a selectable source '"+i.selectablePath+"' that is a selectable set.  There must be at least one <BladeInput> which has SelectedItem as the Source for a selectable set."),o;o=ur(t,n,i,r,f)}else if(a.isSelectableSet(n.masterModel,i.selectablePath)){if(!i.selectableBindings||!i.selectableBindings.some((function(n){return n.valuesFrom&&n.valuesFrom.length>0?n.valuesFrom[0].referenceType===6:!1})))return o.success=!1,e.error("The view model '"+n.masterModelId+"' has a selectable source '"+i.selectablePath+"' that is a selectable set.  There must be at least one <BladeInput> which has SelectedItem as the Source for a selectable set."),o;o=bi(t,n,u,i,r)}else a.isSelectable(n.masterModel,i.selectablePath)?o=ti(t,n,i,i.selectablePath,r):(o.success=!1,e.error("The view model for '"+n.masterModelId+"' with property '"+i.selectablePath+"' must be a Selectable or SelectableSet to open the child blade(s) '"+i.blade+"'"));else o=tr(t,n,i,r);return o}var rt=FxImpl,yt=rt.TriggerableLifetimeManager,oi=i.Base.Diagnostics,si=i.ViewModels,et=si.Internal.Selection2,ot=i.Base.Promises,st=v.mapMasterModelToBladeModel,pt=i.deepEquals,wt=jQuery,e=oi.createLog(n),d=i.noop,bt="internal.selectable",kt="./UI.Composition.BladeOpener",it=f.observable,g=f.observableArray,hi=f.unwrap,dt=f.utils.peekObservable,ht=f.toJS,ut=c.Locator.forExtension,ft=o.createDescriptor();ft.registerAsyncFactory("./UI.Composition.BladeInvocationHandler",(function(n,t,i,r,u){return t.factory(n,i,r,u)}),(function(n,t,i){return!ct(i)}),n);ft.registerAsyncFactory(kt+".Selectable2",(function(n,t,i,r){return t.selectable2InvocationHandler(i,r)}),(function(n,t,i){return t.selectable2?!ct(i):!1}),n);ft.registerAsyncFactory(kt+".PendingBladeHint",(function(n,t,i,r){return t.getHandler(i,r)}),(function(n,t,i){return ct(i)}),n);t.create=function(n){var f=[],o=[],s=[],c=[],t=i.extend2(ci(),n),r=nr(),h=new w.PropertyBindings(t.masterModelId+"-[Invocation]",{}),u;return r.bladeOpenedCallbacks.add(t.onBladeOpened),u=new yt,u.registerForDispose([function(){h.unbind()},r,]),u.getInitialState=function(){return t.initialViewModelState},u.registerInvocationProperty=function(n,i,l){var p=u.createChildLifetime(),tt=null,rt=t.referenceComposition.getPartsContainer(),ut=gt(t,n),b=ei(t,p,n,!0,o,s),v,y={container:rt,detailsBladeLocator:ut,disableInvocation:i,isThrottled:it(!1),detailBladesTracker:r,resettingMasterArrayValue:!1,registrationInfo:undefined,prevValue:undefined,previousInvocationPromise:undefined},k=function(){return ht(w.getModelValue(t.masterModel,v.source.property).value)},nt,d,g;if(y.selectable2=b.selectable2,nt=ft.createPipeline(p,t,y),b.success)return y.registrationInfo=li(t,p,n,b),v=y.registrationInfo.invocationInput,y.prevValue=k(),f.push(v),hr(t,v,r),fr(t,r,v,(function(){b.updateSelectedValue()})),er(p,t,v,r),i&&i.subscribe(p,(function(n){n?(a.traceInvocationChange(e,"Disabled listening for invocation property change.",t,v,k()),ri(t,r,v,!0)):(y.prevValue=k(),y.prevValue!==undefined&&e.error("Selected value should be undefined when enabling of selectability for '"+t.masterModelId+"'.  Blade will not be automatically opened.",y.prevValue))})),d=v.source.property,g=h,w.setModelValue(g.targetModel,d,ht(y.prevValue)),tt=g.addProperty(d).bind(t.masterModelId,t.masterModel,!!y.selectable2,(function(n){var i=k(),r={value:i,invocationInput:v,propertyChanges:n};a.traceInvocationChange(e,"Detected invocation property change.",t,v,i);y.selectable2?cr(c,{id:d,pipeline:nt,taskArgs:r}):nt.startTask(r)}),(function(n){e.error("[Detail Blade Invocation] Failed to bind changes from invocation property in viewmodel to launch detail blade. Error: "+n)})),p.registerForDispose((function(){t.services.desktop.activeJourney()&&ri(t,r,v,!0);g.removeProperty(tt);f.remove(v)})),l&&l.registerForDispose(p),{viewStatePropertyRemovals:b.viewStatePropertyRemovals}},u.notifyDetailBladesOpened=function(n){r.track(n)},u.notifyDetailBladeClosed=function(n){if(r.isTracked(n)){var u=r.wasClosedByMaster(n),i=f.first((function(t){return t.source.property===n.masterInvocationProperty}));t.removeOutputBindings(n);r.closed(n);i?u||sr(t,n,i):e.error("Unable to react to detail blade '"+(n&&n.toString())+"' closing. No invocation argument on this part that opened the blade. Invocations: '"+JSON.stringify(f)+"'")}},u.modifyViewStateProperties=function(n,t){return n.filter((function(n){return!t.viewStatePropertyRemovals.first((function(t){return n===t}))}))},u.createBladeModelForSelectedItem=function(n,i){var f=n.invocationInputArguments,l=new yt,v=ei(t,l,n,!1,o,s),y=lt(v.invocationInputArguments,t.referenceComposition,w.ReferenceScope.MasterContainer,n)[0],r={},c,h=gt(t,n),p=function(){var n=t.referenceComposition;return n.containerModel||n.getBindableContainer().getViewModel()};return v.updateSelectedValue(),h||n.blade||(h=a.mapDynamicSelectionToBladeLocator(t.services,i,ut(t.referenceExtension.name),t.masterModelId)),f&&f.length&&f[0].property?r[y.targetProperty]=i:(c=i,!f&&n.selectablePath&&o.some((function(t){return t.selectablePath===n.selectablePath?(c=t.createTargetForSelectedItem(i),!0):!1})),r=st(t.referenceComposition.locator.toString(),c,y)),(n.additionalInputArguments||[]).forEach((function(n){if(n.valuesFrom&&n.valuesFrom.length){var f=n.property,i=n.valuesFrom[0];i.referenceType!==0||i.part&&i.part!==t.referenceComposition.locator.name?i.referenceType===1?r[f]=p()[i.property]:(r[f]=undefined,e.warning("Part Selection: Blade "+h+" Property "+f+" has an input that's from part "+i.part+" instead of its list part "+u+" or the blade.")):r[f]=w.getModelValue(t.masterModel,i.property).value}})),l.dispose(),{model:r,locator:h}},u};t.createOrGetInternalSelectionState=tt})(d||(d={})),d}));
define("MsPortalImpl/UI/Compositions/UI.Composition.Selectable2Registrar",["require","exports","f","i","o","a","ko","$","MsPortalImpl/Base/Base.Selectable2","Fx/Composition/Selectable","MsPortalImpl/UI/Compositions/UI.Composition.BladeOpener","MsPortalImpl/Base/Base.Events","MsPortalImpl/Base/Base.EventTypes","MsPortalImpl/Base/Base.ImplUtils"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){"use strict";function lt(n,t,r){var u=new i.Map;at(n,u,t,r)}function at(n,t,i,r){e.computed(n,(function(){var n=et(i);e.ignoreDependencies((function(){var i=[];t.forEach((function(t,r){n.has(r)||i.push(t)}));i.forEach((function(n){t.delete(n.selectable)}));n.forEach((function(n,i){t.has(i)||(vt(n,r),t.set(i,n))}))}))})).extend({throttle:100})}function vt(n,t){var i=t.getBladeOpener(),r={invocationInputArguments:[{valuesFrom:[{referenceType:0,property:n.path}]}]},u=w(n.selectable);i.registerInvocationProperty(r,undefined,u)}function yt(n,t,r,u){var f=n.filter((function(n){return n.type===10}));if(f.length===0)return!0;if(!pt(f,r.locator))return!1;var h=r.getBladeOpener(),c=ct(t,h.getInitialState()),o=c[u],s={};return f.forEach((function(n){var u=n.selectable,r=w(u);s[r.id]=u;r.registerForDispose({dispose:function(){var n=i.clone(o(),!1);delete n[r.id];o(n)}});e.reactor(r,(function(){r.isSelected()&&t.internal.activeOpenBladeCommand(n)}))})),o(s),!0}function pt(n,t){function f(i){var u=n.filter((function(n){return!n[i]}));return u.length&&g.error(r.format(u.length,i,t)),!!u.length}var r,u,i;return(n=n||[],r="Found {0} OpenBladeCommmand2 items with a null or undefined '{1}' property. Source: '{2}'",["id","selectable"].some(f))?!1:(u=n.map((function(n){return n.id})),i=ti(u),i.length)?(g.error("Found multiple OpenBladeCommand2 items have the same id. Ids must be unique. Duplicate Id(s): '{0}', Source: '{1}'".format(JSON.stringify(i),t)),!1):!0}function it(n,t){var f;if(!t)return undefined;var e=r.shellInterface(t.container),s=e.selectables(),u=s[n];return u||(f=o.extend(!1,s),u=f[n]=new h.Selectable2({supplyBladeReference:i.noop}),e.selectables(f)),w(u)}function wt(n,t){var u=b(n,t),r=i.Base.ProxiedObservables.data(n,k),f;return r||(r=k+rt++,i.Base.ProxiedObservables.data(n,k,r)),f=it(r,u),{activated:f.value,invokeClick:function(n,i){f.invokeClickCallback(2,u,n,i,l.getOrCreateFxElement(t[0],u.internal.elements))}}}function ut(n,t,i){var r=b(n,t),f,e,u;if(r&&(f=gt(r,n,!0),f))return e=f.replace(/\./g,"_"),u=it(e,r),u.onClick=function(){u.invokeClickCallback(1,r,n,i)},u}function bt(n,t,i){var r=ut(n,t,o.noop),u=r,f=b(n,t);return u.onClick=function(t){r.invokeClickCallback(3,f,n,i,undefined,t.item,t.metadata)},u}function kt(n,t){var r=n.parents(".fxs-part-content"),i=function(i){r.find("."+i).removeClass(i);t&&n.addClass(i)};i(d);i(tt)}function dt(t,i,u){var l=i.$data,f=o(t),y=t.tagName==="A",h=wt(l,f),s,c;y&&!t.getAttribute("href")&&t.setAttribute("href","#");h&&(s=new r.TriggerableLifetimeManager,e.utils.domNodeDisposal.addDisposeCallback(t,(function(){s.dispose()})),s.registerForDispose(f.setEvents([a.default.click,function(i){y&&"#"===t.getAttribute("href")&&i.preventDefault();var f;try{f=u();h.invokeClick(l,f)}catch(e){v.logToExtension(n,t,2,r.createError("fxclick binding Error with onClick handler "+f,{innerErrors:e,data:{databind:o(t).attr("data-bind")}}))}i.stopPropagation()},])),h.activated.subscribeAndRun(s,(function(n){var t=!!n;kt(f,t);t&&f.trigger(o.Event(a.default.fxselectableactivated,{activated:h.activated}))})),c=i.$tabIndex,c&&c.subscribeAndRun(s,(function(n){f.attr("tabindex",n)})))}function ft(n,t,i){try{var r=e.unwrap(n[t]);return(!i&&f.isArray(r)||typeof r!="object")&&(r=undefined),r}catch(u){return undefined}}function y(n,t){return n?n+"."+t:t}function et(n){for(var e=new i.Map,s={path:undefined,value:n,unprocessedChildProperties:p(n)},r=[s],u,f,t,o;r.length;)u=r[r.length-1],u.unprocessedChildProperties.length?(f=u.unprocessedChildProperties.shift(),t=ft(u.value,f),t&&(ot.isSelectable2(t)?e.set(t,{path:y(u.path,f),selectable:t}):r.length<nt&&(o={path:y(u.path,f),value:t,unprocessedChildProperties:p(t)},r.push(o)))):r.pop();return e}function gt(n,t,i){for(var s=undefined,c={path:undefined,value:n,unprocessedChildProperties:p(n)},r=[c],u,o,e,f,h;r.length;)if(u=r[r.length-1],o=u.unprocessedChildProperties,o.length){if(e=o.shift(),f=ft(u.value,e,i),f)if(f===t){s=y(u.path,e);break}else r.length<nt&&(h={path:y(u.path,e),value:f,unprocessedChildProperties:p(f)},r.push(h))}else r.pop();return s}function p(n){return u.keys(n).filter((function(n){return!ni(n)}))}function ni(n){return n.charCodeAt(0)===95&&!(n.charCodeAt(1)===109&&n.charCodeAt(2)===115&&n.charCodeAt(3)===80&&n.charCodeAt(4)===111&&n.charCodeAt(5)===114&&n.charCodeAt(6)===116&&n.charCodeAt(7)===97&&n.charCodeAt(8)===108&&n.charCodeAt(9)===70&&n.charCodeAt(10)===120)}function ti(n){var t={},i=[];return(n||[]).forEach((function(n){!t[n]||i.push(n);t[n]=!0})),i}var d,tt,rt;u.defineProperty(t,"__esModule",{value:!0});var ot=r,st=i.Base.Diagnostics,ht=i.ViewModels,ii=ht.Toolbars,ct=c.createOrGetInternalSelectionState,w=s.getOrCreate,b=s.findExtensionViewModel,g=st.createLog(n),k="fxclick",nt=15;t.autoRegisterSelectables=lt;t.registerOpenBladeCommands=yt;d="msportalfx-activated";tt="ext-"+d;rt=0;t.getSelectableWithClickHandler=ut;t.getListSelectableWithClickHandler=bt;t.attachFxClickHandler=dt;t.discoverSelectables=et}))