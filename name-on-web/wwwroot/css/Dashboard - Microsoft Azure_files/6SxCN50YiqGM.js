define("Users/ViewModels/UserDetails/UserDetailsMenu",["require","exports","f","o","ko","Fx/Composition/Selectable","Fx/Composition/MenuBlade","_generated/BladeReferences","_generated/Microsoft_Azure_AD/BladeReferences","Directories/ViewModels/ActiveDirectoryMenuBladeViewModel","_generated/Svg","AuthenticationMethods/AuthenticationMethodsResources","CommonConstants","CommonResources","Reports/Constants","Shared/Utilities","Users/Constants","Users/UsersResources","Permissions/Permission","AdminUnit/AdminUnitConstants"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){"use strict";r.defineProperty(t,"__esModule",{value:!0});var nt=i.getEnvironmentValue,g=(function(){function n(){this.title=u.observable(b.loadingText);this.subtitle=b.userDetailsMenuBladeTitle}return n.prototype.onInitialize=function(){var n=this,t=this.context.parameters;return this._initialize(),this._userEntityView.fetch({userId:t.userId}).then((function(){var t=n._userEntityView.item().displayName();n.title(t)})),Q()},n.prototype._initialize=function(){this._initializeQuery();this._initializeMenu()},n.prototype._initializeQuery=function(){var n=this.context,t=n.container,i=n.model;this._userEntityView=i.userEntity.createView(t)},n.prototype._initializeMenu=function(){var n=this.context.parameters,i=this._initializeMenuGroups(),t;t=n.menuId?n.menuId===a.menuIds.overviewMenuId?a.menuIds.profileMenuId:n.menuId:a.menuIds.profileMenuId;this.viewModel=e.ViewModel2.create(this.context.container,{showSearch:!1,defaultId:t,groups:i})},n.prototype._initializeMenuGroups=function(){return[this._initializeManageMenuGroup(),this._initializeActivityMenuGroup(),this._initializeSupportTroubleShootMenuGroup()]},n.prototype._initializeManageMenuGroup=function(){var f=this.context,t=f.parameters,e=f.container,n={userId:t.userId},r={objectId:t.userId};return{displayText:v.menuGroupManage,id:a.menuIds.manageGroupID,items:[{id:a.menuIds.profileMenuId,displayText:v.menuItemProfile,icon:i.Base.Images.Person(),supplyBladeReference:function(){return new o.UserProfileV2BladeReference(n)}},{id:a.menuIds.administrativeRoleMenuId,displayText:v.menuItemAdministrativeRole,icon:c.PortalExtension.ADExtension.Client.Users.Images.directoryrole,supplyBladeReference:function(){return p.showOldUserRolesBlade()?new o.UserDirectoryRolesBladeReference(n):new o.UserRolesBladeReference(n)}},{id:a.menuIds.adminUnitMenuId,displayText:v.menuItemAdminUnit,icon:c.PortalExtension.ADExtension.Client.AdminUnit.Images.adminUnit,supplyBladeReference:function(){return new o.DirectoryMemberAdminUnitBladeReference({directoryMemberObjectId:t.userId,directoryMemberType:d.AdminUnitConstants.AdminUnitMemberType.users})},visible:u.observable(p.isAdminUnitEnabled()),enabled:u.observable(!0)},{id:a.menuIds.groupsMenuId,displayText:v.menuItemGroups,icon:c.PortalExtension.ADExtension.Client.Groups.Images.defaultGroup_nobkg,supplyBladeReference:function(){return new o.GroupMembershipsBladeV2Reference(r)}},{id:a.menuIds.assignedApplicationsMenuId,displayText:v.menuItemAssignedApplications,icon:c.PortalExtension.ADExtension.Client.ApplicationManagement.Images.allApps,supplyBladeReference:function(){return new o.UserApplicationsBladeReference(r)}},{id:a.menuIds.licensesMenuId,displayText:v.menuItemLicenses,icon:c.PortalExtension.ADExtension.Client.Licenses.Images.licenses,supplyBladeReference:function(){return new o.UserProductsBladeV2Reference(r)}},{id:a.menuIds.devicesMenuId,displayText:v.menuItemDevices,icon:c.PortalExtension.ADExtension.Client.Groups.Images.genericDevice,supplyBladeReference:function(){return p.isGlobalDeviceManagementEnabled()?new o.AllDevicesBladeReference(n):new o.UserDevicesBladeReference(n)},visible:u.observable(nt("enableUserDevicesList"))},{id:a.menuIds.FIDODevicesMenuId,displayText:v.userAuthenticationDevices,icon:c.PortalExtension.ADExtension.Client.Groups.Images.genericDevice,supplyBladeReference:function(){return new o.UserFIDODevicesBladeReference(n)},visible:u.observable(p.isAuthenticationDevicesEnabled())},{id:a.menuIds.subscriptionResourcesMenuId,displayText:v.menuItemAzureSubscriptionResources,icon:i.Base.Images.Polychromatic.Key(),supplyBladeReferenceAsync:function(){var n=[{objectType:k.TargetObjectType.AzureResource,actionType:k.ActionType.Read}];return k.Permission.CheckMultiplePermissions(n,e).then((function(n){return n[0].isApplicable?new s.ManageAzureResourcesBladeReference({objectId:t.userId}):new o.NotAuthorizedMessageBladeReference}))},visible:u.observable(nt("isManageAzureResourcesEnabled"))},{id:a.menuIds.authenticationMethods.user.authMethods,displayText:l.MenuItem.authMethods,icon:i.Base.Images.Polychromatic.SslCustomDomains(),supplyBladeReference:function(){return new o.UserAuthenticationMethodsBladeReference({userId:t.userId})},visible:u.observable(p.isUserAuthenticatonMethodsEnabled()),enabled:u.observable(!0)}]}},n.prototype._initializeActivityMenuGroup=function(){var n=this.context.parameters;return{id:a.menuIds.activityGroupID,displayText:v.menuGroupActivity,items:[{id:a.menuIds.signInsMenuId,displayText:v.menuItemSignIns,icon:c.PortalExtension.ADExtension.Client.Users.Images.signIn,supplyBladeReference:function(){return h.signInsBladeReference({userObjectId:n.userId})}},{id:a.menuIds.auditMenuId,displayText:v.menuItemAudit,icon:i.Base.Images.Polychromatic.Log(),supplyBladeReference:function(){return new o.AuditEventsBladeReference({timeRangeType:a.DateRangePickerValues.Last1Month,userObjectId:n.userId,activityType:y.Audit.Options.user})}}]}},n.prototype._initializeSupportTroubleShootMenuGroup=function(){return{id:a.menuIds.supportTroubleshoot,displayText:v.menuGroupSupport,items:[{id:a.menuIds.troubleShootMenuId,displayText:v.troubleshoot,icon:c.PortalExtension.ADExtension.Client.Directories.Images.troubleshootIcon,supplyBladeReference:function(){return new f.ParameterProviderBladeReference(a.SupportAndTroubleshoot.troubleshootBladeName,a.SupportAndTroubleshoot.extensionName,{parameters:{assetId:a.SupportAndTroubleshoot.assetId.format(w.usersResourceTag)},supplyProviderConfig:function(){return{provisioningConfig:{provisioningEnabled:!0,dontDiscardJourney:!0}}},receiveResult:function(){return null},supplyInitialData:function(){return""}},null)},visible:u.observable(p.isTroubleShootEnabled())},{id:a.menuIds.supportRequestMenuId,displayText:v.newSupportRequest,icon:c.PortalExtension.ADExtension.Client.Directories.Images.supportRequest,supplyBladeReference:function(){return new f.ParameterProviderBladeReference(a.SupportAndTroubleshoot.supportBladeName,a.SupportAndTroubleshoot.extensionName,{parameters:{assetId:a.SupportAndTroubleshoot.assetId.format(w.usersResourceTag)},supplyProviderConfig:function(){return{provisioningConfig:{provisioningEnabled:!0,dontDiscardJourney:!0}}},receiveResult:function(){return null},supplyInitialData:function(){return""}},null)},visible:u.observable(p.isSelfSupportRequestEnabled())}]}},n})();g=__decorate([e.Decorator({forExport:!0})],g);t.UserDetailsMenuBlade=g}));
define("_generated/adapters/blade/UserDetailsMenuBladeAdapter",["require","exports","o","Fx/Composition/ViewModelAdapters","Users/ViewModels/UserDetails/UserDetailsMenu"],(function(n,t,i,r,u){"use strict";i.defineProperty(t,"__esModule",{value:!0});var f=(function(n){function t(t,i,r){return n.call(this,t,i,r,u.UserDetailsMenuBlade)||this}return __extends(t,n),t})(r.ViewModelAdapter);t.UserDetailsMenuBladeAdapter=f}));
define("_generated/Blades/UserDetailsMenuBlade",["require","exports","_generated/adapters/blade/UserDetailsMenuBladeAdapter"],(function(){"use strict";var n;return (function(n){n.blade={name:"UserDetailsMenuBlade",inputs:["userId"],optionalInputs:["menuId"],viewModelName:"Users$UserDetailsMenuBladeAdapter",lenses:[],width:51,locked:!0,pinnable:!0,initialDisplayState:2,menuBlade:{isV2:!0},attributes:1}})(n||(n={})),n}))