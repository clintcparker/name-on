define("ApplicationManagement/ApplicationProxy/Utilities/GeneralUtils",["require","exports","f","o","$","ApplicationManagement/ApplicationManagementResources","CommonResources","ApplicationManagement/ApplicationProxy/Constants"],(function(n,t,i,r,u,f,e,o){"use strict";function h(n){var t=document.createElement("a");return document.body.appendChild(t),t.href=n,document.body.removeChild(t),t}function y(n){return h(n).protocol+"//"}function p(n,t){var r=h(n).hostname,i=r.substring(0,r.indexOf("."));return c(n,t)||(i=i.substring(0,i.lastIndexOf("-"))),decodeURIComponent(i)}function w(n){var t=n.substring(n.indexOf(":")+3),i,r;return t.indexOf("*.")!==0?"":(i=n.substring(0,n.indexOf(":")+3),r=t.substring(2),i+r)}function b(n){return n?n.indexOf("*")>-1:!1}function c(n,t){var i;return i=u.grep(t,(function(t){return l(n,t.name())})),i.length>0}function l(n,t){var i=n.toLowerCase(),r=t.toLowerCase();return i.indexOf(r)>=0}function k(n,t,i,r){var u=v(n,t,i,r),f=u.filter((function(t){return n.toLowerCase().indexOf(t.toLowerCase())!==-1}));return f.reduce((function(n,t){return n&&n.length>t.length?n:t}))}function a(n,t){var i=n.split(".",1)[0].toLowerCase();return t.format(i)}function d(n,t,i){var r=t.split(".",1)[0].toLowerCase();return i.format(n,r).toLowerCase()}function g(n){return"."+n.toLowerCase()+"/"}function v(n,t,i,r){var f=a(t,r),u=[];return i&&(u=i.map((function(n){return"."+n.name().toLowerCase()+"/"}))),u.push(f),u}function nt(n){if(n.length<7||n.indexOf("http")<0)return"";return h(n).pathname.slice(1)}function tt(n){return n?n.replace(/[^a-zA-Z0-9]/g,"").toLocaleLowerCase():""}function it(n,t){var r="",u;if(!i.isNullOrUndefined(n.responseJSON)&&!i.isNullOrUndefined(n.responseJSON.ClientData)&&!i.isNullOrUndefined(n.responseJSON.ClientData.errorCode)){u=n.responseJSON.ClientData.errorCode.toLocaleLowerCase().trim();switch(u){case t.internalUrlDuplicate().value().toLocaleLowerCase():r=f.appProxyErrorInternalUrlDuplicate;break;case t.externalUrlDuplicate().value().toLocaleLowerCase():r=f.appProxyErrorExternalUrlDuplicate;break;case t.externalUrlDuplicateMSODS().value().toLocaleLowerCase():r=f.appProxyErrorExternalUrlMSODSDuplicate;break;case t.groupNameExists().value().toLocaleLowerCase():r=f.appProxyConnectorGroupNameExists;break;case t.applicationUniqueConstraintViolation().value().toLocaleLowerCase():r=f.appProxyErrorExternalUrlAnotherTenantDuplicate;break;case t.invalidCertificateNotX509().value().toLocaleLowerCase():r=f.appProxyInvalidCertificateError;break;case t.notGlobalAdminUnauthorizedAccess().value().toLocaleLowerCase():r=f.appProxyUnauthorizedAppDeleteError;break;case t.missingPremiumLicenseUnauthorizedAccess().value().toLocaleLowerCase():r=f.appProxyNotLicensedAppDeleteError;break;case t.applicationsOrConnectorsAssignedBadRequest().value().toLocaleLowerCase():r=f.appProxyConnectorGroupHasOldConnectorsError;break;case t.invalidCertificateRevocationProcessFailure().value().toLocaleLowerCase():r=f.appProxyInvalidCertRevocationProcessFailureError;break;case t.invalidCertificateRevocationServerOffline().value().toLocaleLowerCase():r=f.appProxyInvalidCertRevocationServerOfflineError;break;case t.invalidCertificateNoPrivateKey().value().toLocaleLowerCase():r=f.appProxyInvalidCertNoPrivateKeyError;break;case t.invalidCertificateIsSelfSigned().value().toLocaleLowerCase():r=f.appProxyInvalidCertIsSelfSignedError;break;case t.invalidCertificateIsRevoked().value().toLocaleLowerCase():r=f.appProxyInvalidCertIsRevokedError;break;case t.invalidCertificateIsFuture().value().toLocaleLowerCase():r=f.appProxyInvalidCertIsFutureError;break;case t.invalidCertificateIsExpired().value().toLocaleLowerCase():r=f.appProxyInvalidCertIsExpiredError;break;case t.invalidCertificateInvalidEKU().value().toLocaleLowerCase():r=f.appProxyInvalidCertInvalidEKUError;break;case t.invalidCertificateHostNameMismatch().value().toLocaleLowerCase():r=f.appProxyInvalidCertHostNameMismatchError;break;case t.invalidCertificateGeneralChainValidationError().value().toLocaleLowerCase():r=f.appProxyInvalidCertGeneralChainValidationError;break;case t.invalidCertificateGeneralError().value().toLocaleLowerCase():r=f.appProxyInvalidCertGeneralError}}return r}function rt(n){if(!i.isNullOrUndefined(n.responseJSON)&&!i.isNullOrUndefined(n.responseJSON.ClientData)){var r=n.responseJSON.ClientData,t=r.errorCode.toLocaleLowerCase().trim();if(t==="adalautherror_interaction_required")return f.msGraphErrorDueToMFA;if(t==="adalautherror_invalid_grant")return f.msGraphErrorDueToPolicy;if(s(n,403)||s(n,401))return e.errorForbidden;if(s(n,404))return f.applicationProxyNotFoundErrorText;if(s(n,400))return e.badRequest}return e.retry}function s(n,t){return!i.isNullOrUndefined(n)&&!i.isNullOrUndefined(n.status)&&n.status===t?!0:!1}function ut(n){var t=n.toLowerCase().trim();return t===o.unassignedConnectorGroupName.toLowerCase().trim()}r.defineProperty(t,"__esModule",{value:!0});t.parseUrl=h;t.getUriSchemeString=y;t.getHostPrefix=p;t.getUrlWithoutWildcard=w;t.isWildCardUrl=b;t.isUsingCustomDomain=c;t.isUrlUsingDomain=l;t.getHostSuffix=k;t.generateDefaultSuffix=a;t.generateDefaultFrontEndUrl=d;t.generateCustomDomainSuffix=g;t._generateSuffixList=v;t.getPath=nt;t.getInitialUrlPrefixFromAppName=tt;t.parseApplicationProxyError=it;t.parseAppProxyServerLoadErrors=rt;t.didAjaxFailWithHttpStatus=s;t.isUnassignedConnectorGroup=ut}))