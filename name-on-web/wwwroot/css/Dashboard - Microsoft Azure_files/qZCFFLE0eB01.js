define("Core/TypeScript/TFS.Host",["require","exports","o","$","Core/TypeScript/TFS.Diag"],(function(n,t,i,r,u){"use strict";var c,f,o,l;i.defineProperty(t,"__esModule",{value:!0}),(function(n){n[n.None=0]="None";n[n.Deployment=1]="Deployment";n[n.Application=2]="Application";n[n.Collection=4]="Collection";n[n.Project=8]="Project";n[n.Team=16]="Team";n[n.ApplicationAll=15]="ApplicationAll";n[n.All=31]="All"})(c=t.NavigationContextLevels||(t.NavigationContextLevels={})),(function(n){n[n.Parent=-1]="Parent";n[n.Unknown=0]="Unknown";n[n.Deployment=1]="Deployment";n[n.Application=2]="Application";n[n.ProjectCollection=4]="ProjectCollection"})(f=t.TeamFoundationHostType||(t.TeamFoundationHostType={}));o=(function(){function n(n){this._hostsContext=n.serviceHosts;this._currentIdentity=n.currentIdentity}return n.prototype.getCurrentIdentity=function(){return this._currentIdentity},n.prototype.getHostUrl=function(){return this.getHost().uri},n.prototype.getHost=function(n){return typeof n=="undefined"?this._hostsContext.serviceHost:n===f.Deployment?this._hostsContext.deployment||null:n===f.Application?this._hostsContext.account||null:n===f.ProjectCollection?this._hostsContext.collection||null:n===f.Parent?this._hostsContext.collection?this._hostsContext.account:this._hostsContext.deployment:null},n.prototype.getActionUrl=function(n,t,i){return this.getHost().uri+this._constructActionUrl(n,t,i)},n.prototype._constructActionUrl=function(t,i,u){var o=[],a,v,h,c,e,s,y,l;if(e=r.extend({},u),this.getHost().hostType===f.ProjectCollection&&(a=e.project,a&&(o.push(encodeURIComponent(a)),v=e.team,v&&o.push(encodeURIComponent(v)))),delete e.project,delete e.team,h=e.area||"",delete e.area,h)if(r.isArray(h))for(c=h,c.length>0&&o.push(encodeURIComponent("_"+c[0])),l=1;l<c.length;l++)o.push(encodeURIComponent(c[l]));else o.push(encodeURIComponent("_"+h));return i||(i=e.controller),delete e.controller,t||(t=e.action),delete e.action,s=e.parameters,delete e.parameters,s&&(i||(i=n._DEFAULT_CONTROLLER_NAME),t||(t=n._DEFAULT_ACTION_NAME)),i&&(o.push(encodeURIComponent("_"+i)),t&&(o.push(encodeURIComponent(t)),s&&(r.isArray(s)?o.push.apply(o,r.map(s,encodeURIComponent)):o.push(encodeURIComponent(s))))),y=r.param(e),o.join("/")+(y?"?"+y:"")},n})();o._DEFAULT_CONTROLLER_NAME="home";o._DEFAULT_ACTION_NAME="index";t.TfsContext=o;var e={},s=Math.pow(2,32),h=(function(){function n(){}return n.registerActionWorker=function(n,t,i,r){u.assertParamIsStringNotEmpty(n,"action");u.assertParamIsFunction(t,"actionWorker");i!==undefined&&(u.assertParamIsNumber(i,"order"),u.assert(i<=s,"order must not be greater than "+s));var f=e[n];(!f||r)&&(e[n]=f=[]);f.push({worker:t,order:i||(i===0?0:100)});f.sort((function(n,t){return n.order-t.order}))},n.unregisterActionWorker=function(n,t){var i,f;u.assertParamIsStringNotEmpty(n,"action");u.assertParamIsFunction(t,"actionWorker");i=e[n];i&&(f=-1,r.each(i,(function(n,i){if(i.worker===t)return f=n,!1})),f>-1&&i.splice(f,1),i.length===0&&delete e[n])},n.performAction=function(n,t){function r(n){var t=i&&i[f++];if(t)return t.worker.call(this,n,r)}u.assertParamIsStringNotEmpty(n,"action");var i=e[n],f=0;return r(t)},n.clearActionWorkers=function(){e={}},n})();h.MaxOrder=s;t.ActionManager=h,(function(n){n.ACTION_WINDOW_OPEN="window-open";n.ACTION_WINDOW_NAVIGATE="window-navigate";n.ACTION_WINDOW_RELOAD="window-reload";n.ACTION_WINDOW_UNLOAD="window-unload"})(l=t.CommonActions||(t.CommonActions={}))}));var __extends=this&&this.__extends||
(function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}})();
define("Core/TypeScript/TFS.ObjectModel",["require","exports","o","$","Core/TypeScript/TFS.Core","Core/TypeScript/TFS.Core.Utils","Core/TypeScript/TFS.Core.Ajax","Core/TypeScript/TFS.Diag","Core/TypeScript/TFS.Host","Core/TypeScript/Resources/TFS.Resources.Common","Core/TypeScript/TFS"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";function yt(n,t){var i;return i={area:"api"},t=t||n.getHost().hostType,t>=s.NavigationContextLevels.Application&&(t<s.NavigationContextLevels.Team&&(i.ignoreDefaultTeam=!0,i.team=""),t<s.NavigationContextLevels.Project&&(i.project="")),i}var et,nt,a,ot,tt,it,v,rt,l,w,vt,b,st,k,d,ht,g,y,ct;i.defineProperty(t,"__esModule",{value:!0});var ut=c.queueRequest,lt=c.handleError,pt=s.TfsContext,ft=s.ActionManager,at={},p=(function(){function n(n){this.tfsContext=n;this.services={};this.httpClients={}}return n.getConnection=function(n,t){var i,r,u,f;if(!t)throw Error.argumentNull("tfsContext");return r=this.getConnectionLocation(n,t),t&&(u=t.getHost(s.TeamFoundationHostType.Application)),f=u?u.name+r:r,i=at[f],i||(i=new n(t),at[f]=i),i},n.getConnectionLocation=function(n,t){var i=this.getConnectionServiceHost(n,t);if(!i)throw Error.create("TfsContext is not supported");return i.uri.toUpperCase()},n.getConnectionServiceHost=function(n,t){return t.getHost(n._serviceHostKey)},n.prototype.getTfsContext=function(){return this.tfsContext},n.prototype.getCurrentUser=function(){return this.tfsContext.getCurrentIdentity().displayName},n.prototype.getService=function(n,t){t===void 0&&(t=!0);var i,r;if(!n)throw Error.argumentNull("serviceType");if(typeof n.prototype.initializeTfsObject!="function")throw new Error("serviceType does not derive from TfsService");return r=a.getServiceName(n),t&&(i=this.services[r]),i||(i=new n,i.initializeTfsObject(this),t&&(this.services[r]=i)),i},n.prototype.getCurrentServiceHost=function(){return n.getConnectionServiceHost(this.constructor,this.tfsContext)},n.prototype.getLocation=function(){return n.getConnectionLocation(this.constructor,this.tfsContext)},n.prototype.getHttpClient=function(n){var t,i,r;if(!n)throw Error.argumentNull("httpClientType");return i="tfsHttpClient."+c.getTypeName(n),t=this.httpClients[i],t||(r=this.tfsContext.getHostUrl(),t=new n(r),t.addEventListener({beforeRequest:function(n){o.logTracePoint("Ajax.request-started",n)},postResponseCallback:function(n){o.logTracePoint("Ajax.callback-complete",n)}}),this.httpClients[i]=t),t},n})();t.TfsConnection=p;et=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.getConnection=function(n){return p.getConnection(t,n)},t})(p);et._serviceHostType=s.TeamFoundationHostType.Application;t.TfsConfigurationServer=et;nt=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.getConnection=function(n){return p.getConnection(t,n)},t})(p);nt._serviceHostKey=s.TeamFoundationHostType.ProjectCollection;t.TfsTeamProjectCollection=nt;a=(function(){function n(){}return n.getServiceName=function(n){return n._serviceName||"tfsService."+c.getTypeName(n)},n.prototype.getTfsContext=function(){return this.tfsConnection.tfsContext},n.prototype.getServiceName=function(){return n.getServiceName(this.constructor)},n.prototype.getLocation=function(){return this.tfsConnection.getLocation()},n.prototype.initializeTfsObject=function(n){this.tfsConnection=n},n})();a._serviceName=null;t.TfsService=a;c.initClassPrototype(a,{tfsConnection:null});ot=(function(n){function t(){return n.call(this)||this}return __extends(t,n),t})(a);t.CollectionLevelTfsService=ot;tt=(function(n){function t(){return n.call(this)||this}return __extends(t,n),t})(a);t.InstanceLevelTfsService=tt;it=(function(){function n(n){o.assertParamIsObject(n,"tagData");n.hasOwnProperty("tagId")&&(this.id=n.tagId,this.id&&(this.id=this.id.toLowerCase()));n.hasOwnProperty("name")&&(this.name=n.name);n.hasOwnProperty("projectScope")&&(this.projectScope=n.projectScope,this.projectScope&&(this.projectScope=this.projectScope.toLowerCase()))}return n.create=function(t){return new n(t||{})},n.prototype.update=function(n){o.assert(n.id===this.id,"Invalid Tag definition provided for update");this.name=n.name;this.projectScope=n.projectScope},n})();t.TagDefinition=it;c.initClassPrototype(it,{id:null,name:null,projectScope:null});v=(function(n){function t(){var t=n.call(this)||this;return t._tagDefinitionsCache={},t}return __extends(t,n),t.prototype.getKnownTagDefinition=function(n,t){var i=this._tagDefinitionsCache[t.toLowerCase()],r;return i&&(r=u.ArrayUtils.findIndex(i,(function(t){return u.StringUtils.localeIgnoreCaseComparer(t.name,n)===0})),r!==-1)?i[r]:null},t.prototype.beginQueryTagDefinitions=function(n,i,u,f){var c=this,s,h;if(o.assertParamIsFunction(u,"callback"),o.assertParamIsArray(n,"artifactApplicableKinds"),s=i.toLowerCase(),this._tagDefinitionsCache.hasOwnProperty(s)){o.logTracePoint("TagService.queryTagDefinitionsCached.start");h=this._tagDefinitionsCache[s];o.logTracePoint("TagService.queryTagDefinitionsCached.completed");u(h);return}o.logTracePoint("TagService.queryTagDefinitionsRoundtrip.start");e.getMSJSON(this._getApiLocation(t.ACTION_QUERY_TAG_DEFINITIONS),{artifactKinds:n,projectScope:i},(function(n){var t=r.map(n||[],(function(n){return new it(n)}));c._tagDefinitionsCache[s]=t;o.logTracePoint("TagService.queryTagDefinitionsRoundtrip.completed");u(t)}),f,{cache:!1})},t.prototype.invalidateCacheForArtifactKinds=function(n,t){var i=t.toLowerCase();this._tagDefinitionsCache.hasOwnProperty(i)&&delete this._tagDefinitionsCache[i]},t.prototype._getApiLocation=function(n){return o.assertParamIsString(n,"action"),this.getTfsContext().getActionUrl(n,t.CONTROLLER_NAME,{area:"api"})},t})(a);v.CONTROLLER_NAME="Tag";v.ACTION_QUERY_TAG_DEFINITIONS="QueryTagDefinitions";v.WORK_ITEM_ARTIFACT_KIND="E7626DBD-6075-416C-A31E-DFD48FE3CFDE";t.TagService=v;c.initClassPrototype(v,{_tagDefinitionsCache:null});rt=(function(n){function t(){var t=n.call(this)||this;return t._featureStatesCache={},t}return __extends(t,n),t.isFeatureEnabled=function(n,i){var r=nt.getConnection(n).getService(t);return r.isFeatureEnabledLocal(i)},t.prototype.beginIsFeatureEnabled=function(n,t,i){o.assertParamIsString(n,"featureName");o.assertParamIsFunction(t,"callback");var u=this,r=this._readLocalState(n);if(r!==undefined&&r!==null){t(r);return}e.getMSJSON(this._getApiLocation(n),null,(function(i){o.assertParamIsObject(i,"featureInfo");var r=i.EffectiveState==="On"||i.effectiveState==="On";u._featureStatesCache[n]=r;t(r)}),i)},t.prototype.isFeatureEnabledLocal=function(n){o.assertParamIsString(n,"featureName");var t=this._readLocalState(n);return(t===undefined||t===null)&&o.fail(u.StringUtils.format("Requested feature {0} could not be found in local data island.",n)),t},t.prototype._getApiLocation=function(n){return o.assertParamIsString(n,"featureName"),u.StringUtils.format("/_apis/{0}/{1}",t.FA_RESOURCE_NAME,n)},t.prototype._readLocalState=function(n){return o.assertParamIsString(n,"featureName"),this._checkDataIsland(),this._featureStatesCache[n]},t.prototype._getDataIsland=function(){return r(".feature-availability-data")},t.prototype._checkDataIsland=function(){var n;this._checkedForDataIsland||(this._checkedForDataIsland=!0,n=this._getDataIsland(),n.length>0&&(this._featureStatesCache=f.parseMSJSON(n.eq(0).html(),!1)))},t})(tt);rt.FA_RESOURCE_NAME="FeatureFlags";t.FeatureAvailabilityService=rt;c.initClassPrototype(rt,{_featureStatesCache:null,_checkedForDataIsland:!1});l=(function(){function n(n,t){this.favStore=n;t&&(this.id=t.id,this.name=t.name,this.parentId=t.parentId,this.type=t.type,this.data=t.data)}return n.prototype.path=function(n){return f.calculateTreePath.call(this,n,"/","name","root")},n.prototype.beginRename=function(n,t,i){var u=this,f;this.parent&&this.parent.findChildItem(n,this.type,this.data)?lt(Error.favoriteItemAlreadyExist(n),i,this):(f=r.extend({},this),f.name=n,this.favStore.beginUpdateItems([f],(function(){u.name=n;r(window).trigger("favorite-item-renamed",u);r.isFunction(t)&&t.call(u,u)}),i))},n.prototype.beginDelete=function(n,t,i){this.favStore.beginDeleteItems([this],n,t,i)},n.prototype.onDelete=function(n,t){!t&&this.parent&&this.parent.remove(this);delete this.favStore.all[this.id];n&&r(window).trigger("favorite-item-removed",this)},n})();l.FAVITEM_TYPE_WIT_QUERYITEM="Microsoft.TeamFoundation.WorkItemTracking.QueryItem";l.FAVITEM_TYPE_WIT_QUERYCHART="Microsoft.TeamFoundation.WorkItemTracking.QueryChart";l.FAVITEM_TYPE_VC_PATH="Microsoft.TeamFoundation.VersionControl.Path";l.FAVITEM_TYPE_BUILD_DEFINITION="Microsoft.TeamFoundation.Build.Definition";t.FavoriteItem=l;c.initClassPrototype(l,{favStore:null,id:null,name:null,parentId:null,parent:null,type:null,data:null});w=(function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.children=[],r}return __extends(t,n),t.prototype.add=function(n,t){o.assertIsObject(n,"favItem");this.children.push(n);n.parent=this;t!==!0&&this.children.sort((function(n,t){return u.StringUtils.localeIgnoreCaseComparer(n.name,t.name)}))},t.prototype.remove=function(n){o.assertParamIsObject(n,"favItem");u.ArrayUtils.remove(this.children,n)},t.prototype.clear=function(){this.children=[]},t.prototype.findByPath=function(n){return o.assertParamIsString(n,"path"),f.findTreeNode.call(this,n,"/",u.StringUtils.localeIgnoreCaseComparer,"name")},t.prototype.findByData=function(n){o.assertParamIsString(n,"data");for(var i,t=0,r=this.children.length;t<r;t++)if(i=this.children[t],i.data===n)return i;return null},t.prototype.beginCreateNewFolder=function(n,t,i){this.beginCreateNewItem(n,null,null,t,i)},t.prototype.beginCreateNewItem=function(n,i,u,f,e,o){var s,h=this,c;(o===null||o===undefined)&&(o=!0);this.findChildItem(n,i,u)?lt(Error.favoriteItemAlreadyExist(n),e,this):(c={id:undefined,parentId:this.id,name:n,type:i,data:u},s=i?new l(this.favStore,c):new t(this.favStore,c),this.favStore.beginUpdateItems([s],(function(){h.add(s);h.favStore.all[s.id]=s;o&&r(window).trigger("favorite-item-created",s);r.isFunction(f)&&f.call(h,s)}),e))},t.prototype.onDelete=function(t,i){r.each(this.children,(function(n,t){t.onDelete(!1,!0)}));n.prototype.onDelete.call(this,t,i)},t.prototype.findChildItem=function(n,t,i){o.assertParamIsString(n,"name");o.assertParamIsString(t,"type");o.assertParamIsString(i,"data");for(var r,f=0,e=this.children.length;f<e;f++)if(r=this.children[f],u.StringUtils.localeIgnoreCaseComparer(n,r.name)===0&&r.type===t&&r.data===i)return r;return null},t})(l);t.FavoriteFolder=w;c.initClassPrototype(w,{children:null});vt={};b=(function(n){function t(t,i,r,u,f,e){var o=n.call(this,null,{id:f,name:e})||this;return o.root=!0,o.favStore=o,o._tfsContext=t,o._routeData=i,o._identity=r,o._scope=u,o.all={},o}return __extends(t,n),t.beginGetFavoriteStore=function(n,i,u,f,e,o,s,h,c){var l,a,v;f===null&&(f=undefined);l=yt(n,i);u&&(l.project=u);a=n.getActionUrl("list","favorites",r.extend({},l,{identityId:f,scope:e}));s?(v=new t(n,l,f,e,a,o),v.beginRefresh((function(){h(v)}),c)):ut(this,vt,a,h,c,(function(i,r){var u=new t(n,l,f,e,a,o);u.beginRefresh((function(){i(u)}),r)}))},t.prototype.beginRefresh=function(n,t){var i,u=this;i=this._tfsContext.getActionUrl("list","favorites",this._routeData);e.getMSJSON(i,{identityId:this._identity,scope:this._scope},(function(t){u._populateItems(t);r.isFunction(n)&&n.call(u)}),t)},t.prototype.beginDeleteItems=function(n,t,i,u){var s=this,f,o;(u===null||u===undefined)&&(u=!0);n&&n.length&&(o=this._tfsContext.getActionUrl("delete","favorites",this._routeData),f=r.map(n,(function(n){return n.id})),e.postMSJSON(o,{identityId:this._identity,scope:this._scope,favItemIds:f},(function(){r.each(n,(function(n,t){t.onDelete(u)}));r.isFunction(t)&&t.call(s,n)}),i))},t.prototype.beginUpdateItems=function(n,t,i){var u=this,o,s;n&&n.length&&(s=this._tfsContext.getActionUrl("update","favorites",this._routeData),o=r.map(n,(function(n){return f.stringifyMSJSON({id:n.id,parentId:n.parentId===u.id?undefined:n.parentId,name:n.name,type:n.type,data:n.data})})),e.postMSJSON(s,{identityId:this._identity,scope:this._scope,favItemJsons:o},(function(i){r.each(i,(function(t,i){n[i.index].id=i.id}));r.isFunction(t)&&t.call(u,n)}),i))},t.prototype._populateItems=function(n){var t={},f,i,e,o=this;this.clear();n&&(n.sort((function(n,t){return u.StringUtils.localeIgnoreCaseComparer(n.name,t.name)})),r.each(n,(function(n,i){var r;r=i.type?new l(o,i):new w(o,i);t[r.id]=r})));for(f in t)t.hasOwnProperty(f)&&(i=t[f],e=t[i.parentId],e?e.add(i,!0):this.add(i,!0));this.all=t},t})(w);b.FAVORITE_STORE_SCOPE_FAVORITE_QUERIES="WorkItemTracking.Queries";b.FAVORITE_STORE_SCOPE_FAVORITE_BUILD_DEFINITIONS="Build.Definitions";b.FAVORITE_STORE_SCOPE_FAVORITE_PATHS="VersionControl.Paths";t.FavoriteStore=b;st=(function(n){function t(){var t=n.call(this)||this;return t._teamMembers={},t}return __extends(t,n),t.prototype.beginGetTeamMembers=function(n,t,i,r,u){var f,o=this.getTfsContext();i=i||100;t=Boolean(t);f=n+"|"+i+"|"+t;ut(this,this._teamMembers,f,r,u,(function(r,u){var f=o.getActionUrl("members","teams",{area:"api"});e.getMSJSON(f,{teamId:n,maxResults:i,includeGroups:t},(function(n){r(n.members)}),u)}))},t})(tt);t.TeamService=st;k=(function(){function n(){}return n.encodeUri=function(t){return o.assertIsNotNull(t,"Artifact should not be null"),o.assertParamIsString(t.tool,"Artifact tool should be string"),o.assertParamIsString(t.type,"Artifact type should be string"),o.assertParamIsString(t.id,"Artifact ID should be string"),n.VSTFS+[encodeURIComponent(t.tool),encodeURIComponent(t.type),encodeURIComponent(t.id)].join(n.URI_SEPARATOR)},n.decodeUri=function(t){var r,i;if(o.assertParamIsString(t,"Artifact URI should be string"),t.length>n.VSTFS.length&&(r=t.substr(0,n.VSTFS.length).toLowerCase(),r===n.VSTFS&&(i=t.substr(n.VSTFS.length).split(n.URI_SEPARATOR),i.length===3)))return{uri:t,tool:n.legacyDecodeURIComponent(i[0]),type:n.legacyDecodeURIComponent(i[1]),id:n.legacyDecodeURIComponent(i[2])};throw new Error(u.StringUtils.format(h.InvalidArtifactUri,t));},n.legacyDecodeURIComponent=function(n){var t;return o.assertParamIsString(n,"encodedURIComponent should be string"),t=n.replace(/\+/g," "),decodeURIComponent(t)},n})();k.VSTFS="vstfs:///";k.URI_SEPARATOR="/";t.LinkingUtilities=k;d=(function(){function n(n){this._data=n;this._data.uri||(this._data.uri=k.encodeUri({tool:this.getTool(),type:this.getType(),id:this.getId()}))}return n._execute=function(n,t){var i=n.getUrl(t);i?ft.performAction(s.CommonActions.ACTION_WINDOW_OPEN,{url:i,target:"_blank"}):alert(u.StringUtils.format(h.UnknownArtifactType,n.getType()))},n.prototype.getUri=function(){return this._data.uri},n.prototype.getTool=function(){return this._data.tool},n.prototype.getType=function(){return this._data.type},n.prototype.getId=function(){return this._data.id},n.prototype.getTitle=function(){return this.getUri()},n.prototype.setError=function(n){this._error=n},n.prototype.getError=function(){return this._error},n.prototype.execute=function(t){return ft.performAction(n.ACTION_ARTIFACT_EXECUTE,{artifact:this,tfsContext:t})},n.prototype.getUrl=function(){return null},n})();d.ACTION_ARTIFACT_EXECUTE="artifact-execute";t.Artifact=d;ft.registerActionWorker(d.ACTION_ARTIFACT_EXECUTE,(function(n){return d._execute(n.artifact,n.tfsContext)}));ht=(function(n){function t(){return n.call(this)||this}return __extends(t,n),t.prototype.beginGetTeamMembers=function(n,t,i,r,u){o.assertIsStringNotEmpty(n,"teamIdentityId");o.assertParamIsBool(t,"includeGroups");o.assertParamIsNumber(i,"maxResults");o.assertParamIsFunction(r,"callback");this.tfsConnection.getService(st).beginGetTeamMembers(n,t,i,r,u)},t.prototype.beginGetTeamSettings=function(n,t,i){var f,u;o.assertParamIsFunction(n,"callback");f=this;this._checkDataIsland();u={area:"api"};i&&(u=r.extend(i,u));ut(this,this,"_teamSettings",n,t,(function(n,t){var i=f.getTfsContext().getActionUrl("teamSettings","teamConfiguration",u);e.getMSJSON(i,null,(function(t){n(t)}),t)}))},t.prototype.getTeamSettings=function(){return this._checkDataIsland(),this._teamSettings},t.prototype._checkDataIsland=function(){var n;this._checkedForDataIsland||(this._checkedForDataIsland=!0,n=r(".team-settings-data"),n.length>0&&(this._teamSettings=f.parseMSJSON(n.eq(0).html(),!1),n.eq(0).empty()))},t})(a);t.TeamAwarenessService=ht;c.initClassPrototype(ht,{_teamSettings:null,_checkedForDataIsland:!1});g=(function(){function n(n){this.plural=n.plural;this.singular=n.singular;this.category=n.category;this.parentCategory=n.parentCategory;this.workItemCountLimit=n.workItemCountLimit;this.states=n.states}return n.prototype.containsWorkItemType=function(n){return u.ArrayUtils.contains(this.workItemTypeNames,n,u.StringUtils.localeIgnoreCaseComparer)},n.prototype.getIntermediateBacklogs=function(n){var r=[],i,t,f;if(!n)return[];if(i=this.compare(n),i===0)return[];for(t=i===1?this:n,f=i===1?n:this;t;){if(u.StringUtils.ignoreCaseComparer(t.category,this.category)!==0&&r.push(t),u.StringUtils.ignoreCaseComparer(t.category,f.category)===0)break;t=t.child}return r},n.prototype.getIntermediateBacklogNames=function(n){var t=this.getIntermediateBacklogs(n);return r.map(t,(function(n){return n.plural}))},n.prototype.compare=function(n){if(!n)return 1;for(var t=this.child;t;){if(u.StringUtils.ignoreCaseComparer(t.category,n.category)===0)return 1;t=t.child}for(t=this.parent;t;){if(u.StringUtils.ignoreCaseComparer(t.category,n.category)===0)return-1;t=t.parent}return 0},n})();t.BacklogCategoryConfiguration=g;y=(function(){function n(n){var i=this,t;this.taskBacklog=new g(n.taskBacklog);this.requirementBacklog=new g(n.requirementBacklog);this.portfolioBacklogs=r.map(n.portfolioBacklogs,(function(n){return new g(n)}));this.allBacklogs=this.portfolioBacklogs.concat([this.requirementBacklog,this.taskBacklog]);this.workItemCategories=n.workItemCategories;this._workItemTypeCategoryMap={};this._backlogCategoryNameMap={};t=null;r.each(this.allBacklogs,(function(u,f){t!==null&&(t.child=f,f.parent=t);t=f;f.workItemTypeNames=n.workItemCategories[f.category];f.isRequirementCategory=f===i.requirementBacklog;f.defaultWorkItemType=n.defaultWorkItemTypes[f.category];r.each(f.workItemTypeNames,(function(n,t){i._workItemTypeCategoryMap[t]=f.category}));i._backlogCategoryNameMap[f.category]=f}));this.bugWorkItems=n.bugWorkItems;this.feedbackWorkItems=n.feedbackWorkItems;this.feedbackRequestWorkItems=n.feedbackRequestWorkItems;this.feedbackResponseWorkItems=n.feedbackResponseWorkItems;this.releaseWorkItems=n.releaseWorkItems;this.signoffTaskWorkItems=n.signoffTaskWorkItems;this.stageWorkItems=n.stageWorkItems;this.typeFields=n.typeFields;this.weekends=n.weekends;n.workItemColors&&(this.workItemTypeColors={},r.each(n.workItemColors,(function(n,t){i.workItemTypeColors[t.name]=t})))}return n.prototype.getCategoryForWorkItemType=function(n){return this._workItemTypeCategoryMap[n]},n.prototype.getCategoryForCategoryRefName=function(n){return this._backlogCategoryNameMap[n]},n.prototype.getTypeField=function(n){o.assertParamIsNumber(n,"fieldType");var t;return r.each(this.typeFields,(function(i,r){if(r.type===n)return t=r,!1})),t},n})();y.StateType={Proposed:1,InProgress:2,Complete:3,Requested:4,Received:5,Reviewed:6,Declined:7,Resolved:8};y.FieldType={Effort:1,Order:2,RemainingWork:3,Team:4,Activity:5,Requestor:6,ApplicationType:7,ApplicationStartInformation:8,ApplicationLaunchInstructions:9,FeedbackNotes:10,ClosedDate:11};t.ProjectProcessConfiguration=y;ct=(function(n){function t(){return n.call(this)||this}return __extends(t,n),t.prototype.beginGetProcessSettings=function(n,t,i){var u=this,o=function(t){u._processSettings||(u._processSettings=new y(t));n.apply(u,[u._processSettings])},f;this._checkDataIsland();f={area:"api"};i&&(f=r.extend(i,f));c.queueRequest(this,this,"_processSettingsInternal",o,t,(function(n,t){var i=this.getTfsContext().getActionUrl("getProcessSettings","processConfiguration",f);e.getMSJSON(i,null,n,t)}))},t.prototype._checkDataIsland=function(){var n;this._checkedForDataIsland||(this._checkedForDataIsland=!0,n=r(".process-settings-data"),n.length>0&&(this._processSettingsInternal=f.parseMSJSON(n.eq(0).html(),!1),n.eq(0).empty()))},t.prototype.getProcessSettings=function(){return this._checkDataIsland(),!this._processSettings&&this._processSettingsInternal&&(this._processSettings=new y(this._processSettingsInternal)),this._processSettings},t})(ot);t.ProjectProcessConfigurationService=ct;c.initClassPrototype(ct,{_processSettingsInternal:null,_processSettings:null})}))