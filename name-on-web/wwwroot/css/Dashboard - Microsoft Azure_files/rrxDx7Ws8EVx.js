define("HubsExtension/Common/ResourceIconMap",["require","exports","f"],(function(n,t,i){"use strict";var r;return (function(n){function r(n,t,i){t.setUseResourceMenu&&n.useResourceMenu!==undefined&&t.setUseResourceMenu(n.useResourceMenu);t.setIsPreview&&n.isPreview!==undefined&&t.setIsPreview(n.isPreview);t.setIcon&&n.icon&&t.setIcon(n.icon);t.setKindBladeAndPart&&n.bladeName&&t.setKindBladeAndPart(n.bladeName,n.bladeExtensionName||i,n.partName);t.setAssetTypeDisplayName&&n.singularDisplayName&&t.setAssetTypeDisplayName(n.singularDisplayName);t.setLowerAssetTypeDisplayName&&n.lowerSingularDisplayName&&t.setLowerAssetTypeDisplayName(n.lowerSingularDisplayName)}function u(n,i,u,f){var e,o;t.isResourceId(i)&&(e=f.assetTypeInformation,e&&e.kindMap&&(o=e.kindMap[u&&u.toLowerCase()||e.defaultKind],o&&r(o,n,e.extensionName)))}var t=i.ViewModels.Services.ResourceTypes;n.checkItemKind=u})(r||(r={})),r}));
define("HubsExtension/ResourceMap/ViewModels/ResourceProviderHelpers",["require","exports","f","i","o","HubsExtension/ResourceMap/ResourceMapClientStrings","HubsExtension/_generated/ExtensionDefinition","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/Common/CommonErrorHandling","HubsExtension/ResourceMap/ResourceMapCommon"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";function ft(n){if(s.isExpectedArmError(n,!0))return{error:n};throw n;}function d(n){return n().then((function(n){return{result:n}})).catch((function(n){return ft(n)}))}function g(n){return{id:n.id,name:n.name,location:n.location}}function p(n){return{id:n.id,name:n.name,location:n.location,type:n.type,kind:n.kind}}function et(n,t){return Q(rt.signalResourcesChanged(t.resourcesInResourceGroup.map((function(n){return n.id}))))}function nt(n,t){var i,u,o,s,e,r;return n.length<1?{error:"unknown error",message:"unknown error",fullMessage:f.failedToDeleteResourceGroupUnknownError.format(t)}:n.length<2?(i=n[0],i.statusText)?{error:i.statusText,message:i.message,fullMessage:f.failedToDeleteResourceGroup.format(t,i.message),code:i.code,stack:i.stack}:i.message?{error:i.message,message:i.message,fullMessage:f.failedToDeleteResourceGroup.format(t,i.message),code:i.code,stack:i.stack}:{error:"unknown error",message:"unknown error",fullMessage:f.failedToDeleteResourceGroupUnknownError.format(t),code:i.code,stack:i.stack}:n.length<3?{error:n[1],message:"unknown error",fullMessage:f.failedToDeleteResourceGroup.format(t,n[1]),stack:n[1]&&n[1].stack}:(e=n[2],e&&e.responseText&&(r=JSON.parse(e.responseText),u=r&&r.httpStatusCode,o=r&&r.message,s=r&&r.httpStatus),{error:u||n[1],message:o||u||n[1],fullMessage:f.failedToDeleteResourceGroup.format(t,o||u||n[1]),stack:n[1]&&n[1].stack,status:s})}function ot(n,t){n.title=f.deletedResourceGroupLabel.format(t);n.description=f.deletedResourceGroupDescription.format(t);n.status=y.Success;n.asset=undefined;n.publish()}function c(n,t,i,r){n.title=f.deleteResourceGroupFailedLabel.format(i);n.status=y.Error;r?r.code==="ScopeLocked"?(n.description=f.failedToDeleteResourceGroupLocked.format(i),n.asset=null,n.linkedBlade=b.getBladeSelection(e.definitionName,"LocksBlade",{resourceId:t})):n.description=r.fullMessage:n.description=f.failedToDeleteResourceGroupUnknownError.format(i);n.linkedBlade||(n.asset={extensionName:e.definitionName,assetType:"ResourceGroupEvents",assetId:t});n.publish()}function tt(n,t){return d((function(){var i={resourceGroup:null,resourcesInResourceGroup:[]};return h.ResourceGroupClient.getResourceGroup(n,t).then((function(n){return i.resourceGroup=g(n),n.id})).then((function(n){return h.ResourceClient.getResourcesInResourceGroup(n,t).then((function(n){return n.forEach((function(n){i.resourcesInResourceGroup.push(p(n))})),i}))}))}))}function st(n,t){return d((function(){var u=l.parseResourceDescriptor(n),r={resourceGroup:null,resource:null,resourcesInResourceGroup:[],resourcesLinkedFromResource:[],resourcesLinkedToResource:[]},f=l.buildResourceGroupIdFromResourceDescriptor(u);return h.ResourceGroupClient.getResourceGroup(f,t).then((function(n){return r.resourceGroup=g(n),n.id})).then((function(){return h.ResourceClient.getResourcesInResourceGroup(l.buildResourceGroupIdFromResourceDescriptor(u),t).then((function(f){if(f.forEach((function(t){l.compareResourceId(t.id,n)&&(r.resource=p(t),i.forEachKey(t.tags,(function(n){if(n.toLowerCase().startsWith("hidden-link:")){var t=n.toLowerCase().indexOf("/subscriptions/");t!==-1&&r.resourcesLinkedFromResource.push(n.substr(t))}})));r.resourcesInResourceGroup.push(p(t))})),r.resource===null){var e=new Error("Failed to retrieve the resource.");e.status=404;throw e;}return h.ResourceClient.getResourcesLinkedToResource(u.subscription,n,t).then((function(n){return n.forEach((function(n){r.resourcesLinkedToResource.push(n.id)})),r}))}))}))}))}var it;u.defineProperty(t,"__esModule",{value:!0});var rt=i.Assets,v=i.Base,w=v.Constants.AssetNames,y=i.Hubs.Notifications.NotificationStatus,b=i.ViewModels,l=b.Services.ResourceTypes,ut=r.Hubs.Notifications,k=window,a=v.Diagnostics.createLog(n);t.getResourceGroupResults=tt;t.getResourceResults=st;it=(function(){function n(n,t){this._resourceGroup=n;this._resourceGroupName=t}return n.prototype.execute=function(){var r=this,n=this._resourceGroup,t=this._resourceGroupName,i=new ut.InternalClientNotification({title:f.deletingResourceGroupLabel.format(t),description:f.deletingResourceGroupDescription.format(t),status:y.InProgress,asset:{extensionName:e.definitionName,assetType:w.ResourceGroups,assetId:this._resourceGroup},timestamp:new Date}),u=o.makeResourceManagerTelemetry("ResourceGroupDeleteOperation");tt(n,u).then((function(u){var e=u.error,o;e?(o={error:e.statusText,message:e.message,fullMessage:f.failedToDeleteResourceGroup.format(t,e.message)},s.isExpectedArmError(e)&&a.warning("Failed to delete the resource group: {0}. {1}.".format(o.error,o.message)),c(i,n,t,o),h.notifyResourceGroupDeleteFailed(n)):(h.notifyResourceGroupDeleting(n),h.ResourceGroupClient.deleteResourceGroup(n).then((function(n){n.operationId&&i.correlationIds.push(n.operationId);i.publish();r._handleDeleteOperationPolling(n,i,u.result)}),(function(){for(var r,f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];r=nt(f,t);s.isExpectedArmError(e)&&a.warning("Failed to delete the resource group: {0}. {1}. {2}".format(r.error,r.message,r.stack||""));c(i,n,t,r);h.notifyResourceGroupDeleteFailed(n)})))}),(function(r){c(i,n,t);throw r;}))},n.prototype._handleDeleteOperationPolling=function(n,t,i){var o=this,u=this._resourceGroup,f=this._resourceGroupName,e;n.status===200?(r.AssetManager.notifyAssetDeleted(w.ResourceGroups,this._resourceGroup,v.Constants.ExtensionNames.Hubs),ot(t,this._resourceGroupName),i&&et(u,i)):n.status===202?e=k.setTimeout((function(){k.clearTimeout(e);h.ResourceManagerOperationsClient.getOperationResponse(n.operationId).then((function(n){o._handleDeleteOperationPolling(n,t,i)}),(function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n=nt(r,f);s.isExpectedArmError(n)&&a.warning("Failed to delete the resource group: {0}. {1}. {2}".format(n.error,n.message,n.stack||""));c(t,u,f,n);h.notifyResourceGroupDeleteFailed(u)}))}),n.retryAfterInSeconds*1e3):(s.isExpectedArmError(n)&&a.warning("Failed to delete the resource group, Code: {0}.".format(n.status)),c(t,u,f),h.notifyResourceGroupDeleteFailed(u))},n})();t.ResourceGroupDeleteOperation=it}));
define("HubsExtension/_generated/HtmlTs/ResourceMap/Templates/ResourceGroupDeleteResourceRow",["require","exports"],(function(){"use strict";return function(){return'<div class="ext-res-field"><span class="msportalfx-gridcolumn-assetsvg-icon" aria-hidden="true" data-bind="image:icon,attr:{title:type}"><\/span><span class="msportalfx-gridcolumn-assetsvg-text ext-res-field-text" data-bind="attr:{title:name}"><span class="ext-res-field-name" data-bind="text:name"><\/span><\/span><\/div>'}}));
define("HubsExtension/ResourceMap/ViewModels/ResourceGroupDeleteBlade",["require","exports","f","o","ko","Fx/Composition/TemplateBlade","Fx/Controls/Button","Fx/Controls/CustomHtml","Fx/Controls/EditableGrid","HubsExtension/Browse/BrowseClientStrings","HubsExtension/ResourceMap/ResourceMapClientStrings","HubsExtension/_generated/ExtensionDefinition","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/Browse/BrowseArea","HubsExtension/Common/AssetTypeCache","HubsExtension/Common/HubsObservables","HubsExtension/Common/ResourceIconMap","HubsExtension/ResourceMap/ViewModels/ResourceProviderHelpers","HubsExtension/_generated/HtmlTs/ResourceMap/Templates/ResourceGroupDeleteResourceRow"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){"use strict";function ft(n,t,i){w.checkItemKind({setIcon:n.icon,setAssetTypeDisplayName:function(t){var i=t||n.resourceType;n.type(i)}},t,u.unwrap(n.kind),i)}var nt;r.defineProperty(t,"__esModule",{value:!0});var tt=i.Base,it=tt.Images.StatusBadge,rt=tt.Images.Polychromatic,d=i.ViewModels,et=d.Controls,g=d.Services.ResourceTypes,ut=d.Forms.TextBox.ViewModel,ot=u.utils.peekObservable;nt=(function(){function n(){this.affectedResourceCount=u.observable();this._affectedResources=u.observableArray([])}return n.prototype._updateAssetTypes=function(n){var t=this;this._assetTypes=this._assetTypes||{};n&&i.extendArrayIntoMap(this._assetTypes,n,(function(n){return n.lowerCaseResourceType}),i.identity);this._affectedResources().forEach((function(n){var i,r;n.needTypeInformation()&&(i=t._assetTypes[n.resourceType.toLowerCase()],i?(n.needTypeInformation(!1),n.icon(i.icon),r=i.compositeDisplayName.singular,n.type(r),ft(n,n.id,{assetTypeInformation:i,extensionName:i.extensionName})):(r=n.resourceType,n.type(r)))}))},n.prototype._updateLocations=function(n){var t=this;this._locationDisplayMap=n||this._locationDisplayMap||{};this._affectedResources().forEach((function(n){var i=n.locationId;i&&n.location(t._locationDisplayMap[(i||"").toLowerCase()]||i)}))},n.prototype._enableControls=function(n){this.deleteButton.disabled(!n);this.cancelButton.disabled(!n);this.confirmationEditor.disabled(!n)},n.prototype._initializeActionBar=function(n){var i=this,t=this.context.container;this.deleteButton=e.create(t,{text:c.deleteButton,disabled:!0,onClick:function(){i._enableControls(!1);var r=new b.ResourceGroupDeleteOperation(n,g.parseResourceGroupDescriptor(n).resourceGroup);r.execute();t.closeCurrentBlade({executedDelete:!0})}});this.cancelButton=e.create(t,{text:c.cancelButton,style:1,onClick:function(){i._enableControls(!1);t.closeCurrentBlade()}})},n.prototype._initializeAffectedResources=function(){var n=this.context.container;this.affectedResourcesList=s.create(n,{ariaLabel:c.Aria.affectedResourcesList,items:this._affectedResources,header:{visible:!0},defineRow:function(n,t){return{ariaLabel:c.Aria.affectedResource.format(t.name)}},columns:[{id:"name",header:h.Columns.Name.title,defineCell:function(n,t){return o.create(n,{htmlTemplate:k(),innerViewModel:t})},width:"50%"},{id:"type",header:h.Columns.AssetType.title,defineCell:function(n,t){return t.type},width:"30%"},{id:"location",header:h.Columns.Location.title,defineCell:function(n,t){return t.location},width:"20%"},]})},n.prototype.onInitialize=function(){var n=this,o=this.context,t=o.container,i=o.parameters,h=a.makeResourceManagerTelemetry("ResourceGroupDeleteBlade"),r=g.parseResourceGroupDescriptor(i.id).resourceGroup;this.title=c.deleteResourceGroupBladeTitle.format(r);this.warningIcon=it.Warning();this.warningText=c.deleteResourceGroupMessage.format(r);this.confirmationLabel=c.confirmDeleteEnterResourceGroupName;this.confirmationEditor=new ut(t,{defaultValue:u.observable(""),valueUpdateTrigger:4});this._initializeActionBar(i.id);this._initializeAffectedResources();this.affectedResourceCountTitle=c.deleteListLensTitle;this.affectedResourceCount(c.DeleteResourceCount.calculating);t.revealContent();p.getLocationDisplayNames().then((function(t){n._updateLocations(t)}));y.getAssetTypesInformation().then((function(t){n._updateAssetTypes(t())}));var l=new v.AllResourcesSource,s=u.observable(!0),w=u.observable(!1),f=!1,e=t.createChildLifetime();return l.getResources(e,{sourceHandler:function(n,t,i,r){return r.push.apply(r,t.map((function(n){var t=g.parseResourceDescriptor(n.id),i=g.buildResourceTypeFromResourceDescriptor(t),r=v.getResourceName(n);return{id:n.id,name:r,kind:n.kind,type:u.observable(),resourceType:i,location:u.observable(),locationId:n.location,icon:u.observable(rt.ResourceDefault()),needTypeInformation:u.observable(!0)}}))),f=r.length>=2e3,!f},loading:s,partialErrors:w,scope:i.id,telemetry:h}).then((function(i){i.subscribeAndRun(e,(function(t){n._affectedResources(t);n._updateAssetTypes();n._updateLocations()}));s.subscribeAndRun(e,(function(e){if(!e){n.affectedResourceCount((f?c.DeleteResourceCount.hasMore:c.DeleteResourceCount.complete).format(i().length));var o=r.toLocaleLowerCase();n.confirmationEditor.validations([new d.CaseInsensitiveComparisonValidation(o,c.confirmDeleteEnterResourceGroupNameValidation.format(o)),]);n.confirmationEditor.performValidation(!0);u.reactor(t,(function(){n.deleteButton.disabled(!(n.confirmationEditor&&n.confirmationEditor.valid()))}))}}))}))},n})();nt=__decorate([f.Decorator({htmlTemplate:"../Templates/ResourceGroupDeleteBlade.html",styleSheets:["../Templates/ResourceGroupDeleteBlade.css"],forAsset:{assetIdParameter:"id",assetType:l.AssetTypes.ResourceGroups.name}}),f.ForContextPane.Decorator({width:1}),f.LegacyFeatures.Decorator({width:1}),f.ReturnsData.Decorator()],nt);t.ResourceGroupDeleteBlade=nt}));
define("HubsExtension/_generated/adapters/blade/ResourceGroupDeleteBladeAdapter",["require","exports","o","Fx/Composition/ViewModelAdapters","HubsExtension/ResourceMap/ViewModels/ResourceGroupDeleteBlade"],(function(n,t,i,r,u){"use strict";i.defineProperty(t,"__esModule",{value:!0});var f=(function(n){function t(t,i,r){return n.call(this,t,i,r,u.ResourceGroupDeleteBlade)||this}return __extends(t,n),t})(r.ViewModelAdapter);t.ResourceGroupDeleteBladeAdapter=f}));
define("HubsExtension/_generated/Blades/ResourceGroupDeleteBlade.css",["require","exports"],(function(){"use strict";return".ext-rgdelete-container{margin-left:25px;width:calc(100% - 50px)}.ext-container{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:calc(100% - 75px)}.ext-warning{-webkit-flex:1 1 auto;flex:1 1 auto;margin-top:20px}.ext-warning .ext-warning-icon{width:50px;height:50px;margin-right:15px;float:left;vertical-align:middle}.ext-warning .ext-warning-text{vertical-align:middle}.ext-confirmation{-webkit-flex:1 1 auto;flex:1 1 auto;margin-top:20px}.ext-confirmation .ext-confirmation-label{margin-bottom:4px}.ext-confirmation .ext-confirmation-editor{width:100%}.ext-affected{-webkit-flex:1 1 auto;flex:1 1 auto;margin-top:20px}.ext-affected .ext-affected-label{margin-bottom:4px}.ext-affected .ext-affected-count{width:100%}.ext-gridcontainer{-webkit-flex:1 1 100%;flex:1 1 100%;display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-align-items:stretch;align-items:stretch;margin-top:20px}.ext-resourcegrid{-webkit-flex:1 1 100%;flex:1 1 100%;padding:0;overflow-y:auto}.ext-res-field{display:-webkit-inline-flex;display:inline-flex;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;width:100%;padding:2px 8px 4px}.ext-res-field-text{display:inline-block;width:calc(100% - 40px);padding:2px 0}.ext-res-field-name{text-overflow:ellipsis;display:inline-block;width:100%;overflow:hidden;white-space:nowrap}.ext-okbutton,.ext-cancelbutton{width:94px;margin-right:5px}.ext-top-padding{padding-top:25px}.ext-bottom-padding{padding-bottom:25px}"}));
define("HubsExtension/_generated/Blades/ResourceGroupDeleteBlade",["require","exports","o","HubsExtension/_generated/Blades/ResourceGroupDeleteBlade.css","HubsExtension/_generated/adapters/blade/ResourceGroupDeleteBladeAdapter"],(function(n,t,i,r){"use strict";i.defineProperty(t,"__esModule",{value:!0});t.blade={name:"ResourceGroupDeleteBlade",entryPoint:{module:"HubsExtension/_generated/adapters/blade/ResourceGroupDeleteBladeAdapter","export":"ResourceGroupDeleteBladeAdapter"},inputs:["id"],templateKeyInputs:["id"],viewModelName:"ResourceMap$ResourceGroupDeleteBladeAdapter",lenses:[],width:1,assetType:"ResourceGroups",assetIdInputProperty:"id",pinnable:!1,style:8,toolbar:{source:{valuesFrom:[{referenceType:0,property:"content.commandBar"}]}},templateBlade:{partSize:9,htmlTemplateInline:{file:"ResourceGroupDeleteBlade.html",content:'<div class="msportalfx-docking ext-rgdelete-container"> <div class="msportalfx-docking-body"> <div class="ext-container"> <div class="ext-warning"> <div class="ext-warning-icon" data-bind="image: warningIcon"><\/div> <div class="ext-warning-text msportalfx-text-regular" data-bind="text: warningText"><\/div> <\/div> <div class="ext-confirmation"> <div class="ext-confirmation-label msportalfx-text-label" data-bind="text: confirmationLabel"><\/div> <div class="ext-confirmation-editor" data-bind="pcControl: confirmationEditor"><\/div> <\/div> <div class="ext-affected"> <div class="ext-affected-label msportalfx-text-label" data-bind="text: affectedResourceCountTitle"><\/div> <div class="ext-affected-count" data-bind="text: affectedResourceCount"><\/div> <\/div> <div class="ext-gridcontainer"> <div class="ext-resourcegrid msportalfx-grid-borderless" data-bind="pcControl: affectedResourcesList"/> <\/div> <\/div> <\/div> <div class=\'msportalfx-docking-footer ext-top-padding ext-bottom-padding\'> <div data-bind=\'pcControl:deleteButton\' class=\'ext-okbutton\'><\/div> <div data-bind=\'pcControl:cancelButton\' class=\'ext-cancelbutton\'><\/div> <\/div> <\/div>'},styleSheets:[{file:"Blades/ResourceGroupDeleteBlade.css",content:r}],isV2:!0},attributes:1,contextPaneWidth:1}}))