define("HubsExtension/BrowseGrid2/BrowseBlades/BrowseConfigurations/ResourceGroup",["require","exports","f","o","ko","FxInternal/Controls/Grid2/GridB","FxInternal/Data/GroupNavigator","HubsExtension/Browse/BrowseClientStrings","HubsExtension/ResourceMap/ResourceMapClientStrings","HubsExtension/_generated/ExtensionDefinition","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/ArmHelpers/Models/ArmResourceGroup","HubsExtension/Browse/BrowseArea","HubsExtension/BrowseGrid2/BrowseGrid2Startup","HubsExtension/BrowseGrid2/BrowseBlades/BrowseConfigurations/Base"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){"use strict";r.defineProperty(t,"__esModule",{value:!0});var p=i.ViewModels,w=p.Services.ResourceTypes,b=u.utils.peekObservable,k=o.Aria.Group,d=(function(n){function t(t,i){var r=n.call(this,t,i)||this;return r._allowOperations=i.allowOperations,r.groupByItems([{text:o.GroupBy.noGrouping,value:""},{text:o.GroupBy.subscription,value:"subscription"},{text:o.GroupBy.location,value:"location"},]),r._groupAriaLabelLookup.subscription=k.subscriptionDescription,r._groupAriaLabelLookup.location=k.locationDescription,u.reactor(r._ltm,(function(){r.selectedItemsCount(r._selectedBrowseItems().length)})),r}return __extends(t,n),t.prototype._fetchData=function(){var n={sourceHandler:function(t,i,r,u){var f=function(n){return r.matchSubscription(n)};return(i||[]).forEach((function(t){if(w.isResourceGroupId(t.id)){var i=t;a.showResourceGroup(i,n,f)&&u.push(l.toResourceGroup(i))}})),u.length<2e3},loading:this.gridViewModel.loading,partialErrors:this._hasErrors,scope:this._scope,filter:this._getSearchString(),selectedSubscriptions:this._resourceFilter.selectedSubscriptions,selectedLocations:this._resourceFilter.selectedLocations(),tagFilterData:this._selectedTags(),telemetry:c.makeResourceManagerTelemetry("GridV2Browse.resourceGroups")};return this._performGetResources(Q(new a.ResourceGroupsSource),n)},t.prototype._makeBrowseItem=function(n){if(w.isResourceGroupId(n.id))return this._createBrowseResourceGroupItemFromResourceGroup(n)},t.prototype.loadData=function(){var n=this;return this._resourceTypeName=s.AssetTypeNames.ResourceGroup.lowerPlural,this._resourceInstanceMap=new i.Map,this._resourceFilter.subscriptionsLoaded.fxOnceAndRun(this._ltm,(function(){n._createFilteringComputed();n._fetchData()}),(function(n){return n})),this._initializeCreateListener(),this._chooseColumnsAllowed(!0),Q()},t.prototype.createGridViewModel=function(){var n=this,c,t,r;this._navigator=new e(this._ltm,{getId:function(n){return b(n.id)},sourceItems:this._items,groupBy:this.groupBy,compare:y.browseCompare});c=this._createGridOptions({dataNavigator:this._navigator,selection:{dynamicSelectionProvider:function(t,i){var r=n._getSubOrGroupSelectionPromise(b(t));return r.then((function(t){n._logActivation(i.id,t)})),r},pinProvider:this._getPinProvider(),activationMode:2,selectionMode:3,selectedIds:this._selectedIds,unselectedIds:this._unselectedIds,selectedAll:this._selectedAll,hiddenInCollapsed:!0,commandGroupProvider:function(){return Q([{id:i.isFeatureEnabled("newgroupdelete")?h.CommandGroupNames.resourceGroupBrowseCommands:h.CommandGroupNames.oldResourceGroupBrowseCommands},])},activationContainer:this._container},resizing:{resizeToPercent:u.observable(!0)},sorting:{enabled:!0},grouping:{enabled:!0,groupBy:this.groupBy,getGroupAriaLabel:function(t){var i=n._groupAriaLabelLookup[n.groupBy()];return i&&i.format(t)}},ariaLabel:o.Aria.resourceGroupsDescription,getRowAriaLabel:function(n){return o.Aria.rowDescription.format(n.name,s.AssetTypeNames.ResourceGroup.lowerSingular)}});this.gridViewModel=new f.ViewModel(this._ltm,c);t=this._columnsType;r=this._columnsScopeType;v.setDefaultBrowseColumns(t,r,this._getResourceGroupColumns());v.getVisibleBrowseColumns(t,r).subscribeAndRun(this._ltm,(function(i){var e=i||v.getDefaultBrowseColumns(t,r)(),f=[y.getNameColumn(),];e.forEach((function(n){n&&n.visible&&f.push({id:n.itemKey||n.id,name:u.observable(n.name),hiddenInCollapsed:!0,format:n.format,width:u.observable("100px"),sortable:!0})}));n.gridViewModel.columns(f)}));this.gridViewModel.loading(!0)},t.prototype.populateCommandBar=function(){var n=[];this._allowOperations&&n.push(this._createAddResourceButton(this._ltm,this._resourceType,"Microsoft.ResourceGroup"));n.push(this._createChooseColumnButton(),this._createRefreshButton());this._allowOperations&&(n.push(new p.Toolbars.Separator),n.push(this._createAssignTagsButton()));this._toolbar.setItems(n)},t.prototype.refresh=function(){return this._performRefresh(this._fetchData())},t})(y.BaseConfiguration);t.BrowseResourceGroupConfiguration=d}))