var CopyableLabel,FxBase,StringComparison,ErrorBase,ko,ExpMocks,ExtensionCore;(function(n){n(ko,ko.mapping={})})((function(n,t){function rt(){for(var r=arguments,u=r.length,f={},e=[],t,n,i;u--;)for(i=r[u],t=i.length;t--;)n=i[t],f[n]||(f[n]=1,e.push(n));return e}function y(n,i){var u,r,f;for(r in i)i.hasOwnProperty(r)&&i[r]&&(u=t.getType(n[r]),r&&n[r]&&u!=="array"&&u!=="string"?y(n[r],i[r]):(f=t.getType(n[r])==="array"&&t.getType(i[r])==="array",n[r]=f?rt(n[r],i[r]):i[r]))}function c(n,t){var i={};return y(i,n),y(i,t),i}function p(n,t){for(var f,i=c({},n),e=w.length-1;e>=0;e--)(f=w[e],i[f])&&(i[""]instanceof Object||(i[""]={}),i[""][f]=i[f],delete i[f]);return t&&(i.ignore=u(t.ignore,i.ignore),i.include=u(t.include,i.include),i.copy=u(t.copy,i.copy),i.observe=u(t.observe,i.observe)),i.ignore=u(i.ignore,r.ignore),i.include=u(i.include,r.include),i.copy=u(i.copy,r.copy),i.observe=u(i.observe,r.observe),i.mappedProperties=i.mappedProperties||{},i.copiedProperties=i.copiedProperties||{},i}function u(i,r){return t.getType(i)!=="array"&&(i=t.getType(i)==="undefined"?[]:[i]),t.getType(r)!=="array"&&(r=t.getType(r)==="undefined"?[]:[r]),n.utils.arrayGetDistinctValues(i.concat(r))}function ut(t,i){var u=n.dependentObservable,r;return n.dependentObservable=function(i,r,u){var f;u=u||{};i&&typeof i=="object"&&(u=i);var s=u.deferEvaluation,e=!1,h=function(i){var f=n.dependentObservable,u,r;return n.dependentObservable=o,u=n.isWriteableObservable(i),n.dependentObservable=f,r=o({read:function(){return e||(n.utils.arrayRemoveItem(t,i),e=!0),i.apply(i,arguments)},write:u&&function(n){return i(n)},deferEvaluation:!0}),it&&(r._wrapper=!0),r.__DO=i,r};return u.deferEvaluation=!0,f=new o(i,r,u),s||(f=h(f),t.push(f)),f},n.dependentObservable.fn=o.fn,n.computed=n.dependentObservable,r=i(),n.dependentObservable=u,n.computed=n.dependentObservable,r}function l(r,u,f,o,v,y,p){var si=t.getType(n.utils.unwrapObservable(u))==="array",ti,ot,ri,lt,ei,wt,yt,gt,d,it,ni,st,ht;y=y||"";t.isMapped(r)&&(ti=n.utils.unwrapObservable(r)[i],f=c(ti,f));var et={data:u,parent:p||v},ct=function(){return f[o]&&f[o].create instanceof Function},pt=function(t){return ut(s,(function(){return n.utils.unwrapObservable(v)instanceof Array?f[o].create({data:t||et.data,parent:et.parent,skip:b}):f[o].create({data:t||et.data,parent:et.parent})}))},rt=function(){return f[o]&&f[o].update instanceof Function},ft=function(t,i){var r={data:i||et.data,parent:et.parent,target:n.utils.unwrapObservable(t)};return n.isWriteableObservable(t)&&(r.observable=t),f[o].update(r)},ii=h.get(u);if(ii)return ii;if(o=o||"",si){var ui=[],fi=!1,w=function(n){return n};f[o]&&f[o].key&&(w=f[o].key,fi=!0);n.isObservable(r)||(r=n.observableArray([]),r.mappedRemove=function(n){var t=typeof n=="function"?n:function(t){return t===w(n)};return r.remove((function(n){return t(w(n))}))},r.mappedRemoveAll=function(t){var i=e(t,w);return r.remove((function(t){return n.utils.arrayIndexOf(i,w(t))!=-1}))},r.mappedDestroy=function(n){var t=typeof n=="function"?n:function(t){return t===w(n)};return r.destroy((function(n){return t(w(n))}))},r.mappedDestroyAll=function(t){var i=e(t,w);return r.destroy((function(t){return n.utils.arrayIndexOf(i,w(t))!=-1}))},r.mappedIndexOf=function(t){var i=e(r(),w),u=w(t);return n.utils.arrayIndexOf(i,u)},r.mappedGet=function(n){return r()[r.mappedIndexOf(n)]},r.mappedCreate=function(t){var i,u;if(r.mappedIndexOf(t)!==-1)throw new Error("There already is an object with the key that you specified.");return i=ct()?pt(t):t,rt()&&(u=ft(i,t),n.isWriteableObservable(i)?i(u):i=u),r.push(i),i});ei=e(n.utils.unwrapObservable(r),w).sort();wt=e(u,w);fi&&wt.sort();for(var oi=n.utils.compareArrays(ei,wt),at={},bt=n.utils.unwrapObservable(u),kt={},dt=!0,tt=0,vt=bt.length;tt<vt;tt++){if(d=w(bt[tt]),d===undefined||d instanceof Object){dt=!1;break}kt[d]=bt[tt]}for(yt=[],gt=0,tt=0,vt=oi.length;tt<vt;tt++){d=oi[tt];ni=y+"["+tt+"]";switch(d.status){case"added":st=dt?kt[d.value]:a(n.utils.unwrapObservable(u),d.value,w);it=l(undefined,st,f,o,r,ni,v);ct()||(it=n.utils.unwrapObservable(it));ht=k(n.utils.unwrapObservable(u),st,at);it===b?gt++:yt[ht-gt]=it;at[ht]=!0;break;case"retained":st=dt?kt[d.value]:a(n.utils.unwrapObservable(u),d.value,w);it=a(r,d.value,w);l(it,st,f,o,r,ni,v);ht=k(n.utils.unwrapObservable(u),st,at);yt[ht]=it;at[ht]=!0;break;case"deleted":it=a(r,d.value,w)}ui.push({event:d.status,item:it})}r(yt);f[o]&&f[o].arrayChanged&&n.utils.arrayForEach(ui,(function(n){f[o].arrayChanged(n.event,n.item)}))}else if(nt(u)){if(r=n.utils.unwrapObservable(r),!r){if(ct())return lt=pt(),rt()&&(lt=ft(lt)),lt;if(rt())return ft(lt);r={}}if(rt()&&(r=ft(r)),h.save(u,r),rt())return r;g(u,(function(t){var e=y.length?y+"."+t:t;if(n.utils.arrayIndexOf(f.ignore,e)==-1){if(n.utils.arrayIndexOf(f.copy,e)!=-1){r[t]=u[t];return}if(typeof u[t]!="object"&&typeof u[t]!="array"&&f.observe.length>0&&n.utils.arrayIndexOf(f.observe,e)==-1){r[t]=u[t];f.copiedProperties[e]=!0;return}var o=h.get(u[t]),s=l(r[t],u[t],f,t,r,e,r),i=o||s;if(f.observe.length>0&&n.utils.arrayIndexOf(f.observe,e)==-1){r[t]=n.utils.unwrapObservable(i);f.copiedProperties[e]=!0;return}n.isWriteableObservable(r[t])?(i=n.utils.unwrapObservable(i),r[t]()!==i&&r[t](i)):(i=r[t]===undefined?i:n.utils.unwrapObservable(i),r[t]=i);f.mappedProperties[e]=!0}}))}else switch(t.getType(u)){case"function":rt()?n.isWriteableObservable(u)?(u(ft(u)),r=u):r=ft(u):r=u;break;default:if(n.isWriteableObservable(r))return rt()?(ot=ft(r),r(ot),ot):(ot=n.utils.unwrapObservable(u),r(ot),ot);if(ri=ct()||rt(),r=ct()?pt():n.observable(n.utils.unwrapObservable(u)),rt()&&r(ft(r)),ri)return r}return r}function k(n,t,i){for(var r=0,u=n.length;r<u;r++)if(i[r]!==!0&&n[r]===t)return r;return null}function d(i,r){var u;return r&&(u=r(i)),t.getType(u)==="undefined"&&(u=i),n.utils.unwrapObservable(u)}function a(t,i,r){var u,e,f;for(t=n.utils.unwrapObservable(t),u=0,e=t.length;u<e;u++)if(f=t[u],d(f,r)===i)return f;throw new Error("When calling ko.update*, the key '"+i+"' was not found!");}function e(t,i){return n.utils.arrayMap(n.utils.unwrapObservable(t),(function(n){return i?d(n,i):n}))}function g(n,i){var r,u;if(t.getType(n)==="array")for(r=0;r<n.length;r++)i(r);else for(u in n)i(u)}function nt(n){var i=t.getType(n);return(i==="object"||i==="array")&&n!==null}function ft(n,i,r){var u=n||"";return t.getType(i)==="array"?n&&(u+="["+r+"]"):(n&&(u+="."),u+=r),u}function et(){var t=[],i=[];this.save=function(r,u){var f=n.utils.arrayIndexOf(t,r);f>=0?i[f]=u:(t.push(r),i.push(u))};this.get=function(r){var u=n.utils.arrayIndexOf(t,r);return u>=0?i[u]:undefined}}function tt(){var n={},t=function(t){var r,i;try{r=t}catch(u){r="$$$"}return i=n[r],i===undefined&&(i=new et,n[r]=i),i};this.save=function(n,i){t(n).save(n,i)};this.get=function(n){return t(n).get(n)}}var it=!0,i="__ko_mapping__",o=n.dependentObservable,v=0,s,h,w=["create","update","key","arrayChanged"],b={},f={include:["_destroy"],ignore:[],copy:[],observe:[]},r=f;t.isMapped=function(t){var r=n.utils.unwrapObservable(t);return r&&r[i]};t.fromJS=function(n){var t,r,u,f;if(arguments.length==0)throw new Error("When calling ko.fromJS, pass the object you want to convert.");try{if(v++||(s=[],h=new tt),arguments.length==2&&(arguments[1][i]?r=arguments[1]:t=arguments[1]),arguments.length==3&&(t=arguments[1],r=arguments[2]),r&&(t=c(t,r[i])),t=p(t),u=l(r,n,t),r&&(u=r),!--v)while(s.length)f=s.pop(),f&&(f(),f.__DO.throttleEvaluation=f.throttleEvaluation);return u[i]=c(u[i],t),u}catch(e){v=0;throw e;}};t.fromJSON=function(i){var r=n.utils.parseJson(i);return arguments[0]=r,t.fromJS.apply(this,arguments)};t.updateFromJS=function(){throw new Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!");};t.updateFromJSON=function(){throw new Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!");};t.toJS=function(u,f){if(r||t.resetDefaultOptions(),arguments.length==0)throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.");if(t.getType(r.ignore)!=="array")throw new Error("ko.mapping.defaultOptions().ignore should be an array.");if(t.getType(r.include)!=="array")throw new Error("ko.mapping.defaultOptions().include should be an array.");if(t.getType(r.copy)!=="array")throw new Error("ko.mapping.defaultOptions().copy should be an array.");return f=p(f,u[i]),t.visitModel(u,(function(t){return n.utils.unwrapObservable(t)}),f)};t.toJSON=function(i,r){var u=t.toJS(i,r);return n.utils.stringifyJson(u)};t.defaultOptions=function(){if(arguments.length>0)r=arguments[0];else return r};t.resetDefaultOptions=function(){r={include:f.include.slice(0),ignore:f.ignore.slice(0),copy:f.copy.slice(0),observe:f.observe.slice(0)}};t.getType=function(n){if(n&&typeof n=="object"){if(n.constructor===Date)return"date";if(n.constructor===Array)return"array"}return typeof n};t.visitModel=function(r,u,f){var o,e,s;if(f=f||{},f.visitedObjects=f.visitedObjects||new tt,e=n.utils.unwrapObservable(r),nt(e))f=p(f,e[i]),u(r,f.parentName),o=t.getType(e)==="array"?[]:{};else return u(r,f.parentName);return f.visitedObjects.save(r,o),s=f.parentName,g(e,(function(r){var h,c;if((!f.ignore||n.utils.arrayIndexOf(f.ignore,r)==-1)&&(h=e[r],f.parentName=ft(s,e,r),n.utils.arrayIndexOf(f.copy,r)!==-1||n.utils.arrayIndexOf(f.include,r)!==-1||!e[i]||!e[i].mappedProperties||e[i].mappedProperties[r]||!e[i].copiedProperties||e[i].copiedProperties[r]||t.getType(e)==="array"))switch(t.getType(n.utils.unwrapObservable(h))){case"object":case"array":case"undefined":c=f.visitedObjects.get(h);o[r]=t.getType(c)!=="undefined"?c:t.visitModel(h,u,f);break;default:o[r]=u(h,f.parentName)}})),o}})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n})(),i,r;t.InProgress="InProgress";t.Success="Success";t.Warning="Warning";t.Failure="Failure";n.NotificationEventType=t;i=(function(){function n(){}return n})();i.DefaultPrecision=2;n.Formatter=i;r=(function(){function n(){}return n})();r.Disabled="Disabled";n.SubscriptionStatus=r})(t=n.Constants||(n.Constants={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(n,t,i){this._enabled=!0;this._lifetime=n;this._stepId=t;this._options=i;i.disabledByDefault&&this.disable();this._setupClicks()}return n.prototype._setupClicks=function(){var n=this;this._options.clickedSelectable.isSelected.subscribe(this._lifetime,(function(t){if(t){if(n._enabled){var i={"collectorBindingInternals-inputs":n._options.getProviderInputs.call(n._options.context),"collectorBindingInternals-errors":{},stepInput:{isLastStep:!1,stepId:n._stepId,status:1}},r=$.extend({},n._options.bladeSelection,{detailBladeInputs:i});n._options.triggeredSelectable.selectedValue(r);n._options.triggeredSelectable.isSelected(!0)}}else n._options.triggeredSelectable.isSelected(!1)}))},n.prototype.onPartInputsSet=function(n){var i=this,t,r;return n.fromProviderBindingInternals&&n.stepOutput&&n.stepOutput.stepId===this._stepId&&(t=n.fromProviderBindingInternals.commit,!!t&&t!==this._baseProviderCommit)?(this._baseProviderCommit=t,r=this._options.onProviderCommit.call(this._options.context,n.fromProviderBindingInternals.outputs),r.then((function(n){n&&(i._options.triggeredSelectable.isSelected(!1),i._options.clickedSelectable.isSelected(!1))}))):null},n.prototype.enable=function(){this._enabled=!0},n.prototype.disable=function(){this._enabled=!1},n})();n.CustomParameterCollectionStep=t})(t=n.ViewModels||(n.ViewModels={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(){"use strict"})(t=n.ViewModels||(n.ViewModels={}))})(ExtensionCore||(ExtensionCore={}));CopyableLabel=MsPortalFx.ViewModels.Controls.Forms.CopyableLabel;FxBase=MsPortalFx.Base,
(function(n){var t;(function(n){"use strict";var t=(function(){function n(n){this.showCopyField=ko.observable(!1);this.showLink=ko.observable(!1);this.showText=ko.observable(!1);this.showCallbackLink=ko.observable(!1);this.label=n}return n.prototype.dispose=function(){},n})(),i,r;n.PropertySheetObject=t;i=(function(n){function t(t,i){var r=n.call(this,t)||this;return r.value=ko.isObservable(i)?i:ko.observable(i),r.showText(!0),r}return __extends(t,n),t})(t);n.TextPropertySheetObject=i;r=(function(n){function t(t,i,r){var u=n.call(this,i)||this,f=new CopyableLabel.ViewModel(t);return f.value(ko.isObservable(r)?r():r),f.disabled(!0),u.value=ko.observable(f),u.showCopyField(!0),ko.isObservable(r)&&(u._valueSubscription=r.subscribe((function(n){f.value(n)}))),u}return __extends(t,n),t.prototype.dispose=function(){n.prototype.dispose.call(this);this.value().dispose();this._valueSubscription&&this._valueSubscription.dispose()},t})(t);n.CopyFieldPropertySheetObject=r})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(){"use strict"})(t=n.ViewModels||(n.ViewModels={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(n,t){var i=this;this.url=ko.observable("");this.text=ko.observable("");this.hotSpot=ko.observable(!1);this.url=ko.observable(n);this.text=ko.observable(t);this.notHotSpot=ko.pureComputed((function(){return!i.hotSpot()}))}return n})(),i,r,u;n.QuickStartLinkBase=t;i=(function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t})(t);n.QuickStartHyperLink=i;r=(function(n){function t(t,i,r){var u=n.call(this,"javascript:void(0)",i)||this;return u.hotSpot(!0),u._openHotspotBlade=t,u._bladeDetails=r,u.linkClick=$.proxy(u._linkClick,u),u}return __extends(t,n),t.prototype._linkClick=function(){return this._openHotspotBlade()?this._openHotspotBlade(undefined):this._openHotspotBlade(this._bladeDetails),!1},t})(t);n.QuickStartHotspotLink=r;u=(function(){function n(n,t,i,r){this.title=ko.observable(n);this.description=ko.observable(t);this.links=ko.observableArray(r||[]);this.iconUri=ko.observable(i)}return n})();n.QuickStartSection=u})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(){"use strict"})(t=n.ViewModels||(n.ViewModels={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(n){this._resourcePartExtenders=[];this._extensionName=n}return n.prototype.registerResourceExtenderViewModel=function(n,t){var i=this;this._resourcePartExtenders.push(t);n.registerForDispose({dispose:function(){i._resourcePartExtenders.remove(t)}})},n.prototype.signalAssetRefresh=function(n,t){var i=this;this._resourcePartExtenders.forEach((function(r){r.signalAssetRefresh(i._extensionName,n,t)}))},n})();n.ResourceExtender=t})(t=n.ViewModels||(n.ViewModels={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){n[n.IgnoreCase=0]="IgnoreCase"})(StringComparison||(StringComparison={}));var StringEqualityComparer=
(function(){function n(){}return n.IgnoreCase=function(n,t){return StringEx.equals(n,t,StringComparison.IgnoreCase)},n})(),StringComparer=
(function(){function n(){}return n.IgnoreCase=function(n,t){return n=typeof n=="string"?n.toUpperCase():"",t=typeof t=="string"?t.toUpperCase():"",n.localeCompare(t)},n})(),StringEx=
(function(){function n(){}return n.equals=function(n,t,i){return typeof n!="string"||typeof t!="string"?!1:(i===StringComparison.IgnoreCase&&(n=n.toUpperCase(),t=t.toUpperCase()),n===t)},n.isStringInArray=function(t,i,r){return typeof t!="string"||!Array.isArray(i)?!1:!!i.first((function(i){return n.equals(t,i,r)}))},n.startsWith=function(n,t,i){return typeof n!="string"||typeof t!="string"?!1:(i===StringComparison.IgnoreCase&&(n=n.toUpperCase(),t=t.toUpperCase()),n.length>=t.length&&n.indexOf(t)===0)},n.endsWith=function(n,t,i){return typeof n!="string"||typeof t!="string"?!1:(i===StringComparison.IgnoreCase&&(n=n.toUpperCase(),t=t.toUpperCase()),n.length>=t.length&&n.indexOf(t,n.length-t.length)!==-1)},n.convertToStringMap=function(n){var t={};return n.split(",").forEach((function(n){var i=n.split(":");i.length===2&&(t[i[0]]=i[1])})),t},n})(),ExtensionCore;(function(n){var t;(function(n){"use strict";function t(n){var t=n.validate.peek();n.validate(isNaN(t)?0:t+1)}function i(t,i,r){i.value.subscribe(t,(function(){n.triggerFormFieldValidation(r)}))}n.triggerFormFieldValidation=t;n.linkFormFieldValidation=i})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";var i,r;(function(n){n[n.Milliseconds=0]="Milliseconds";n[n.Seconds=1]="Seconds";n[n.Minutes=2]="Minutes";n[n.Hours=3]="Hours";n[n.Days=4]="Days"})(i=t.TimeUnit||(t.TimeUnit={}));r=(function(){function t(){}return t.toFriendlyDurationString=function(r,u){var f=function(n,t){var i=Math.pow(10,t);return Math.round(n*i)/i},c=t.getDuration(r,u,i.Milliseconds),e=t.getDuration(r,u,i.Seconds),o=t.getDuration(r,u,i.Minutes),s=t.getDuration(r,u,i.Hours),h=t.getDuration(r,u,i.Days);return h>=1?(h===1?n.Resources.durationDay:n.Resources.durationDays).format(f(h,2)):s>=1?(s===1?n.Resources.durationHour:n.Resources.durationHours).format(f(s,2)):o>=1?(o===1?n.Resources.durationMinute:n.Resources.durationMinutes).format(f(o,2)):e>=1?(e===1?n.Resources.durationSecond:n.Resources.durationSeconds).format(f(e,2)):(c===1?n.Resources.durationMillisecond:n.Resources.durationMilliseconds).format(f(c,2))},t.getDuration=function(n,t,r){var u=t-n;if(u<0)throw new ArgumentError("Start time must be before end time");switch(r){case i.Milliseconds:return u;case i.Seconds:return u/1e3;case i.Minutes:return u/6e4;case i.Hours:return u/36e5;case i.Days:return u/864e5}},t.getMinutesFromXmlTimeDuration=function(n){var t,i=null;return(t=n.match(/PT([0-6]{0,1}[0-9])M/))!==null?i=parseInt(t[1],10):(t=n.match(/PT([0-2]{0,1}[0-9])H/))!==null?i=parseInt(t[1],10)*60:(t=n.match(/PT([0-2]{0,1}[0-9])H([0-6]{0,1}[0-9])M/))!==null?(i=parseInt(t[1],10)*60,i=i+parseInt(t[2],10)):(t=n.match(/P(\d+)D/))!==null?i=parseInt(t[1],10)*1440:(t=n.match(/P(\d+)DT([0-2]{0,1}[0-9])H/))!==null?(i=parseInt(t[1],10)*1440,i=i+parseInt(t[2],10)*60):(t=n.match(/P(\d+)DT([0-2]{0,1}[0-9])H([0-6]{0,1}[0-9])M/))!==null&&(i=parseInt(t[1],10)*1440,i=i+parseInt(t[2],10)*60,i=i+parseInt(t[3],10)),i},t.getXmlTimespanFromMinutes=function(n){var f,i,r,t,u;return n?(i=parseInt(n.toString(),10),t=parseInt((i/60).toString(),10),u=i%60,i>=1440?(r=parseInt((t/24).toString(),10),t=t-r*24,f=t?u?"P{0}DT{1}H{2}M".format(r,t,u):"P{0}D{1}H".format(r,t):"P{0}D".format(r)):f=i>=60?u?"PT{0}H{1}M".format(t,u):"PT{0}H".format(t):"PT{0}M".format(i),f):""},t.roundToLowerHalfHour=function(n){var t=new Date(n.toString());return t.setMinutes((t.getMinutes()/30>>0)*30,0,0),t},t.roundToHigherHalfHour=function(n){var i=t.roundToLowerHalfHour(n);return i.setMinutes(i.getMinutes()+30,0,0),i},t})();t.DateTimeUtility=r})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.prototype.on=function(n,t){var i=this,r=function(){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.apply(i,r)},u;$(this).on(n,r);return u=function(){$(i).off(n,r)},{dispose:u}},n.prototype.trigger=function(n,t){$(this).trigger(n,t)},n})();n.EventSource=t})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){function i(){var i="ExtensionCore.Resources",n=window,t;if(n.Resources&&n.Resources.getResources&&(t=n.Resources.getResources(i)),!t)throw new Error("Unable to find the resources for '"+i+"'.");return function(n){return t[n]}}var t=i(),r,u,f,e,o,s,h;(function(n){var i;(function(n){n.betweenPrefix=t("Network_Validation_betweenPrefix");n.missingAddressSpace=t("Network_Validation_missingAddressSpace");n.subnetOverlaps=t("Network_Validation_subnetOverlaps");n.subnetNotContained=t("Network_Validation_subnetNotContained");n.reserved=t("Network_Validation_reserved");n.notInSubnet=t("Network_Validation_notInSubnet");n.notInRange=t("Network_Validation_notInRange");n.privateSpace=t("Network_Validation_privateSpace");n.prefix=t("Network_Validation_prefix");n.octet=t("Network_Validation_octet");n.nonNullSubnet=t("Network_Validation_nonNullSubnet");n.nonNullAddress=t("Network_Validation_nonNullAddress");n.maxPrefix=t("Network_Validation_maxPrefix");n.malformedSubnet=t("Network_Validation_malformedSubnet");n.malformedAddress=t("Network_Validation_malformedAddress")})(i=n.Validation||(n.Validation={}));n.validation=t("Network_Validation")})(r=n.Network||(n.Network={})),(function(n){n.unitedstates=t("region_unitedstates");n.northwestus=t("region_northwestus");n.eastus2=t("region_eastus2");n.australiasoutheast=t("region_australiasoutheast");n.australiaeast=t("region_australiaeast");n.centralus=t("region_centralus");n.westus=t("region_westus");n.westjapan=t("region_westjapan");n.westeurope=t("region_westeurope");n.washingtondc=t("region_washingtondc");n.southeastasia=t("region_southeastasia");n.southcentralus=t("region_southcentralus");n.siliconvalley=t("region_siliconvalley");n.saopaulo=t("region_saopaulo");n.northeurope=t("region_northeurope");n.northcentralus=t("region_northcentralus");n.eastus=t("region_eastus");n.eastjapan=t("region_eastjapan");n.eastasia=t("region_eastasia")})(u=n.Region||(n.Region={}));n.durationSeconds=t("durationSeconds");n.durationSecond=t("durationSecond");n.durationMinutes=t("durationMinutes");n.durationMinute=t("durationMinute");n.durationMilliseconds=t("durationMilliseconds");n.durationMillisecond=t("durationMillisecond");n.durationHours=t("durationHours");n.durationHour=t("durationHour");n.durationDays=t("durationDays");n.durationDay=t("durationDay"),(function(n){n.reconnectingMessage=t("LogStream_reconnectingMessage");n.connectionLostMessage=t("LogStream_connectionLostMessage");n.connectingMessage=t("LogStream_connectingMessage")})(f=n.LogStream||(n.LogStream={}));n.reasonMessage=t("reasonMessage"),(function(n){n.invalidArgument=t("Validation_invalidArgument");var i;(function(n){n.regexNoSpecialCharacters=t("Validation_ResourceGroup_regexNoSpecialCharacters");n.unique=t("Validation_ResourceGroup_unique");n.regex=t("Validation_ResourceGroup_regex");n.maxLength=t("Validation_ResourceGroup_maxLength")})(i=n.ResourceGroup||(n.ResourceGroup={}));n.required=t("Validation_required");n.confirmPassword=t("Validation_confirmPassword")})(e=n.Validation||(n.Validation={})),(function(n){var i;(function(n){n.title=t("Field_ConfirmPassword_title")})(i=n.ConfirmPassword||(n.ConfirmPassword={}))})(o=n.Field||(n.Field={}));n.loading=t("loading"),(function(n){var i,r,u;(function(n){n.title=t("Create_Location_title");n.filtered=t("Create_Location_filtered")})(i=n.Location||(n.Location={})),(function(n){n.title=t("Create_Subscription_title");n.lockedResourceGroup=t("Create_Subscription_lockedResourceGroup")})(r=n.Subscription||(n.Subscription={})),(function(n){n.title=t("Create_ResourceGroup_title");n.filteredSubscription=t("Create_ResourceGroup_filteredSubscription")})(u=n.ResourceGroup||(n.ResourceGroup={}))})(s=n.Create||(n.Create={}));n.certificateValidation=t("certificateValidation");n.zettaBytesLong=t("zettaBytesLong");n.zettaBytes=t("zettaBytes");n.yottaBytesLong=t("yottaBytesLong");n.yottaBytes=t("yottaBytes");n.teraBytesLong=t("teraBytesLong");n.teraBytes=t("teraBytes");n.petaBytesLong=t("petaBytesLong");n.petaBytes=t("petaBytes");n.megaBytesLong=t("megaBytesLong");n.megaBytes=t("megaBytes");n.kiloBytesLong=t("kiloBytesLong");n.kiloBytes=t("kiloBytes");n.gigaBytesLong=t("gigaBytesLong");n.gigaBytes=t("gigaBytes");n.genericErrorMessage=t("genericErrorMessage");n.exaBytesLong=t("exaBytesLong");n.exaBytes=t("exaBytes"),(function(n){var i,r;(function(n){n.fieldMustBeUnique=t("EditableGrid_Validation_fieldMustBeUnique")})(i=n.Validation||(n.Validation={})),(function(n){n.maxDisplayFormat=t("EditableGrid_MultiselectDropdown_maxDisplayFormat");n.displayFormat=t("EditableGrid_MultiselectDropdown_displayFormat")})(r=n.MultiselectDropdown||(n.MultiselectDropdown={}));n.hiddenForSecurity=t("EditableGrid_hiddenForSecurity")})(h=n.EditableGrid||(n.EditableGrid={}));n.bytesLong=t("bytesLong");n.bytes=t("bytes")})(t=n.Resources||(n.Resources={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";var i=[{name:"B",localizedName:n.Resources.bytes,localizedLongName:n.Resources.bytesLong,conversionFactor:""},{name:"KB",localizedName:n.Resources.kiloBytes,localizedLongName:n.Resources.kiloBytesLong,conversionFactor:"k"},{name:"MB",localizedName:n.Resources.megaBytes,localizedLongName:n.Resources.megaBytesLong,conversionFactor:"M"},{name:"GB",localizedName:n.Resources.gigaBytes,localizedLongName:n.Resources.gigaBytesLong,conversionFactor:"g"},{name:"TB",localizedName:n.Resources.teraBytes,localizedLongName:n.Resources.teraBytesLong,conversionFactor:"T"},{name:"PT",localizedName:n.Resources.petaBytes,localizedLongName:n.Resources.petaBytesLong,conversionFactor:"P"},{name:"EB",localizedName:n.Resources.exaBytes,localizedLongName:n.Resources.exaBytesLong,conversionFactor:"E"},{name:"ZB",localizedName:n.Resources.zettaBytes,localizedLongName:n.Resources.zettaBytesLong,conversionFactor:"Z"},{name:"YB",localizedName:n.Resources.yottaBytes,localizedLongName:n.Resources.yottaBytesLong,conversionFactor:"Y"}],r=(function(){function t(){}return t.addCommas=function(n){for(var i=n.split("."),t=i[0],u=i.length>1?"."+i[1]:"",r=/(\d+)(\d{3})/;r.test(t);)t=t.replace(r,"$1,$2");return t+u},t.roundNumber=function(n,t){return n%1!=0?parseFloat(n.toFixed(t)):n},t.getFileSizeFormat=function(r,u,f){var o=u&&$.map(i,(function(n){return n.name})).indexOf(u)||0,e=o,s=r||0;return f=isNaN(f)?n.Constants.Formatter.DefaultPrecision:f,r&&r>=1024&&(e=Math.floor(Math.log(r)/Math.log(1024)),s=r/Math.pow(1024,e),e=o+e,e=e<i.length?e:i.length-1),{value:t.roundNumber(s,f),unitName:i[e].name,unitDisplayName:i[e].localizedName,unitLongDisplayName:i[e].localizedLongName,conversionFactor:i[e].conversionFactor,conversionValue:Math.pow(1024,o-e)}},t.convertDateSizeFormat=function(n,t,r){var f=t&&$.map(i,(function(n){return n.name})).indexOf(t)||0,u=r&&$.map(i,(function(n){return n.name})).indexOf(r)||0,e=parseFloat((n/Math.pow(1024,u-f)).toFixed(2));return{value:e,unitName:i[u].name,unitDisplayName:i[u].localizedName,unitLongDisplayName:i[u].localizedLongName}},t.getRegionLookupArray=function(){var t={};for(var i in n.Resources.Region)n.Resources.Region.hasOwnProperty(i)&&(t[i]=n.Resources.Region[i]);return t["##DEFAULT##"]="",t},t})();t.Formatters=r})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(n){if(this._isValueCreated=!1,!n)throw new Error("valueFactory cannot be null or undefined");this._valueFactory=n}return Object.defineProperty(n.prototype,"value",{get:function(){return this._value||(this._value=this._valueFactory(),this._isValueCreated=!0),this._value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isValueCreated",{get:function(){return this._isValueCreated},enumerable:!0,configurable:!0}),n})();n.Lazy=t})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";function t(n){n._editScopeCache._loadEdits=function(){return Q(null)};n._editScopeCache._saveEdits=function(){return Q(null)}}n.MockCreateV1ViewModel=t})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";function t(n,t){ko.reactor(n,(function(){n.selectable.selectedValue(t())}))}n.bindContainerSelectedValue=t})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";function i(n,i,r,u){u||(u=3);var e=0,f=$.Deferred(),o=function(){n().done((function(n){var u=i(n);u.status===t.CompleteSuccess?f.resolve(u.response):u.status===t.CompleteFailure?f.reject(u.error):u.status===t.NotComplete&&setTimeout(o,r)})).fail((function(n){e++;e>u?f.reject(n):setTimeout(o,r*e)}))};return setTimeout(o,r),f.promise()}function r(n,i,r,u){u===void 0&&(u=3);var e=0,f=Q.defer(),o=function(){n().then((function(n){var u=i(n);u.status===t.CompleteSuccess?f.resolve(u.response):u.status===t.CompleteFailure?f.reject(u.error):u.status===t.NotComplete&&setTimeout(o,r)})).catch((function(n){e++;e>u?f.reject(n):setTimeout(o,r*e)}))};return setTimeout(o,r),f.promise}n.setPolling=i;n.setPollingQ=r;var t;(function(n){n[n.CompleteSuccess=0]="CompleteSuccess";n[n.CompleteFailure=1]="CompleteFailure";n[n.NotComplete=2]="NotComplete"})(t=n.PollStatus||(n.PollStatus={}))})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";function u(n,t){var r=n.split(""),f="",i,u;if(r.length)for(i=0;i<r.length;i++)u=r[i],u.match(t)&&(f+=u);return f}function r(n,t){for(var i="",r=0;r<n;r++)i=i+String.fromCharCode(Math.floor(26*Math.random()+65));return t?i.toLowerCase():i}function f(n,t){for(var i="",u=0;u<n;u++)i=Math.random()<.5?i+r(1,t):i+Math.floor(Math.random()*9).toString();return t?i.toLowerCase():i}function e(n,t){return n+Math.floor(Math.random()*(t-n+1))}function o(){try{return"localStorage"in window&&window.localStorage!==null}catch(n){return!1}}function s(n,t){MsPortalFx.Data.DataSet.mergeWithoutAtomization({value:n},{value:t})}function h(n){var t=i(ko.toJS(n));return ko.isObservable(n)&&!ko.isObservable(t)&&(t=ko.observable(t)),t}function c(n,t){var r=$.Deferred(),i=0,u=function(){i>=t.length&&r.resolve()};return t.forEach((function(t){var r=!1;t()!==undefined?(i++,setTimeout((function(){u()}))):t.subscribe(n,(function(){r||(r=!0,i++,u())}))})),r.promise()}function l(n){return n&&n.value&&Array.isArray(n.value)?n.value:n}function a(n){if(!n)return"";if(n.responseJSON&&n.responseJSON.Message)return n.responseJSON.Message;if(n.responseJSON&&n.responseJSON.message)return n.responseJSON.message;if(n.responseJSON&&n.responseJSON.error&&n.responseJSON.error.message)return n.responseJSON.error.message;var t;try{if(t=n.responseText&&JSON.parse(n.responseText).Message,t)return t}catch(i){}try{if(t=n.responseText&&JSON.parse(n.responseText).message,t)return t}catch(i){}return""}function v(n){var t=$.Deferred(),i=0;return n.length?n.forEach((function(r){r.always((function(){i+=1;i>=n.length&&t.resolve()}))})):t.resolve(),t.promise()}function y(n){var t=$.Deferred();return n.then((function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t.resolve.apply(t,i)}),(function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t.reject.apply(t,i)})),t.promise()}function p(n){return $.Deferred().resolve(n).promise()}function w(n){var i=this,t=$.Deferred();return n.then((function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];setTimeout((function(){t.resolve.apply(i,r)}))}),(function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];setTimeout((function(){t.reject.apply(i,r)}))})),t.promise()}function b(n,t,i){var r=$.Deferred(),f=r.promise(),u;return n.done((function(){r.resolve.apply(this,arguments)})).fail((function(){r.reject.apply(this,arguments)})),u=setTimeout((function(){r.reject.apply(r,i||[])}),t*1e3),n.always((function(){clearTimeout(u)})),f.timeoutId=u,f}function k(n){var t=n&&n.timeoutId;typeof t=="number"&&clearTimeout(t)}function d(n,t){var i=$.Deferred(),r=0,u=function(){n().always((function(){r+=1})).done((function(){i.resolve.apply(this,arguments)})).fail((function(){r>=t&&i.reject.apply(this,arguments);u()}))};return u(),i.promise()}function g(n){n=n||"";var t=n.split("//"),r=t.length?t.last():"",i=r.split("/");return i.splice(0,1),i.join("/")}function nt(n,t,i){if(typeof n!="string")throw new TypeError("'str' must be of type 'string'");return!!t.first((function(t){return StringEx.equals(n,t,i)}))}function tt(n,t){var i=t*864e5,r=n.getTime()+i;return new Date(r)}function it(n,t){var i=t*864e5,r=n.getTime()-i;return new Date(r)}function rt(t){var r=t.replace(/\s/g,"").toLowerCase(),u=n.Resources.Region,i=u[r];return i?i:t}function ut(n,t){var i=function(n,t){var r,u;for(r in n)if(!t.hasOwnProperty(r)||!!t[r]&&typeof t[r]=="object"&&!Array.isArray(t[r])&&(u=i(ko.isObservable(n[r])?n[r]():n[r],t[r]),!u))return!1;return!0};return i(n,t)}function i(n){var t,r,u;if(Array.isArray(ko.utils.unwrapObservable(n)))t=ko.observableArray(ko.utils.unwrapObservable(n).map((function(n){return i(n)})));else if(MsPortalFx.isObject(n)){t={};for(r in n)n.hasOwnProperty(r)&&(u=i(n[r]),t[r]=ko.isObservable(u)?u:ko.observable(u))}else t=n;return t}t.FilterStringByRegex=u;t.GenerateRandomString=r;t.GenerateRandomAlphaNumericString=f;t.getRandomInteger=e;t.supportsLocalStorage=o;t.merge=s;t.cloneObservable=h;t.waitForObservables=c;t.parseValueArray=l;t.getXhrError=a;t.waitForPromises=v;t.toJQueryPromise=y;t.convertToPromise=p;t.getNonBlockingPromise=w;t.getTimeoutPromise=b;t.clearTimeoutPromise=k;t.callWithRetries=d;t.getUrlPath=g;t.isStringInArray=nt;t.dateAddDays=tt;t.dateSubtractDays=it;t.getRegionDisplayName=rt;t.doInputsMatchModel=ut;t.mapItemIntoObservableProperties=i})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function i(t){var i;return i=typeof t=="string"?t:n.Utilities.getXhrError(t),i||(i=n.Resources.genericErrorMessage),i}function r(n,t,r,u,f,e){var s=MsPortalFx.newGuid(),o,h=u,c="{0}InProgress".format(u),l="{0}Failure".format(u),a="{0}Warning".format(u);return o=new MsPortalFx.UI.NotificationManager.Notification(r,c,MsPortalFx.UI.NotificationManager.NotificationState.InProgress,f||[],n,s),MsPortalFx.UI.NotificationManager.addNotifications([o]),t.done((function(t){var i=h,u=MsPortalFx.UI.NotificationManager.NotificationState.Success;t&&t.WarningMessage&&(i=a,u=MsPortalFx.UI.NotificationManager.NotificationState.Warning,f=f||[],f.push(t.WarningMessage));o=new MsPortalFx.UI.NotificationManager.Notification(r,i,u,f||[],n,s,100,e?e.assetId:null);MsPortalFx.UI.NotificationManager.addNotifications([o])})).fail((function(t){var e=i(t),u=f||[];u.push(e);o=new MsPortalFx.UI.NotificationManager.Notification(r,l,MsPortalFx.UI.NotificationManager.NotificationState.Error,u,n,s);MsPortalFx.UI.NotificationManager.addNotifications([o])}))}function u(t,u,f,e,o,s){var h=$.Deferred(),a=[],c=0,l=[],v;return $.each(u,(function(n,t){l.push(t.promise);t.promise.fail((function(n){c++;a.push("\n\n{0} {1}".format(t.failureMessage,i(n)))}))})),n.Utilities.waitForPromises(l).done((function(){var n=a.join(" ");c>=l.length?h.reject(n):c>=1?h.resolve({WarningMessage:n}):h.resolve({})})),v=r(t,h.promise(),f,e,o,s),{promise:v,operations:u}}function f(n,t,i,r,u){var e=MsPortalFx.newGuid(),f;f=new MsPortalFx.UI.NotificationManager.Notification(n,t,MsPortalFx.UI.NotificationManager.NotificationState.Error,i,r,r?e:null,100,u?u.assetId:null);MsPortalFx.UI.NotificationManager.addNotifications([f])}function e(n,t,i,r,u){var e=MsPortalFx.newGuid(),f;f=new MsPortalFx.UI.NotificationManager.Notification(n,t,MsPortalFx.UI.NotificationManager.NotificationState.Warning,i,r,r?e:null,100,u?u.assetId:null);MsPortalFx.UI.NotificationManager.addNotifications([f])}t.getOperationErrorMessage=i;t.createOperationNotification=r;t.createBatchOperationNotification=u;t.createFailureNotification=f;t.createWarningNotification=e})(i=t.Notifications||(t.Notifications={}))})(t=n.UI||(n.UI={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function r(n){var t=MsPortalFx.UI.NotificationManager.create(n.notificationDefinition.name);i(t,n)}function i(t,i){t.raise(i.notificationDefinition.inProgress,i.assetId,i.properties);i.promise.then((function(){t.raise(i.notificationDefinition.success,i.assetId,i.properties)}),(function(r){var u=typeof r=="string"?r:n.Utilities.getXhrError(r),f;u||(u=n.Resources.genericErrorMessage);f=$.extend({},{errorMessage:u},i.properties);t.raise(i.notificationDefinition.error,i.assetId,f)}))}t.createNotificationFromPromise=r;t.attachPromiseToNotification=i})(i=t.Notifications||(t.Notifications={}))})(t=n.UI||(n.UI={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(){"use strict";function n(n){var t={};return this.forEach((function(i){var r=n(i);r&&(t[r]=i)})),t}function t(n,t){var i=[];return n?(t||(t=function(n,t){return n===t}),this.forEach((function(r){for(var f,u=0;u<n.length;u++)if(f=n[u],t(r,f)){i.push(r);break}})),i):i}function i(n){var t=[];return this.forEach((function(i){var r=t.firstIndex((function(t){return n?n(i,t):i===t}));r<0&&t.push(i)})),t}function r(n,t){var i=t;return i||(i=function(n,t){return n<t?-1:n>t?1:0}),this.sort((function(t,r){var u=n(t),f=n(r);return i(u,f)}))}function u(n,t){return this.sortBy(n,t),this.reverse(),this}function f(n,t,i){var u=n.prototype,f=t;for(var r in t)(i||!u[r])&&Object.defineProperty(u,r,{value:f[r],configurable:!0,enumerable:!1,writable:!0})}f(Array,{toStringMap:n,intersect:t,distinct:i,sortBy:r,sortByDescending:u})})(t=n.Polyfills||(n.Polyfills={}))})(ExtensionCore||(ExtensionCore={}));ErrorBase=
(function(){function n(n){Error.apply(this,arguments);this.name=this.constructor.prototype.name;this.message=n}return n})();ErrorBase.prototype=Error.prototype;var InvalidOperationError=
(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(ErrorBase),ArgumentError=
(function(n){function t(t,i){var f=this,r=i?ExtensionCore.Resources.reasonMessage.format(i):"",u="'{0}'. {1}".format(t,r);return n.call(this,ExtensionCore.Resources.Validation.invalidArgument.format(u))||this}return __extends(t,n),t})(ErrorBase),AbstractMethodError=
(function(n){function t(t,i){return n.call(this,"cannot call abstract method {1} of class {0}. Make sure it is implemented in a derived class.".format(t,i))||this}return __extends(t,n),t})(ErrorBase),ObjectEx=
(function(){function n(){}return n.isObject=function(n){return n&&typeof n=="object"&&!(n instanceof Date)&&!Array.isArray(n)},n})(),ExtensionCore;(function(n){var t;(function(){"use strict";function n(n){return ObjectEx.isObject(n)?t(n):Array.isArray(n)?i(n):JSON.stringify(n)}function t(t){var r=[],i,u;for(i in t)t.hasOwnProperty(i)&&t[i]!==undefined&&r.push({key:i,value:t[i]});return r.sort((function(n,t){return n.key<t.key?-1:1})),u=r.map((function(t){return'"'+t.key+'":'+n(t.value)})),"{"+u.join(",")+"}"}function i(t){var i=t.map((function(t){return n(t)}));return"["+i.join(",")+"]"}JSON.stringifyOrdered||(JSON.stringifyOrdered=n)})(t=n.Polyfills||(n.Polyfills={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){"use strict";function u(t){return!!(n.isObservable(t)&&t.indexOf)}function f(t,i){var r=n.observableArray();return n.reactor(t,(function(){var n=i();r.replaceAll(n)})),r.filter(t,(function(){return!0}))}function r(t){var i=t;return n.utils.extend(i,n.observableArray.fn),i.valueWillMutate=function(){throw new Error("Cannot write a value to a ko.pureComputed array. If you wish to read the current value, don't pass any parameters.");},i.valueHasMutated=function(){i.notifySubscribers(i.peek())},i}var t,i;n.isObservableArray=u;n.computedArray=f;n.observableArray.fn.replaceAll=function(n){var t=[0,this().length];return Array.prototype.push.apply(t,n),this.splice.apply(this,t)};t=n.observableArray.fn.map;n.observableArray.fn.map=function(){var n=t.apply(this,arguments);return r(n)};i=n.observableArray.fn.filter;n.observableArray.fn.filter=function(){var n=i.apply(this,arguments);return r(n)}})(ko||(ko={})),
(function(n){var t;(function(){"use strict";function t(){for(var u,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return u=r.map((function(n){if(n&&$.isFunction(n.then)&&!i(n)){var t=$.Deferred();return n.then((function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t.resolve.apply(t,i)}),(function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t.reject.apply(t,i)})),t.promise()}return n})),n.apply(this,u)}function i(n){return n&&n.promise&&n.state&&n.always&&n.done&&n.fail&&n.progress&&n.then}var n=$.when;$.when=t})(t=n.Polyfills||(n.Polyfills={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";var i=(function(){function t(t){if(!t)throw new ArgumentError(n.Resources.Network.Validation.nonNullAddress);this.address=t.split(".").map((function(i){if(i&&i.length>1&&i[0]==="0"||!i.match(/^\d+$/))throw new ArgumentError(n.Resources.Network.Validation.malformedAddress.format(t));return parseInt(i,10)}));this._validateIpValue();this._calculateByteValues()}return t.prototype.toString=function(){return this.bytesToAddressString(this.subnetBytes)},t.prototype.equals=function(n){return this.subnetBytes===n.subnetBytes},t.prototype.isIpInRange=function(n,t){return n.subnetBytes<=this.subnetBytes&&this.subnetBytes<t.subnetBytes},t.prototype.bytesToAddressString=function(n){return"{0}.{1}.{2}.{3}".format((n&4278190080)>>>24,(n&16711680)>>>16,(n&65280)>>>8,(n&255)>>>0)},t.prototype._validateIpValue=function(){if(this.address.length!==4)throw new ArgumentError(n.Resources.Network.Validation.malformedAddress.format(this.address.join(".")));this._validateOctet(0);this._validateOctet(1);this._validateOctet(2);this._validateOctet(3)},t.prototype._validateOctet=function(t){if(isNaN(this.address[t])||this.address[t]<(t===0?1:0)||this.address[t]>255)throw new ArgumentError(n.Resources.Network.Validation.octet.format(t+1,this.address[t],t===0?1:0,255));},t.prototype._calculateByteValues=function(){this.subnetBytes=(this.address[0]<<24>>>0|this.address[1]<<16>>>0|this.address[2]<<8>>>0|this.address[3]<<0>>>0)>>>0},t})();t.IPv4Address=i})(t=n.Network||(n.Network={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";var i=(function(t){function i(i){var r=this,f,u;if(!i)throw new ArgumentError(n.Resources.Network.Validation.nonNullSubnet);if(f=i.split("/"),r=t.call(this,f[0])||this,f.length===1)r.prefix=32;else if(f.length>2)throw new ArgumentError(n.Resources.Network.Validation.malformedSubnet.format(i));else{if(u=f[1],u&&u.length>1&&u[0]==="0"||!u.match(/^\d+$/))throw new ArgumentError(n.Resources.Network.Validation.malformedSubnet.format(i));r.prefix=parseInt(u,10)}return r._validatePrefix(),r._calculateSubnetByteValues(),r}return __extends(i,t),i.prototype.toString=function(){return"{0}/{1}".format(t.prototype.toString.call(this),this.prefix)},i.prototype.toAddressString=function(){return t.prototype.toString.call(this)},i.prototype.isOtherSubnetContained=function(n){return this.prefix<=n.prefix&&(this.subnetNetMaskBytes&n.subnetBroadcastAddressBytes)>>>0===this.subnetMaskBytes},i.prototype.doesSubnetOverlap=function(n){return this.isOtherSubnetContained(n)||n.isOtherSubnetContained(this)},i.prototype.getFirstAddressInRange=function(n){return this.bytesToAddressString(((this.subnetBytes&this.subnetNetMaskBytes)>>>0)+(n?n:0))},i.prototype.getLastAddressInRange=function(n){return this.bytesToAddressString(this.subnetBroadcastAddressBytes-(n?n:0))},i.prototype.doesContainIp=function(n){var t=new i(n.toString());return this.isOtherSubnetContained(t)},i.prototype.getSubnetRange=function(n,t){return"{0} - {1}".format(this.getFirstAddressInRange(n),this.getLastAddressInRange(t))},i.prototype.getUsableIpAddressCount=function(n,t){return n=n?n:0,t=t?t:0,this.subnetBroadcastAddressBytes-((this.subnetBytes&this.subnetNetMaskBytes)>>>0)-n-t+1},i.prototype.getChildSubnet=function(n,t){var s=this._getUsablePrefix(n,!0),e,r,u,f,o;if(t&&t.length){if(e=0,t.forEach((function(n){e+=n.getUsableIpAddressCount()})),this.getUsableIpAddressCount()-e<Math.pow(2,32-n))return null;for(t.sort((function(n,t){return n.subnetBytes<t.subnetBytes?-1:1})),r=new i(this.getFirstAddressInRange()+"/"+s),u=!0;u;)for(u=!1,f=0;f<t.length;f++)if(o=t[f],r.doesSubnetOverlap(o)){r=o.getNextSubnet(n);u=!0;break}return this.isOtherSubnetContained(r)?r:null}return new i(this.getFirstAddressInRange()+"/"+s)},i.prototype.getIpAddress=function(n){var t=n?n:0;if(this.getUsableIpAddressCount()<t)throw new ArgumentError("offset","The requested IP Address is not in this subnet");return this.bytesToAddressString(this.subnetBytes+t)},i.prototype.getNextSubnet=function(n){var t=this._getUsablePrefix(n,!1),r,u;return t<this.prefix?(u=new i(this.toAddressString()+"/"+t),r=u.bytesToAddressString(u.subnetBroadcastAddressBytes+1)):r=this.bytesToAddressString(this.subnetBroadcastAddressBytes+1),new i(r+"/"+t)},i.prototype.findContainingAddressSpace=function(n){var r,t,u;if(!n||n.length===undefined)throw new ArgumentError("addressSpaces","The list of address spaces must be an array");for(typeof n[0]=="string"&&(n=n.map((function(n){return new i(n)}))),r=n,t=0;t<r.length;t++)if(u=r[t],u.isOtherSubnetContained(this))return u;return null},i.prototype._getUsablePrefix=function(n,t){var i=this.prefix;if(n){if(typeof n=="string"&&(n=parseInt(n,10)),t&&n<this.prefix)throw new ArgumentError("prefix","The supplied prefix was smaller than the parent. It must be greater than or equal to the parent");i=n}return i},i.findSubnetGap=function(t,r,u){var s,c,f,w,h,o,v,l,a;if(!t)throw new ArgumentError("existingSubnets","existingSubnets must not be null");if(r<1||r>32)throw new ArgumentError("desiredPrefix",n.Resources.Network.Validation.prefix);if(t.length===0)return new i("10.0.0.0/"+r.toString());for(s=typeof t[0]=="string"?t.map((function(n){return new i(n)})):t,s.sort((function(n,t){return n.subnetBroadcastAddressBytes<t.subnetBroadcastAddressBytes?-1:1})),c=[],f=0;f<s.length;f++)if(w=c.first((function(n){return n===f})),!w)for(h=0;h<s.length;h++)f!==h&&s[f].isOtherSubnetContained(s[h])&&c.push(h);if(o=s.filter((function(n,t){var i=c.first((function(n){return n===t}));return i===null})),v=new i("10.0.0.0/"+r),v.subnetBroadcastAddressBytes<o[0].subnetBytes)return v;var e,y=new i("10.0.0.0/8"),p=new i("172.16.0.0/12"),b=new i("192.168.0.0/16");for(f=0;f<o.length;f++)if(l=o[f].prefix>r?new i(o[f].toAddressString()+"/"+r.toString()):o[f],a=f+1<o.length?o[f+1]:null,a===null||a.subnetBytes-l.subnetBroadcastAddressBytes>=Math.pow(2,32-r))if(e=new i(l.bytesToAddressString(l.subnetBroadcastAddressBytes+1)+"/"+r),u){if(y.isOtherSubnetContained(e)||p.isOtherSubnetContained(e)||b.isOtherSubnetContained(e))return e;if(a===null){if(e.subnetBroadcastAddressBytes<y.subnetBytes)return r>=8?new i("10.0.0.0/"+r):null;if(e.subnetBytes>y.subnetBroadcastAddressBytes&&e.subnetBroadcastAddressBytes<p.subnetBytes)return r>=12?new i("172.16.0.0/"+r):null;if(e.subnetBytes>p.subnetBroadcastAddressBytes&&e.subnetBroadcastAddressBytes<b.subnetBytes)return r>=16?new i("192.168.0.0/"+r):null}}else return e},i.prototype._validatePrefix=function(){if(this.prefix<1||this.prefix>32)throw new ArgumentError("Prefix",n.Resources.Network.Validation.prefix);},i.prototype._calculateSubnetByteValues=function(){this.subnetNetMaskBytes=4294967295<<32-this.prefix>>>0;this.subnetMaskBytes=(this.subnetNetMaskBytes&this.subnetBytes)>>>0;this.subnetBroadcastAddressBytes=((this.subnetNetMaskBytes^4294967295)>>>0|this.subnetBytes)>>>0},i})(t.IPv4Address);t.IPv4Subnet=i})(t=n.Network||(n.Network={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";function i(t,i){var r={};return t.forEach((function(t){var u=new n.Network.IPv4Subnet(t),f=i.map((function(t){return new n.Network.IPv4Subnet(t)})).filter((function(n){return u.isOtherSubnetContained(n)}));r[t]=f})),r}t.getSubnetsInAddressSpaces=i})(t=n.Network||(n.Network={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";function i(){return new MsPortalFx.ViewModels.CustomValidation("",function(n){var i={valid:!0,message:undefined};if(n!=="")try{new t.IPv4Address(n)}catch(r){i.valid=!1;i.message=r.message}return Q(i)})}function r(i,r){return new MsPortalFx.ViewModels.CustomValidation("",function(u){var e=new t.IPv4Address(u),f={valid:!0,message:undefined};return e.isIpInRange(i,r)||(f.valid=!1,f.message=n.Resources.Network.Validation.notInRange.format(i.toString(),r.bytesToAddressString(r.subnetBytes-1))),Q(f)})}function u(i){return new MsPortalFx.ViewModels.CustomValidation("",function(r){var f=new t.IPv4Address(r),u={valid:!0,message:undefined};return i.doesContainIp(f)||(u.valid=!1,u.message=n.Resources.Network.Validation.notInSubnet.format(i.toString())),Q(u)})}function f(i){return new MsPortalFx.ViewModels.CustomValidation("",function(r){for(var e=new t.IPv4Address(r),u={valid:!0,message:undefined},f=0;f<i.length;++f)if(e.equals(i[f])){u.valid=!1;u.message=n.Resources.Network.Validation.reserved;break}return Q(u)})}function e(i,r){return new MsPortalFx.ViewModels.CustomValidation("",function(u){var f={valid:!0,message:undefined},e;try{e=new t.IPv4Subnet(u);i&&r&&(e.prefix>i||e.prefix<r)?(f.valid=!1,f.message=n.Resources.Network.Validation.betweenPrefix.format(r,i)):i&&e.prefix>i&&(f.valid=!1,f.message=n.Resources.Network.Validation.maxPrefix.format(i))}catch(o){f.valid=!1;f.message=o.message}return Q(f)})}function o(i){return new MsPortalFx.ViewModels.CustomValidation("",function(r){var u={valid:!0,message:undefined},f,e;if(i())try{f=new t.IPv4Subnet(r);e=new t.IPv4Subnet(i());e.isOtherSubnetContained(f)||(u.valid=!1,u.message=n.Resources.Network.Validation.subnetNotContained.format(i()))}catch(o){u.valid=!1;u.message=o.message}else u.valid=!1,u.message=n.Resources.Network.Validation.missingAddressSpace;return Q(u)})}function s(i){return new MsPortalFx.ViewModels.CustomValidation("",function(r){var u={valid:!0,message:undefined},f;try{f=new t.IPv4Subnet(r);i()&&i().forEach((function(i){var r=new t.IPv4Subnet(i);f.isOtherSubnetContained(r)||(u.valid=!1,u.message=n.Resources.Network.Validation.subnetNotContained.format(i))}))}catch(e){u.valid=!1;u.message=e.message}return Q(u)})}function h(i){return new MsPortalFx.ViewModels.CustomValidation("",function(r){var u={valid:!0,message:undefined},f;try{f=new t.IPv4Subnet(r);i().forEach((function(i){var r=new t.IPv4Subnet(i);f.doesSubnetOverlap(r)&&(u.valid=!1,u.message=n.Resources.Network.Validation.subnetOverlaps.format(i))}))}catch(e){u.valid=!1;u.message=e.message}return Q(u)})}function c(){return new MsPortalFx.ViewModels.CustomValidation("",function(i){var r={valid:!1,message:n.Resources.Network.Validation.privateSpace},f=[new t.IPv4Subnet("172.16.0.0/12"),new t.IPv4Subnet("192.168.0.0/16"),new t.IPv4Subnet("10.0.0.0/8")],u;try{u=new t.IPv4Subnet(i);f.forEach((function(n){n.isOtherSubnetContained(u)&&(r.valid=!0,r.message=undefined)}))}catch(e){r.valid=!1;r.message=e.message}return Q(r)})}t.getIpAddressValidator=i;t.getIpAddressInRangeValidator=r;t.getIpAddressInSubnetValidator=u;t.getIpAddressNotReservedValidator=f;t.getCidrSubnetValidator=e;t.getSubnetIsContainedInAddressSpaceValidator=o;t.getAddressSpaceContainsAllSubnets=s;t.getSubnetDoesntOverlapWithOtherSubnets=h;t.getPrivateSubnetValidator=c})(t=n.Network||(n.Network={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";function t(n,t){var u=i(n,t),r=Q.defer();return MsPortalFx.Base.Net2.ajax(u).then((function(n){return r.resolve(n)})).catch((function(n){return r.reject(n.jqXHR)})),r.promise}function r(n,t){var u=i(n,t),r=Q.defer();return MsPortalFx.Base.Net2.cachedAjax(u).then((function(n){return r.resolve(n)})).catch((function(n){return r.reject(n.jqXHR)})),r.promise}function u(n,i){return t(n,{data:i,type:"POST"})}function f(n,i){return t(n,{data:i,type:"PUT"})}function e(n,i){return t(n,{data:i,type:"PATCH"})}function o(n){return t(n,{type:"DELETE"})}function s(n,i){return t(n,{data:i,type:"GET"})}function i(n,t){n&&(n=MsPortalFx.Base.Resources.getAppRelativeUri(n));t=h(t);t.url=n;var i=t;return i.uri=i.url,i}function h(t){return t?(t=$.extend({},n.defaultAjaxSettings,t),t.traditional&&t.data&&(t.data=typeof t.data=="string"?t.data:ko.toJSON(t.data||{})),t):t}n.defaultAjaxSettings={cache:!1,contentType:"application/json",traditional:!0,setAuthorizationHeader:!0};n.ajax=t;n.cachedAjax=r;n.post=u;n.put=f;n.patch=e;n.ajaxDelete=o;n.get=s})(t=n.Net||(n.Net={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(){"use strict"})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(){"use strict"})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){"use strict";var t=(function(){function n(){this._db={}}return n.prototype.FindEntity=function(n,t,i){if(i||(i="id"),Array.isArray(this._db[t])){var r=this._db[t].first((function(t){return ko.isObservable(t[i])?t[i]()===n:t[i]===n}));if(r)return r}return null},n.prototype.FindEntities=function(n){return Array.isArray(this._db[n])?this._db[n]:[]},n.prototype.AddEntity=function(n,t,i){if(i||(i="id"),Array.isArray(this._db[t])){if(this.FindEntity(n[i],t,i))throw new Error("Entity with id '{0}' already existed.".format(n[i]));}else this._db[t]=[];return this._db[t].push(n),n},n.prototype.RemoveEntity=function(n,t,i){if(i||(i="id"),Array.isArray(this._db[t])){var r=this._db[t].firstIndex((function(t){return ko.isObservable(t[i])?t[i]()===n:t[i]===n}));r>-1&&this._db[t].splice(r,1)}},n.prototype.RemoveAllEntities=function(n){Array.isArray(this._db[n])&&(this._db[n]=[])},n.prototype.FindIndependentEntity=function(n){return typeof this._db[n]!="undefined"?this._db[n]:null},n.prototype.AddIndependentEntity=function(n,t){if(this._db[t])throw new Error("Independent Entity with key '{0}' already existed.".format(t));this._db[t]=n},n.prototype.RemoveIndependentEntity=function(n){delete this._db[n]},n.prototype.ClearAll=function(){this._db={}},n})();n.MockDb=t})(ExpMocks||(ExpMocks={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(){this._entries={}}return n.prototype.addItem=function(n,t){if(this._entries[n])throw new Error("InvalidOperationException: item with key '{0}' already exists in the cache".format(n));return this._entries[n]={item:t,refcount:1},t},n.prototype.getItem=function(n){var t=this._entries[n];return t?(t.refcount+=1,t.item):null},n.prototype.getOrAddItem=function(n,t){return this.getItem(n)||this.addItem(n,t())},n.prototype.releaseItem=function(n,t){var i=this._entries[n];if(!i){MsPortalFx.Base.Diagnostics.Log.writeEntry(1,"ExtensionCore.Internal.RefCountCache","RefCountCache.release: item with key '{0}' does not exist in cache".format(n));return}i.refcount-=1;i.refcount<=0&&this.removeItem(n,t)},n.prototype.removeItem=function(n,t){this._entries[n]&&(t&&t(this._entries[n].item),delete this._entries[n])},n.prototype.peekAtItem=function(n){var t=this._entries[n];return t?t.item:null},n})();n.RefCountCache=t})(t=n.Internal||(n.Internal={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";var i,f,r,u;(function(n){n[n.SingleItem=0]="SingleItem";n[n.PartialList=1]="PartialList";n[n.List=2]="List";n[n.Root=3]="Root"})(i=t.AtomizationScope||(t.AtomizationScope={}));f=(function(){function t(){this._atomizationCaches=new n.Internal.RefCountCache;this._globalPartitionKey="##GLOBAL##"}return t.prototype.getItems=function(n){var t=this._atomizationCaches.peekAtItem(n||this._globalPartitionKey);return t&&t.data},t.prototype._getOrAddAtomizationCache=function(n,t){return this._atomizationCaches.getOrAddItem(n||this._globalPartitionKey,(function(){return new r(t)}))},t.prototype._releaseAtomizationCache=function(n){this._atomizationCaches.releaseItem(n||this._globalPartitionKey)},t})();t.AtomizationContext=f;r=(function(){function t(t){this._entries=new n.Internal.RefCountCache;t=t||[];this.data=Array.isArray(t)?ko.observableArray():ko.observable();n.Utilities.merge(t,this.data)}return t.prototype.getEntry=function(n,t,i,r,f){var e=this;return this._entries.getOrAddItem(n,(function(){return new u({cache:e,key:n,scope:t,sourcePath:i,targetPath:r,itemMatchesAtomization:f})}))},t.prototype.releaseEntry=function(n){this._entries.releaseItem(n,(function(n){n.dispose()}))},t.prototype.setLatestFullFetchStart=function(n){this._latestFullFetchStart=n},t.prototype.canMerge=function(n){return!n||!this._latestFullFetchStart||n>=this._latestFullFetchStart},t})();t.AtomizationCache=r;u=(function(){function t(n){if(this._hasBeenMergedOnce=!1,this._lifetime=new FxImpl.TriggerableLifetimeManager,this._key=n.key,this._cache=n.cache,this._scope=n.scope,this._sourcePath=n.sourcePath,this._targetPath=n.targetPath,this._itemMatchesAtomization=n.itemMatchesAtomization,!this._itemMatchesAtomization&&(this._scope===i.SingleItem||this._scope===i.PartialList))throw new Error("Need to supply an itemMatchesAtomization callback for AtomizationScope.SingleItem or AtomizationScope.PartialList");this.data=this._createDataObservable()}return Object.defineProperty(t.prototype,"_allItems",{get:function(){return this._targetPath?this._cache.data()[this._targetPath]:this._cache.data},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._lifetime.dispose()},t.prototype.merge=function(n,t){if(this._cache.canMerge(t.fetchStart)){n=ko.toJS(n);n=this._sourcePath?n[this._sourcePath]:n;switch(this._scope){case i.SingleItem:this._mergeSingleItem(n,t);break;case i.PartialList:this._mergePartialList(n,t);break;case i.List:this._mergeList(n,t);break;case i.Root:this._mergeRoot(n,t)}this._hasBeenMergedOnce=!0}},t.prototype.hasCachedData=function(){switch(this._scope){case i.SingleItem:return!!this.data();default:return this._hasBeenMergedOnce}},t.prototype._mergeSingleItem=function(t,i){var r=this._allItems().first(this._itemMatchesAtomization);r?MsPortalFx.Data.DataSet.mergeWithoutAtomization(t,r,i):this._allItems.push(n.Utilities.mapItemIntoObservableProperties(t))},t.prototype._mergePartialList=function(n,t){var i=this,r=this._allItems().filter(this._itemMatchesAtomization),u;MsPortalFx.Data.DataSet.mergeWithoutAtomization(n,r,t);u=r.filter((function(n){return i._itemMatchesAtomization(n)&&i._allItems.indexOf(n)<=-1}));this._allItems.push.apply(this._allItems,u)},t.prototype._mergeList=function(n,t){MsPortalFx.Data.DataSet.mergeWithoutAtomization(n,this._allItems,t);this._cache.setLatestFullFetchStart(t.fetchStart)},t.prototype._mergeRoot=function(n,t){MsPortalFx.Data.DataSet.mergeWithoutAtomization(n,this._cache.data,t);this._cache.setLatestFullFetchStart(t.fetchStart)},t.prototype._createDataObservable=function(){var t=this,n;switch(this._scope){case i.SingleItem:return n=ko.observable(),ko.reactor(this._lifetime,(function(){var i=t._allItems().first(t._itemMatchesAtomization);i&&n(i)})),n;case i.PartialList:return this._allItems.filter(this._lifetime,this._itemMatchesAtomization);case i.List:return this._allItems;case i.Root:default:return this._cache.data}},t.prototype._getTargetItems=function(){return this._targetPath?this._cache.data()[this._targetPath]:this._cache.data},t})();t.AtomizationCacheEntry=u})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(n,t,i){this.pollingInterval=n;this.fastPollingInterval=typeof t=="number"?t:n;this.slowPollingInterval=typeof i=="number"?i:n}return n})();t.NoPolling=new t(432e5);n.PollingIntervals=t})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";function r(){return t.pollingInterval}function u(){return t.fastPollingInterval}function f(){return t.slowPollingInterval}function e(){t={pollingInterval:MsPortalFx.getEnvironmentValue("pollingInterval"),fastPollingInterval:MsPortalFx.getEnvironmentValue("fastPollingInterval"),slowPollingInterval:MsPortalFx.getEnvironmentValue("slowPollingInterval")};MsPortalFx.Data.Loader.setPollingIntervals(null,t)}var i=432e5,t;n.NoPolling={pollingInterval:i,fastPollingInterval:i,slowPollingInterval:i};n.getPollingInterval=r;n.getFastPollingInterval=u;n.getSlowPollingInterval=f;e()})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";function o(t,i,r,u){return n.Net.ajax(i,{type:t,headers:r,data:u})}function i(t,i,r,u){return n.Net.cachedAjax(i,{type:t,headers:r,data:u})}function s(n,t,r,u,f){return i(f,t,u,r)}function h(t){var i=n.Utilities.parseValueArray(t);return{data:i}}function c(n,t){var i=n._loadedCacheEntry();!n.loading()&&i&&i.data&&i.data.push(t)}function l(n,t){var i=n._loadedCacheEntry();!n.loading()&&i&&i.data&&i.data.remove(t)}function r(t){typeof t.poll!="boolean"&&(t.poll=!0);t.extendEntryLifetimes||(t.pollInterval||(t.pollInterval=n.Data.getPollingInterval()),typeof t.evictionDelay=="undefined"&&(t.evictionDelay=MsPortalFx.getEnvironmentValue("cacheEvictionDelay")));t.supplyData||(t.supplyData=i)}var e=(function(n){function t(t){var i=this;return r(t),n.call(this,t)||this}return __extends(t,n),t})(MsPortalFx.Data.EntityCache),u,f;MsPortalFx.Data.EntityCache=e;u=(function(n){function t(t){var i=this;return r(t),n.call(this,t)||this}return __extends(t,n),t})(MsPortalFx.Data.QueryCache);MsPortalFx.Data.QueryCache=u;f=(function(n){function t(t){var i=n.call(this,t)||this;return i.config=t,r(i.config),i._isHttpPutOrPost()&&i._setHttpPutOrPostConfigOptions(i.config),i}return __extends(t,n),t.prototype.serializeParams=function(t){if(this.config.serializeParams)return this.config.serializeParams(t);var i=n.prototype.serializeParams.call(this,t)||"";return this._isHttpPutOrPost()&&t&&(i="{0} - {1}".format(i,JSON.stringifyOrdered(ko.toJS(t)))),i.toUpperCase()},t.prototype._setHttpPutOrPostConfigOptions=function(){var t=this,n;this.config.requestBody||(this.config.requestBody=function(n){return n});this.config.supplyData||(this.config.supplyData=i);n=this.config.supplyData;this.config.supplyData=function(i,r,u,f,e,o){var s=t.config.requestBody(e);return ObjectEx.isObject(s)&&(f=f||{},$.extend(f,s)),n(i,r,u,f,e,o)}},t.prototype._isHttpPutOrPost=function(){var n=this.config.httpMethod||"GET";return!StringEx.equals(n,"GET",StringComparison.IgnoreCase)},t})(MsPortalFx.Data.DataCacheLoader);t.DataCacheLoader=f;t.defaultSupplyDataNoCaching=o;t.defaultSupplyData=i;t.defaultFetchData=s;t.processValueArrayServerResponse=h;t.addItemToQueryView=c;t.removeItemFromQueryView=l})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";var i=(function(i){function r(t){var r=i.call(this,t)||this;if(r._atomizedDataSetCache=new n.Internal.RefCountCache,!t.entityTypeName)throw new Error("AtomizedDataCacheLoader: atomized data caches must specify an entityTypeName. Make sure that config.entityTypeName is a valid TypeMetadata name, or the cache will have undefined behavior when merging data.");return r._dataSetParams={},r}return __extends(r,i),r.prototype.loadDataSetForParams=function(n,r,u){var e=this,h,o,f,s;return this._dataSetParams[n]=r,h=this.config.entityTypeName!==undefined?MsPortalFx.Data.Loader.getDataSet(n,this.config.entityTypeName):MsPortalFx.Data.Loader.getDataSet(n,!0),o=this._atomizedDataSetCache.getOrAddItem(n,(function(){var i=e._getOrAddAtomizationCache(r);return new t.AtomizedDataSet(n,h,e.config.entityTypeName,e._getAtomizedDataSetOptions(i,r))})),f=Q.defer(),i.prototype.loadDataSetForParams.call(this,n,r,u).then((function(){o.data()?f.resolve(o):f.reject()}),(function(){f.reject()})),s=f.promise,s.dataSetName=n,s},r.prototype.loadDataSet=function(n,r){var o=this,f=MsPortalFx.Data.Loader.getDataSet(n),u=this._atomizedDataSetCache.peekAtItem(n),e;return r.loaderOptions=r.loaderOptions||{},e=r.loaderOptions.fetchData||t.defaultFetchData,r.loaderOptions.fetchData=function(n,t,i,r,s){if(f&&u&&!f.data&&u.hasCachedData()){var h=o._convertObservableDataToRawJavaScriptObject(u.data()),c={cachedAjax:!0,data:h,modified:!1};return Q(c)}return e(n,t,i,r,s)},i.prototype.loadDataSet.call(this,n,r)},r.prototype.disposeDataSet=function(n){this._atomizedDataSetCache.releaseItem(n.dataSetName,(function(n){n.dispose()}));this._releaseAtomizationCache(this._dataSetParams[n.dataSetName]);delete this._dataSetParams[n.dataSetName];i.prototype.disposeDataSet.call(this,n)},r.prototype._convertObservableDataToRawJavaScriptObject=function(n){var t,i,r;n=ko.utils.unwrapObservable(n);t=ko.mapping.toJS(n);for(i in n)ko.isComputed(n[i])&&delete t[i];return this.config.atomization.mergeOptions&&this.config.atomization.mergeOptions.sourcePath&&(r={},r[this.config.atomization.mergeOptions.sourcePath]=t,t=r),t},r.prototype._getOrAddAtomizationCache=function(n){var t=this.config.atomization.partitionKey&&this.config.atomization.partitionKey(n),i=this.config.atomization.mergeOptions&&this.config.atomization.mergeOptions.initialData;return this.config.atomization.context._getOrAddAtomizationCache(t,i)},r.prototype._releaseAtomizationCache=function(n){var t=this.config.atomization.partitionKey&&this.config.atomization.partitionKey(n);return this.config.atomization.context._releaseAtomizationCache(t)},r.prototype._getAtomizedDataSetOptions=function(n,t){var r=this,i;return this.config.atomization.itemMatchesAtomization&&(i=function(n){return r.config.atomization.itemMatchesAtomization(n,t)}),{cache:n,scope:this.config.atomization.scope,itemMatchesAtomization:i,sourcePath:this.config.atomization.mergeOptions&&this.config.atomization.mergeOptions.sourcePath,targetPath:this.config.atomization.mergeOptions&&this.config.atomization.mergeOptions.targetPath}},r})(t.DataCacheLoader);t.AtomizedDataCacheLoader=i})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i,r,u){var f=n.call(this,r)||this;f._dataSetName=t;f._dataSet=i;f._entityType=r;f._cache=u.cache;f._cacheEntry=f._cache.getEntry(t,u.scope,u.sourcePath,u.targetPath,u.itemMatchesAtomization);$(f._dataSet).on("fetchStart",f._fetchStartHandler=f._onFetchStart.bind(f)).on("mergeComplete",f._mergeCompleteHandler=f._onMergeComplete.bind(f));return f}return __extends(t,n),Object.defineProperty(t.prototype,"data",{get:function(){return this._cacheEntry.data},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){$(this._dataSet).off("fetchStart",this._fetchStartHandler).off("mergeComplete",this._mergeCompleteHandler);this._cache.releaseEntry(this._dataSetName)},t.prototype.merge=function(n,t){this._cacheEntry.merge(n,t)},t.prototype.hasCachedData=function(){return this._cacheEntry.hasCachedData()},t.prototype._onFetchStart=function(){this._latestFetchStart=+new Date},t.prototype._onMergeComplete=function(){this.merge(this._dataSet.data,{type:this._entityType,fetchStart:this._latestFetchStart})},t})(MsPortalFx.Data.DataSet);n.AtomizedDataSet=t})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(){"use strict"})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";function t(n,t){var i;return i=t.type!==undefined?MsPortalFx.Data.Loader.getDataSet(n,t.type):MsPortalFx.Data.Loader.getDataSet(n,!0),t.initialData!==undefined&&i.merge(t.initialData),t.pollingIntervals!==undefined&&MsPortalFx.Data.Loader.setPollingIntervals(n,t.pollingIntervals),t.setFastPolling&&MsPortalFx.Data.Loader.setFastPolling(n,!0),i}function i(t,i){var r=typeof i.uri=="string"?MsPortalFx.Base.Resources.getAppRelativeUri(i.uri):"";return new n.RemoteDataSource(t,r,i.fetchData)}function r(n){var t=Q.defer();return n().then((function(){for(var n,r,u=[],i=0;i<arguments.length;i++)u[i]=arguments[i];n=u[0];r=$.isArray(n)?ko.observableArray():{};n?MsPortalFx.Data.DataSet.mergeWithoutAtomization(n,r):r=n;t.resolve(r)})).fail((function(){t.reject()})),t.promise}n.createDataSet=t;n.createRemoteDataSource=i;n.getObservableDataAsync=r})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){var i;(function(t){"use strict";function u(n){r("releasing dataset {0}".format(n));i.releaseItem(n,(function(t){r("disposing dataset {0}".format(n));MsPortalFx.Data.Loader.disposeDataSet(n);t.dataSource.dispose()}))}function f(n){return i.peekAtItem(n)}function r(n){MsPortalFx.Base.Diagnostics.Log.writeEntry(0,"ExtensionCore.Data.DataSetCache","ExtensionCore.Data.DataSetCache: {0}".format(n))}var i=new n.Internal.RefCountCache;t.release=u;t.peek=f})(i=t.DataSetCache||(t.DataSetCache={}))})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";function t(t){n.DataSetCache.release(t)}function i(t){return n.DataSetCache.peek(t)}n.releaseRefCountedDataSet=t;n.peekAtRefCountedDataSet=i})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict"})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";var i=(function(){function t(t,i,r){this._dataSetName=t;this._uri=i;r||(r=function(t,i,r){return n.Net.post(i,r)});this._fetchData=r}return t.prototype.dispose=function(){MsPortalFx.Data.Loader.disposeDataSet(this._dataSetName)},t})();t.RemoteDataSource=i})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.isCapability=function(n){if(n){var t=n.split("/");if(t&&t.length===7)return t[0]===""&&t[1].toUpperCase()==="subscriptions".toUpperCase()&&t[2]!==""&&t[3].toUpperCase()==="providers".toUpperCase()&&t[4]!==""&&t[5].toUpperCase()==="capabilities".toUpperCase()&&t[6]!==""}return!1},n.parseCapabilityId=function(t){if(t&&n.isCapability(t)){var i=t.split("/");return{subscription:i[2],provider:i[4],location:i[6]}}},n})();n.CapabilityUri=t})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";function u(u,e){e===void 0&&(e=1e4);var o=Q.defer(),s=i(u.resourceProviders,u.subscriptionId),h=r(u.subscriptionId,u.resourceGroupName,u.resourceGroupLocation);return Q.all([s,h]).then((function(){var i=t.deployUrlTemplate.format(MsPortalFx.getEnvironmentValue("csmManagementServiceUri"),u.subscriptionId,u.resourceGroupName,u.deploymentName,MsPortalFx.getEnvironmentValue("csmApiVersion"));n.Net.put(i,{properties:{mode:"incremental",parameters:f(u.parameters),template:JSON.parse(u.templateJson)}}).then((function(t){o.notify(t.properties);n.Utilities.setPollingQ((function(){return n.Net.get(i)}),(function(t){return StringEx.equals(t.properties.provisioningState,"Succeeded",StringComparison.IgnoreCase)?{response:t,status:n.Utilities.PollStatus.CompleteSuccess}:StringEx.equals(t.properties.provisioningState,"Failed",StringComparison.IgnoreCase)||StringEx.equals(t.properties.provisioningState,"Canceled",StringComparison.IgnoreCase)?{response:t,error:t,status:n.Utilities.PollStatus.CompleteFailure}:{status:n.Utilities.PollStatus.NotComplete}}),e).then((function(n){o.resolve(n.properties)})).catch((function(n){o.reject(n.properties)}))})).catch((function(n){o.reject(n)}))})).catch((function(n){o.reject(n)})),o.promise}function i(i,r){var u=Q.defer(),f=[];return i&&i.length?(i.forEach((function(i){f.push(n.Net.post(t.registerUrlTemplate.format(MsPortalFx.getEnvironmentValue("csmManagementServiceUri"),r,i,MsPortalFx.getEnvironmentValue("csmApiVersion"))))})),Q.all(f).finally((function(){u.resolve()}))):u.resolve(),u.promise}function r(i,r,u){var f=Q.defer(),e=t.resourceGroupUrlTemplate.format(MsPortalFx.getEnvironmentValue("csmManagementServiceUri"),i,r,MsPortalFx.getEnvironmentValue("csmApiVersion"));return n.Net.get(e).then((function(n){f.resolve(n)})).catch((function(){n.Net.put(e,{location:u}).then((function(n){f.resolve(n)})).catch((function(n){f.reject(n)}))})),f.promise}function f(n){var t={};return Object.keys(n).forEach((function(i){var r=n[i];t[i]=r.hasOwnProperty("value")?r:{value:r}})),t}t.registerUrlTemplate="{0}/subscriptions/{1}/providers/{2}/register?api-version={3}";t.resourceGroupUrlTemplate="{0}/subscriptions/{1}/resourcegroups/{2}?api-version={3}";t.deployUrlTemplate="{0}/subscriptions/{1}/resourcegroups/{2}/deployments/{3}?api-version={4}";t.deployTemplate=u;t.registerProviders=i;t.createResourceGroup=r})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(){"use strict"})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";function u(n){var i={},t=Q.defer(),r=[];for(var u in n)r.push(f(n,u,i));return Q.all(r).then((function(){t.resolve(i)}),(function(){t.reject()})),t.promise}function f(t,i,r){return n.Net.ajax(t[i]).then((function(n){var f=n.content||n,t=i.split("."),u=i;t&&t.length>1&&(u=t[0]+"_"+t[1]);r[u]=JSON.stringify(f)}))}var i=(function(){function n(){}return n})(),r;i.replace="replace";i.arrayPush="arraypush";t.FragmentParameterAction=i;r=(function(){function n(){}return n})();r.powershell="powershell";t.FragmentParameterEscape=r;t.getFragmentStrings=u})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(){"use strict"})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function t(n){var t=this,i,r;this.dependsOnIgnore={};this._parametersAdded={};this._computedCalculated={};this._conditionsAdded={};this._fragment=JSON.parse(n);this._fragment.computeds&&this._fragment.computeds.forEach((function(n){t._computedCalculated[n.paths[0]]=undefined}));i=[];for(r in this._fragment.parameters)i.push(r);this.parameters={};i.forEach((function(n){Object.defineProperty(t.parameters,n,{get:function(){return t._getParameterValue(n)},set:function(i){t._addParameter(n,i)}})}))}return t.prototype.getResource=function(){var t=this;for(var n in this._fragment.parameters)if(this._fragment.parameters[n].required&&this._parametersAdded[n]===undefined)throw new Error("Required parameter {0} was missing".format(n));return this._fragment.resource.resources&&this._fragment.resource.resources.length&&this._fragment.resource.resources.forEach((function(n){n.dependsOn||(n.dependsOn=[]);var i=t.getDependsOnId();n.dependsOn.indexOf(i)===-1&&n.dependsOn.push(i)})),this._fragment.computeds&&this._fragment.computeds.forEach((function(n){if(n.required&&t._computedCalculated[n.paths[0]]===undefined)throw new Error("A required computed was not calculated");})),this._fragment.resource},t.prototype._getParameterValue=function(n){return this._parametersAdded[n]},t.prototype._addParameter=function(t,i){var r=this;if(this._parametersAdded[t]=i,!this._fragment.parameters[t])throw new Error("The parameter named {0} does not exist".format(t));if(this._fragment.parameters[t].condition&&this._conditionsAdded[this._fragment.parameters[t].condition.name]!==this._fragment.parameters[t].condition.value)throw new Error("Can't add parameter named {0} until the conditional named {1} is set to {2}".format(t,this._fragment.parameters[t].condition.name,this._fragment.parameters[t].condition.value));this._fragment.parameters[t].paths.forEach((function(u){var f=r._fragment.parameters[t].action?r._fragment.parameters[t].action:n.FragmentParameterAction.replace,e=r._fragment.parameters[t].escape;r._setValueOnPath(u.split("."),r._fragment.resource,i,f,e)}));this._calculateComputeds()},t.prototype.setConditional=function(t,i){if(!this._fragment.conditionals)throw new Error("No conditionals for this fragment");if(!this._fragment.conditionals[t])throw new Error("No conditional named {0} for this fragment".format(t));if(!this._fragment.conditionals[t][i])throw new Error("No conditionals value of {0} for condition {1}".format(i,t));var r=this._fragment.conditionals[t][i];this._setValueOnPath(r.path.split("."),this._fragment.resource,r.resource,n.FragmentParameterAction.replace);this._conditionsAdded[t]=i},t.prototype.getDependsOnId=function(){var n=this._fragment.resource.type.split("/"),r=this._fragment.resource.name.split("/"),i,t;if(n.length!==r.length+1)throw new Error("Fragment type and name are malformed: Type: '{0}', Name: '{1}'".format(this._fragment.resource.type,this._fragment.resource.name));if(n.length<2)throw new Error("Fragment type is malformed. '{0}'".format(this._fragment.resource.type));for(i="{0}/{1}/{2}".format(n[0],n[1],r[0]),t=2;t<n.length;t++)i=i+"/{0}/{1}".format(n[t],r[t-1]);return i},t.prototype.getResourceId=function(n,t){var i=this.getDependsOnId();return n&&t?"/subscriptions/{0}/resourcegroups/{1}/providers/{2}".format(n,t,i):"[concat(resourceGroup().id, '/providers/{0}')]".format(i)},t.prototype.dependsOn=function(n){this.addDependsOn(n.getDependsOnId())},t.prototype.addRelatedTag=function(n){this.addTag("hidden-related:{0}".format(n),"Resource")},t.prototype.addLinkTag=function(n){this.addTag("hidden-link:{0}".format(n),"Resource")},t.prototype.addTag=function(n,t){this._fragment.resource.tags||(this._fragment.resource.tags={});this._fragment.resource.tags[n]=t},t.prototype.getReferenceTag=function(n,t){var r=this.getDependsOnId(),i="reference('{0}')";return t&&(i=i+"."+t),n&&(i="["+i+"]"),i.format(r)},t.prototype._calculateComputeds=function(){var t=this;this._fragment.computeds&&this._fragment.computeds.forEach((function(i){var r;if(i.required&&i.condition&&t._conditionsAdded[i.condition.name]!==i.condition.value)throw new Error("A computed value is required, and requires that condition {0} be set to value {1}".format(i.condition.name,i.condition.value));if(!i.condition||t._conditionsAdded[i.condition.name]===i.condition.value){var e=i.template.match(/{[^{|^}]+}/g).map((function(n){return n.substring(1,n.length-1)})),u=!0,f={};e.forEach((function(n){var i,r;if(t._parametersAdded[n]){if(i=t.parameters[n],typeof i!="string")throw new Error("A computed required parameter {0}, which was not a string".format(n));r=t._fragment.parameters[n].escape;i=t._escapeIfNecessary(i,r);f[n]=i}else u=!1}));u&&(r=i.template.format(f),i.paths.forEach((function(i){t._setValueOnPath(i.split("."),t._fragment.resource,r,n.FragmentParameterAction.replace)})),t._computedCalculated[i.paths[0]]=r)}}))},t.prototype.addDependsOn=function(n,t){this._fragment.resource.dependsOn||(this._fragment.resource.dependsOn=[]);this._fragment.resource.dependsOn.indexOf(n)===-1&&(t&&(this.dependsOnIgnore[n]=!0),this._fragment.resource.dependsOn.push(n))},t.prototype._setValueOnPath=function(t,i,r,u,f){for(var o,h,e,l,s,c=0;c<t.length-1;c++)o=t[c],o.match(/[0-9]+(?=\])/g)?(h=o.match(/[0-9]+(?=\])/g),l=".*(?=",h.forEach((function(){l+="\\[[0-9]\\]"})),l+=")",e=o.match(l)[0],i=i[e],h.forEach((function(n){if(Array.isArray(i)){var t=parseInt(n,10);if(t>=i.length)throw new Error("Out of range. Tried to access index {0} on an array of length {1}".format(t,i.length));i=i[parseInt(n,10)]}else throw new Error("Tried to index an array that is not an array.");}))):(i[o]||(i[o]={}),i=i[o]);if(r=this._escapeIfNecessary(r,f),t[t.length-1].match(/[0-9]+(?=\])/g)){if(h=t[t.length-1].match(/[0-9]+(?=\])/g),e=t[t.length-1].match(/.*(?=\[)/)[0],h.length>1)throw new Error("The final path can only contain 1 array index");if(s=parseInt(h[0],10),!Array.isArray(i[e]))throw new Error("Tried to index an array that is not an array");if(s>=i[e].length)throw new Error("Out of range. Tried to access index {0} on an array of length {1}".format(s,i[e].length));StringEx.equals(u,n.FragmentParameterAction.replace,StringComparison.IgnoreCase)?i[e][s]=r:StringEx.equals(u,n.FragmentParameterAction.arrayPush,StringComparison.IgnoreCase)&&(Array.isArray(i[e][s])||(i[e][s]=[]),i[e][s].push(r))}else StringEx.equals(u,n.FragmentParameterAction.replace,StringComparison.IgnoreCase)?i[t[t.length-1]]=r:StringEx.equals(u,n.FragmentParameterAction.arrayPush,StringComparison.IgnoreCase)&&(Array.isArray(i[t[t.length-1]])||(i[t[t.length-1]]=[]),i[t[t.length-1]].push(r))},t.prototype._escapeIfNecessary=function(t,i){return typeof t=="string"&&StringEx.equals(i,n.FragmentParameterEscape.powershell,StringComparison.IgnoreCase)&&(t=t.replace(/`/g,"``"),t=t.replace(/"/g,'`"'),t=t.replace(/'/g,"`'")),t},t})();n.Fragment=t})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";function i(n,t,i,u){for(var e=[],f=0;f<n.length;f++)e.push(r(n[f],t,i,u));return Q.allSettled(e).then((function(n){for(var i,t=0;t<n.length;t++)if(n[t].state==="fulfilled"){if(n[t].value.isOver)return{isOver:n[t].value.isOver,message:n[t].value.overQuotaMessage}}else i=n[t].reason,MsPortalFx.Base.Diagnostics.Log.writeEntry(2,"ExtensionCore.validateQuotas","failed to check resource quotas: "+i);return{isOver:!1}}))}function r(n,t,i,r){return n(r,i).then((function(i){var u,r,f;if(i&&Object.keys(i).length>0){if(u=Object.keys(i)[0],r=t.first((function(n){return n.name()===u})),r){if(r.maxCount()==="-1")return{isOver:!1};if(+r.currentCount()+ +i[u]>+r.maxCount())return f=+r.maxCount()-+r.currentCount(),f<0&&(f=0),{isOver:!0,overQuotaMessage:i.overQuotaMessage.format(i[u],f,r.maxCount())}}return{isOver:!1}}return MsPortalFx.Base.Diagnostics.Log.writeEntry(2,"ExtensionCore.isOverQuota","unable to get number of required resources: requiredResources:"+i+" - quotas:"+t.join()+" - func:"+n),{isOver:!1}}),(function(){return MsPortalFx.Base.Diagnostics.Log.writeEntry(2,"ExtensionCore.isOverQuota","unable to get number of required resources: quotas:"+t.join()+" - func:"+n),{isOver:!1}}))}var t={name:"quotaMetadata",properties:{name:null,currentCount:null,maxCount:null},entityType:!0,idProperties:["name"]};MsPortalFx.Data.Metadata.setTypeMetadata(t.name,t);n.validateQuotas=i})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";function u(t){return Q(n.Csm.getSubscriptionIdsAsync()).then((function(n){var f=n.map((function(n){return i(n,t)})),u=Q.defer();return Q.all(f).spread((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return u.resolve(r([].concat(t)))})),u.promise}))}function i(t,i){var u="{csmUri}/subscriptions/{subscriptionId}/resources?api-version={apiVersion}",f;return i&&(u+="&$filter=resourceType eq '{resourceType}'"),f=u.format({csmUri:MsPortalFx.getEnvironmentValue("csmManagementServiceUri"),apiVersion:MsPortalFx.getEnvironmentValue("csmApiVersion"),subscriptionId:t,resourceType:i}),n.Net.get(f).then((function(n){var t=n.value?n.value:n;return t=t||[],r(t)}))}function f(n){var t=MsPortalFx.ViewModels.Services.ResourceTypes.parseResourceDescriptor(n),r=t.subscription,u="{0}/{1}".format(t.provider,t.type);return i(r,u).then((function(t){var i=t.first((function(t){return StringEx.equals(n,t.id,StringComparison.IgnoreCase)}));if(!i)throw new Error("Resource '{0}' not found".format(n));return i}))}function r(n){return n.distinct((function(n,t){return StringEx.equals(n.id,t.id,StringComparison.IgnoreCase)}))}t.listResources=u;t.listResourcesInSubscription=i;t.getResource=f})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.isResourceGroup=function(n){if(n){var t=n.split("/");if(t&&t.length===5)return t[0]===""&&t[1].toUpperCase()==="subscriptions".toUpperCase()&&t[2]!==""&&t[3].toUpperCase()==="resourceGroups".toUpperCase()&&t[4]!==""}return!1},n.parseResourceGroupId=function(t){if(t&&n.isResourceGroup(t)){var i=t.split("/");return{subscriptionId:i[2],name:i[4]}}},n.getResourceGroupId=function(n,t){return"/subscriptions/{0}/resourcegroups/{1}".format(n,t)},n})();n.ResourceUri=t})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";function r(){return MsPortalFx.Azure.getSelectedSubscriptions().then((function(n){return n.map((function(n){return n.subscriptionId}))}))}function u(i,r,u,f){return t.getSubscriptionIdsAsync().then((function(t){return n.Data.defaultSupplyData(i,r,u,$.extend({},f,{SubscriptionIds:t}))}))}function f(t,r,u,f){return i(t,r,u,f,(function(t,i){var r=[];return i.forEach((function(t){var i=n.Utilities.parseValueArray(t);Array.prototype.push.apply(r,i||[])})),r}))}function e(t,r,u,f){return i(t,r,u,f,(function(t,i){var r={};return i.forEach((function(i,u){var f=t[u];r[f]=n.Utilities.parseValueArray(i)})),r}))}function i(i,r,u,f,e){return t.getSubscriptionIdsAsync().then((function(t){var o=t.map((function(n){return r.format({subscriptionId:n})})),s=o.map((function(t){return n.Data.defaultSupplyDataNoCaching(i,t,u,f)})),h=Q.allSettled(s).then((function(n){return n.filter((function(n){return n.state==="fulfilled"})).map((function(n){return n.value}))})).then((function(n){return e(t,n)}));return n.Utilities.toJQueryPromise(h)}))}t.getSubscriptionIdsAsync=r;t.supplyDataWithSubscriptionIds=u;t.supplyDataWithSubscriptionIdsParallel=f;t.supplyDataWithSubscriptionIdsParallelMap=e})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";var t=(function(){function n(){this._resources=[];this._template={$schema:"http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json#",contentVersion:"1.0.0.0",parameters:{},resources:[]}}return n.prototype.addFragment=function(n){this._resources.push(n)},n.prototype.addResource=function(n){this._template.resources.push(n)},n.prototype.addParameter=function(n,t){if(this._template.parameters[n])throw new Error("Parameter {0} is already added".format(n));this._template.parameters[n]=t},n.prototype.addOutput=function(n,t,i){this._template.outputs||(this._template.outputs={});this._template.outputs[n]={type:t,value:i}},n.prototype.generateTemplate=function(){var t=this,n={};return this._resources.forEach((function(i){n[i.getDependsOnId()]=!0;t._template.resources.push(i.getResource());for(var r in i.dependsOnIgnore)n[r]=!0})),this._template.resources.forEach((function(t){t.dependsOn&&t.dependsOn.forEach((function(i){if(!n[i])throw new Error("{0}/{1} depends on {2}, but it was not present in the template".format(t.type,t.name,i));}))})),JSON.stringify(this._template)},n})();n.TemplateFactory=t})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";function t(n,t,r){var b=["galleryParameters","parameterList","constructor"],f,s,y,u,c,h,p,k,o,l,d,a,w,e,v;for(f in n.parameterList){s=t.parameterList[f];y={};s.constraints&&s.constraints.custom&&s.constraints.custom.length>0&&s.constraints.custom.forEach((function(n){y[n.key]=n.value}));for(u in n)b.indexOf(u)===-1&&(c=y[u]||f,n[u][c]!==undefined&&ko.isObservable(n[u][c])&&n[u][c](n.parameterList[f]()))}h=[];for(u in n)if(p=!1,b.indexOf(u)===-1){for(f in n[u])if(!n[u][f]()){p=!0;break}p||h.push(u)}if(h.length===1)return h.first();if(r){k=i();o=[];for(f in r){l=r[f];d=n.parameterList[f]();for(a in l)w=k[a],w&&w(d,l[a].condition)&&o.push(l[a].templates)}if(o.length){for(e=o[0],v=1;v<o.length;v++)e=e.intersect(o[v]);if(e=e.intersect(h),e.length===1)return e.first()}}}function i(){return{StringEmpty:function(n){return!n},StringNotEmpty:function(n){return!!n},StringEquals:function(n,t){return StringEx.equals(n,t)},GreaterThan:function(n,t){return n>t},LessThan:function(n,t){return n<t},GreaterThanOrEqual:function(n,t){return n>=t},LessThanOrEqual:function(n,t){return n<=t},Equal:function(n,t){return n===t},Null:function(n){return!n},NotNull:function(n){return!!n},False:function(n){return!n},True:function(n){return n}}}n.populateNestedParameters=t})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(n){"use strict";function t(n,t,i){var r,u,f;if(t.indexOf("/")!==0&&(t="/"+t),r=n+t.replace("//","/"),i){u=[];for(f in i)u.push(encodeURIComponent(f)+"="+encodeURIComponent(i[f]));r+="?"+u.join("&")}return r}function i(n){var r=n.queryStringParameters||{},i;if(n.apiVersion||(n.apiVersion=MsPortalFx.getEnvironmentValue("csmApiVersion")),r["api-version"]=n.apiVersion,i="",n.subscriptionId&&(i+="/subscriptions/{subscriptionId}"),n.resourceGroup){if(!n.subscriptionId)throw new ArgumentError("resourceGroup","A subscription id is required when setting resourceGroup");i+="/resourcegroups/{resourceGroup}"}if(n.provider){if(!n.subscriptionId)throw new ArgumentError("provider","A subscription id is required when setting provider");i+="/providers/{provider}"}if(!n.resourceUriSegment)throw new ArgumentError("resourceUriSegment","A resource uri segment must be defined");return i+="/{resourceUri}",i=i.format({subscriptionId:n.subscriptionId,resourceGroup:n.resourceGroup,provider:n.provider,resourceUri:n.resourceUriSegment}),t(MsPortalFx.getEnvironmentValue("csmManagementServiceUri"),i,r)}n.getCorsUri=t;n.getCsmCorsUri=i})(t=n.Cors||(n.Cors={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";var i=(function(){function i(n){this.options=n}return i.prototype.getResourceUri=function(n,i){var r=$.extend({},this.options.baseQueryParameters||{},i||{});return t.getCorsUri(this.options.baseUri,n,r)},i.prototype.get=function(t,i){return n.Net.get(this.getResourceUri(t,i))},i.prototype.put=function(t,i,r){return n.Net.put(this.getResourceUri(t,r),i)},i.prototype.delete=function(t,i){return n.Net.ajaxDelete(this.getResourceUri(t,i))},i.prototype.patch=function(t,i,r){return n.Net.patch(this.getResourceUri(t,r),i)},i.prototype.post=function(t,i,r){return n.Net.post(this.getResourceUri(t,r),i)},i})();t.RestClient=i})(t=n.Cors||(n.Cors={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";var i=(function(t){function i(n){var r=this,i=n;return typeof i=="string"&&(i={baseUri:MsPortalFx.getEnvironmentValue("csmManagementServiceUri"),provider:arguments[0],type:arguments[1],apiVersion:arguments[2]}),i.baseQueryParameters=$.extend(i.baseQueryParameters||{},{"api-version":i.apiVersion}),t.call(this,i)||this}return __extends(i,t),i.prototype.getListUri=function(n,t){return this.getResourceUri("{0}/{1}".format(n,this.options.type),t)},i.prototype.getListInSubscriptionUri=function(n,t){return this.getListUri("/subscriptions/{0}/providers/{1}".format(n,this.options.provider),t)},i.prototype.getListInResourceGroupUri=function(n,t,i){return this.getListUri("/subscriptions/{0}/resourceGroups/{1}/providers/{2}".format(n,t,this.options.provider),i)},i.prototype.getTemplatedListInSubscriptionUri=function(){return this.getListInSubscriptionUri("{subscriptionId}")},i.prototype.getTemplatedListInResourceGroupUri=function(){return this.getListInResourceGroupUri("{subscriptionId}","{resourceGroup}")},i.prototype.list=function(t,i){return n.Net.get(this.getListUri(t,i)).then((function(t){return n.Utilities.parseValueArray(t)}))},i.prototype.listInSubscription=function(t,i){return n.Net.get(this.getListInSubscriptionUri(t,i)).then((function(t){return n.Utilities.parseValueArray(t)}))},i.prototype.listInResourceGroup=function(t,i,r){return n.Net.get(this.getListInResourceGroupUri(t,i,r)).then((function(t){return n.Utilities.parseValueArray(t)}))},i.prototype.action=function(t,i,r,u){return t[t.length-1]!=="/"&&(t+="/"),t+=i,n.Net.post(this.getResourceUri(t,u),r)},i})(t.RestClient);t.CsmResourceClient=i})(t=n.Cors||(n.Cors={}))})(ExtensionCore||(ExtensionCore={})),
(function(n){var t;(function(t){"use strict";var i="2014-09-01",r=(function(t){function r(){return t.call(this,{baseUri:MsPortalFx.getEnvironmentValue("galleryServiceUri")+"/Microsoft.Gallery/galleryitems/",baseQueryParameters:{"api-version":i,includePreview:"true"}})||this}return __extends(r,t),r.prototype.listAllGalleryItems=function(){return n.Net.get(this.getResourceUri(""))},r})(t.RestClient);t.GalleryClient=r})(t=n.Cors||(n.Cors={}))})(ExtensionCore||(ExtensionCore={}))