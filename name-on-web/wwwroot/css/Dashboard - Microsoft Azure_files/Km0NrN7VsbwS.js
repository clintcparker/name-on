define("Core/TypeScript/Models/TFS.Project.Models",["require","exports","o"],(function(n,t,i){"use strict";i.defineProperty(t,"__esModule",{value:!0});var r=(function(){function n(){this.accountId="";this.name="";this.id="";this.status="";this.sourceControlType="";this.gitEnabled=!1;this.tfvcEnabled=!1}return n})();t.Project=r}));var __extends=this&&this.__extends||
(function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}})();
define("Core/TypeScript/TFS.Project.Data",["require","exports","f","o","ko","$","Core/TypeScript/Models/TFS.Project.Models","Core/TypeScript/TFS.Azure","Core/TypeScript/TFS.Data.Cache","Core/TypeScript/TFS.Data","Core/TypeScript/TFS.ObjectModel","Core/TypeScript/TFS.Project.WebApi","Core/TypeScript/TFS.Diag","Core/TypeScript/TFS.Message"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){"use strict";function w(n){return{accountId:n}}function g(){return y||(y=s.createQueryCache(new b)),y}function p(n,t,i){var r=f.Deferred(),u=g().createView(n),o=u.fetch(w(t)),e=o;return i===h.LoadBehavior.ForceRefresh&&(e=u.refresh()),e.then((function(){r.resolve(u.items)}),(function(){r.reject()})),r.promise()}function tt(n,t,i,r){var e=function(n){return n.id()===i},u=f.Deferred();return p(n,t,r).then((function(n){var t=n().first(e);t?u.resolve(t):u.reject()}),(function(){u.reject()})),u.promise()}function it(n,t,i,r){var e=function(n){return n.name()===i},u=f.Deferred();return p(n,t,r?r.loadBehavior||h.LoadBehavior.AcceptCached:h.LoadBehavior.AcceptCached).then((function(n){var t=n().first(e);t?u.resolve(t):u.reject()}),(function(){u.reject()})),u.promise()}function rt(n,t){var i=f.Deferred();return o.awaitTfsContext({accountId:n}).then((function(n){var i=c.TfsTeamProjectCollection.getConnection(n).getHttpClient(l.ProjectHttpClient);return i.beginGetProject(t,!0)})).then((function(t){var r=t.capabilities?t.capabilities.versioncontrol:null,f=null,e;r&&(f=r.sourceControlType);e={accountId:u.observable(n),id:u.observable(t.id),name:u.observable(t.name),sourceControlType:u.observable(f),status:u.observable(t.state)};i.resolve(e)}),i.reject),i.promise()}function ut(n){return JSON.stringify({accountId:n.accountId(),name:n.name(),id:n.id(),status:n.status()})}var nt,b,k,d,y;r.defineProperty(t,"__esModule",{value:!0});nt=[];t.createProjectSetDescriptor=w;b=(function(n){function t(){return n.call(this,"project",36e5)||this}return __extends(t,n),t.prototype.getDataSetName=function(n){return this.getTypeName()+n.accountId},t.prototype.getMergeInfo=function(){return{typeName:this.getTypeName(),id:"id"}},t.prototype.getData=function(n){var t=f.Deferred();return o.awaitTfsContext(n).done((function(i){var r=c.TfsTeamProjectCollection.getConnection(i).getHttpClient(l.ProjectHttpClient);r.beginGetProjects(!0).done((function(i){var r=i.map((function(t){var i=new e.Project,r;return i.id=t.id,i.name=t.name,i.status=t.state||"WellFormed",i.accountId=n.accountId,r=t.capabilities?t.capabilities.versioncontrol:null,r&&(i.sourceControlType=r.sourceControlType,i.gitEnabled=r.gitEnabled.toLowerCase()=="true",i.tfvcEnabled=r.tfvcEnabled.toLowerCase()=="true"),i}));t.resolve(r)})).fail((function(){a.logError("ProjectLoader: XHR failed");t.reject()}))})).fail(t.reject),t.promise()},t.prototype.getMessagesToSubscribeTo=function(){return[v.MessageTypes.ProjectCreated,v.MessageTypes.ProjectRenamed]},t.prototype.shouldRefreshForMessage=function(n,t,i){return t.accountId===i.accountId},t})(s.ContextAwareLoadable);k=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(i.Data.QueryCache);t.ProjectQueryCache=k;d=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(i.Data.QueryView);t.ProjectQueryView=d;y=null;t.getProjectQueryCache=g;t.getProjects=p;t.getProjectById=tt;t.getProjectByName=it;t.getProjectByNameDirect=rt;t.dispatchAsAssetId=ut}))